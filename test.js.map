{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/noflo/lib/NoFlo.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/debug/src/browser.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/noflo/lib/IP.js","webpack:///./node_modules/noflo/lib/Platform.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/util/util.js","webpack:///./node_modules/fbp-graph/index.js","webpack:///./node_modules/noflo/lib/InternalSocket.js","webpack:///./node_modules/noflo/lib/ComponentLoader.js","webpack:///./node_modules/get-function-params/src/delim.js","webpack:///./node_modules/noflo-runtime-postmessage/runtime/postmessage.js","webpack:///./node_modules/noflo-runtime-base/src/utils.js","webpack:///./node_modules/assert/assert.js","webpack:///./node_modules/minimatch/minimatch.js","webpack:///./node_modules/path-is-absolute/index.js","webpack:///./node_modules/clone/clone.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/noflo/lib/Network.js","webpack:///./node_modules/noflo/lib/BaseNetwork.js","webpack:///./node_modules/noflo/lib/Component.js","webpack:///./node_modules/noflo/lib/Ports.js","webpack:///./node_modules/noflo/lib/InPort.js","webpack:///./node_modules/noflo/lib/BasePort.js","webpack:///./node_modules/noflo/lib/OutPort.js","webpack:///./node_modules/get-function-params/src/patterns.js","webpack:///./node_modules/noflo-runtime-base/src/Base.js","webpack:///./node_modules/glob/glob.js","webpack:///./node_modules/fs.realpath/index.js","webpack:///./node_modules/glob/common.js","webpack:///./node_modules/wrappy/wrappy.js","webpack:///./node_modules/once/once.js","webpack:///./node_modules/noflo-runtime-postmessage/runtime/utils.js","webpack:///./node_modules/fbp-graph/lib/Graph.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/fbp-graph/lib/Platform.js","webpack:///./node_modules/fbp/lib/fbp.js","webpack:///./node_modules/tv4/tv4.js","webpack:///./node_modules/fbp-graph/lib/Journal.js","webpack:///./node_modules/noflo/lib/loader/register.js","webpack:///./node_modules/noflo-component-loader/lib/loader.js","webpack:///./components/DoSomething.js","webpack:///./node_modules/noflo/components/Graph.js","webpack:///./node_modules/noflo-core/components/Callback.js","webpack:///./node_modules/noflo-core/components/Copy.js","webpack:///./node_modules/owl-deepcopy/deep_copy.js","webpack:///./node_modules/noflo-core/components/DisconnectAfterPacket.js","webpack:///./node_modules/noflo-core/components/Drop.js","webpack:///./node_modules/noflo-core/components/Kick.js","webpack:///./node_modules/noflo-core/components/MakeFunction.js","webpack:///./node_modules/noflo-core/components/Merge.js","webpack:///./node_modules/noflo-core/components/Output.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///./node_modules/noflo-core/components/ReadGlobal.js","webpack:///./node_modules/noflo-core/components/Repeat.js","webpack:///./node_modules/noflo-core/components/RepeatAsync.js","webpack:///./node_modules/noflo-core/components/RepeatDelayed.js","webpack:///./node_modules/noflo-core/components/RunInterval.js","webpack:///./node_modules/noflo-core/components/RunTimeout.js","webpack:///./node_modules/noflo-core/components/SendNext.js","webpack:///./node_modules/noflo-core/components/Split.js","webpack:///./node_modules/noflo-dom/components/AddClass.coffee","webpack:///./node_modules/noflo-dom/components/AppendChild.coffee","webpack:///./node_modules/noflo-dom/components/CreateElement.coffee","webpack:///./node_modules/noflo-dom/components/CreateFragment.coffee","webpack:///./node_modules/noflo-dom/components/GetAttribute.coffee","webpack:///./node_modules/noflo-dom/components/GetElement.coffee","webpack:///./node_modules/noflo-dom/components/HasClass.coffee","webpack:///./node_modules/noflo-dom/components/Listen.coffee","webpack:///./node_modules/noflo-dom/components/ReadHtml.coffee","webpack:///./node_modules/noflo-dom/components/RemoveClass.coffee","webpack:///./node_modules/noflo-dom/components/RemoveElement.coffee","webpack:///./node_modules/noflo-dom/components/RequestAnimationFrame.coffee","webpack:///./node_modules/noflo-dom/components/SetAttribute.coffee","webpack:///./node_modules/noflo-dom/components/WriteHtml.coffee","webpack:///./node_modules/noflo-interaction/components/Focus.coffee","webpack:///./node_modules/noflo-interaction/components/ListenChange.coffee","webpack:///./node_modules/noflo-interaction/components/ListenDrag.coffee","webpack:///./node_modules/noflo-interaction/components/ListenEvent.coffee","webpack:///./node_modules/noflo-interaction/components/ListenHash.coffee","webpack:///./node_modules/noflo-interaction/components/ListenKeyboard.coffee","webpack:///./node_modules/noflo-interaction/components/ListenKeyboardShortcuts.coffee","webpack:///./node_modules/noflo-interaction/components/ListenMouse.coffee","webpack:///./node_modules/noflo-interaction/components/ListenPointer.coffee","webpack:///./node_modules/noflo-interaction/components/ListenResize.coffee","webpack:///./node_modules/noflo-interaction/components/ListenScroll.coffee","webpack:///./node_modules/noflo-interaction/components/ListenSpeech.coffee","webpack:///./node_modules/noflo-interaction/components/ListenTouch.coffee","webpack:///./node_modules/noflo-interaction/components/ReadCoordinates.coffee","webpack:///./node_modules/noflo-interaction/components/ReadGamepad.coffee","webpack:///./node_modules/noflo-interaction/components/SetHash.coffee","webpack:///./node_modules/noflo/lib/Utils.js","webpack:///./node_modules/noflo/lib/LegacyNetwork.js","webpack:///./node_modules/debug/src/common.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/noflo/lib/ProcessContext.js","webpack:///./node_modules/noflo/lib/ProcessInput.js","webpack:///./node_modules/noflo/lib/ProcessOutput.js","webpack:///./node_modules/noflo/lib/AsCallback.js","webpack:///./node_modules/noflo/lib/AsComponent.js","webpack:///./node_modules/get-function-params/index.js","webpack:///./node_modules/get-function-params/src/encodeStrings.js","webpack:///./node_modules/get-function-params/src/encode.js","webpack:///./node_modules/get-function-params/src/decode.js","webpack:///./node_modules/noflo-runtime-postmessage/index.js","webpack:///./node_modules/noflo-runtime-base/src/protocol/Runtime.js","webpack:///./node_modules/noflo-runtime-base/src/protocol/Graph.js","webpack:///./node_modules/noflo-runtime-base/src/protocol/Network.js","webpack:///./node_modules/noflo-runtime-base/src/protocol/Component.js","webpack:///./node_modules/debounce/index.js","webpack:///./node_modules/noflo-runtime-base/src/trace.js","webpack:///./node_modules/noflo-runtime-base/src/TraceBuffer.js","webpack:///./node_modules/json-stringify-safe/stringify.js","webpack:///./node_modules/temp/lib/temp.js","webpack:///./node_modules/rimraf/rimraf.js","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/fs.realpath/old.js","webpack:///./node_modules/brace-expansion/index.js","webpack:///./node_modules/concat-map/index.js","webpack:///./node_modules/balanced-match/index.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./node_modules/glob/sync.js","webpack:///./node_modules/inflight/inflight.js","webpack:///./node_modules/os-browserify/browser.js","webpack:///./node_modules/noflo-runtime-base/src/direct.js","webpack:///./node_modules/noflo-runtime-base/src/DirectClient.js","webpack:///./node_modules/noflo-runtime-base/src/DirectRuntime.js","webpack:///./node_modules/noflo-runtime-postmessage/runtime/iframe.js","webpack:///./node_modules/noflo-runtime-postmessage/runtime/opener.js","webpack:///./node_modules/noflo-runtime-headless/spec/build/webpack.entry.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_typeof","obj","iterator","constructor","fbpGraph","graph","Graph","journal","Journal","Network","deprecated","isBrowser","ComponentLoader","Component","ports","InPorts","OutPorts","InPort","OutPort","internalSocket","IP","createNetwork","options","callback","opts","delay","subscribeGraph","err","network","networkReady","net","start","loader","listComponents","nodes","length","connect","err2","loadFile","file","baseDir","saveFile","save","asCallback","asComponent","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","isNaN","EventEmitter","init","emitter","Promise","resolve","reject","eventListener","undefined","errorListener","slice","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","events","existing","warning","newListener","unshift","warned","w","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","handler","list","position","originalListener","shift","index","pop","spliceOne","keys","rawListeners","eventNames","formatArgs","useColors","namespace","humanize","diff","color","splice","lastC","replace","match","namespaces","storage","setItem","removeItem","load","getItem","DEBUG","window","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","colors","log","debug","formatters","j","v","JSON","stringify","normalizeArray","parts","allowAboveRoot","up","last","filter","xs","f","res","resolvedPath","resolvedAbsolute","path","charAt","split","join","normalize","isAbsolute","trailingSlash","substr","paths","relative","from","to","trim","end","fromParts","toParts","Math","min","samePartsLength","outputParts","sep","delimiter","dirname","code","charCodeAt","hasRoot","matchedSlash","basename","ext","extname","startDot","startPart","preDotState","str","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_this","data","isIP","scope","owner","clonable","schema","datatype","forEach","_this2","ip","val","parse","_this3","execPath","NOFLO_FATAL_DEPRECATED","g","getOwnPropertyDescriptors","descriptors","getOwnPropertyDescriptor","formatRegExp","format","isString","objects","inspect","x","_","isNull","isObject","deprecate","fn","msg","noDeprecation","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","ctx","seen","stylize","stylizeNoColor","depth","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","styles","recurseTimes","isFunction","primitive","simple","isNumber","formatPrimitive","visibleKeys","hash","idx","arrayToHash","isError","indexOf","formatError","isRegExp","toString","isDate","Date","output","base","braces","isArray","toUTCString","formatProperty","formatArray","map","reduce","prev","cur","numLinesEst","reduceToSingleString","desc","line","ar","re","objectToString","pad","debuglog","NODE_DEBUG","toUpperCase","test","pid","isNullOrUndefined","isSymbol","isPrimitive","isBuffer","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","inherits","origin","add","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","promiseResolve","promiseReject","promise","setPrototypeOf","defineProperties","custom","callbackify","callbackified","maybeCb","self","then","rej","_setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","construct","sham","Proxy","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","legacyToIp","event","payload","ipToLegacy","InternalSocket","_EventEmitter","subClass","superClass","_inherits","_super","metadata","brackets","connected","dataDelegate","emitEvent","regularEmitEvent","id","handleSocketEvent","packet","autoDisconnect","isConnected","disconnect","group","delegate","active","debugEmitEvent","fromStr","port","toStr","autoConnect","legacy","createSocket","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","next","done","_iterableToArrayLimit","minLen","_arrayLikeToArray","_unsupportedIterableToArray","_nonIterableRest","arr2","registerLoader","platform","components","libraryIcons","processing","ready","register","component","componentName","isGraph","loadGraph","createComponent","inst","isLegacy","setIcon","implementation","dynamicLoad","getComponent","error1","cPath","edges","initializers","processes","connections","_this4","inPorts","remove","setGraph","getIcon","_name$split2","library","getLibraryIcon","isSubgraph","prefix","icon","packageId","getModulePrefix","fullName","normalizeName","gPath","registerComponent","source","language","_this5","setSource","_this6","getSource","getLanguages","Base","normalizedOptions","super","catchExceptions","onerror","client","send","href","location","defaultPermissions","protocol","topic","normalizedPayload","stack","postMessage","command","parseName","nameParts","withNamespace","withoutNamespace","objectAssign","compare","a","b","y","global","Buffer","_isBuffer","util","hasOwn","pSlice","functionsHaveNames","pToString","isView","arrbuf","ArrayBuffer","DataView","buffer","assert","ok","regex","getName","func","truncate","something","rawname","fail","actual","expected","operator","stackStartFunction","AssertionError","_deepEqual","strict","memos","getTime","multiline","lastIndex","ignoreCase","Float32Array","Float64Array","Uint8Array","actualIndex","actualVisitedObjects","aIsArgs","isArguments","bIsArgs","ka","objectKeys","kb","sort","objEquiv","expectedException","isPrototypeOf","_throws","shouldThrow","block","_tryBlock","userProvidedMessage","isUnexpectedException","generatedMessage","captureStackTrace","out","fn_name","next_line","substring","equal","notEqual","deepEqual","deepStrictEqual","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","throws","doesNotThrow","ifError","minimatch","Minimatch","GLOBSTAR","expand","plTypes","open","close","reSpecials","slashSplit","k","pattern","nocomment","regexp","negate","comment","empty","make","braceExpand","nobrace","defaults","def","orig","_made","parseNegate","globSet","globParts","si","negateOffset","nonegate","isSub","noglobstar","stateChar","hasMagic","nocase","escaping","patternListStack","negativeLists","inClass","reClassStart","classStart","patternStart","dot","clearStateChar","qmark","noext","reStart","pl","reEnd","cs","sp","SUBPARSE","tail","$2","addPatternStart","nl","nlBefore","nlFirst","nlLast","nlAfter","openParensBefore","cleanAfter","dollar","globUnescape","flags","regExp","_glob","_src","makeRe","twoStar","regExpEscape","ex","mm","nonull","partial","filename","matchBase","matchOne","flipNegate","fi","pi","fl","hit","fr","pr","swallowee","posix","win32","exec","device","isUnc","Boolean","_instanceof","nativeMap","nativeSet","nativePromise","Map","Set","clone","parent","circular","includeNonEnumerable","allParents","allChildren","useBuffer","Infinity","_clone","child","proto","__isArray","__isRegExp","__getRegExpFlags","__isDate","allocUnsafe","keyChild","valueChild","entryChild","attrs","symbols","symbol","allPropertyNames","propertyName","__objToStr","clonePrototype","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","encodingOrOffset","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","write","fromString","checked","fromObject","assertSize","size","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","buf","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","fill","allocUnsafeSlow","pos","swap16","swap32","swap64","equals","max","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","toByteArray","stringtrim","base64clean","src","dst","_get","_superPropBase","_BaseNetwork","node","initial","addNode","removeNode","oldId","newId","renameNode","edge","addEdgeIndex","removeEdge","iip","addInitialIndex","_this7","removeInitial","componentLoader","utils","connectPort","socket","inbound","isAddressable","attach","getId","outPorts","sendInitial","post","BaseNetwork","initials","nextInitials","started","stopped","eventBuffer","startupDate","__openConnections","isStarted","ev","bufferedEmit","nodeId","nodeInstance","subscribeSubgraph","subscribeNode","getNode","shutdown","callStack","serialize","setDefaults","reduceRight","isReady","setDebug","emitSub","subgraph","_this8","checkIfFinished","_this9","debouncedEnd","abortDebounce","_this10","subscribeSocket","addEdge","_this11","connection","detach","_this12","addDefaults","hasDefault","isAttached","initializer","_this13","isRunning","sendInitials","isStopped","setStarted","addInitial","_this14","_init","_this15","getActiveProcesses","_this16","onProcessStart","sockets","_this17","stop","startComponents","sendDefaults","err3","_this18","onProcessEnd","uptime","_this19","debounce","_this20","processId","debugBrackets","debugSend","ProcessContext","ProcessInput","ProcessOutput","description","ordered","autoOrdering","outputQ","bracketContext","activateOnInput","forwardBrackets","groups","errorPort","isRequired","openBracket","closeBracket","setUp","finalize","portName","inPort","clear","tearDown","checkLoad","tmp","outPort","handle","prepareForwarding","handleIP","inport","outport","inportName","outportName","triggering","isForwardingInport","getBuffer","dataPackets","getBracketContext","closeIp","__resolved","__bracketClosingAfter","processOutputQueue","input","deactivate","sendDone","activated","_ports$normalizePortN","normalizePortName","before","_ports$normalizePortN2","method","contexts","_ports$normalizePortN3","forwardable","isForwardingOutport","outContext","__bracketClosingBefore","ipClone","addToResult","__bracketContext","reverse","forwardedOpens","unforwarded","ips","idxIps","portIdentifier","getForwardableContexts","_loop","addBracketForwards","scoped","sendIP","deactivated","isOrdered","Ports","model","canAttach","Model","_Ports","_super2","_Ports2","_super3","socketId","beginGroup","endGroup","matched","BasePort","_BasePort","control","prepareBuffer","localId","setDataDelegate","validateData","getDataType","getSchema","prepareBufferForIP","scopedBuffer","indexedBuffer","iipBuffer","values","getFromBuffer","validate","hasIPinBuffer","valid","hasIIP","validTypes","required","assign","handleOptions","attachSocket","addressable","buffered","attached","cache","isCaching","getSockets","checkRequired","cachedData","pristine","_data","caching","stringPatterns","prePatterns","postPatterns","protocols","Runtime","debugMessagingReceive","debugMessagingReceivePayload","debugMessagingSend","debugMessagingSendPayload","runtime","captureOutput","startCapture","capabilities","permissions","_startDefaultGraph","graphName","defaultGraph","getGraphName","_startNetwork","registerGraph","setMainGraph","capability","secret","checkCapabilities","userCapabilities","getPermitted","perm","canDo","canInput","receive","direct","glob","fs","rp","EE","globSync","common","setopts","alphasort","alphasorti","ownProp","inflight","childrenIgnored","isIgnored","sync","Glob","GlobSync","_didRealPath","matches","_processing","_emitQueue","_processQueue","paused","noprocess","_process","_finish","options_","extend","aborted","realpath","_didRealpath","_realpath","finish","_realpathSet","matchset","_makeAbs","realpathCache","real","syscall","_mark","mark","makeAbs","abort","pause","resume","eq","_emitMatch","pq","inGlobStar","_processSimple","remain","abs","_processGlobStar","_processReaddir","_readdir","entries","_processReaddir2","pn","rawGlob","dotOk","matchedEntries","stat","nomount","root","absolute","nodir","st","statCache","_readdirInGlobStar","follow","lstatcb","lstat","isSym","isSymbolicLink","symlinks","isDirectory","readdir","_readdirError","_readdirEntries","readdirCb","cwdAbs","silent","_processGlobStar2","remainWithoutGlobStar","gspref","noGlobStar","instead","below","_stat","exists","_processSimple2","trail","needDir","maxLength","statcb","_stat2","realpathSync","monkeypatch","unmonkeypatch","origRealpath","origRealpathSync","old","newError","field","nounique","nosort","ignore","ignoreMap","setupIgnores","changedCwd","nou","all","literal","notDir","isDir","slash","mabs","some","item","gmatcher","localeCompare","gpattern","matcher","wrappy","wrapper","called","onceStrict","onceError","normalizeOptions","search","subscribe","addEventListener","mergeResolveTheirsNaive","resetGraph","properties","inports","outports","transaction","caseSensitive","startTransaction","endTransaction","checkTransactionStart","checkTransactionEnd","publicPort","nodeKey","portKey","getPortName","setInportMetadata","oldPort","newPort","setOutportMetadata","oldName","newName","ref","groupName","setGroupMetadata","len1","len2","len3","len4","len5","len6","pub","ref1","ref2","ref3","ref4","toRemove","removeInport","removeOutport","setNodeMetadata","priv","outNode","inNode","outIndex","inIndex","node2","port2","toKeep","setEdgeMetadata","getEdge","cleanID","cleanPort","yuml","groupData","json","ref5","ref6","tgt","writeFile","createGraph","loadJSON","passedDefinition","conn","definition","setProperties","addInport","addOutport","addGroup","loadFBP","fbpData","loadHTTP","url","req","XMLHttpRequest","onreadystatechange","readyState","status","responseText","readFile","results","removeGroup","equivalent","mergeResolveTheirs","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","peg$SyntaxError","ctor","peg$subclass","SyntaxError","peg$result","parser","peg$FAILED","peg$startRuleFunctions","peg$parsestart","peg$startRuleFunction","peg$c0","getResult","peg$c1","peg$c2","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","registerInports","peg$c8","peg$c9","peg$c10","registerOutports","peg$c11","peg$c12","peg$c13","defaultInPort","peg$c14","peg$c15","peg$c16","defaultOutPort","peg$c17","annotation","registerAnnotation","peg$c18","registerEdges","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","peg$c27","peg$c28","proc","makeInPort","makeOutPort","peg$c29","peg$c30","peg$c31","peg$c32","peg$c33","peg$c34","peg$c35","peg$c36","peg$c37","peg$c38","peg$c39","peg$c40","makeName","peg$c41","comp","peg$c42","addAnonymousNode","peg$c43","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c49","meta","peg$c50","peg$c51","peg$c52","peg$c53","peg$c54","peg$c55","peg$c56","peg$c57","peg$c58","peg$c59","peg$c60","portname","portindex","peg$c61","peg$c62","peg$c63","peg$c64","peg$c65","peg$c66","peg$c67","peg$c68","peg$c69","peg$c70","peg$c71","peg$c72","peg$c73","peg$c74","peg$c75","peg$c76","peg$c77","peg$c78","peg$c79","peg$c80","peg$c81","peg$c82","peg$c83","peg$c84","peg$c85","peg$c86","peg$c87","peg$c88","peg$c89","peg$c90","peg$c91","peg$c92","peg$c93","peg$c94","peg$c95","peg$c96","peg$c97","peg$c98","peg$c99","peg$c100","head","peg$c101","peg$c102","members","peg$c103","peg$c104","peg$c105","peg$c106","peg$c107","peg$c108","parseFloat","text","peg$c109","peg$c110","peg$c111","peg$c112","peg$c113","peg$c114","peg$c115","peg$c116","peg$c117","peg$c118","peg$c119","peg$c120","chars","peg$c121","peg$c122","peg$c123","peg$c124","peg$c125","peg$c126","peg$c127","peg$c128","peg$c129","peg$c130","peg$c131","peg$c132","peg$c133","peg$c134","peg$c135","peg$c136","peg$c137","peg$c138","peg$c139","peg$c140","peg$c141","peg$c142","peg$c143","peg$c144","digits","peg$c145","sequence","peg$c146","peg$c147","peg$c148","peg$c149","peg$currPos","peg$savedPos","peg$posDetailsCache","column","seenCR","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","peg$computeLocation","peg$computePosDetails","ch","details","startPos","endPos","startPosDetails","endPosDetails","peg$fail","peg$buildException","cleanupExpected","expectedDescs","hex","stringEscape","buildMessage","s0","s1","s2","peg$parseline","s3","s4","s5","s6","s7","s9","peg$parse_","peg$parsenode","peg$parseportName","peg$parseLineTerminator","peg$parseannotation","peg$parsenewline","peg$parsecomment","peg$parseconnection","peg$parseanychar","peg$parsesource","peg$parsedestination","peg$parsebridge","peg$parseoutport","peg$parseiip","peg$parseinport","peg$parseport__","peg$parse__port","peg$parsenodeWithComponent","peg$parseiipchar","peg$parseJSON_text","peg$parsenodeNameAndComponent","peg$parsenodeName","peg$parsenodeComponent","peg$parsecomponent","peg$parsecompMeta","peg$parse__","peg$parseport","peg$parseportIndex","peg$parsews","peg$parsevalue","peg$parsebegin_array","peg$parsebegin_object","peg$parseend_array","peg$parseend_object","peg$parsename_separator","peg$parsevalue_separator","peg$parsefalse","peg$parsenull","peg$parsetrue","peg$parseobject","peg$parsearray","peg$parsenumber","peg$parsestring","peg$parsemember","peg$parseminus","peg$parseint","peg$parsefrac","peg$parseexp","peg$parsedecimal_point","peg$parsedigit1_9","peg$parsee","peg$parseplus","peg$parseDIGIT","peg$parsezero","peg$parsequotation_mark","peg$parsechar","s8","peg$parseunescaped","peg$parseescape","peg$parseHEXDIG","validateContents","portDef","getInOutName","namedComponents","srcName","srcPort","srcProcess","tgtName","tgtPort","tgtProcess","label","environment","propval","nodeName","anonymousIndexes","anonymousNodeNames","processEdges","validateSchema","tv4","validation","validateMultiple","errors","flatten","isShallow","makePort","defaultPort","flats","grouped","hasDontEnumBug","dontEnums","dontEnumsLength","propertyIsEnumerable","F","vArg","searchElement","isFrozen","random","uriTemplateGlobalModifiers","uriTemplateSuffices","notReallyPercentEncode","encodeURI","doubleEncoded","uriTemplateSubstitution","spec","modifier","separator","shouldEscape","showVariables","trimEmptyString","varNames","varList","varSpecs","varSpecMap","varName","suffices","varSpec","subFunction","valueFunction","startIndex","encodeURIComponent","first","substitution","UriTemplate","template","textParts","prefixes","substitutions","part","remainder","funcs","fillFromObject","ValidatorContext","collectMultiple","errorReporter","checkRecursive","trackUnknownProperties","missing","missingMap","formatValidators","schemas","handleError","collectError","returnError","scanned","scannedFrozen","scannedFrozenSchemas","scannedFrozenValidationErrors","validatedSchemasKey","validationErrorsKey","knownPropertyPaths","unknownPropertyPaths","defaultErrorReporter","definedKeywords","recursiveCompare","A","B","defineKeyword","keyword","keywordFunction","createError","messageParams","dataPath","schemaPath","subErrors","ValidationError","prefixErrors","prefixWith","banUnknownProperties","unknownPath","ErrorCodes","UNKNOWN_PROPERTY","addFormat","validator","resolveRefs","urlHistory","CIRCULAR_REFERENCE","urls","baseUrl","fragment","pointerPath","decodeURIComponent","searchSchemas","testUrl","isTrustedUrl","uri","getDocumentUri","addSchema","normSchema","getSchemaMap","getSchemaUris","filterRegExp","getMissingUris","dropSchemas","reset","validateAll","dataPathParts","schemaPathParts","dataPointerPath","topLevel","frozenIndex","startErrorCount","scannedFrozenSchemaIndex","scannedSchemasIndex","schemaIndex","frozenSchemaIndex","errorCount","validateBasic","validateNumeric","validateString","validateArray","validateObject","validateCombinations","validateHypermedia","validateFormat","validateDefinedKeywords","dataPart","schemaPart","errorMessage","FORMAT_CUSTOM","validationFunctions","KEYWORD_CUSTOM","validateType","validateEnum","dataType","allowedTypes","INVALID_TYPE","ENUM_MISMATCH","validateMultipleOf","validateMinMax","validateNaN","CLOSE_ENOUGH_LOW","CLOSE_ENOUGH_HIGH","parseURI","authority","host","hostname","pathname","resolveUrl","baseUri","errorMessages","languages","messageTemplate","ErrorMessagesDefault","params","whole","subValue","multipleOf","divisibleBy","NUMBER_MULTIPLE_OF","minimum","NUMBER_MINIMUM","exclusiveMinimum","NUMBER_MINIMUM_EXCLUSIVE","maximum","NUMBER_MAXIMUM","exclusiveMaximum","NUMBER_MAXIMUM_EXCLUSIVE","NUMBER_NOT_A_NUMBER","validateStringLength","validateStringPattern","minLength","STRING_LENGTH_SHORT","STRING_LENGTH_LONG","body","STRING_PATTERN","validateArrayLength","validateArrayUniqueItems","validateArrayItems","minItems","ARRAY_LENGTH_SHORT","maxItems","ARRAY_LENGTH_LONG","uniqueItems","ARRAY_UNIQUE","match1","match2","items","additionalItems","ARRAY_ADDITIONAL_ITEMS","validateObjectMinMaxProperties","validateObjectRequiredProperties","validateObjectProperties","validateObjectDependencies","minProperties","OBJECT_PROPERTIES_MINIMUM","propertyCount","maxProperties","OBJECT_PROPERTIES_MAXIMUM","OBJECT_REQUIRED","keyPointerPath","foundMatch","patternProperties","patternKey","additionalProperties","OBJECT_ADDITIONAL_PROPERTIES","dependencies","depKey","dep","OBJECT_DEPENDENCY_KEY","requiredKey","validateAllOf","validateAnyOf","validateOneOf","validateNot","allOf","subSchema","anyOf","oldUnknownPropertyPaths","oldKnownPropertyPaths","errorAtEnd","knownKey","unknownKey","ANY_OF_MISSING","oneOf","validIndex","ONE_OF_MULTIPLE","index1","index2","ONE_OF_MISSING","not","oldErrorCount","notErrors","NOT_PASSED","links","ldo","rel","allPresent","ErrorCodeLookup","stacktrace","dataPrefix","schemaPrefix","createApi","currentLanguage","customErrorReporter","globalContext","api","setErrorReporter","reporter","addLanguage","messageMap","rootCode","freshApi","validateResult","defineError","codeName","codeNumber","defaultMessage","langCode","errorCodes","JournalStore","MemoryJournalStore","calculateMeta","entryToPrettyString","boundMethodCheck","entry","cmd","rev","oldMeta","newMeta","setMeta","lastRevision","revId","transactions","putTransaction","store","subscribed","currentRevision","appendCommand","new","newProps","oldProps","exported","renameGroup","renameInport","renameOutport","fetchTransaction","executeEntry","executeEntryInversed","canUndo","moveToRevision","canRedo","startRev","endRev","lines","success","baseLoader","sources","setLibraryIcon","registerCustomLoaders","loaders","customLoader","originalSource","CoffeeScript","compile","bare","babel","transform","withExports","eval","componentData","tests","noflo","hasData","getData","_noflo$Component","starting","graphObj","subscribeNetwork","findEdgePorts","setToReady","activate","targetPortName","isExportedInport","isExportedOutport","owl","deepCopy","Clone","deepCopiers","DeepCopier","config","DeepCopyAlgorithm","copiedObjects","thisPass","recursiveDeepCopy","maxDepth","deepCopyAlgorithm","canCopy","populate","cacheResult","getCachedResult","cachedResult","deepCopier","applyDeepCopier","cloneNode","childNodes","childCopy","appendChild","valueOf","bracket","datatypes","drop","default","hasStream","prepareFunction","newFunc","function","has","superCtor","super_","TempCtor","timers","timer","cleanUp","clearInterval","interval","setInterval","bang","stopTimer","sent","element","classList","tagname","container","in","selector","el","missed","elements","preventDefault","html","innerHTML","parentNode","requestAnimationFrame","running","animate","newVal","attribute","dragstart","dragmove","movex","movey","clientY","dragend","eventName","onEvent","unsubscribe","subscriber","sendHash","oldHash","current","change","keypress","keyCode","ignoreInput","route","shortcut","click","dblclick","action","width","height","innerHeight","top","scrollY","left","scrollX","bottom","right","innerWidth","recognition","transcript","touchstart","changedTouches","touch","touchmove","touchend","screen","screenY","page","pageY","gamepad","gamepadState","lastTimestamps","optimizeCb","argCount","other","collection","accumulator","iteratee","memo","currentKey","_ref","createReduce","guessLanguageFromFilename","wait","immediate","later","now","callNow","LegacyNetwork","graphOps","registerOp","op","processOps","createDebug","prevTime","enabled","curr","ms","coerce","formatter","selectColor","destroy","instances","newDebug","toNamespace","disable","names","skips","enable","h","plural","msAbs","isPlural","round","long","fmtLong","fmtShort","_toConsumableArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","_len","_key","listAttached","_len2","_key2","_len3","_key3","_len4","_key4","validateStream","portBrackets","_ret","_len5","_key5","_Array$from","_Array$from2","__getForForwarding","dataIp","_ip","_len6","_key6","datas","_len7","_key7","portPackets","errs","multiple","outputMap","componentPorts","mapIsInPorts","resultsOnly","q","nodeContext","normalizeOutput","raw","previous","inputs","prepareNetwork","networkCallback","resultType","getType","inSockets","received","outSockets","onError","onEnd","inputMap","runNetwork","inputType","prepareInputMap","outputs","mappedOutputs","withValue","packets","sendOutputMap","getParams","hasCallback","param","portOptions","patterns","encodeStrings","encode","decode","fnString","delim","shortestString","skipEval","iframe","opener","findPort","internal","portToPayload","getDescription","transport","outputSockets","mainGraph","subscribeOutdata","subscribeOutPorts","subscribeExportedPorts","sendPorts","sendAll","getRuntime","sendPacket","sendError","request","permittedCapabilities","allCapabilities","repository","repositoryVersion","networks","portsPayload","sendExportedPorts","portRemoved","portAdded","graphSockets","sendToInport","graphs","resolveGraph","initGraph","changeNode","changeEdge","changeGroup","getLoader","main","propagate","initNetwork","registerNetwork","nodeData","edgeData","iipData","publicName","public","getNetwork","getPortSignature","getConnectionSignature","startNetwork","stopNetwork","updateEdgesFilter","debugNetwork","getStatus","filters","signature","getEdgeSignature","filterData","sign","existingNetwork","connectError","eventFiltered","protocolEvent","secure","prepareSocketEvent","startError","ComponentProtocol","componentNames","processed","processComponent","sendComponent","processPort","initClass","debounced","flush","TraceBuffer","jsonStringify","subscribeExportedOutports","networkId","subscribeFunc","sendFunc","networkToTraceEvent","toISOString","serializeGroup","serialized","Tracer","header","netId","getAll","filepath","temp","openFile","fd","suffix","info","writeEvent","err1","consumeFunc","doneFunc","serializer","replacer","cycleReplacer","thisPos","spaces","getSerialize","cnst","rimraf","os","rimrafSync","tmpdir","RDWR_EXCL","O_CREAT","O_TRUNC","O_RDWR","O_EXCL","promiseCallback","generateName","rawAffixes","defaultPrefix","affixes","parseAffixes","getFullYear","tracking","exitListenerAttached","filesToDelete","dirsToDelete","deleteFileOnExit","filePath","attachExitListener","deleteDirOnExit","dirPath","cleanupSync","files","toDelete","cleanupFilesSync","dirs","cleanupDirsSync","track","mkdir","mkdirSync","openSync","cleanup","rimrafCallback","cleanupFiles","fileErr","fileCount","cleanupDirs","dirErr","dirCount","createWriteStream","stream","_0666","defaultGlobOpts","isWindows","maxBusyTries","emfileWait","disableGlob","busyTries","errState","afterGlob","rimraf_","CB","fixWinEPERM","rmdir","unlink","chmod","er2","er3","stats","fixWinEPERMSync","chmodSync","statSync","rmdirSync","unlinkSync","originalEr","rmkids","lstatSync","readdirSync","retries","threw","rmkidsSync","propIsEnumerable","toObject","test1","test2","test3","letter","shouldUseNative","pathModule","maybeCallback","backtrace","missingCallback","rethrow","nextPartRe","splitRootRe","seenLinks","knownHard","resolvedLink","linkTarget","dev","ino","readlinkSync","LOOP","gotResolvedLink","gotStat","gotTarget","readlink","concatMap","balanced","isTop","expansions","pre","isNumericSequence","isAlphaSequence","isSequence","isOptions","escClose","parseCommaParts","postParts","embrace","N","numeric","incr","lte","gte","isPadded","need","z","expansion","escSlash","escOpen","escComma","escPeriod","escapeBraces","unescapeBraces","maybeMatch","range","reg","begs","beg","ai","bi","newPattern","reqs","RES","cbs","makeres","endianness","loadavg","freemem","MAX_VALUE","totalmem","cpus","release","appVersion","networkInterfaces","getNetworkInterfaces","arch","tmpDir","EOL","homedir","DirectClient","DirectRuntime","Client","_connect","_disconnect","clients","_receive","PostMessage","IframeRuntime","setClient","OpenerRuntime","button","stopPropagation","openClient","getAttribute","handleMessage","closeCheck","closed","removeEventListener","require","moduleName"],"mappings":"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","file":"test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 149);\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2018 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\n//\n// NoFlo is a Flow-Based Programming environment for JavaScript. This file provides the\n// main entry point to the NoFlo network.\n//\n// Find out more about using NoFlo from <http://noflojs.org/documentation/>\n\n/* eslint-disable\n    no-param-reassign,\n*/\n// ## Main APIs\n//\n// ### Graph interface\n//\n// [fbp-graph](https://github.com/flowbased/fbp-graph) is used for instantiating FBP graph definitions.\nvar fbpGraph = require('fbp-graph');\n\nexports.graph = fbpGraph.graph;\nexports.Graph = fbpGraph.Graph; // ### Graph journal\n//\n// Journal is used for keeping track of graph changes\n\nexports.journal = fbpGraph.journal;\nexports.Journal = fbpGraph.Journal; // ## Network interface\n//\n// [Network](../Network/) is used for running NoFlo graphs. The direct Network inteface is only\n// provided for backwards compatibility purposes. Use `createNetwork` instead.\n\nvar _require = require('./Network'),\n    Network = _require.Network;\n\nexports.Network = require('./LegacyNetwork').Network;\n\nvar _require2 = require('./Platform'),\n    deprecated = _require2.deprecated; // ### Platform detection\n//\n// NoFlo works on both Node.js and the browser. Because some dependencies are different,\n// we need a way to detect which we're on.\n\n\nexports.isBrowser = require('./Platform').isBrowser; // ### Component Loader\n//\n// The [ComponentLoader](../ComponentLoader/) is responsible for finding and loading\n// NoFlo components. Component Loader uses [fbp-manifest](https://github.com/flowbased/fbp-manifest)\n// to find components and graphs by traversing the NPM dependency tree from a given root\n// directory on the file system.\n\nexports.ComponentLoader = require('./ComponentLoader').ComponentLoader; // ### Component baseclasses\n//\n// These baseclasses can be used for defining NoFlo components.\n\nexports.Component = require('./Component').Component; // ### NoFlo ports\n//\n// These classes are used for instantiating ports on NoFlo components.\n\nvar ports = require('./Ports');\n\nexports.InPorts = ports.InPorts;\nexports.OutPorts = ports.OutPorts;\nexports.InPort = require('./InPort');\nexports.OutPort = require('./OutPort'); // ### NoFlo sockets\n//\n// The NoFlo [internalSocket](InternalSocket.html) is used for connecting ports of\n// different components together in a network.\n\nexports.internalSocket = require('./InternalSocket'); // ### Information Packets\n//\n// NoFlo Information Packets are defined as \"IP\" objects.\n\nexports.IP = require('./IP'); // ## Network instantiation\n//\n// This function handles instantiation of NoFlo networks from a Graph object. It creates\n// the network, and then starts execution by sending the Initial Information Packets.\n//\n//     noflo.createNetwork(someGraph, function (err, network) {\n//       console.log('Network is now running!');\n//     });\n//\n// It is also possible to instantiate a Network but delay its execution by giving the\n// third `delay` parameter. In this case you will have to handle connecting the graph and\n// sending of IIPs manually.\n//\n//     noflo.createNetwork(someGraph, function (err, network) {\n//       if (err) {\n//         throw err;\n//       }\n//       network.connect(function (err) {\n//         network.start();\n//         console.log('Network is now running!');\n//       })\n//     }, true);\n//\n// ### Network options\n//\n// It is possible to pass some options to control the behavior of network creation:\n//\n// * `delay`: (default: FALSE) Whether the network should be started later. Defaults to\n//   immediate execution\n// * `subscribeGraph`: (default: TRUE) Whether the network should monitor the underlying\n//   graph for changes\n//\n// Options can be passed as a second argument before the callback:\n//\n//     noflo.createNetwork(someGraph, options, callback);\n//\n// The options object can also be used for setting ComponentLoader options in this\n// network.\n\nexports.createNetwork = function createNetwork(graph, options, callback) {\n  if (typeof options === 'function') {\n    var opts = callback;\n    callback = options;\n    options = opts;\n  }\n\n  if (typeof options === 'boolean') {\n    options = {\n      delay: options\n    };\n  }\n\n  if (_typeof(options) !== 'object') {\n    options = {};\n  }\n\n  if (typeof options.subscribeGraph === 'undefined') {\n    // Default to legacy network for backwards compatibility.\n    options.subscribeGraph = true;\n  }\n\n  if (typeof callback !== 'function') {\n    deprecated('Calling noflo.createNetwork without a callback is deprecated');\n\n    callback = function callback(err) {\n      if (err) {\n        throw err;\n      }\n    };\n  } // Choose legacy or modern network based on whether graph\n  // subscription is needed\n\n\n  var NetworkType = options.subscribeGraph ? exports.Network : Network;\n  var network = new NetworkType(graph, options);\n\n  var networkReady = function networkReady(net) {\n    // Send IIPs\n    net.start(function (err) {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      callback(null, net);\n    });\n  }; // Ensure components are loaded before continuing\n\n\n  network.loader.listComponents(function (err) {\n    if (err) {\n      callback(err);\n      return;\n    } // In case of delayed execution we don't wire it up\n\n\n    if (options.delay) {\n      callback(null, network);\n      return;\n    } // Empty network, no need to connect it up\n\n\n    if (graph.nodes.length === 0) {\n      networkReady(network);\n      return;\n    } // Wire the network up and start execution\n\n\n    network.connect(function (err2) {\n      if (err2) {\n        callback(err2);\n        return;\n      }\n\n      networkReady(network);\n    });\n  });\n  return network;\n}; // ### Starting a network from a file\n//\n// It is also possible to start a NoFlo network by giving it a path to a `.json` or `.fbp` network\n// definition file.\n//\n//     noflo.loadFile('somefile.json', function (err, network) {\n//       if (err) {\n//         throw err;\n//       }\n//       console.log('Network is now running!');\n//     })\n\n\nexports.loadFile = function loadFile(file, options, callback) {\n  if (!callback) {\n    callback = options;\n    options = null;\n  }\n\n  if (callback && _typeof(options) !== 'object') {\n    options = {\n      baseDir: options\n    };\n  }\n\n  if (_typeof(options) !== 'object') {\n    options = {};\n  }\n\n  if (!options.subscribeGraph) {\n    options.subscribeGraph = false;\n  }\n\n  exports.graph.loadFile(file, function (err, net) {\n    if (err) {\n      callback(err);\n      return;\n    }\n\n    if (options.baseDir) {\n      net.baseDir = options.baseDir;\n    }\n\n    exports.createNetwork(net, options, callback);\n  });\n}; // ### Saving a network definition\n//\n// NoFlo graph files can be saved back into the filesystem with this method.\n\n\nexports.saveFile = function saveFile(graph, file, callback) {\n  graph.save(file, callback);\n}; // ## Embedding NoFlo in existing JavaScript code\n//\n// The `asCallback` helper provides an interface to wrap NoFlo components\n// or graphs into existing JavaScript code.\n//\n//     // Produce an asynchronous function wrapping a NoFlo graph\n//     var wrapped = noflo.asCallback('myproject/MyGraph');\n//\n//     // Call the function, providing input data and a callback for output data\n//     wrapped({\n//       in: 'data'\n//     }, function (err, results) {\n//       // Do something with results\n//     });\n//\n\n\nexports.asCallback = require('./AsCallback').asCallback; // ## Generating components from JavaScript functions\n//\n// The `asComponent` helper makes it easy to expose a JavaScript function as a\n// NoFlo component. All input arguments become input ports, and the function's\n// result will be sent to either `out` or `error` port.\n//\n//     exports.getComponent = function () {\n//       return noflo.asComponent(Math.random, {\n//         description: 'Generate a random number',\n//       });\n//     };\n//\n\nexports.asComponent = require('./AsComponent').asComponent;","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2016-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\n// ## Information Packets\n//\n// IP objects are the way information is transmitted between\n// components running in a NoFlo network. IP objects contain\n// a `type` that defines whether they're regular `data` IPs\n// or whether they are the beginning or end of a stream\n// (`openBracket`, `closeBracket`).\n//\n// The component currently holding an IP object is identified\n// with the `owner` key.\n//\n// By default, IP objects may be sent to multiple components.\n// If they're set to be clonable, each component will receive\n// its own clone of the IP. This should be enabled for any\n// IP object working with data that is safe to clone.\n//\n// It is also possible to carry metadata with an IP object.\n// For example, the `datatype` and `schema` of the sending\n// port is transmitted with the IP object.\n// Valid IP types:\n//   - 'data'\n//   - 'openBracket'\n//   - 'closeBracket'\nmodule.exports = /*#__PURE__*/function () {\n  _createClass(IP, null, [{\n    key: \"isIP\",\n    // Detects if an arbitrary value is an IP\n    value: function isIP(obj) {\n      return obj && _typeof(obj) === 'object' && obj.isIP === true;\n    } // Creates as new IP object\n    // Valid types: 'data', 'openBracket', 'closeBracket'\n\n  }]);\n\n  function IP(type) {\n    var _this = this;\n\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, IP);\n\n    this.type = type || 'data';\n    this.data = data;\n    this.isIP = true;\n    this.scope = null; // sync scope id\n\n    this.owner = null; // packet owner process\n\n    this.clonable = false; // cloning safety flag\n\n    this.index = null; // addressable port index\n\n    this.schema = null;\n    this.datatype = 'all';\n\n    if (_typeof(options) === 'object') {\n      Object.keys(options).forEach(function (key) {\n        _this[key] = options[key];\n      });\n    }\n\n    return this;\n  } // Creates a new IP copying its contents by value not reference\n\n\n  _createClass(IP, [{\n    key: \"clone\",\n    value: function clone() {\n      var _this2 = this;\n\n      var ip = new IP(this.type);\n      Object.keys(this).forEach(function (key) {\n        var val = _this2[key];\n\n        if (key === 'owner') {\n          return;\n        }\n\n        if (val === null) {\n          return;\n        }\n\n        if (_typeof(val) === 'object') {\n          ip[key] = JSON.parse(JSON.stringify(val));\n        } else {\n          ip[key] = val;\n        }\n      });\n      return ip;\n    } // Moves an IP to a different owner\n\n  }, {\n    key: \"move\",\n    value: function move(owner) {\n      // no-op\n      this.owner = owner;\n      return this;\n    } // Frees IP contents\n\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      var _this3 = this;\n\n      Object.keys(this).forEach(function (key) {\n        delete _this3[key];\n      });\n    }\n  }]);\n\n  return IP;\n}();","\"use strict\";\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\n//\n\n/* eslint-disable\n    no-console,\n    no-undef,\n*/\n// Platform detection method\nexports.isBrowser = function isBrowser() {\n  if (typeof process !== 'undefined' && process.execPath && process.execPath.match(/node|iojs/)) {\n    return false;\n  }\n\n  return true;\n}; // Mechanism for showing API deprecation warnings. By default logs the warnings\n// but can also be configured to throw instead with the `NOFLO_FATAL_DEPRECATED`\n// env var.\n\n\nexports.deprecated = function deprecated(message) {\n  if (exports.isBrowser()) {\n    if (window.NOFLO_FATAL_DEPRECATED) {\n      throw new Error(message);\n    }\n\n    console.warn(message);\n    return;\n  }\n\n  if (process.env.NOFLO_FATAL_DEPRECATED) {\n    throw new Error(message);\n  }\n\n  console.warn(message);\n};","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","exports.graph = require('./lib/Graph');\nexports.Graph = exports.graph.Graph;\n\nexports.journal = require('./lib/Journal');\nexports.Journal = exports.journal.Journal;\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2017 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\nvar _require = require('events'),\n    EventEmitter = _require.EventEmitter;\n\nvar IP = require('./IP');\n\nfunction legacyToIp(event, payload) {\n  // No need to wrap modern IP Objects\n  if (IP.isIP(payload)) {\n    return payload;\n  } // Wrap legacy events into appropriate IP objects\n\n\n  switch (event) {\n    case 'begingroup':\n      return new IP('openBracket', payload);\n\n    case 'endgroup':\n      return new IP('closeBracket');\n\n    case 'data':\n      return new IP('data', payload);\n\n    default:\n      return null;\n  }\n}\n\nfunction ipToLegacy(ip) {\n  switch (ip.type) {\n    case 'openBracket':\n      return {\n        event: 'begingroup',\n        payload: ip.data\n      };\n\n    case 'data':\n      return {\n        event: 'data',\n        payload: ip.data\n      };\n\n    case 'closeBracket':\n      return {\n        event: 'endgroup',\n        payload: ip.data\n      };\n\n    default:\n      return null;\n  }\n} // ## Internal Sockets\n//\n// The default communications mechanism between NoFlo processes is\n// an _internal socket_, which is responsible for accepting information\n// packets sent from processes' outports, and emitting corresponding\n// events so that the packets can be caught to the inport of the\n// connected process.\n\n\nvar InternalSocket = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(InternalSocket, _EventEmitter);\n\n  var _super = _createSuper(InternalSocket);\n\n  _createClass(InternalSocket, [{\n    key: \"regularEmitEvent\",\n    value: function regularEmitEvent(event, data) {\n      this.emit(event, data);\n    }\n  }, {\n    key: \"debugEmitEvent\",\n    value: function debugEmitEvent(event, data) {\n      try {\n        this.emit(event, data);\n      } catch (error) {\n        if (error.id && error.metadata && error.error) {\n          // Wrapped debuggable error coming from downstream, no need to wrap\n          if (this.listeners('error').length === 0) {\n            throw error.error;\n          }\n\n          this.emit('error', error);\n          return;\n        }\n\n        if (this.listeners('error').length === 0) {\n          throw error;\n        }\n\n        this.emit('error', {\n          id: this.to.process.id,\n          error: error,\n          metadata: this.metadata\n        });\n      }\n    }\n  }]);\n\n  function InternalSocket() {\n    var _this;\n\n    var metadata = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, InternalSocket);\n\n    _this = _super.call(this);\n    _this.metadata = metadata;\n    _this.brackets = [];\n    _this.connected = false;\n    _this.dataDelegate = null;\n    _this.debug = false;\n    _this.emitEvent = _this.regularEmitEvent;\n    return _this;\n  } // ## Socket connections\n  //\n  // Sockets that are attached to the ports of processes may be\n  // either connected or disconnected. The semantical meaning of\n  // a connection is that the outport is in the process of sending\n  // data. Disconnecting means an end of transmission.\n  //\n  // This can be used for example to signal the beginning and end\n  // of information packets resulting from the reading of a single\n  // file or a database query.\n  //\n  // Example, disconnecting when a file has been completely read:\n  //\n  //     readBuffer: (fd, position, size, buffer) ->\n  //       fs.read fd, buffer, 0, buffer.length, position, (err, bytes, buffer) =>\n  //         # Send data. The first send will also connect if not\n  //         # already connected.\n  //         @outPorts.out.send buffer.slice 0, bytes\n  //         position += buffer.length\n  //\n  //         # Disconnect when the file has been completely read\n  //         return @outPorts.out.disconnect() if position >= size\n  //\n  //         # Otherwise, call same method recursively\n  //         @readBuffer fd, position, size, buffer\n\n\n  _createClass(InternalSocket, [{\n    key: \"connect\",\n    value: function connect() {\n      if (this.connected) {\n        return;\n      }\n\n      this.connected = true;\n      this.emitEvent('connect', null);\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (!this.connected) {\n        return;\n      }\n\n      this.connected = false;\n      this.emitEvent('disconnect', null);\n    }\n  }, {\n    key: \"isConnected\",\n    value: function isConnected() {\n      return this.connected;\n    } // ## Sending information packets\n    //\n    // The _send_ method is used by a processe's outport to\n    // send information packets. The actual packet contents are\n    // not defined by NoFlo, and may be any valid JavaScript data\n    // structure.\n    //\n    // The packet contents however should be such that may be safely\n    // serialized or deserialized via JSON. This way the NoFlo networks\n    // can be constructed with more flexibility, as file buffers or\n    // message queues can be used as additional packet relay mechanisms.\n\n  }, {\n    key: \"send\",\n    value: function send(data) {\n      if (data === undefined && typeof this.dataDelegate === 'function') {\n        this.handleSocketEvent('data', this.dataDelegate());\n        return;\n      }\n\n      this.handleSocketEvent('data', data);\n    } // ## Sending information packets without open bracket\n    //\n    // As _connect_ event is considered as open bracket, it needs to be followed\n    // by a _disconnect_ event or a closing bracket. In the new simplified\n    // sending semantics single IP objects can be sent without open/close brackets.\n\n  }, {\n    key: \"post\",\n    value: function post(packet) {\n      var autoDisconnect = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var ip = packet;\n\n      if (ip === undefined && typeof this.dataDelegate === 'function') {\n        ip = this.dataDelegate();\n      } // Send legacy connect/disconnect if needed\n\n\n      if (!this.isConnected() && this.brackets.length === 0) {\n        this.connect();\n      }\n\n      this.handleSocketEvent('ip', ip, false);\n\n      if (autoDisconnect && this.isConnected() && this.brackets.length === 0) {\n        this.disconnect();\n      }\n    } // ## Information Packet grouping\n    //\n    // Processes sending data to sockets may also group the packets\n    // when necessary. This allows transmitting tree structures as\n    // a stream of packets.\n    //\n    // For example, an object could be split into multiple packets\n    // where each property is identified by a separate grouping:\n    //\n    //     # Group by object ID\n    //     @outPorts.out.beginGroup object.id\n    //\n    //     for property, value of object\n    //       @outPorts.out.beginGroup property\n    //       @outPorts.out.send value\n    //       @outPorts.out.endGroup()\n    //\n    //     @outPorts.out.endGroup()\n    //\n    // This would cause a tree structure to be sent to the receiving\n    // process as a stream of packets. So, an article object may be\n    // as packets like:\n    //\n    // * `/<article id>/title/Lorem ipsum`\n    // * `/<article id>/author/Henri Bergius`\n    //\n    // Components are free to ignore groupings, but are recommended\n    // to pass received groupings onward if the data structures remain\n    // intact through the component's processing.\n\n  }, {\n    key: \"beginGroup\",\n    value: function beginGroup(group) {\n      this.handleSocketEvent('begingroup', group);\n    }\n  }, {\n    key: \"endGroup\",\n    value: function endGroup() {\n      this.handleSocketEvent('endgroup');\n    } // ## Socket data delegation\n    //\n    // Sockets have the option to receive data from a delegate function\n    // should the `send` method receive undefined for `data`.  This\n    // helps in the case of defaulting values.\n\n  }, {\n    key: \"setDataDelegate\",\n    value: function setDataDelegate(delegate) {\n      if (typeof delegate !== 'function') {\n        throw Error('A data delegate must be a function.');\n      }\n\n      this.dataDelegate = delegate;\n    } // ## Socket debug mode\n    //\n    // Sockets can catch exceptions happening in processes when data is\n    // sent to them. These errors can then be reported to the network for\n    // notification to the developer.\n\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(active) {\n      this.debug = active;\n      this.emitEvent = this.debug ? this.debugEmitEvent : this.regularEmitEvent;\n    } // ## Socket identifiers\n    //\n    // Socket identifiers are mainly used for debugging purposes.\n    // Typical identifiers look like _ReadFile:OUT -> Display:IN_,\n    // but for sockets sending initial information packets to\n    // components may also loom like _DATA -> ReadFile:SOURCE_.\n\n  }, {\n    key: \"getId\",\n    value: function getId() {\n      var fromStr = function fromStr(from) {\n        return \"\".concat(from.process.id, \"() \").concat(from.port.toUpperCase());\n      };\n\n      var toStr = function toStr(to) {\n        return \"\".concat(to.port.toUpperCase(), \" \").concat(to.process.id, \"()\");\n      };\n\n      if (!this.from && !this.to) {\n        return 'UNDEFINED';\n      }\n\n      if (this.from && !this.to) {\n        return \"\".concat(fromStr(this.from), \" -> ANON\");\n      }\n\n      if (!this.from) {\n        return \"DATA -> \".concat(toStr(this.to));\n      }\n\n      return \"\".concat(fromStr(this.from), \" -> \").concat(toStr(this.to));\n    }\n    /* eslint-disable no-param-reassign */\n\n  }, {\n    key: \"handleSocketEvent\",\n    value: function handleSocketEvent(event, payload) {\n      var autoConnect = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var isIP = event === 'ip' && IP.isIP(payload);\n      var ip = isIP ? payload : legacyToIp(event, payload);\n\n      if (!ip) {\n        return;\n      }\n\n      if (!this.isConnected() && autoConnect && this.brackets.length === 0) {\n        // Connect before sending\n        this.connect();\n      }\n\n      if (event === 'begingroup') {\n        this.brackets.push(payload);\n      }\n\n      if (isIP && ip.type === 'openBracket') {\n        this.brackets.push(ip.data);\n      }\n\n      if (event === 'endgroup') {\n        // Prevent closing already closed groups\n        if (this.brackets.length === 0) {\n          return;\n        } // Add group name to bracket\n\n\n        ip.data = this.brackets.pop();\n        payload = ip.data;\n      }\n\n      if (isIP && payload.type === 'closeBracket') {\n        // Prevent closing already closed brackets\n        if (this.brackets.length === 0) {\n          return;\n        }\n\n        this.brackets.pop();\n      } // Emit the IP Object\n\n\n      this.emitEvent('ip', ip); // Emit the legacy event\n\n      if (!ip || !ip.type) {\n        return;\n      }\n\n      if (isIP) {\n        var legacy = ipToLegacy(ip);\n        event = legacy.event;\n        payload = legacy.payload;\n      }\n\n      if (event === 'connect') {\n        this.connected = true;\n      }\n\n      if (event === 'disconnect') {\n        this.connected = false;\n      }\n\n      this.emitEvent(event, payload);\n    }\n  }]);\n\n  return InternalSocket;\n}(EventEmitter);\n\nexports.InternalSocket = InternalSocket;\n\nexports.createSocket = function () {\n  return new InternalSocket();\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2017 Flowhub UG\n//     (c) 2013 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable\n    class-methods-use-this,\n    import/no-unresolved,\n*/\nvar fbpGraph = require('fbp-graph');\n\nvar _require = require('events'),\n    EventEmitter = _require.EventEmitter;\n\nvar registerLoader = require('./loader/register');\n\nvar platform = require('./Platform'); // ## The NoFlo Component Loader\n//\n// The Component Loader is responsible for discovering components\n// available in the running system, as well as for instantiating\n// them.\n//\n// Internally the loader uses a registered, platform-specific\n// loader. NoFlo ships with a loader for Node.js that discovers\n// components from the current project's `components/` and\n// `graphs/` folders, as well as those folders of any installed\n// NPM dependencies. For browsers and embedded devices it is\n// possible to generate a statically configured component\n// loader using the [noflo-component-loader](https://github.com/noflo/noflo-component-loader) webpack plugin.\n\n\nvar ComponentLoader = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(ComponentLoader, _EventEmitter);\n\n  var _super = _createSuper(ComponentLoader);\n\n  function ComponentLoader(baseDir) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, ComponentLoader);\n\n    _this = _super.call(this);\n    _this.baseDir = baseDir;\n    _this.options = options;\n    _this.components = null;\n    _this.libraryIcons = {};\n    _this.processing = false;\n    _this.ready = false;\n\n    _this.setMaxListeners(0);\n\n    return _this;\n  } // Get the library prefix for a given module name. This\n  // is mostly used for generating valid names for namespaced\n  // NPM modules, as well as for convenience renaming all\n  // `noflo-` prefixed modules with just their base name.\n  //\n  // Examples:\n  //\n  // * `my-project` becomes `my-project`\n  // * `@foo/my-project` becomes `my-project`\n  // * `noflo-core` becomes `core`\n\n\n  _createClass(ComponentLoader, [{\n    key: \"getModulePrefix\",\n    value: function getModulePrefix(name) {\n      if (!name) {\n        return '';\n      }\n\n      var res = name;\n\n      if (res === 'noflo') {\n        return '';\n      }\n\n      if (res[0] === '@') {\n        res = res.replace(/@[a-z-]+\\//, '');\n      }\n\n      return res.replace(/^noflo-/, '');\n    } // Get the list of all available components\n\n  }, {\n    key: \"listComponents\",\n    value: function listComponents(callback) {\n      var _this2 = this;\n\n      if (this.processing) {\n        this.once('ready', function () {\n          return callback(null, _this2.components);\n        });\n        return;\n      }\n\n      if (this.components) {\n        callback(null, this.components);\n        return;\n      }\n\n      this.ready = false;\n      this.processing = true;\n      this.components = {};\n      registerLoader.register(this, function (err) {\n        _this2.processing = false;\n        _this2.ready = true;\n\n        _this2.emit('ready', true);\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        callback(null, _this2.components);\n      });\n    } // Load an instance of a specific component. If the\n    // registered component is a JSON or FBP graph, it will\n    // be loaded as an instance of the NoFlo subgraph\n    // component.\n\n  }, {\n    key: \"load\",\n    value: function load(name, callback, metadata) {\n      var _this3 = this;\n\n      if (!this.ready) {\n        this.listComponents(function (err) {\n          if (err) {\n            callback(err);\n            return;\n          }\n\n          _this3.load(name, callback, metadata);\n        });\n        return;\n      }\n\n      var component = this.components[name];\n\n      if (!component) {\n        // Try an alias\n        var keys = Object.keys(this.components);\n\n        for (var i = 0; i < keys.length; i += 1) {\n          var componentName = keys[i];\n\n          if (componentName.split('/')[1] === name) {\n            component = this.components[componentName];\n            break;\n          }\n        }\n\n        if (!component) {\n          // Failure to load\n          callback(new Error(\"Component \".concat(name, \" not available with base \").concat(this.baseDir)));\n          return;\n        }\n      }\n\n      if (this.isGraph(component)) {\n        this.loadGraph(name, component, callback, metadata);\n        return;\n      }\n\n      this.createComponent(name, component, metadata, function (err, instance) {\n        var inst = instance;\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        if (!inst) {\n          callback(new Error(\"Component \".concat(name, \" could not be loaded.\")));\n          return;\n        }\n\n        if (name === 'Graph') {\n          inst.baseDir = _this3.baseDir;\n        }\n\n        if (typeof name === 'string') {\n          inst.componentName = name;\n        }\n\n        if (inst.isLegacy()) {\n          platform.deprecated(\"Component \".concat(name, \" uses legacy NoFlo APIs. Please port to Process API\"));\n        }\n\n        _this3.setIcon(name, inst);\n\n        callback(null, inst);\n      });\n    } // Creates an instance of a component.\n\n  }, {\n    key: \"createComponent\",\n    value: function createComponent(name, component, metadata, callback) {\n      var e;\n      var instance;\n      var implementation = component;\n\n      if (!implementation) {\n        callback(new Error(\"Component \".concat(name, \" not available\")));\n        return;\n      } // If a string was specified, attempt to `require` it.\n\n\n      if (typeof implementation === 'string') {\n        if (typeof registerLoader.dynamicLoad === 'function') {\n          registerLoader.dynamicLoad(name, implementation, metadata, callback);\n          return;\n        }\n\n        callback(Error(\"Dynamic loading of \".concat(implementation, \" for component \").concat(name, \" not available on this platform.\")));\n        return;\n      } // Attempt to create the component instance using the `getComponent` method.\n\n\n      if (typeof implementation.getComponent === 'function') {\n        try {\n          instance = implementation.getComponent(metadata);\n        } catch (error) {\n          e = error;\n          callback(e);\n          return;\n        } // Attempt to create a component using a factory function.\n\n      } else if (typeof implementation === 'function') {\n        try {\n          instance = implementation(metadata);\n        } catch (error1) {\n          e = error1;\n          callback(e);\n          return;\n        }\n      } else {\n        callback(new Error(\"Invalid type \".concat(_typeof(implementation), \" for component \").concat(name, \".\")));\n        return;\n      }\n\n      callback(null, instance);\n    } // Check if a given filesystem path is actually a graph\n\n  }, {\n    key: \"isGraph\",\n    value: function isGraph(cPath) {\n      // Live graph instance\n      if (_typeof(cPath) === 'object' && (cPath instanceof fbpGraph.Graph || Array.isArray(cPath.nodes) && Array.isArray(cPath.edges) && Array.isArray(cPath.initializers))) {\n        return true;\n      } // Graph JSON definition\n\n\n      if (_typeof(cPath) === 'object' && cPath.processes && cPath.connections) {\n        return true;\n      }\n\n      if (typeof cPath !== 'string') {\n        return false;\n      } // Graph file path\n\n\n      return cPath.indexOf('.fbp') !== -1 || cPath.indexOf('.json') !== -1;\n    } // Load a graph as a NoFlo subgraph component instance\n\n  }, {\n    key: \"loadGraph\",\n    value: function loadGraph(name, component, callback, metadata) {\n      var _this4 = this;\n\n      this.createComponent(name, this.components.Graph, metadata, function (error, graph) {\n        var g = graph;\n\n        if (error) {\n          callback(error);\n          return;\n        }\n\n        g.loader = _this4;\n        g.baseDir = _this4.baseDir;\n        g.inPorts.remove('graph');\n        g.setGraph(component, function (err) {\n          if (err) {\n            callback(err);\n            return;\n          }\n\n          _this4.setIcon(name, g);\n\n          callback(null, g);\n        });\n      });\n    } // Set icon for the component instance. If the instance\n    // has an icon set, then this is a no-op. Otherwise we\n    // determine an icon based on the module it is coming\n    // from, or use a fallback icon separately for subgraphs\n    // and elementary components.\n\n  }, {\n    key: \"setIcon\",\n    value: function setIcon(name, instance) {\n      // See if component has an icon\n      if (!instance.getIcon || instance.getIcon()) {\n        return;\n      } // See if library has an icon\n\n\n      var _name$split = name.split('/'),\n          _name$split2 = _slicedToArray(_name$split, 2),\n          library = _name$split2[0],\n          componentName = _name$split2[1];\n\n      if (componentName && this.getLibraryIcon(library)) {\n        instance.setIcon(this.getLibraryIcon(library));\n        return;\n      } // See if instance is a subgraph\n\n\n      if (instance.isSubgraph()) {\n        instance.setIcon('sitemap');\n        return;\n      }\n\n      instance.setIcon('gear');\n    }\n  }, {\n    key: \"getLibraryIcon\",\n    value: function getLibraryIcon(prefix) {\n      if (this.libraryIcons[prefix]) {\n        return this.libraryIcons[prefix];\n      }\n\n      return null;\n    }\n  }, {\n    key: \"setLibraryIcon\",\n    value: function setLibraryIcon(prefix, icon) {\n      this.libraryIcons[prefix] = icon;\n    }\n  }, {\n    key: \"normalizeName\",\n    value: function normalizeName(packageId, name) {\n      var prefix = this.getModulePrefix(packageId);\n      var fullName = \"\".concat(prefix, \"/\").concat(name);\n\n      if (!packageId) {\n        fullName = name;\n      }\n\n      return fullName;\n    } // ### Registering components at runtime\n    //\n    // In addition to components discovered by the loader,\n    // it is possible to register components at runtime.\n    //\n    // With the `registerComponent` method you can register\n    // a NoFlo Component constructor or factory method\n    // as a component available for loading.\n\n  }, {\n    key: \"registerComponent\",\n    value: function registerComponent(packageId, name, cPath, callback) {\n      var fullName = this.normalizeName(packageId, name);\n      this.components[fullName] = cPath;\n\n      if (callback) {\n        callback();\n      }\n    } // With the `registerGraph` method you can register new\n    // graphs as loadable components.\n\n  }, {\n    key: \"registerGraph\",\n    value: function registerGraph(packageId, name, gPath, callback) {\n      this.registerComponent(packageId, name, gPath, callback);\n    } // With `registerLoader` you can register custom component\n    // loaders. They will be called immediately and can register\n    // any components or graphs they wish.\n\n  }, {\n    key: \"registerLoader\",\n    value: function registerLoader(loader, callback) {\n      loader(this, callback);\n    } // With `setSource` you can register a component by providing\n    // a source code string. Supported languages and techniques\n    // depend on the runtime environment, for example CoffeeScript\n    // components can only be registered via `setSource` if\n    // the environment has a CoffeeScript compiler loaded.\n\n  }, {\n    key: \"setSource\",\n    value: function setSource(packageId, name, source, language, callback) {\n      var _this5 = this;\n\n      if (!registerLoader.setSource) {\n        callback(new Error('setSource not allowed'));\n        return;\n      }\n\n      if (!this.ready) {\n        this.listComponents(function (err) {\n          if (err) {\n            callback(err);\n            return;\n          }\n\n          _this5.setSource(packageId, name, source, language, callback);\n        });\n        return;\n      }\n\n      registerLoader.setSource(this, packageId, name, source, language, callback);\n    } // `getSource` allows fetching the source code of a registered\n    // component as a string.\n\n  }, {\n    key: \"getSource\",\n    value: function getSource(name, callback) {\n      var _this6 = this;\n\n      if (!registerLoader.getSource) {\n        callback(new Error('getSource not allowed'));\n        return;\n      }\n\n      if (!this.ready) {\n        this.listComponents(function (err) {\n          if (err) {\n            callback(err);\n            return;\n          }\n\n          _this6.getSource(name, callback);\n        });\n        return;\n      }\n\n      registerLoader.getSource(this, name, callback);\n    } // `getLanguages` gets a list of component programming languages supported by the `setSource`\n    // method on this runtime instance.\n\n  }, {\n    key: \"getLanguages\",\n    value: function getLanguages() {\n      if (!registerLoader.getLanguages) {\n        // This component loader doesn't support the method, default to normal JS\n        return ['javascript', 'es2015'];\n      }\n\n      return registerLoader.getLanguages();\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.components = null;\n      this.ready = false;\n      this.processing = false;\n    }\n  }]);\n\n  return ComponentLoader;\n}(EventEmitter);\n\nexports.ComponentLoader = ComponentLoader;","module.exports = function (id) { return [':~:', id, ':~:'].join('') }","const Base = require('noflo-runtime-base');\n\nclass PostMessage extends Base {\n  constructor(options = {}) {\n    const normalizedOptions = options;\n    super(normalizedOptions);\n    if (normalizedOptions.catchExceptions) {\n      window.onerror = function (err) {\n        if (this.client) {\n          this.send('network', 'error', err, {\n            href: this.context ? this.context.href : this.client.location.href,\n          });\n        }\n        console.error(err);\n        return true;\n      }.bind(this);\n    }\n\n    if (!normalizedOptions.defaultPermissions.length) {\n      // The iframe runtime is run on user's own computer, so default to all access allowed\n      normalizedOptions.defaultPermissions = [\n        'protocol:graph',\n        'protocol:component',\n        'protocol:network',\n        'protocol:runtime',\n        'component:setsource',\n        'component:getsource',\n        'network:data',\n        'network:control',\n        'network:status',\n      ];\n    }\n    this.client = null;\n  }\n\n  setClient(client) {\n    this.client = client;\n  }\n\n  send(protocol, topic, payload, ctx) {\n    if (!this.client) {\n      return;\n    }\n    let normalizedPayload = payload;\n    if (payload instanceof Error) {\n      normalizedPayload = {\n        message: payload.message,\n        stack: payload.stack,\n      };\n    }\n    let { context } = this;\n    if (!context) {\n      context = ctx;\n    }\n    this.client.postMessage(JSON.stringify({\n      protocol,\n      command: topic,\n      payload: normalizedPayload,\n    }), context.href);\n    super.send(protocol, topic, payload, context);\n  }\n\n  sendAll(protocol, topic, payload) {\n    this.send(protocol, topic, payload, this.context);\n  }\n}\n\nmodule.exports = PostMessage;\n","exports.parseName = function parseName(name) {\n  if (name.indexOf('/') === -1) {\n    return {\n      library: null,\n      name,\n    };\n  }\n  const nameParts = name.split('/');\n  return {\n    library: nameParts[0],\n    name: nameParts[1],\n  };\n};\n\nexports.withNamespace = function withNamespace(name, namespace) {\n  if (!namespace || name.indexOf('/') !== -1) {\n    return name;\n  }\n  return `${namespace}/${name}`;\n};\n\nexports.withoutNamespace = function withoutNamespace(name) {\n  if (name.indexOf('/') === -1) {\n    return name;\n  }\n  return name.split('/')[1];\n};\n","'use strict';\n\nvar objectAssign = require('object-assign');\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\n// Expose a strict only variant of assert\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n","module.exports = minimatch\nminimatch.Minimatch = Minimatch\n\nvar path = { sep: '/' }\ntry {\n  path = require('path')\n} catch (er) {}\n\nvar GLOBSTAR = minimatch.GLOBSTAR = Minimatch.GLOBSTAR = {}\nvar expand = require('brace-expansion')\n\nvar plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nvar qmark = '[^/]'\n\n// * => any number of characters\nvar star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nvar twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nvar twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// characters that need to be escaped in RegExp.\nvar reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// \"abc\" -> { a:true, b:true, c:true }\nfunction charSet (s) {\n  return s.split('').reduce(function (set, c) {\n    set[c] = true\n    return set\n  }, {})\n}\n\n// normalizes slashes.\nvar slashSplit = /\\/+/\n\nminimatch.filter = filter\nfunction filter (pattern, options) {\n  options = options || {}\n  return function (p, i, list) {\n    return minimatch(p, pattern, options)\n  }\n}\n\nfunction ext (a, b) {\n  a = a || {}\n  b = b || {}\n  var t = {}\n  Object.keys(b).forEach(function (k) {\n    t[k] = b[k]\n  })\n  Object.keys(a).forEach(function (k) {\n    t[k] = a[k]\n  })\n  return t\n}\n\nminimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return minimatch\n\n  var orig = minimatch\n\n  var m = function minimatch (p, pattern, options) {\n    return orig.minimatch(p, pattern, ext(def, options))\n  }\n\n  m.Minimatch = function Minimatch (pattern, options) {\n    return new orig.Minimatch(pattern, ext(def, options))\n  }\n\n  return m\n}\n\nMinimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return Minimatch\n  return minimatch.defaults(def).Minimatch\n}\n\nfunction minimatch (p, pattern, options) {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  // \"\" only matches \"\"\n  if (pattern.trim() === '') return p === ''\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nfunction Minimatch (pattern, options) {\n  if (!(this instanceof Minimatch)) {\n    return new Minimatch(pattern, options)\n  }\n\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n  pattern = pattern.trim()\n\n  // windows support: need to use /, not \\\n  if (path.sep !== '/') {\n    pattern = pattern.split(path.sep).join('/')\n  }\n\n  this.options = options\n  this.set = []\n  this.pattern = pattern\n  this.regexp = null\n  this.negate = false\n  this.comment = false\n  this.empty = false\n\n  // make the set of regexps etc.\n  this.make()\n}\n\nMinimatch.prototype.debug = function () {}\n\nMinimatch.prototype.make = make\nfunction make () {\n  // don't do it more than once.\n  if (this._made) return\n\n  var pattern = this.pattern\n  var options = this.options\n\n  // empty patterns and comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    this.comment = true\n    return\n  }\n  if (!pattern) {\n    this.empty = true\n    return\n  }\n\n  // step 1: figure out negation, etc.\n  this.parseNegate()\n\n  // step 2: expand braces\n  var set = this.globSet = this.braceExpand()\n\n  if (options.debug) this.debug = console.error\n\n  this.debug(this.pattern, set)\n\n  // step 3: now we have a set, so turn each one into a series of path-portion\n  // matching patterns.\n  // These will be regexps, except in the case of \"**\", which is\n  // set to the GLOBSTAR object for globstar behavior,\n  // and will not contain any / characters\n  set = this.globParts = set.map(function (s) {\n    return s.split(slashSplit)\n  })\n\n  this.debug(this.pattern, set)\n\n  // glob --> regexps\n  set = set.map(function (s, si, set) {\n    return s.map(this.parse, this)\n  }, this)\n\n  this.debug(this.pattern, set)\n\n  // filter out everything that didn't compile properly.\n  set = set.filter(function (s) {\n    return s.indexOf(false) === -1\n  })\n\n  this.debug(this.pattern, set)\n\n  this.set = set\n}\n\nMinimatch.prototype.parseNegate = parseNegate\nfunction parseNegate () {\n  var pattern = this.pattern\n  var negate = false\n  var options = this.options\n  var negateOffset = 0\n\n  if (options.nonegate) return\n\n  for (var i = 0, l = pattern.length\n    ; i < l && pattern.charAt(i) === '!'\n    ; i++) {\n    negate = !negate\n    negateOffset++\n  }\n\n  if (negateOffset) this.pattern = pattern.substr(negateOffset)\n  this.negate = negate\n}\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = function (pattern, options) {\n  return braceExpand(pattern, options)\n}\n\nMinimatch.prototype.braceExpand = braceExpand\n\nfunction braceExpand (pattern, options) {\n  if (!options) {\n    if (this instanceof Minimatch) {\n      options = this.options\n    } else {\n      options = {}\n    }\n  }\n\n  pattern = typeof pattern === 'undefined'\n    ? this.pattern : pattern\n\n  if (typeof pattern === 'undefined') {\n    throw new TypeError('undefined pattern')\n  }\n\n  if (options.nobrace ||\n    !pattern.match(/\\{.*\\}/)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nMinimatch.prototype.parse = parse\nvar SUBPARSE = {}\nfunction parse (pattern, isSub) {\n  if (pattern.length > 1024 * 64) {\n    throw new TypeError('pattern is too long')\n  }\n\n  var options = this.options\n\n  // shortcuts\n  if (!options.noglobstar && pattern === '**') return GLOBSTAR\n  if (pattern === '') return ''\n\n  var re = ''\n  var hasMagic = !!options.nocase\n  var escaping = false\n  // ? => one single character\n  var patternListStack = []\n  var negativeLists = []\n  var stateChar\n  var inClass = false\n  var reClassStart = -1\n  var classStart = -1\n  // . and .. never match anything that doesn't start with .,\n  // even when options.dot is set.\n  var patternStart = pattern.charAt(0) === '.' ? '' // anything\n  // not (start or / followed by . or .. followed by / or end)\n  : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n  : '(?!\\\\.)'\n  var self = this\n\n  function clearStateChar () {\n    if (stateChar) {\n      // we had some state-tracking character\n      // that wasn't consumed by this pass.\n      switch (stateChar) {\n        case '*':\n          re += star\n          hasMagic = true\n        break\n        case '?':\n          re += qmark\n          hasMagic = true\n        break\n        default:\n          re += '\\\\' + stateChar\n        break\n      }\n      self.debug('clearStateChar %j %j', stateChar, re)\n      stateChar = false\n    }\n  }\n\n  for (var i = 0, len = pattern.length, c\n    ; (i < len) && (c = pattern.charAt(i))\n    ; i++) {\n    this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n    // skip over any that are escaped.\n    if (escaping && reSpecials[c]) {\n      re += '\\\\' + c\n      escaping = false\n      continue\n    }\n\n    switch (c) {\n      case '/':\n        // completely not allowed, even escaped.\n        // Should already be path-split by now.\n        return false\n\n      case '\\\\':\n        clearStateChar()\n        escaping = true\n      continue\n\n      // the various stateChar values\n      // for the \"extglob\" stuff.\n      case '?':\n      case '*':\n      case '+':\n      case '@':\n      case '!':\n        this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n        // all of those are literals inside a class, except that\n        // the glob [!a] means [^a] in regexp\n        if (inClass) {\n          this.debug('  in class')\n          if (c === '!' && i === classStart + 1) c = '^'\n          re += c\n          continue\n        }\n\n        // if we already have a stateChar, then it means\n        // that there was something like ** or +? in there.\n        // Handle the stateChar, then proceed with this one.\n        self.debug('call clearStateChar %j', stateChar)\n        clearStateChar()\n        stateChar = c\n        // if extglob is disabled, then +(asdf|foo) isn't a thing.\n        // just clear the statechar *now*, rather than even diving into\n        // the patternList stuff.\n        if (options.noext) clearStateChar()\n      continue\n\n      case '(':\n        if (inClass) {\n          re += '('\n          continue\n        }\n\n        if (!stateChar) {\n          re += '\\\\('\n          continue\n        }\n\n        patternListStack.push({\n          type: stateChar,\n          start: i - 1,\n          reStart: re.length,\n          open: plTypes[stateChar].open,\n          close: plTypes[stateChar].close\n        })\n        // negation is (?:(?!js)[^/]*)\n        re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n        this.debug('plType %j %j', stateChar, re)\n        stateChar = false\n      continue\n\n      case ')':\n        if (inClass || !patternListStack.length) {\n          re += '\\\\)'\n          continue\n        }\n\n        clearStateChar()\n        hasMagic = true\n        var pl = patternListStack.pop()\n        // negation is (?:(?!js)[^/]*)\n        // The others are (?:<pattern>)<type>\n        re += pl.close\n        if (pl.type === '!') {\n          negativeLists.push(pl)\n        }\n        pl.reEnd = re.length\n      continue\n\n      case '|':\n        if (inClass || !patternListStack.length || escaping) {\n          re += '\\\\|'\n          escaping = false\n          continue\n        }\n\n        clearStateChar()\n        re += '|'\n      continue\n\n      // these are mostly the same in regexp and glob\n      case '[':\n        // swallow any state-tracking char before the [\n        clearStateChar()\n\n        if (inClass) {\n          re += '\\\\' + c\n          continue\n        }\n\n        inClass = true\n        classStart = i\n        reClassStart = re.length\n        re += c\n      continue\n\n      case ']':\n        //  a right bracket shall lose its special\n        //  meaning and represent itself in\n        //  a bracket expression if it occurs\n        //  first in the list.  -- POSIX.2 2.8.3.2\n        if (i === classStart + 1 || !inClass) {\n          re += '\\\\' + c\n          escaping = false\n          continue\n        }\n\n        // handle the case where we left a class open.\n        // \"[z-a]\" is valid, equivalent to \"\\[z-a\\]\"\n        if (inClass) {\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          var cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + cs + ']')\n          } catch (er) {\n            // not a valid class!\n            var sp = this.parse(cs, SUBPARSE)\n            re = re.substr(0, reClassStart) + '\\\\[' + sp[0] + '\\\\]'\n            hasMagic = hasMagic || sp[1]\n            inClass = false\n            continue\n          }\n        }\n\n        // finish up the class.\n        hasMagic = true\n        inClass = false\n        re += c\n      continue\n\n      default:\n        // swallow any state char that wasn't consumed\n        clearStateChar()\n\n        if (escaping) {\n          // no need\n          escaping = false\n        } else if (reSpecials[c]\n          && !(c === '^' && inClass)) {\n          re += '\\\\'\n        }\n\n        re += c\n\n    } // switch\n  } // for\n\n  // handle the case where we left a class open.\n  // \"[abc\" is valid, equivalent to \"\\[abc\"\n  if (inClass) {\n    // split where the last [ was, and escape it\n    // this is a huge pita.  We now have to re-walk\n    // the contents of the would-be class to re-translate\n    // any characters that were passed through as-is\n    cs = pattern.substr(classStart + 1)\n    sp = this.parse(cs, SUBPARSE)\n    re = re.substr(0, reClassStart) + '\\\\[' + sp[0]\n    hasMagic = hasMagic || sp[1]\n  }\n\n  // handle the case where we had a +( thing at the *end*\n  // of the pattern.\n  // each pattern list stack adds 3 chars, and we need to go through\n  // and escape any | chars that were passed through as-is for the regexp.\n  // Go through and escape them, taking care not to double-escape any\n  // | chars that were already escaped.\n  for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n    var tail = re.slice(pl.reStart + pl.open.length)\n    this.debug('setting tail', re, pl)\n    // maybe some even number of \\, then maybe 1 \\, followed by a |\n    tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, function (_, $1, $2) {\n      if (!$2) {\n        // the | isn't already escaped, so escape it.\n        $2 = '\\\\'\n      }\n\n      // need to escape all those slashes *again*, without escaping the\n      // one that we need for escaping the | character.  As it works out,\n      // escaping an even number of slashes can be done by simply repeating\n      // it exactly after itself.  That's why this trick works.\n      //\n      // I am sorry that you have to see this.\n      return $1 + $1 + $2 + '|'\n    })\n\n    this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n    var t = pl.type === '*' ? star\n      : pl.type === '?' ? qmark\n      : '\\\\' + pl.type\n\n    hasMagic = true\n    re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n  }\n\n  // handle trailing things that only matter at the very end.\n  clearStateChar()\n  if (escaping) {\n    // trailing \\\\\n    re += '\\\\\\\\'\n  }\n\n  // only need to apply the nodot start if the re starts with\n  // something that could conceivably capture a dot\n  var addPatternStart = false\n  switch (re.charAt(0)) {\n    case '.':\n    case '[':\n    case '(': addPatternStart = true\n  }\n\n  // Hack to work around lack of negative lookbehind in JS\n  // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n  // like 'a.xyz.yz' doesn't match.  So, the first negative\n  // lookahead, has to look ALL the way ahead, to the end of\n  // the pattern.\n  for (var n = negativeLists.length - 1; n > -1; n--) {\n    var nl = negativeLists[n]\n\n    var nlBefore = re.slice(0, nl.reStart)\n    var nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n    var nlLast = re.slice(nl.reEnd - 8, nl.reEnd)\n    var nlAfter = re.slice(nl.reEnd)\n\n    nlLast += nlAfter\n\n    // Handle nested stuff like *(*.js|!(*.json)), where open parens\n    // mean that we should *not* include the ) in the bit that is considered\n    // \"after\" the negated section.\n    var openParensBefore = nlBefore.split('(').length - 1\n    var cleanAfter = nlAfter\n    for (i = 0; i < openParensBefore; i++) {\n      cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n    }\n    nlAfter = cleanAfter\n\n    var dollar = ''\n    if (nlAfter === '' && isSub !== SUBPARSE) {\n      dollar = '$'\n    }\n    var newRe = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    re = newRe\n  }\n\n  // if the re is not \"\" at this point, then we need to make sure\n  // it doesn't match against an empty path part.\n  // Otherwise a/* will match a/, which it should not.\n  if (re !== '' && hasMagic) {\n    re = '(?=.)' + re\n  }\n\n  if (addPatternStart) {\n    re = patternStart + re\n  }\n\n  // parsing just a piece of a larger pattern.\n  if (isSub === SUBPARSE) {\n    return [re, hasMagic]\n  }\n\n  // skip the regexp for non-magical patterns\n  // unescape anything in it, though, so that it'll be\n  // an exact match against a file etc.\n  if (!hasMagic) {\n    return globUnescape(pattern)\n  }\n\n  var flags = options.nocase ? 'i' : ''\n  try {\n    var regExp = new RegExp('^' + re + '$', flags)\n  } catch (er) {\n    // If it was an invalid regular expression, then it can't match\n    // anything.  This trick looks for a character after the end of\n    // the string, which is of course impossible, except in multi-line\n    // mode, but it's not a /m regex.\n    return new RegExp('$.')\n  }\n\n  regExp._glob = pattern\n  regExp._src = re\n\n  return regExp\n}\n\nminimatch.makeRe = function (pattern, options) {\n  return new Minimatch(pattern, options || {}).makeRe()\n}\n\nMinimatch.prototype.makeRe = makeRe\nfunction makeRe () {\n  if (this.regexp || this.regexp === false) return this.regexp\n\n  // at this point, this.set is a 2d array of partial\n  // pattern strings, or \"**\".\n  //\n  // It's better to use .match().  This function shouldn't\n  // be used, really, but it's pretty convenient sometimes,\n  // when you just want to work with a regex.\n  var set = this.set\n\n  if (!set.length) {\n    this.regexp = false\n    return this.regexp\n  }\n  var options = this.options\n\n  var twoStar = options.noglobstar ? star\n    : options.dot ? twoStarDot\n    : twoStarNoDot\n  var flags = options.nocase ? 'i' : ''\n\n  var re = set.map(function (pattern) {\n    return pattern.map(function (p) {\n      return (p === GLOBSTAR) ? twoStar\n      : (typeof p === 'string') ? regExpEscape(p)\n      : p._src\n    }).join('\\\\\\/')\n  }).join('|')\n\n  // must match entire pattern\n  // ending in a * or ** will make it less strict.\n  re = '^(?:' + re + ')$'\n\n  // can match anything, as long as it's not this.\n  if (this.negate) re = '^(?!' + re + ').*$'\n\n  try {\n    this.regexp = new RegExp(re, flags)\n  } catch (ex) {\n    this.regexp = false\n  }\n  return this.regexp\n}\n\nminimatch.match = function (list, pattern, options) {\n  options = options || {}\n  var mm = new Minimatch(pattern, options)\n  list = list.filter(function (f) {\n    return mm.match(f)\n  })\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\nMinimatch.prototype.match = match\nfunction match (f, partial) {\n  this.debug('match', f, this.pattern)\n  // short-circuit in the case of busted things.\n  // comments, etc.\n  if (this.comment) return false\n  if (this.empty) return f === ''\n\n  if (f === '/' && partial) return true\n\n  var options = this.options\n\n  // windows: need to use /, not \\\n  if (path.sep !== '/') {\n    f = f.split(path.sep).join('/')\n  }\n\n  // treat the test path as a set of pathparts.\n  f = f.split(slashSplit)\n  this.debug(this.pattern, 'split', f)\n\n  // just ONE of the pattern sets in this.set needs to match\n  // in order for it to be valid.  If negating, then just one\n  // match means that we have failed.\n  // Either way, return on the first hit.\n\n  var set = this.set\n  this.debug(this.pattern, 'set', set)\n\n  // Find the basename of the path by looking for the last non-empty segment\n  var filename\n  var i\n  for (i = f.length - 1; i >= 0; i--) {\n    filename = f[i]\n    if (filename) break\n  }\n\n  for (i = 0; i < set.length; i++) {\n    var pattern = set[i]\n    var file = f\n    if (options.matchBase && pattern.length === 1) {\n      file = [filename]\n    }\n    var hit = this.matchOne(file, pattern, partial)\n    if (hit) {\n      if (options.flipNegate) return true\n      return !this.negate\n    }\n  }\n\n  // didn't get any hits.  this is success if it's a negative\n  // pattern, failure otherwise.\n  if (options.flipNegate) return false\n  return this.negate\n}\n\n// set partial to true to test if, for example,\n// \"/a/b\" matches the start of \"/*/b/*/d\"\n// Partial means, if you run out of file before you run\n// out of pattern, then that's fine, as long as all\n// the parts match.\nMinimatch.prototype.matchOne = function (file, pattern, partial) {\n  var options = this.options\n\n  this.debug('matchOne',\n    { 'this': this, file: file, pattern: pattern })\n\n  this.debug('matchOne', file.length, pattern.length)\n\n  for (var fi = 0,\n      pi = 0,\n      fl = file.length,\n      pl = pattern.length\n      ; (fi < fl) && (pi < pl)\n      ; fi++, pi++) {\n    this.debug('matchOne loop')\n    var p = pattern[pi]\n    var f = file[fi]\n\n    this.debug(pattern, p, f)\n\n    // should be impossible.\n    // some invalid regexp stuff in the set.\n    if (p === false) return false\n\n    if (p === GLOBSTAR) {\n      this.debug('GLOBSTAR', [pattern, p, f])\n\n      // \"**\"\n      // a/**/b/**/c would match the following:\n      // a/b/x/y/z/c\n      // a/x/y/z/b/c\n      // a/b/x/b/x/c\n      // a/b/c\n      // To do this, take the rest of the pattern after\n      // the **, and see if it would match the file remainder.\n      // If so, return success.\n      // If not, the ** \"swallows\" a segment, and try again.\n      // This is recursively awful.\n      //\n      // a/**/b/**/c matching a/b/x/y/z/c\n      // - a matches a\n      // - doublestar\n      //   - matchOne(b/x/y/z/c, b/**/c)\n      //     - b matches b\n      //     - doublestar\n      //       - matchOne(x/y/z/c, c) -> no\n      //       - matchOne(y/z/c, c) -> no\n      //       - matchOne(z/c, c) -> no\n      //       - matchOne(c, c) yes, hit\n      var fr = fi\n      var pr = pi + 1\n      if (pr === pl) {\n        this.debug('** at the end')\n        // a ** at the end will just swallow the rest.\n        // We have found a match.\n        // however, it will not swallow /.x, unless\n        // options.dot is set.\n        // . and .. are *never* matched by **, for explosively\n        // exponential reasons.\n        for (; fi < fl; fi++) {\n          if (file[fi] === '.' || file[fi] === '..' ||\n            (!options.dot && file[fi].charAt(0) === '.')) return false\n        }\n        return true\n      }\n\n      // ok, let's see if we can swallow whatever we can.\n      while (fr < fl) {\n        var swallowee = file[fr]\n\n        this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n        // XXX remove this slice.  Just pass the start index.\n        if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n          this.debug('globstar found match!', fr, fl, swallowee)\n          // found a match.\n          return true\n        } else {\n          // can't swallow \".\" or \"..\" ever.\n          // can only swallow \".foo\" when explicitly asked.\n          if (swallowee === '.' || swallowee === '..' ||\n            (!options.dot && swallowee.charAt(0) === '.')) {\n            this.debug('dot detected!', file, fr, pattern, pr)\n            break\n          }\n\n          // ** swallows a segment, and continue.\n          this.debug('globstar swallow a segment, and continue')\n          fr++\n        }\n      }\n\n      // no match was found.\n      // However, in partial mode, we can't say this is necessarily over.\n      // If there's more *pattern* left, then\n      if (partial) {\n        // ran out of file\n        this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n        if (fr === fl) return true\n      }\n      return false\n    }\n\n    // something other than **\n    // non-magic patterns just have to match exactly\n    // patterns with magic have been turned into regexps.\n    var hit\n    if (typeof p === 'string') {\n      if (options.nocase) {\n        hit = f.toLowerCase() === p.toLowerCase()\n      } else {\n        hit = f === p\n      }\n      this.debug('string match', p, f, hit)\n    } else {\n      hit = f.match(p)\n      this.debug('pattern match', p, f, hit)\n    }\n\n    if (!hit) return false\n  }\n\n  // Note: ending in / means that we'll get a final \"\"\n  // at the end of the pattern.  This can only match a\n  // corresponding \"\" at the end of the file.\n  // If the file ends in /, then it can only match a\n  // a pattern that ends in /, unless the pattern just\n  // doesn't have any more for it. But, a/b/ should *not*\n  // match \"a/b/*\", even though \"\" matches against the\n  // [^/]*? pattern, except in partial mode, where it might\n  // simply not be reached yet.\n  // However, a/b/ should still satisfy a/*\n\n  // now either we fell off the end of the pattern, or we're done.\n  if (fi === fl && pi === pl) {\n    // ran out of pattern and filename at the same time.\n    // an exact hit!\n    return true\n  } else if (fi === fl) {\n    // ran out of file, but still had pattern left.\n    // this is ok if we're doing the match as part of\n    // a glob fs traversal.\n    return partial\n  } else if (pi === pl) {\n    // ran out of pattern, still have file left.\n    // this is only acceptable if we're on the very last\n    // empty segment of a file with a trailing slash.\n    // a/* should match a/b/\n    var emptyFileEnd = (fi === fl - 1) && (file[fi] === '')\n    return emptyFileEnd\n  }\n\n  // should be unreachable.\n  throw new Error('wtf?')\n}\n\n// replace stuff like \\* with *\nfunction globUnescape (s) {\n  return s.replace(/\\\\(.)/g, '$1')\n}\n\nfunction regExpEscape (s) {\n  return s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n","'use strict';\n\nfunction posix(path) {\n\treturn path.charAt(0) === '/';\n}\n\nfunction win32(path) {\n\t// https://github.com/nodejs/node/blob/b3fcc245fb25539909ef1d5eaa01dbf92e168633/lib/path.js#L56\n\tvar splitDeviceRe = /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\tvar result = splitDeviceRe.exec(path);\n\tvar device = result[1] || '';\n\tvar isUnc = Boolean(device && device.charAt(1) !== ':');\n\n\t// UNC paths are always absolute\n\treturn Boolean(result[2] || isUnc);\n}\n\nmodule.exports = process.platform === 'win32' ? win32 : posix;\nmodule.exports.posix = posix;\nmodule.exports.win32 = win32;\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2018 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\nvar BaseNetwork = require('./BaseNetwork');\n/* eslint-disable\n    no-param-reassign,\n*/\n// ## The NoFlo network coordinator\n//\n// NoFlo networks consist of processes connected to each other\n// via sockets attached from outports to inports.\n//\n// The role of the network coordinator is to take a graph and\n// instantiate all the necessary processes from the designated\n// components, attach sockets between them, and handle the sending\n// of Initial Information Packets.\n\n\nvar Network = /*#__PURE__*/function (_BaseNetwork) {\n  _inherits(Network, _BaseNetwork);\n\n  var _super = _createSuper(Network);\n\n  // All NoFlo networks are instantiated with a graph. Upon instantiation\n  // they will load all the needed components, instantiate them, and\n  // set up the defined connections and IIPs.\n  function Network(graph) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Network);\n\n    return _super.call(this, graph, options);\n  } // Add a process to the network. The node will also be registered\n  // with the current graph.\n\n\n  _createClass(Network, [{\n    key: \"addNode\",\n    value: function addNode(node, options, callback) {\n      var _this = this;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      _get(_getPrototypeOf(Network.prototype), \"addNode\", this).call(this, node, options, function (err, process) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        if (!options.initial) {\n          _this.graph.addNode(node.id, node.component, node.metadata);\n        }\n\n        callback(null, process);\n      });\n    } // Remove a process from the network. The node will also be removed\n    // from the current graph.\n\n  }, {\n    key: \"removeNode\",\n    value: function removeNode(node, callback) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(Network.prototype), \"removeNode\", this).call(this, node, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this2.graph.removeNode(node.id);\n\n        callback();\n      });\n    } // Rename a process in the network. Renaming a process also modifies\n    // the current graph.\n\n  }, {\n    key: \"renameNode\",\n    value: function renameNode(oldId, newId, callback) {\n      var _this3 = this;\n\n      _get(_getPrototypeOf(Network.prototype), \"renameNode\", this).call(this, oldId, newId, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this3.graph.renameNode(oldId, newId);\n\n        callback();\n      });\n    } // Add a connection to the network. The edge will also be registered\n    // with the current graph.\n\n  }, {\n    key: \"addEdge\",\n    value: function addEdge(edge, options, callback) {\n      var _this4 = this;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      _get(_getPrototypeOf(Network.prototype), \"addEdge\", this).call(this, edge, options, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        if (!options.initial) {\n          _this4.graph.addEdgeIndex(edge.from.node, edge.from.port, edge.from.index, edge.to.node, edge.to.port, edge.to.index, edge.metadata);\n        }\n\n        callback();\n      });\n    } // Remove a connection from the network. The edge will also be removed\n    // from the current graph.\n\n  }, {\n    key: \"removeEdge\",\n    value: function removeEdge(edge, callback) {\n      var _this5 = this;\n\n      _get(_getPrototypeOf(Network.prototype), \"removeEdge\", this).call(this, edge, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this5.graph.removeEdge(edge.from.node, edge.from.port, edge.to.node, edge.to.port);\n\n        callback();\n      });\n    } // Add an IIP to the network. The IIP will also be registered with the\n    // current graph. If the network is running, the IIP will be sent immediately.\n\n  }, {\n    key: \"addInitial\",\n    value: function addInitial(iip, options, callback) {\n      var _this6 = this;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      _get(_getPrototypeOf(Network.prototype), \"addInitial\", this).call(this, iip, options, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        if (!options.initial) {\n          _this6.graph.addInitialIndex(iip.from.data, iip.to.node, iip.to.port, iip.to.index, iip.metadata);\n        }\n\n        callback();\n      });\n    } // Remove an IIP from the network. The IIP will also be removed from the\n    // current graph.\n\n  }, {\n    key: \"removeInitial\",\n    value: function removeInitial(iip, callback) {\n      var _this7 = this;\n\n      _get(_getPrototypeOf(Network.prototype), \"removeInitial\", this).call(this, iip, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this7.graph.removeInitial(iip.to.node, iip.to.port);\n\n        callback();\n      });\n    }\n  }]);\n\n  return Network;\n}(BaseNetwork);\n\nexports.Network = Network;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2018 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable\n    no-param-reassign,\n    no-underscore-dangle,\n*/\nvar _require = require('events'),\n    EventEmitter = _require.EventEmitter;\n\nvar internalSocket = require('./InternalSocket');\n\nvar platform = require('./Platform');\n\nvar componentLoader = require('./ComponentLoader');\n\nvar utils = require('./Utils');\n\nvar IP = require('./IP');\n\nfunction connectPort(socket, process, port, index, inbound, callback) {\n  if (inbound) {\n    socket.to = {\n      process: process,\n      port: port,\n      index: index\n    };\n\n    if (!process.component.inPorts || !process.component.inPorts[port]) {\n      callback(new Error(\"No inport '\".concat(port, \"' defined in process \").concat(process.id, \" (\").concat(socket.getId(), \")\")));\n      return;\n    }\n\n    if (process.component.inPorts[port].isAddressable()) {\n      process.component.inPorts[port].attach(socket, index);\n      callback();\n      return;\n    }\n\n    process.component.inPorts[port].attach(socket);\n    callback();\n    return;\n  }\n\n  socket.from = {\n    process: process,\n    port: port,\n    index: index\n  };\n\n  if (!process.component.outPorts || !process.component.outPorts[port]) {\n    callback(new Error(\"No outport '\".concat(port, \"' defined in process \").concat(process.id, \" (\").concat(socket.getId(), \")\")));\n    return;\n  }\n\n  if (process.component.outPorts[port].isAddressable()) {\n    process.component.outPorts[port].attach(socket, index);\n    callback();\n    return;\n  }\n\n  process.component.outPorts[port].attach(socket);\n  callback();\n}\n\nfunction sendInitial(initial) {\n  initial.socket.post(new IP('data', initial.data, {\n    initial: true\n  }));\n} // ## The NoFlo network coordinator\n//\n// NoFlo networks consist of processes connected to each other\n// via sockets attached from outports to inports.\n//\n// The role of the network coordinator is to take a graph and\n// instantiate all the necessary processes from the designated\n// components, attach sockets between them, and handle the sending\n// of Initial Information Packets.\n\n\nvar BaseNetwork = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(BaseNetwork, _EventEmitter);\n\n  var _super = _createSuper(BaseNetwork);\n\n  // All NoFlo networks are instantiated with a graph. Upon instantiation\n  // they will load all the needed components, instantiate them, and\n  // set up the defined connections and IIPs.\n  function BaseNetwork(graph, options) {\n    var _this;\n\n    _classCallCheck(this, BaseNetwork);\n\n    if (options == null) {\n      options = {};\n    }\n\n    _this = _super.call(this);\n    _this.options = options; // Processes contains all the instantiated components for this network\n\n    _this.processes = {}; // Connections contains all the socket connections in the network\n\n    _this.connections = []; // Initials contains all Initial Information Packets (IIPs)\n\n    _this.initials = [];\n    _this.nextInitials = []; // Container to hold sockets that will be sending default data.\n\n    _this.defaults = []; // The Graph this network is instantiated with\n\n    _this.graph = graph;\n    _this.started = false;\n    _this.stopped = true;\n    _this.debug = true;\n    _this.eventBuffer = []; // On Node.js we default the baseDir for component loading to\n    // the current working directory\n\n    if (!platform.isBrowser()) {\n      _this.baseDir = graph.baseDir || process.cwd(); // On browser we default the baseDir to the Component loading\n      // root\n    } else {\n      _this.baseDir = graph.baseDir || '/';\n    } // As most NoFlo networks are long-running processes, the\n    // network coordinator marks down the start-up time. This\n    // way we can calculate the uptime of the network.\n\n\n    _this.startupDate = null; // Initialize a Component Loader for the network\n\n    if (graph.componentLoader) {\n      _this.loader = graph.componentLoader;\n    } else {\n      _this.loader = new componentLoader.ComponentLoader(_this.baseDir, _this.options);\n    }\n\n    return _this;\n  } // The uptime of the network is the current time minus the start-up\n  // time, in seconds.\n\n\n  _createClass(BaseNetwork, [{\n    key: \"uptime\",\n    value: function uptime() {\n      if (!this.startupDate) {\n        return 0;\n      }\n\n      return new Date() - this.startupDate;\n    }\n  }, {\n    key: \"getActiveProcesses\",\n    value: function getActiveProcesses() {\n      var _this2 = this;\n\n      var active = [];\n\n      if (!this.started) {\n        return active;\n      }\n\n      Object.keys(this.processes).forEach(function (name) {\n        var process = _this2.processes[name];\n\n        if (process.component.load > 0) {\n          // Modern component with load\n          active.push(name);\n        }\n\n        if (process.component.__openConnections > 0) {\n          // Legacy component\n          active.push(name);\n        }\n      });\n      return active;\n    }\n  }, {\n    key: \"bufferedEmit\",\n    value: function bufferedEmit(event, payload) {\n      var _this3 = this;\n\n      // Errors get emitted immediately, like does network end\n      if (['icon', 'error', 'process-error', 'end'].includes(event)) {\n        this.emit(event, payload);\n        return;\n      }\n\n      if (!this.isStarted() && event !== 'end') {\n        this.eventBuffer.push({\n          type: event,\n          payload: payload\n        });\n        return;\n      }\n\n      this.emit(event, payload);\n\n      if (event === 'start') {\n        // Once network has started we can send the IP-related events\n        this.eventBuffer.forEach(function (ev) {\n          _this3.emit(ev.type, ev.payload);\n        });\n        this.eventBuffer = [];\n      }\n\n      if (event === 'ip') {\n        // Emit also the legacy events from IP\n        switch (payload.type) {\n          case 'openBracket':\n            this.bufferedEmit('begingroup', payload);\n            return;\n\n          case 'closeBracket':\n            this.bufferedEmit('endgroup', payload);\n            return;\n\n          case 'data':\n            this.bufferedEmit('data', payload);\n            break;\n\n          default:\n        }\n      }\n    } // ## Loading components\n    //\n    // Components can be passed to the NoFlo network in two ways:\n    //\n    // * As direct, instantiated JavaScript objects\n    // * As filenames\n\n  }, {\n    key: \"load\",\n    value: function load(component, metadata, callback) {\n      this.loader.load(component, callback, metadata);\n    } // ## Add a process to the network\n    //\n    // Processes can be added to a network at either start-up time\n    // or later. The processes are added with a node definition object\n    // that includes the following properties:\n    //\n    // * `id`: Identifier of the process in the network. Typically a string\n    // * `component`: Filename or path of a NoFlo component, or a component instance object\n\n  }, {\n    key: \"addNode\",\n    value: function addNode(node, options, callback) {\n      var _this4 = this;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      } // Processes are treated as singletons by their identifier. If\n      // we already have a process with the given ID, return that.\n\n\n      if (this.processes[node.id]) {\n        callback(null, this.processes[node.id]);\n        return;\n      }\n\n      var process = {\n        id: node.id\n      }; // No component defined, just register the process but don't start.\n\n      if (!node.component) {\n        this.processes[process.id] = process;\n        callback(null, process);\n        return;\n      } // Load the component for the process.\n\n\n      this.load(node.component, node.metadata, function (err, instance) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        instance.nodeId = node.id;\n        process.component = instance;\n        process.componentName = node.component; // Inform the ports of the node name\n\n        var inPorts = process.component.inPorts.ports;\n        var outPorts = process.component.outPorts.ports;\n        Object.keys(inPorts).forEach(function (name) {\n          var port = inPorts[name];\n          port.node = node.id;\n          port.nodeInstance = instance;\n          port.name = name;\n        });\n        Object.keys(outPorts).forEach(function (name) {\n          var port = outPorts[name];\n          port.node = node.id;\n          port.nodeInstance = instance;\n          port.name = name;\n        });\n\n        if (instance.isSubgraph()) {\n          _this4.subscribeSubgraph(process);\n        }\n\n        _this4.subscribeNode(process); // Store and return the process instance\n\n\n        _this4.processes[process.id] = process;\n        callback(null, process);\n      });\n    }\n  }, {\n    key: \"removeNode\",\n    value: function removeNode(node, callback) {\n      var _this5 = this;\n\n      var process = this.getNode(node.id);\n\n      if (!process) {\n        callback(new Error(\"Node \".concat(node.id, \" not found\")));\n        return;\n      }\n\n      process.component.shutdown(function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        delete _this5.processes[node.id];\n        callback(null);\n      });\n    }\n  }, {\n    key: \"renameNode\",\n    value: function renameNode(oldId, newId, callback) {\n      var process = this.getNode(oldId);\n\n      if (!process) {\n        callback(new Error(\"Process \".concat(oldId, \" not found\")));\n        return;\n      } // Inform the process of its ID\n\n\n      process.id = newId; // Inform the ports of the node name\n\n      var inPorts = process.component.inPorts.ports;\n      var outPorts = process.component.outPorts.ports;\n      Object.keys(inPorts).forEach(function (name) {\n        var port = inPorts[name];\n\n        if (!port) {\n          return;\n        }\n\n        port.node = newId;\n      });\n      Object.keys(outPorts).forEach(function (name) {\n        var port = outPorts[name];\n\n        if (!port) {\n          return;\n        }\n\n        port.node = newId;\n      });\n      this.processes[newId] = process;\n      delete this.processes[oldId];\n      callback(null);\n    } // Get process by its ID.\n\n  }, {\n    key: \"getNode\",\n    value: function getNode(id) {\n      return this.processes[id];\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      var _this6 = this;\n\n      var done = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n      // Wrap the future which will be called when done in a function and return\n      // it\n      var callStack = 0;\n\n      var serialize = function serialize(next, add) {\n        return function (type) {\n          // Add either a Node, an Initial, or an Edge and move on to the next one\n          // when done\n          _this6[\"add\".concat(type)](add, {\n            initial: true\n          }, function (err) {\n            if (err) {\n              done(err);\n              return;\n            }\n\n            callStack += 1;\n\n            if (callStack % 100 === 0) {\n              setTimeout(function () {\n                next(type);\n              }, 0);\n              return;\n            }\n\n            next(type);\n          });\n        };\n      }; // Serialize default socket creation then call callback when done\n\n\n      var setDefaults = utils.reduceRight(this.graph.nodes, serialize, function () {\n        done();\n      }); // Serialize initializers then call defaults.\n\n      var initializers = utils.reduceRight(this.graph.initializers, serialize, function () {\n        setDefaults('Defaults');\n      }); // Serialize edge creators then call the initializers.\n\n      var edges = utils.reduceRight(this.graph.edges, serialize, function () {\n        initializers('Initial');\n      }); // Serialize node creators then call the edge creators\n\n      var nodes = utils.reduceRight(this.graph.nodes, serialize, function () {\n        edges('Edge');\n      }); // Start with node creators\n\n      nodes('Node');\n    }\n  }, {\n    key: \"subscribeSubgraph\",\n    value: function subscribeSubgraph(node) {\n      var _this7 = this;\n\n      if (!node.component.isReady()) {\n        node.component.once('ready', function () {\n          _this7.subscribeSubgraph(node);\n        });\n        return;\n      }\n\n      if (!node.component.network) {\n        return;\n      }\n\n      node.component.network.setDebug(this.debug);\n\n      var emitSub = function emitSub(type, data) {\n        if (type === 'process-error' && _this7.listeners('process-error').length === 0) {\n          if (data.id && data.metadata && data.error) {\n            throw data.error;\n          }\n\n          throw data;\n        }\n\n        if (!data) {\n          data = {};\n        }\n\n        if (data.subgraph) {\n          if (!data.subgraph.unshift) {\n            data.subgraph = [data.subgraph];\n          }\n\n          data.subgraph.unshift(node.id);\n        } else {\n          data.subgraph = [node.id];\n        }\n\n        return _this7.bufferedEmit(type, data);\n      };\n\n      node.component.network.on('ip', function (data) {\n        emitSub('ip', data);\n      });\n      node.component.network.on('process-error', function (data) {\n        emitSub('process-error', data);\n      });\n    } // Subscribe to events from all connected sockets and re-emit them\n\n  }, {\n    key: \"subscribeSocket\",\n    value: function subscribeSocket(socket, source) {\n      var _this8 = this;\n\n      socket.on('ip', function (ip) {\n        _this8.bufferedEmit('ip', {\n          id: socket.getId(),\n          type: ip.type,\n          socket: socket,\n          data: ip.data,\n          metadata: socket.metadata\n        });\n      });\n      socket.on('error', function (event) {\n        if (_this8.listeners('process-error').length === 0) {\n          if (event.id && event.metadata && event.error) {\n            throw event.error;\n          }\n\n          throw event;\n        }\n\n        _this8.bufferedEmit('process-error', event);\n      });\n\n      if (!source || !source.component || !source.component.isLegacy()) {\n        return;\n      } // Handle activation for legacy components via connects/disconnects\n\n\n      socket.on('connect', function () {\n        if (!source.component.__openConnections) {\n          source.component.__openConnections = 0;\n        }\n\n        source.component.__openConnections += 1;\n      });\n      socket.on('disconnect', function () {\n        source.component.__openConnections -= 1;\n\n        if (source.component.__openConnections < 0) {\n          source.component.__openConnections = 0;\n        }\n\n        if (source.component.__openConnections === 0) {\n          _this8.checkIfFinished();\n        }\n      });\n    }\n  }, {\n    key: \"subscribeNode\",\n    value: function subscribeNode(node) {\n      var _this9 = this;\n\n      node.component.on('activate', function () {\n        if (_this9.debouncedEnd) {\n          _this9.abortDebounce = true;\n        }\n      });\n      node.component.on('deactivate', function (load) {\n        if (load > 0) {\n          return;\n        }\n\n        _this9.checkIfFinished();\n      });\n\n      if (!node.component.getIcon) {\n        return;\n      }\n\n      node.component.on('icon', function () {\n        _this9.bufferedEmit('icon', {\n          id: node.id,\n          icon: node.component.getIcon()\n        });\n      });\n    }\n  }, {\n    key: \"addEdge\",\n    value: function addEdge(edge, options, callback) {\n      var _this10 = this;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      var socket = internalSocket.createSocket(edge.metadata);\n      socket.setDebug(this.debug);\n      var from = this.getNode(edge.from.node);\n\n      if (!from) {\n        callback(new Error(\"No process defined for outbound node \".concat(edge.from.node)));\n        return;\n      }\n\n      if (!from.component) {\n        callback(new Error(\"No component defined for outbound node \".concat(edge.from.node)));\n        return;\n      }\n\n      if (!from.component.isReady()) {\n        from.component.once('ready', function () {\n          _this10.addEdge(edge, callback);\n        });\n        return;\n      }\n\n      var to = this.getNode(edge.to.node);\n\n      if (!to) {\n        callback(new Error(\"No process defined for inbound node \".concat(edge.to.node)));\n        return;\n      }\n\n      if (!to.component) {\n        callback(new Error(\"No component defined for inbound node \".concat(edge.to.node)));\n        return;\n      }\n\n      if (!to.component.isReady()) {\n        to.component.once('ready', function () {\n          _this10.addEdge(edge, callback);\n        });\n        return;\n      } // Subscribe to events from the socket\n\n\n      this.subscribeSocket(socket, from);\n      connectPort(socket, to, edge.to.port, edge.to.index, true, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        connectPort(socket, from, edge.from.port, edge.from.index, false, function (err2) {\n          if (err2) {\n            callback(err2);\n            return;\n          }\n\n          _this10.connections.push(socket);\n\n          callback();\n        });\n      });\n    }\n  }, {\n    key: \"removeEdge\",\n    value: function removeEdge(edge, callback) {\n      var _this11 = this;\n\n      this.connections.forEach(function (connection) {\n        if (!connection) {\n          return;\n        }\n\n        if (edge.to.node !== connection.to.process.id || edge.to.port !== connection.to.port) {\n          return;\n        }\n\n        connection.to.process.component.inPorts[connection.to.port].detach(connection);\n\n        if (edge.from.node) {\n          if (connection.from && edge.from.node === connection.from.process.id && edge.from.port === connection.from.port) {\n            connection.from.process.component.outPorts[connection.from.port].detach(connection);\n          }\n        }\n\n        _this11.connections.splice(_this11.connections.indexOf(connection), 1);\n\n        callback();\n      });\n    }\n  }, {\n    key: \"addDefaults\",\n    value: function addDefaults(node, options, callback) {\n      var _this12 = this;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      var process = this.getNode(node.id);\n\n      if (!process) {\n        callback(new Error(\"Process \".concat(node.id, \" not defined\")));\n        return;\n      }\n\n      if (!process.component) {\n        callback(new Error(\"No component defined for node \".concat(node.id)));\n        return;\n      }\n\n      if (!process.component.isReady()) {\n        process.component.setMaxListeners(0);\n        process.component.once('ready', function () {\n          _this12.addDefaults(process, callback);\n        });\n        return;\n      }\n\n      Object.keys(process.component.inPorts.ports).forEach(function (key) {\n        // Attach a socket to any defaulted inPorts as long as they aren't already attached.\n        var port = process.component.inPorts.ports[key];\n\n        if (port.hasDefault() && !port.isAttached()) {\n          var socket = internalSocket.createSocket();\n          socket.setDebug(_this12.debug); // Subscribe to events from the socket\n\n          _this12.subscribeSocket(socket);\n\n          connectPort(socket, process, key, undefined, true, function () {});\n\n          _this12.connections.push(socket);\n\n          _this12.defaults.push(socket);\n        }\n      });\n      callback();\n    }\n  }, {\n    key: \"addInitial\",\n    value: function addInitial(initializer, options, callback) {\n      var _this13 = this;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      var socket = internalSocket.createSocket(initializer.metadata);\n      socket.setDebug(this.debug); // Subscribe to events from the socket\n\n      this.subscribeSocket(socket);\n      var to = this.getNode(initializer.to.node);\n\n      if (!to) {\n        callback(new Error(\"No process defined for inbound node \".concat(initializer.to.node)));\n        return;\n      }\n\n      if (!to.component) {\n        callback(new Error(\"No component defined for inbound node \".concat(initializer.to.node)));\n        return;\n      }\n\n      if (!to.component.isReady() && !to.component.inPorts[initializer.to.port]) {\n        to.component.setMaxListeners(0);\n        to.component.once('ready', function () {\n          _this13.addInitial(initializer, callback);\n        });\n        return;\n      }\n\n      connectPort(socket, to, initializer.to.port, initializer.to.index, true, function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this13.connections.push(socket);\n\n        var init = {\n          socket: socket,\n          data: initializer.from.data\n        };\n\n        _this13.initials.push(init);\n\n        _this13.nextInitials.push(init);\n\n        if (_this13.isRunning()) {\n          // Network is running now, send initials immediately\n          _this13.sendInitials();\n        } else if (!_this13.isStopped()) {\n          // Network has finished but hasn't been stopped, set\n          // started and set\n          _this13.setStarted(true);\n\n          _this13.sendInitials();\n        }\n\n        callback();\n      });\n    }\n  }, {\n    key: \"removeInitial\",\n    value: function removeInitial(initializer, callback) {\n      var _this14 = this;\n\n      this.connections.forEach(function (connection) {\n        if (!connection) {\n          return;\n        }\n\n        if (initializer.to.node !== connection.to.process.id || initializer.to.port !== connection.to.port) {\n          return;\n        }\n\n        connection.to.process.component.inPorts[connection.to.port].detach(connection);\n\n        _this14.connections.splice(_this14.connections.indexOf(connection), 1);\n\n        for (var i = 0; i < _this14.initials.length; i += 1) {\n          var init = _this14.initials[i];\n\n          if (!init) {\n            return;\n          }\n\n          if (init.socket !== connection) {\n            return;\n          }\n\n          _this14.initials.splice(_this14.initials.indexOf(init), 1);\n        }\n\n        for (var _i = 0; _i < _this14.nextInitials.length; _i += 1) {\n          var _init = _this14.nextInitials[_i];\n\n          if (!_init) {\n            return;\n          }\n\n          if (_init.socket !== connection) {\n            return;\n          }\n\n          _this14.nextInitials.splice(_this14.nextInitials.indexOf(_init), 1);\n        }\n      });\n      callback();\n    }\n  }, {\n    key: \"sendInitials\",\n    value: function sendInitials() {\n      var _this15 = this;\n\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      var send = function send() {\n        _this15.initials.forEach(function (initial) {\n          sendInitial(initial);\n        });\n\n        _this15.initials = [];\n        callback();\n      };\n\n      if (typeof process !== 'undefined' && process.execPath && process.execPath.indexOf('node') !== -1) {\n        // nextTick is faster on Node.js\n        process.nextTick(send);\n      } else {\n        setTimeout(send, 0);\n      }\n    }\n  }, {\n    key: \"isStarted\",\n    value: function isStarted() {\n      return this.started;\n    }\n  }, {\n    key: \"isStopped\",\n    value: function isStopped() {\n      return this.stopped;\n    }\n  }, {\n    key: \"isRunning\",\n    value: function isRunning() {\n      return this.getActiveProcesses().length > 0;\n    }\n  }, {\n    key: \"startComponents\",\n    value: function startComponents() {\n      var _this16 = this;\n\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n      // Emit start event when all processes are started\n      var count = 0;\n      var length = this.processes ? Object.keys(this.processes).length : 0;\n\n      var onProcessStart = function onProcessStart(err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        count += 1;\n\n        if (count === length) {\n          callback();\n        }\n      }; // Perform any startup routines necessary for every component.\n\n\n      if (!this.processes || !Object.keys(this.processes).length) {\n        callback();\n        return;\n      }\n\n      Object.keys(this.processes).forEach(function (id) {\n        var process = _this16.processes[id];\n\n        if (process.component.isStarted()) {\n          onProcessStart();\n          return;\n        }\n\n        if (process.component.start.length === 0) {\n          platform.deprecated('component.start method without callback is deprecated');\n          process.component.start();\n          onProcessStart();\n          return;\n        }\n\n        process.component.start(onProcessStart);\n      });\n    }\n  }, {\n    key: \"sendDefaults\",\n    value: function sendDefaults() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      if (!this.defaults.length) {\n        callback();\n        return;\n      }\n\n      this.defaults.forEach(function (socket) {\n        // Don't send defaults if more than one socket is present on the port.\n        // This case should only happen when a subgraph is created as a component\n        // as its network is instantiated and its inputs are serialized before\n        // a socket is attached from the \"parent\" graph.\n        if (socket.to.process.component.inPorts[socket.to.port].sockets.length !== 1) {\n          return;\n        }\n\n        socket.connect();\n        socket.send();\n        socket.disconnect();\n      });\n      callback();\n    }\n  }, {\n    key: \"start\",\n    value: function start(callback) {\n      var _this17 = this;\n\n      if (!callback) {\n        platform.deprecated('Calling network.start() without callback is deprecated');\n\n        callback = function callback() {};\n      }\n\n      if (this.debouncedEnd) {\n        this.abortDebounce = true;\n      }\n\n      if (this.started) {\n        this.stop(function (err) {\n          if (err) {\n            callback(err);\n            return;\n          }\n\n          _this17.start(callback);\n        });\n        return;\n      }\n\n      this.initials = this.nextInitials.slice(0);\n      this.eventBuffer = [];\n      this.startComponents(function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this17.sendInitials(function (err2) {\n          if (err2) {\n            callback(err2);\n            return;\n          }\n\n          _this17.sendDefaults(function (err3) {\n            if (err3) {\n              callback(err3);\n              return;\n            }\n\n            _this17.setStarted(true);\n\n            callback(null);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(callback) {\n      var _this18 = this;\n\n      if (!callback) {\n        platform.deprecated('Calling network.stop() without callback is deprecated');\n\n        callback = function callback() {};\n      }\n\n      if (this.debouncedEnd) {\n        this.abortDebounce = true;\n      }\n\n      if (!this.started) {\n        this.stopped = true;\n        callback(null);\n        return;\n      } // Disconnect all connections\n\n\n      this.connections.forEach(function (connection) {\n        if (!connection.isConnected()) {\n          return;\n        }\n\n        connection.disconnect();\n      }); // Emit stop event when all processes are stopped\n\n      var count = 0;\n      var length = this.processes ? Object.keys(this.processes).length : 0;\n\n      var onProcessEnd = function onProcessEnd(err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        count += 1;\n\n        if (count === length) {\n          _this18.setStarted(false);\n\n          _this18.stopped = true;\n          callback();\n        }\n      };\n\n      if (!this.processes || !Object.keys(this.processes).length) {\n        this.setStarted(false);\n        this.stopped = true;\n        callback();\n        return;\n      } // Tell processes to shut down\n\n\n      Object.keys(this.processes).forEach(function (id) {\n        var process = _this18.processes[id];\n\n        if (!process.component.isStarted()) {\n          onProcessEnd();\n          return;\n        }\n\n        if (process.component.shutdown.length === 0) {\n          platform.deprecated('component.shutdown method without callback is deprecated');\n          process.component.shutdown();\n          onProcessEnd();\n          return;\n        }\n\n        process.component.shutdown(onProcessEnd);\n      });\n    }\n  }, {\n    key: \"setStarted\",\n    value: function setStarted(started) {\n      if (this.started === started) {\n        return;\n      }\n\n      if (!started) {\n        // Ending the execution\n        this.started = false;\n        this.bufferedEmit('end', {\n          start: this.startupDate,\n          end: new Date(),\n          uptime: this.uptime()\n        });\n        return;\n      } // Starting the execution\n\n\n      if (!this.startupDate) {\n        this.startupDate = new Date();\n      }\n\n      this.started = true;\n      this.stopped = false;\n      this.bufferedEmit('start', {\n        start: this.startupDate\n      });\n    }\n  }, {\n    key: \"checkIfFinished\",\n    value: function checkIfFinished() {\n      var _this19 = this;\n\n      if (this.isRunning()) {\n        return;\n      }\n\n      delete this.abortDebounce;\n\n      if (!this.debouncedEnd) {\n        this.debouncedEnd = utils.debounce(function () {\n          if (_this19.abortDebounce) {\n            return;\n          }\n\n          if (_this19.isRunning()) {\n            return;\n          }\n\n          _this19.setStarted(false);\n        }, 50);\n      }\n\n      this.debouncedEnd();\n    }\n  }, {\n    key: \"getDebug\",\n    value: function getDebug() {\n      return this.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(active) {\n      var _this20 = this;\n\n      if (active === this.debug) {\n        return;\n      }\n\n      this.debug = active;\n      this.connections.forEach(function (socket) {\n        socket.setDebug(active);\n      });\n      Object.keys(this.processes).forEach(function (processId) {\n        var process = _this20.processes[processId];\n        var instance = process.component;\n\n        if (instance.isSubgraph()) {\n          instance.network.setDebug(active);\n        }\n      });\n    }\n  }]);\n\n  return BaseNetwork;\n}(EventEmitter);\n\nmodule.exports = BaseNetwork;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2017 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable\n    class-methods-use-this,\n    no-underscore-dangle,\n*/\nvar _require = require('events'),\n    EventEmitter = _require.EventEmitter;\n\nvar debug = require('debug')('noflo:component');\n\nvar debugBrackets = require('debug')('noflo:component:brackets');\n\nvar debugSend = require('debug')('noflo:component:send');\n\nvar ports = require('./Ports');\n\nvar ProcessContext = require('./ProcessContext');\n\nvar ProcessInput = require('./ProcessInput');\n\nvar ProcessOutput = require('./ProcessOutput'); // ## NoFlo Component Base class\n//\n// The `noflo.Component` interface provides a way to instantiate\n// and extend NoFlo components.\n\n\nvar Component = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Component, _EventEmitter);\n\n  var _super = _createSuper(Component);\n\n  function Component() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Component);\n\n    _this = _super.call(this);\n    var opts = options; // Prepare inports, if any were given in options.\n    // They can also be set up imperatively after component\n    // instantiation by using the `component.inPorts.add`\n    // method.\n\n    if (!opts.inPorts) {\n      opts.inPorts = {};\n    }\n\n    if (opts.inPorts instanceof ports.InPorts) {\n      _this.inPorts = opts.inPorts;\n    } else {\n      _this.inPorts = new ports.InPorts(opts.inPorts);\n    } // Prepare outports, if any were given in opts.\n    // They can also be set up imperatively after component\n    // instantiation by using the `component.outPorts.add`\n    // method.\n\n\n    if (!opts.outPorts) {\n      opts.outPorts = {};\n    }\n\n    if (opts.outPorts instanceof ports.OutPorts) {\n      _this.outPorts = opts.outPorts;\n    } else {\n      _this.outPorts = new ports.OutPorts(opts.outPorts);\n    } // Set the default component icon and description\n\n\n    _this.icon = opts.icon ? opts.icon : _this.constructor.icon;\n    _this.description = opts.description ? opts.description : _this.constructor.description; // Initially the component is not started\n\n    _this.started = false;\n    _this.load = 0; // Whether the component should keep send packets\n    // out in the order they were received\n\n    _this.ordered = opts.ordered != null ? opts.ordered : false;\n    _this.autoOrdering = opts.autoOrdering != null ? opts.autoOrdering : null; // Queue for handling ordered output packets\n\n    _this.outputQ = []; // Context used for bracket forwarding\n\n    _this.bracketContext = {\n      \"in\": {},\n      out: {}\n    }; // Whether the component should activate when it\n    // receives packets\n\n    _this.activateOnInput = opts.activateOnInput != null ? opts.activateOnInput : true; // Bracket forwarding rules. By default we forward\n    // brackets from `in` port to `out` and `error` ports.\n\n    _this.forwardBrackets = {\n      \"in\": ['out', 'error']\n    };\n\n    if ('forwardBrackets' in opts) {\n      _this.forwardBrackets = opts.forwardBrackets;\n    } // The component's process function can either be\n    // passed in opts, or given imperatively after\n    // instantation using the `component.process` method.\n\n\n    if (typeof opts.process === 'function') {\n      _this.process(opts.process);\n    }\n\n    return _this;\n  }\n\n  _createClass(Component, [{\n    key: \"getDescription\",\n    value: function getDescription() {\n      return this.description;\n    }\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      return true;\n    }\n  }, {\n    key: \"isSubgraph\",\n    value: function isSubgraph() {\n      return false;\n    }\n  }, {\n    key: \"setIcon\",\n    value: function setIcon(icon) {\n      this.icon = icon;\n      this.emit('icon', this.icon);\n    }\n  }, {\n    key: \"getIcon\",\n    value: function getIcon() {\n      return this.icon;\n    } // ### Error emitting helper\n    //\n    // If component has an `error` outport that is connected, errors\n    // are sent as IP objects there. If the port is not connected,\n    // errors are thrown.\n\n  }, {\n    key: \"error\",\n    value: function error(e) {\n      var _this2 = this;\n\n      var groups = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var errorPort = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'error';\n      var scope = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n      if (this.outPorts[errorPort] && (this.outPorts[errorPort].isAttached() || !this.outPorts[errorPort].isRequired())) {\n        groups.forEach(function (group) {\n          _this2.outPorts[errorPort].openBracket(group, {\n            scope: scope\n          });\n        });\n        this.outPorts[errorPort].data(e, {\n          scope: scope\n        });\n        groups.forEach(function (group) {\n          _this2.outPorts[errorPort].closeBracket(group, {\n            scope: scope\n          });\n        });\n        return;\n      }\n\n      throw e;\n    } // ### Setup\n    //\n    // The setUp method is for component-specific initialization.\n    // Called at network start-up.\n    //\n    // Override in component implementation to do component-specific\n    // setup work.\n\n  }, {\n    key: \"setUp\",\n    value: function setUp(callback) {\n      callback();\n    } // ### Setup\n    //\n    // The tearDown method is for component-specific cleanup. Called\n    // at network shutdown\n    //\n    // Override in component implementation to do component-specific\n    // cleanup work, like clearing any accumulated state.\n\n  }, {\n    key: \"tearDown\",\n    value: function tearDown(callback) {\n      callback();\n    } // ### Start\n    //\n    // Called when network starts. This sets calls the setUp\n    // method and sets the component to a started state.\n\n  }, {\n    key: \"start\",\n    value: function start(callback) {\n      var _this3 = this;\n\n      if (this.isStarted()) {\n        callback();\n        return;\n      }\n\n      this.setUp(function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this3.started = true;\n\n        _this3.emit('start');\n\n        callback(null);\n      });\n    } // ### Shutdown\n    //\n    // Called when network is shut down. This sets calls the\n    // tearDown method and sets the component back to a\n    // non-started state.\n    //\n    // The callback is called when tearDown finishes and\n    // all active processing contexts have ended.\n\n  }, {\n    key: \"shutdown\",\n    value: function shutdown(callback) {\n      var _this4 = this;\n\n      var finalize = function finalize() {\n        // Clear contents of inport buffers\n        var inPorts = _this4.inPorts.ports || _this4.inPorts;\n        Object.keys(inPorts).forEach(function (portName) {\n          var inPort = inPorts[portName];\n\n          if (typeof inPort.clear !== 'function') {\n            return;\n          }\n\n          inPort.clear();\n        }); // Clear bracket context\n\n        _this4.bracketContext = {\n          \"in\": {},\n          out: {}\n        };\n\n        if (!_this4.isStarted()) {\n          callback();\n          return;\n        }\n\n        _this4.started = false;\n\n        _this4.emit('end');\n\n        callback();\n      }; // Tell the component that it is time to shut down\n\n\n      this.tearDown(function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        if (_this4.load > 0) {\n          // Some in-flight processes, wait for them to finish\n          var checkLoad = function checkLoad(load) {\n            if (load > 0) {\n              return;\n            }\n\n            _this4.removeListener('deactivate', checkLoad);\n\n            finalize();\n          };\n\n          _this4.on('deactivate', checkLoad);\n\n          return;\n        }\n\n        finalize();\n      });\n    }\n  }, {\n    key: \"isStarted\",\n    value: function isStarted() {\n      return this.started;\n    } // Ensures braket forwarding map is correct for the existing ports\n\n  }, {\n    key: \"prepareForwarding\",\n    value: function prepareForwarding() {\n      var _this5 = this;\n\n      Object.keys(this.forwardBrackets).forEach(function (inPort) {\n        var outPorts = _this5.forwardBrackets[inPort];\n\n        if (!(inPort in _this5.inPorts.ports)) {\n          delete _this5.forwardBrackets[inPort];\n          return;\n        }\n\n        var tmp = [];\n        outPorts.forEach(function (outPort) {\n          if (outPort in _this5.outPorts.ports) {\n            tmp.push(outPort);\n          }\n        });\n\n        if (tmp.length === 0) {\n          delete _this5.forwardBrackets[inPort];\n        } else {\n          _this5.forwardBrackets[inPort] = tmp;\n        }\n      });\n    } // Method for determining if a component is using the modern\n    // NoFlo Process API\n\n  }, {\n    key: \"isLegacy\",\n    value: function isLegacy() {\n      // Process API\n      if (this.handle) {\n        return false;\n      } // Legacy\n\n\n      return true;\n    } // Sets process handler function\n\n  }, {\n    key: \"process\",\n    value: function process(handle) {\n      var _this6 = this;\n\n      if (typeof handle !== 'function') {\n        throw new Error('Process handler must be a function');\n      }\n\n      if (!this.inPorts) {\n        throw new Error('Component ports must be defined before process function');\n      }\n\n      this.prepareForwarding();\n      this.handle = handle;\n      Object.keys(this.inPorts.ports).forEach(function (name) {\n        var port = _this6.inPorts.ports[name];\n\n        if (!port.name) {\n          port.name = name;\n        }\n\n        port.on('ip', function (ip) {\n          return _this6.handleIP(ip, port);\n        });\n      });\n      return this;\n    } // Method for checking if a given inport is set up for\n    // automatic bracket forwarding\n\n  }, {\n    key: \"isForwardingInport\",\n    value: function isForwardingInport(port) {\n      var portName;\n\n      if (typeof port === 'string') {\n        portName = port;\n      } else {\n        portName = port.name;\n      }\n\n      if (portName in this.forwardBrackets) {\n        return true;\n      }\n\n      return false;\n    } // Method for checking if a given outport is set up for\n    // automatic bracket forwarding\n\n  }, {\n    key: \"isForwardingOutport\",\n    value: function isForwardingOutport(inport, outport) {\n      var inportName;\n      var outportName;\n\n      if (typeof inport === 'string') {\n        inportName = inport;\n      } else {\n        inportName = inport.name;\n      }\n\n      if (typeof outport === 'string') {\n        outportName = outport;\n      } else {\n        outportName = outport.name;\n      }\n\n      if (!this.forwardBrackets[inportName]) {\n        return false;\n      }\n\n      if (this.forwardBrackets[inportName].indexOf(outportName) !== -1) {\n        return true;\n      }\n\n      return false;\n    } // Method for checking whether the component sends packets\n    // in the same order they were received.\n\n  }, {\n    key: \"isOrdered\",\n    value: function isOrdered() {\n      if (this.ordered) {\n        return true;\n      }\n\n      if (this.autoOrdering) {\n        return true;\n      }\n\n      return false;\n    } // ### Handling IP objects\n    //\n    // The component has received an Information Packet. Call the\n    // processing function so that firing pattern preconditions can\n    // be checked and component can do processing as needed.\n\n  }, {\n    key: \"handleIP\",\n    value: function handleIP(ip, port) {\n      var context;\n\n      if (!port.options.triggering) {\n        // If port is non-triggering, we can skip the process function call\n        return;\n      }\n\n      if (ip.type === 'openBracket' && this.autoOrdering === null && !this.ordered) {\n        // Switch component to ordered mode when receiving a stream unless\n        // auto-ordering is disabled\n        debug(\"\".concat(this.nodeId, \" port '\").concat(port.name, \"' entered auto-ordering mode\"));\n        this.autoOrdering = true;\n      } // Initialize the result object for situations where output needs\n      // to be queued to be kept in order\n\n\n      var result = {};\n\n      if (this.isForwardingInport(port)) {\n        // For bracket-forwarding inports we need to initialize a bracket context\n        // so that brackets can be sent as part of the output, and closed after.\n        if (ip.type === 'openBracket') {\n          // For forwarding ports openBrackets don't fire\n          return;\n        }\n\n        if (ip.type === 'closeBracket') {\n          // For forwarding ports closeBrackets don't fire\n          // However, we need to handle several different scenarios:\n          // A. There are closeBrackets in queue before current packet\n          // B. There are closeBrackets in queue after current packet\n          // C. We've queued the results from all in-flight processes and\n          //    new closeBracket arrives\n          var buf = port.getBuffer(ip.scope, ip.index);\n          var dataPackets = buf.filter(function (p) {\n            return p.type === 'data';\n          });\n\n          if (this.outputQ.length >= this.load && dataPackets.length === 0) {\n            if (buf[0] !== ip) {\n              return;\n            } // Remove from buffer\n\n\n            port.get(ip.scope, ip.index);\n            context = this.getBracketContext('in', port.name, ip.scope, ip.index).pop();\n            context.closeIp = ip;\n            debugBrackets(\"\".concat(this.nodeId, \" closeBracket-C from '\").concat(context.source, \"' to \").concat(context.ports, \": '\").concat(ip.data, \"'\"));\n            result = {\n              __resolved: true,\n              __bracketClosingAfter: [context]\n            };\n            this.outputQ.push(result);\n            this.processOutputQueue();\n          } // Check if buffer contains data IPs. If it does, we want to allow\n          // firing\n\n\n          if (!dataPackets.length) {\n            return;\n          }\n        }\n      } // Prepare the input/output pair\n\n\n      context = new ProcessContext(ip, this, port, result);\n      var input = new ProcessInput(this.inPorts, context);\n      var output = new ProcessOutput(this.outPorts, context);\n\n      try {\n        // Call the processing function\n        this.handle(input, output, context);\n      } catch (e) {\n        this.deactivate(context);\n        output.sendDone(e);\n      }\n\n      if (context.activated) {\n        return;\n      } // If receiving an IP object didn't cause the component to\n      // activate, log that input conditions were not met\n\n\n      if (port.isAddressable()) {\n        debug(\"\".concat(this.nodeId, \" packet on '\").concat(port.name, \"[\").concat(ip.index, \"]' didn't match preconditions: \").concat(ip.type));\n        return;\n      }\n\n      debug(\"\".concat(this.nodeId, \" packet on '\").concat(port.name, \"' didn't match preconditions: \").concat(ip.type));\n    } // Get the current bracket forwarding context for an IP object\n\n  }, {\n    key: \"getBracketContext\",\n    value: function getBracketContext(type, port, scope, idx) {\n      var _ports$normalizePortN = ports.normalizePortName(port),\n          name = _ports$normalizePortN.name,\n          index = _ports$normalizePortN.index;\n\n      if (idx != null) {\n        index = idx;\n      }\n\n      var portsList = type === 'in' ? this.inPorts : this.outPorts;\n\n      if (portsList[name].isAddressable()) {\n        name = \"\".concat(name, \"[\").concat(index, \"]\");\n      } else {\n        name = port;\n      } // Ensure we have a bracket context for the current scope\n\n\n      if (!this.bracketContext[type][name]) {\n        this.bracketContext[type][name] = {};\n      }\n\n      if (!this.bracketContext[type][name][scope]) {\n        this.bracketContext[type][name][scope] = [];\n      }\n\n      return this.bracketContext[type][name][scope];\n    } // Add an IP object to the list of results to be sent in\n    // order\n\n  }, {\n    key: \"addToResult\",\n    value: function addToResult(result, port, packet) {\n      var before = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var res = result;\n      var ip = packet;\n\n      var _ports$normalizePortN2 = ports.normalizePortName(port),\n          name = _ports$normalizePortN2.name,\n          index = _ports$normalizePortN2.index;\n\n      var method = before ? 'unshift' : 'push';\n\n      if (this.outPorts[name].isAddressable()) {\n        var idx = index ? parseInt(index, 10) : ip.index;\n\n        if (!res[name]) {\n          res[name] = {};\n        }\n\n        if (!res[name][idx]) {\n          res[name][idx] = [];\n        }\n\n        ip.index = idx;\n        res[name][idx][method](ip);\n        return;\n      }\n\n      if (!res[name]) {\n        res[name] = [];\n      }\n\n      res[name][method](ip);\n    } // Get contexts that can be forwarded with this in/outport\n    // pair.\n\n  }, {\n    key: \"getForwardableContexts\",\n    value: function getForwardableContexts(inport, outport, contexts) {\n      var _this7 = this;\n\n      var _ports$normalizePortN3 = ports.normalizePortName(outport),\n          name = _ports$normalizePortN3.name,\n          index = _ports$normalizePortN3.index;\n\n      var forwardable = [];\n      contexts.forEach(function (ctx, idx) {\n        // No forwarding to this outport\n        if (!_this7.isForwardingOutport(inport, name)) {\n          return;\n        } // We have already forwarded this context to this outport\n\n\n        if (ctx.ports.indexOf(outport) !== -1) {\n          return;\n        } // See if we have already forwarded the same bracket from another\n        // inport\n\n\n        var outContext = _this7.getBracketContext('out', name, ctx.ip.scope, index)[idx];\n\n        if (outContext) {\n          if (outContext.ip.data === ctx.ip.data && outContext.ports.indexOf(outport) !== -1) {\n            return;\n          }\n        }\n\n        forwardable.push(ctx);\n      });\n      return forwardable;\n    } // Add any bracket forwards needed to the result queue\n\n  }, {\n    key: \"addBracketForwards\",\n    value: function addBracketForwards(result) {\n      var _this8 = this;\n\n      var res = result;\n\n      if (res.__bracketClosingBefore != null ? res.__bracketClosingBefore.length : undefined) {\n        res.__bracketClosingBefore.forEach(function (context) {\n          debugBrackets(\"\".concat(_this8.nodeId, \" closeBracket-A from '\").concat(context.source, \"' to \").concat(context.ports, \": '\").concat(context.closeIp.data, \"'\"));\n\n          if (!context.ports.length) {\n            return;\n          }\n\n          context.ports.forEach(function (port) {\n            var ipClone = context.closeIp.clone();\n\n            _this8.addToResult(res, port, ipClone, true);\n\n            _this8.getBracketContext('out', port, ipClone.scope).pop();\n          });\n        });\n      }\n\n      if (res.__bracketContext) {\n        // First see if there are any brackets to forward. We need to reverse\n        // the keys so that they get added in correct order\n        Object.keys(res.__bracketContext).reverse().forEach(function (inport) {\n          var context = res.__bracketContext[inport];\n\n          if (!context.length) {\n            return;\n          }\n\n          Object.keys(res).forEach(function (outport) {\n            var datas;\n            var forwardedOpens;\n            var unforwarded;\n            var ips = res[outport];\n\n            if (outport.indexOf('__') === 0) {\n              return;\n            }\n\n            if (_this8.outPorts[outport].isAddressable()) {\n              Object.keys(ips).forEach(function (idx) {\n                // Don't register indexes we're only sending brackets to\n                var idxIps = ips[idx];\n                datas = idxIps.filter(function (ip) {\n                  return ip.type === 'data';\n                });\n\n                if (!datas.length) {\n                  return;\n                }\n\n                var portIdentifier = \"\".concat(outport, \"[\").concat(idx, \"]\");\n                unforwarded = _this8.getForwardableContexts(inport, portIdentifier, context);\n\n                if (!unforwarded.length) {\n                  return;\n                }\n\n                forwardedOpens = [];\n                unforwarded.forEach(function (ctx) {\n                  debugBrackets(\"\".concat(_this8.nodeId, \" openBracket from '\").concat(inport, \"' to '\").concat(portIdentifier, \"': '\").concat(ctx.ip.data, \"'\"));\n                  var ipClone = ctx.ip.clone();\n                  ipClone.index = parseInt(idx, 10);\n                  forwardedOpens.push(ipClone);\n                  ctx.ports.push(portIdentifier);\n\n                  _this8.getBracketContext('out', outport, ctx.ip.scope, idx).push(ctx);\n                });\n                forwardedOpens.reverse();\n                forwardedOpens.forEach(function (ip) {\n                  _this8.addToResult(res, outport, ip, true);\n                });\n              });\n              return;\n            } // Don't register ports we're only sending brackets to\n\n\n            datas = ips.filter(function (ip) {\n              return ip.type === 'data';\n            });\n\n            if (!datas.length) {\n              return;\n            }\n\n            unforwarded = _this8.getForwardableContexts(inport, outport, context);\n\n            if (!unforwarded.length) {\n              return;\n            }\n\n            forwardedOpens = [];\n            unforwarded.forEach(function (ctx) {\n              debugBrackets(\"\".concat(_this8.nodeId, \" openBracket from '\").concat(inport, \"' to '\").concat(outport, \"': '\").concat(ctx.ip.data, \"'\"));\n              forwardedOpens.push(ctx.ip.clone());\n              ctx.ports.push(outport);\n\n              _this8.getBracketContext('out', outport, ctx.ip.scope).push(ctx);\n            });\n            forwardedOpens.reverse();\n            forwardedOpens.forEach(function (ip) {\n              _this8.addToResult(res, outport, ip, true);\n            });\n          });\n        });\n      }\n\n      if (res.__bracketClosingAfter != null ? res.__bracketClosingAfter.length : undefined) {\n        res.__bracketClosingAfter.forEach(function (context) {\n          debugBrackets(\"\".concat(_this8.nodeId, \" closeBracket-B from '\").concat(context.source, \"' to \").concat(context.ports, \": '\").concat(context.closeIp.data, \"'\"));\n\n          if (!context.ports.length) {\n            return;\n          }\n\n          context.ports.forEach(function (port) {\n            var ipClone = context.closeIp.clone();\n\n            _this8.addToResult(res, port, ipClone, false);\n\n            _this8.getBracketContext('out', port, ipClone.scope).pop();\n          });\n        });\n      }\n\n      delete res.__bracketClosingBefore;\n      delete res.__bracketContext;\n      delete res.__bracketClosingAfter;\n    } // Whenever an execution context finishes, send all resolved\n    // output from the queue in the order it is in.\n\n  }, {\n    key: \"processOutputQueue\",\n    value: function processOutputQueue() {\n      var _this9 = this;\n\n      var _loop = function _loop() {\n        if (!_this9.outputQ[0].__resolved) {\n          return \"break\";\n        }\n\n        var result = _this9.outputQ.shift();\n\n        _this9.addBracketForwards(result);\n\n        Object.keys(result).forEach(function (port) {\n          var portIdentifier;\n          var ips = result[port];\n\n          if (port.indexOf('__') === 0) {\n            return;\n          }\n\n          if (_this9.outPorts.ports[port].isAddressable()) {\n            Object.keys(ips).forEach(function (index) {\n              var idxIps = ips[index];\n              var idx = parseInt(index, 10);\n\n              if (!_this9.outPorts.ports[port].isAttached(idx)) {\n                return;\n              }\n\n              idxIps.forEach(function (packet) {\n                var ip = packet;\n                portIdentifier = \"\".concat(port, \"[\").concat(ip.index, \"]\");\n\n                if (ip.type === 'openBracket') {\n                  debugSend(\"\".concat(_this9.nodeId, \" sending \").concat(portIdentifier, \" < '\").concat(ip.data, \"'\"));\n                } else if (ip.type === 'closeBracket') {\n                  debugSend(\"\".concat(_this9.nodeId, \" sending \").concat(portIdentifier, \" > '\").concat(ip.data, \"'\"));\n                } else {\n                  debugSend(\"\".concat(_this9.nodeId, \" sending \").concat(portIdentifier, \" DATA\"));\n                }\n\n                if (!_this9.outPorts[port].options.scoped) {\n                  ip.scope = null;\n                }\n\n                _this9.outPorts[port].sendIP(ip);\n              });\n            });\n            return;\n          }\n\n          if (!_this9.outPorts.ports[port].isAttached()) {\n            return;\n          }\n\n          ips.forEach(function (packet) {\n            var ip = packet;\n            portIdentifier = port;\n\n            if (ip.type === 'openBracket') {\n              debugSend(\"\".concat(_this9.nodeId, \" sending \").concat(portIdentifier, \" < '\").concat(ip.data, \"'\"));\n            } else if (ip.type === 'closeBracket') {\n              debugSend(\"\".concat(_this9.nodeId, \" sending \").concat(portIdentifier, \" > '\").concat(ip.data, \"'\"));\n            } else {\n              debugSend(\"\".concat(_this9.nodeId, \" sending \").concat(portIdentifier, \" DATA\"));\n            }\n\n            if (!_this9.outPorts[port].options.scoped) {\n              ip.scope = null;\n            }\n\n            _this9.outPorts[port].sendIP(ip);\n          });\n        });\n      };\n\n      while (this.outputQ.length > 0) {\n        var _ret = _loop();\n\n        if (_ret === \"break\") break;\n      }\n    } // Signal that component has activated. There may be multiple\n    // activated contexts at the same time\n\n  }, {\n    key: \"activate\",\n    value: function activate(context) {\n      if (context.activated) {\n        return;\n      } // prevent double activation\n\n\n      context.activated = true;\n      context.deactivated = false;\n      this.load += 1;\n      this.emit('activate', this.load);\n\n      if (this.ordered || this.autoOrdering) {\n        this.outputQ.push(context.result);\n      }\n    } // Signal that component has deactivated. There may be multiple\n    // activated contexts at the same time\n\n  }, {\n    key: \"deactivate\",\n    value: function deactivate(context) {\n      if (context.deactivated) {\n        return;\n      } // prevent double deactivation\n\n\n      context.deactivated = true;\n      context.activated = false;\n\n      if (this.isOrdered()) {\n        this.processOutputQueue();\n      }\n\n      this.load -= 1;\n      this.emit('deactivate', this.load);\n    }\n  }]);\n\n  return Component;\n}(EventEmitter);\n\nComponent.description = '';\nComponent.icon = null;\nexports.Component = Component;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/* eslint-disable max-classes-per-file */\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\nvar _require = require('events'),\n    EventEmitter = _require.EventEmitter;\n\nvar InPort = require('./InPort');\n\nvar OutPort = require('./OutPort'); // NoFlo ports collections\n//\n// Ports collection classes for NoFlo components. These are\n// used to hold a set of input or output ports of a component.\n\n\nvar Ports = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Ports, _EventEmitter);\n\n  var _super = _createSuper(Ports);\n\n  function Ports(ports, model) {\n    var _this;\n\n    _classCallCheck(this, Ports);\n\n    _this = _super.call(this);\n    _this.model = model;\n    _this.ports = {};\n\n    if (!ports) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    Object.keys(ports).forEach(function (name) {\n      var options = ports[name];\n\n      _this.add(name, options);\n    });\n    return _this;\n  }\n\n  _createClass(Ports, [{\n    key: \"add\",\n    value: function add(name, options, process) {\n      if (name === 'add' || name === 'remove') {\n        throw new Error('Add and remove are restricted port names');\n      }\n      /* eslint-disable no-useless-escape */\n\n\n      if (!name.match(/^[a-z0-9_\\.\\/]+$/)) {\n        throw new Error(\"Port names can only contain lowercase alphanumeric characters and underscores. '\".concat(name, \"' not allowed\"));\n      } // Remove previous implementation\n\n\n      if (this.ports[name]) {\n        this.remove(name);\n      }\n\n      if (_typeof(options) === 'object' && options.canAttach) {\n        this.ports[name] = options;\n      } else {\n        var Model = this.model;\n        this.ports[name] = new Model(options, process);\n      }\n\n      this[name] = this.ports[name];\n      this.emit('add', name);\n      return this; // chainable\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(name) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not defined\"));\n      }\n\n      delete this.ports[name];\n      delete this[name];\n      this.emit('remove', name);\n      return this; // chainable\n    }\n  }]);\n\n  return Ports;\n}(EventEmitter);\n\nexports.InPorts = /*#__PURE__*/function (_Ports) {\n  _inherits(InPorts, _Ports);\n\n  var _super2 = _createSuper(InPorts);\n\n  function InPorts(ports) {\n    _classCallCheck(this, InPorts);\n\n    return _super2.call(this, ports, InPort);\n  }\n\n  _createClass(InPorts, [{\n    key: \"on\",\n    value: function on(name, event, callback) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not available\"));\n      }\n\n      this.ports[name].on(event, callback);\n    }\n  }, {\n    key: \"once\",\n    value: function once(name, event, callback) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not available\"));\n      }\n\n      this.ports[name].once(event, callback);\n    }\n  }]);\n\n  return InPorts;\n}(Ports);\n\nexports.OutPorts = /*#__PURE__*/function (_Ports2) {\n  _inherits(OutPorts, _Ports2);\n\n  var _super3 = _createSuper(OutPorts);\n\n  function OutPorts(ports) {\n    _classCallCheck(this, OutPorts);\n\n    return _super3.call(this, ports, OutPort);\n  }\n\n  _createClass(OutPorts, [{\n    key: \"connect\",\n    value: function connect(name, socketId) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not available\"));\n      }\n\n      this.ports[name].connect(socketId);\n    }\n  }, {\n    key: \"beginGroup\",\n    value: function beginGroup(name, group, socketId) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not available\"));\n      }\n\n      this.ports[name].beginGroup(group, socketId);\n    }\n  }, {\n    key: \"send\",\n    value: function send(name, data, socketId) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not available\"));\n      }\n\n      this.ports[name].send(data, socketId);\n    }\n  }, {\n    key: \"endGroup\",\n    value: function endGroup(name, socketId) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not available\"));\n      }\n\n      this.ports[name].endGroup(socketId);\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect(name, socketId) {\n      if (!this.ports[name]) {\n        throw new Error(\"Port \".concat(name, \" not available\"));\n      }\n\n      this.ports[name].disconnect(socketId);\n    }\n  }]);\n\n  return OutPorts;\n}(Ports); // Port name normalization:\n// returns object containing keys name and index for ports names in\n// format `portname` or `portname[index]`.\n\n\nexports.normalizePortName = function normalizePortName(name) {\n  var port = {\n    name: name\n  }; // Regular port\n\n  if (name.indexOf('[') === -1) {\n    return port;\n  } // Addressable port with index\n\n\n  var matched = name.match(/(.*)\\[([0-9]+)\\]/);\n\n  if (!(matched != null ? matched.length : undefined)) {\n    return name;\n  }\n\n  return {\n    name: matched[1],\n    index: matched[2]\n  };\n};","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\nvar BasePort = require('./BasePort'); // ## NoFlo inport\n//\n// Input Port (inport) implementation for NoFlo components. These\n// ports are the way a component receives Information Packets.\n\n\nmodule.exports = /*#__PURE__*/function (_BasePort) {\n  _inherits(InPort, _BasePort);\n\n  var _super = _createSuper(InPort);\n\n  function InPort() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, InPort);\n\n    var opts = options;\n\n    if (opts.control == null) {\n      opts.control = false;\n    }\n\n    if (opts.scoped == null) {\n      opts.scoped = true;\n    }\n\n    if (opts.triggering == null) {\n      opts.triggering = true;\n    }\n\n    if (opts.process) {\n      throw new Error('InPort process callback is deprecated. Please use Process API');\n    }\n\n    if (opts.handle) {\n      throw new Error('InPort handle callback is deprecated. Please use Process API');\n    }\n\n    _this = _super.call(this, opts);\n\n    _this.prepareBuffer();\n\n    return _this;\n  } // Assign a delegate for retrieving data should this inPort\n\n\n  _createClass(InPort, [{\n    key: \"attachSocket\",\n    value: function attachSocket(socket) {\n      var _this2 = this;\n\n      var localId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      // have a default value.\n      if (this.hasDefault()) {\n        socket.setDataDelegate(function () {\n          return _this2.options[\"default\"];\n        });\n      }\n\n      socket.on('connect', function () {\n        return _this2.handleSocketEvent('connect', socket, localId);\n      });\n      socket.on('begingroup', function (group) {\n        return _this2.handleSocketEvent('begingroup', group, localId);\n      });\n      socket.on('data', function (data) {\n        _this2.validateData(data);\n\n        return _this2.handleSocketEvent('data', data, localId);\n      });\n      socket.on('endgroup', function (group) {\n        return _this2.handleSocketEvent('endgroup', group, localId);\n      });\n      socket.on('disconnect', function () {\n        return _this2.handleSocketEvent('disconnect', socket, localId);\n      });\n      socket.on('ip', function (ip) {\n        return _this2.handleIP(ip, localId);\n      });\n    }\n  }, {\n    key: \"handleIP\",\n    value: function handleIP(packet, index) {\n      if (this.options.control && packet.type !== 'data') {\n        return;\n      }\n\n      var ip = packet;\n      ip.owner = this.nodeInstance;\n\n      if (this.isAddressable()) {\n        ip.index = index;\n      }\n\n      if (ip.datatype === 'all') {\n        // Stamp non-specific IP objects with port datatype\n        ip.datatype = this.getDataType();\n      }\n\n      if (this.getSchema() && !ip.schema) {\n        // Stamp non-specific IP objects with port schema\n        ip.schema = this.getSchema();\n      }\n\n      var buf = this.prepareBufferForIP(ip);\n      buf.push(ip);\n\n      if (this.options.control && buf.length > 1) {\n        buf.shift();\n      }\n\n      this.emit('ip', ip, index);\n    }\n  }, {\n    key: \"handleSocketEvent\",\n    value: function handleSocketEvent(event, payload, id) {\n      // Emit port event\n      if (this.isAddressable()) {\n        return this.emit(event, payload, id);\n      }\n\n      return this.emit(event, payload);\n    }\n  }, {\n    key: \"hasDefault\",\n    value: function hasDefault() {\n      return this.options[\"default\"] !== undefined;\n    }\n  }, {\n    key: \"prepareBuffer\",\n    value: function prepareBuffer() {\n      if (this.isAddressable()) {\n        if (this.options.scoped) {\n          this.scopedBuffer = {};\n        }\n\n        this.indexedBuffer = {};\n        this.iipBuffer = {};\n        return;\n      }\n\n      if (this.options.scoped) {\n        this.scopedBuffer = {};\n      }\n\n      this.iipBuffer = [];\n      this.buffer = [];\n    }\n  }, {\n    key: \"prepareBufferForIP\",\n    value: function prepareBufferForIP(ip) {\n      if (this.isAddressable()) {\n        if (ip.scope != null && this.options.scoped) {\n          if (!(ip.scope in this.scopedBuffer)) {\n            this.scopedBuffer[ip.scope] = [];\n          }\n\n          if (!(ip.index in this.scopedBuffer[ip.scope])) {\n            this.scopedBuffer[ip.scope][ip.index] = [];\n          }\n\n          return this.scopedBuffer[ip.scope][ip.index];\n        }\n\n        if (ip.initial) {\n          if (!(ip.index in this.iipBuffer)) {\n            this.iipBuffer[ip.index] = [];\n          }\n\n          return this.iipBuffer[ip.index];\n        }\n\n        if (!(ip.index in this.indexedBuffer)) {\n          this.indexedBuffer[ip.index] = [];\n        }\n\n        return this.indexedBuffer[ip.index];\n      }\n\n      if (ip.scope != null && this.options.scoped) {\n        if (!(ip.scope in this.scopedBuffer)) {\n          this.scopedBuffer[ip.scope] = [];\n        }\n\n        return this.scopedBuffer[ip.scope];\n      }\n\n      if (ip.initial) {\n        return this.iipBuffer;\n      }\n\n      return this.buffer;\n    }\n  }, {\n    key: \"validateData\",\n    value: function validateData(data) {\n      if (!this.options.values) {\n        return;\n      }\n\n      if (this.options.values.indexOf(data) === -1) {\n        throw new Error(\"Invalid data='\".concat(data, \"' received, not in [\").concat(this.options.values, \"]\"));\n      }\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(scope, index) {\n      var initial = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (this.isAddressable()) {\n        if (scope != null && this.options.scoped) {\n          if (!(scope in this.scopedBuffer)) {\n            return undefined;\n          }\n\n          if (!(index in this.scopedBuffer[scope])) {\n            return undefined;\n          }\n\n          return this.scopedBuffer[scope][index];\n        }\n\n        if (initial) {\n          if (!(index in this.iipBuffer)) {\n            return undefined;\n          }\n\n          return this.iipBuffer[index];\n        }\n\n        if (!(index in this.indexedBuffer)) {\n          return undefined;\n        }\n\n        return this.indexedBuffer[index];\n      }\n\n      if (scope != null && this.options.scoped) {\n        if (!(scope in this.scopedBuffer)) {\n          return undefined;\n        }\n\n        return this.scopedBuffer[scope];\n      }\n\n      if (initial) {\n        return this.iipBuffer;\n      }\n\n      return this.buffer;\n    }\n  }, {\n    key: \"getFromBuffer\",\n    value: function getFromBuffer(scope, index) {\n      var initial = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var buf = this.getBuffer(scope, index, initial);\n\n      if (!(buf != null ? buf.length : undefined)) {\n        return undefined;\n      }\n\n      if (this.options.control) {\n        return buf[buf.length - 1];\n      }\n\n      return buf.shift();\n    } // Fetches a packet from the port\n\n  }, {\n    key: \"get\",\n    value: function get(scope, index) {\n      var res = this.getFromBuffer(scope, index);\n\n      if (res !== undefined) {\n        return res;\n      } // Try to find an IIP instead\n\n\n      return this.getFromBuffer(null, index, true);\n    }\n  }, {\n    key: \"hasIPinBuffer\",\n    value: function hasIPinBuffer(scope, index, validate) {\n      var initial = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var buf = this.getBuffer(scope, index, initial);\n\n      if (!(buf != null ? buf.length : undefined)) {\n        return false;\n      }\n\n      for (var i = 0; i < buf.length; i += 1) {\n        if (validate(buf[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"hasIIP\",\n    value: function hasIIP(index, validate) {\n      return this.hasIPinBuffer(null, index, validate, true);\n    } // Returns true if port contains packet(s) matching the validator\n\n  }, {\n    key: \"has\",\n    value: function has(scope, index, validate) {\n      var valid = validate;\n      var idx = index;\n\n      if (!this.isAddressable()) {\n        valid = idx;\n        idx = null;\n      }\n\n      if (this.hasIPinBuffer(scope, idx, valid)) {\n        return true;\n      }\n\n      if (this.hasIIP(idx, valid)) {\n        return true;\n      }\n\n      return false;\n    } // Returns the number of data packets in an inport\n\n  }, {\n    key: \"length\",\n    value: function length(scope, index) {\n      var buf = this.getBuffer(scope, index);\n\n      if (!buf) {\n        return 0;\n      }\n\n      return buf.length;\n    } // Tells if buffer has packets or not\n\n  }, {\n    key: \"ready\",\n    value: function ready(scope) {\n      return this.length(scope) > 0;\n    } // Clears inport buffers\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      return this.prepareBuffer();\n    }\n  }]);\n\n  return InPort;\n}(BasePort);","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\nvar _require = require('events'),\n    EventEmitter = _require.EventEmitter; // ## NoFlo Port Base class\n//\n// Base port type used for options normalization. Both inports and outports extend this class.\n// The list of valid datatypes for ports.\n\n\nvar validTypes = ['all', 'string', 'number', 'int', 'object', 'array', 'boolean', 'color', 'date', 'bang', 'function', 'buffer', 'stream'];\n\nfunction handleOptions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  // We default to the `all` type if no explicit datatype\n  // was provided\n  var datatype = options.datatype || 'all'; // Normalize the legacy `integer` type to `int`.\n\n  if (datatype === 'integer') {\n    datatype = 'int';\n  } // By default ports are not required for graph execution\n\n\n  var required = options.required || false; // Ensure datatype defined for the port is valid\n\n  if (validTypes.indexOf(datatype) === -1) {\n    throw new Error(\"Invalid port datatype '\".concat(datatype, \"' specified, valid are \").concat(validTypes.join(', ')));\n  } // Ensure schema defined for the port is valid\n\n\n  var schema = options.schema || options.type;\n\n  if (schema && schema.indexOf('/') === -1) {\n    throw new Error(\"Invalid port schema '\".concat(schema, \"' specified. Should be URL or MIME type\"));\n  }\n  /* eslint-disable prefer-object-spread */\n\n\n  return Object.assign({}, options, {\n    datatype: datatype,\n    required: required,\n    schema: schema\n  });\n}\n\nmodule.exports = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(BasePort, _EventEmitter);\n\n  var _super = _createSuper(BasePort);\n\n  function BasePort(options) {\n    var _this;\n\n    _classCallCheck(this, BasePort);\n\n    _this = _super.call(this); // Options holds all options of the current port\n\n    _this.options = handleOptions(options); // Sockets list contains all currently attached\n    // connections to the port\n\n    _this.sockets = []; // Name of the graph node this port is in\n\n    _this.node = null; // Name of the port\n\n    _this.name = null;\n    return _this;\n  }\n\n  _createClass(BasePort, [{\n    key: \"getId\",\n    value: function getId() {\n      if (!this.node || !this.name) {\n        return 'Port';\n      }\n\n      return \"\".concat(this.node, \" \").concat(this.name.toUpperCase());\n    }\n  }, {\n    key: \"getDataType\",\n    value: function getDataType() {\n      return this.options.datatype;\n    }\n  }, {\n    key: \"getSchema\",\n    value: function getSchema() {\n      return this.options.schema || null;\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return this.options.description;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(socket) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var idx = index;\n\n      if (!this.isAddressable() || index === null) {\n        idx = this.sockets.length;\n      }\n\n      this.sockets[idx] = socket;\n      this.attachSocket(socket, idx);\n\n      if (this.isAddressable()) {\n        this.emit('attach', socket, idx);\n        return;\n      }\n\n      this.emit('attach', socket);\n    }\n    /* eslint-disable class-methods-use-this */\n\n  }, {\n    key: \"attachSocket\",\n    value: function attachSocket() {}\n  }, {\n    key: \"detach\",\n    value: function detach(socket) {\n      var index = this.sockets.indexOf(socket);\n\n      if (index === -1) {\n        return;\n      }\n\n      this.sockets[index] = undefined;\n\n      if (this.isAddressable()) {\n        this.emit('detach', socket, index);\n        return;\n      }\n\n      this.emit('detach', socket);\n    }\n  }, {\n    key: \"isAddressable\",\n    value: function isAddressable() {\n      if (this.options.addressable) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isBuffered\",\n    value: function isBuffered() {\n      if (this.options.buffered) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isRequired\",\n    value: function isRequired() {\n      if (this.options.required) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isAttached\",\n    value: function isAttached() {\n      var socketId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (this.isAddressable() && socketId !== null) {\n        if (this.sockets[socketId]) {\n          return true;\n        }\n\n        return false;\n      }\n\n      if (this.sockets.length) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"listAttached\",\n    value: function listAttached() {\n      var attached = [];\n\n      for (var idx = 0; idx < this.sockets.length; idx += 1) {\n        var socket = this.sockets[idx];\n\n        if (socket) {\n          attached.push(idx);\n        }\n      }\n\n      return attached;\n    }\n  }, {\n    key: \"isConnected\",\n    value: function isConnected() {\n      var socketId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (this.isAddressable()) {\n        if (socketId === null) {\n          throw new Error(\"\".concat(this.getId(), \": Socket ID required\"));\n        }\n\n        if (!this.sockets[socketId]) {\n          throw new Error(\"\".concat(this.getId(), \": Socket \").concat(socketId, \" not available\"));\n        }\n\n        return this.sockets[socketId].isConnected();\n      }\n\n      var connected = false;\n      this.sockets.forEach(function (socket) {\n        if (!socket) {\n          return;\n        }\n\n        if (socket.isConnected()) {\n          connected = true;\n        }\n      });\n      return connected;\n    }\n    /* eslint-disable class-methods-use-this */\n\n  }, {\n    key: \"canAttach\",\n    value: function canAttach() {\n      return true;\n    }\n  }]);\n\n  return BasePort;\n}(EventEmitter);","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\nvar BasePort = require('./BasePort');\n\nvar IP = require('./IP'); // ## NoFlo outport\n//\n// Outport Port (outport) implementation for NoFlo components.\n// These ports are the way a component sends Information Packets.\n\n\nmodule.exports = /*#__PURE__*/function (_BasePort) {\n  _inherits(OutPort, _BasePort);\n\n  var _super = _createSuper(OutPort);\n\n  function OutPort() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, OutPort);\n\n    var opts = options;\n\n    if (opts.scoped == null) {\n      opts.scoped = true;\n    }\n\n    _this = _super.call(this, opts);\n    _this.cache = {};\n    return _this;\n  }\n\n  _createClass(OutPort, [{\n    key: \"attach\",\n    value: function attach(socket) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _get(_getPrototypeOf(OutPort.prototype), \"attach\", this).call(this, socket, index);\n\n      if (this.isCaching() && this.cache[index] != null) {\n        this.send(this.cache[index], index);\n      }\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var sockets = this.getSockets(index);\n      this.checkRequired(sockets);\n      sockets.forEach(function (socket) {\n        if (!socket) {\n          return;\n        }\n\n        socket.connect();\n      });\n    }\n  }, {\n    key: \"beginGroup\",\n    value: function beginGroup(group) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var sockets = this.getSockets(index);\n      this.checkRequired(sockets);\n      sockets.forEach(function (socket) {\n        if (!socket) {\n          return;\n        }\n\n        socket.beginGroup(group);\n      });\n    }\n  }, {\n    key: \"send\",\n    value: function send(data) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var sockets = this.getSockets(index);\n      this.checkRequired(sockets);\n\n      if (this.isCaching() && data !== this.cache[index]) {\n        this.cache[index] = data;\n      }\n\n      sockets.forEach(function (socket) {\n        if (!socket) {\n          return;\n        }\n\n        socket.send(data);\n      });\n    }\n  }, {\n    key: \"endGroup\",\n    value: function endGroup() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var sockets = this.getSockets(index);\n      this.checkRequired(sockets);\n      sockets.forEach(function (socket) {\n        if (!socket) {\n          return;\n        }\n\n        socket.endGroup();\n      });\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var sockets = this.getSockets(index);\n      this.checkRequired(sockets);\n      sockets.forEach(function (socket) {\n        if (!socket) {\n          return;\n        }\n\n        socket.disconnect();\n      });\n    }\n  }, {\n    key: \"sendIP\",\n    value: function sendIP(type, data, options, index) {\n      var autoConnect = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var ip;\n      var idx = index;\n\n      if (IP.isIP(type)) {\n        ip = type;\n        idx = ip.index;\n      } else {\n        ip = new IP(type, data, options);\n      }\n\n      var sockets = this.getSockets(idx);\n      this.checkRequired(sockets);\n\n      if (ip.datatype === 'all') {\n        // Stamp non-specific IP objects with port datatype\n        ip.datatype = this.getDataType();\n      }\n\n      if (this.getSchema() && !ip.schema) {\n        // Stamp non-specific IP objects with port schema\n        ip.schema = this.getSchema();\n      }\n\n      var cachedData = this.cache[idx] != null ? this.cache[idx].data : undefined;\n\n      if (this.isCaching() && data !== cachedData) {\n        this.cache[idx] = ip;\n      }\n\n      var pristine = true;\n      sockets.forEach(function (socket) {\n        if (!socket) {\n          return;\n        }\n\n        if (pristine) {\n          socket.post(ip, autoConnect);\n          pristine = false;\n        } else {\n          if (ip.clonable) {\n            ip = ip.clone();\n          }\n\n          socket.post(ip, autoConnect);\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"openBracket\",\n    value: function openBracket() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      return this.sendIP('openBracket', data, options, index);\n    }\n  }, {\n    key: \"data\",\n    value: function data(_data) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      return this.sendIP('data', _data, options, index);\n    }\n  }, {\n    key: \"closeBracket\",\n    value: function closeBracket() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      return this.sendIP('closeBracket', data, options, index);\n    }\n  }, {\n    key: \"checkRequired\",\n    value: function checkRequired(sockets) {\n      if (sockets.length === 0 && this.isRequired()) {\n        throw new Error(\"\".concat(this.getId(), \": No connections available\"));\n      }\n    }\n  }, {\n    key: \"getSockets\",\n    value: function getSockets(index) {\n      // Addressable sockets affect only one connection at time\n      if (this.isAddressable()) {\n        if (index === null) {\n          throw new Error(\"\".concat(this.getId(), \" Socket ID required\"));\n        }\n\n        if (!this.sockets[index]) {\n          return [];\n        }\n\n        return [this.sockets[index]];\n      } // Regular sockets affect all outbound connections\n\n\n      return this.sockets;\n    }\n  }, {\n    key: \"isCaching\",\n    value: function isCaching() {\n      if (this.options.caching) {\n        return true;\n      }\n\n      return false;\n    }\n  }]);\n\n  return OutPort;\n}(BasePort);","module.exports = {\n  stringPatterns: [\n    /'[^]*?'/g,\n    /\"[^]*?\"/g,\n    /`[^]*?`/g\n  ],\n\n  prePatterns: [\n    /\\[[^]*?\\]/,\n    /{[^]*?}/,\n    /=>\\s*?\\([^]*?\\)/,\n    /=\\s*?function\\s*?\\([^]*(?=[^]*\\))/,\n    /=\\s*?\\([^]*(?=[^]*\\))/,\n    /\\s*?=[^>][^,\\)]*/\n  ],\n\n  postPatterns: [\n    /\\([^]*?\\)/,\n  ]\n}\n","const {\n  EventEmitter,\n} = require('events');\n\n/* eslint class-methods-use-this: [\"error\", { \"exceptMethods\": [\"send\", \"sendAll\"] }] */\nconst protocols = {\n  // eslint-disable-next-line global-require\n  Runtime: require('./protocol/Runtime'),\n  // eslint-disable-next-line global-require\n  Graph: require('./protocol/Graph'),\n  // eslint-disable-next-line global-require\n  Network: require('./protocol/Network'),\n  // eslint-disable-next-line global-require\n  Component: require('./protocol/Component'),\n};\n\nconst debugMessagingReceive = require('debug')('noflo-runtime-base:messaging:receive');\nconst debugMessagingReceivePayload = require('debug')('noflo-runtime-base:messaging:receive:payload');\nconst debugMessagingSend = require('debug')('noflo-runtime-base:messaging:send');\nconst debugMessagingSendPayload = require('debug')('noflo-runtime-base:messaging:send:payload');\n\nconst { withNamespace } = require('./utils');\n\n// This is the class all NoFlo runtime implementations can extend to easily wrap\n// into any transport protocol.\nclass BaseTransport extends EventEmitter {\n  constructor(options) {\n    super();\n    this.options = options;\n    if (!this.options) { this.options = {}; }\n    this.version = '0.7';\n    this.component = new protocols.Component(this);\n    this.graph = new protocols.Graph(this);\n    this.network = new protocols.Network(this);\n    this.runtime = new protocols.Runtime(this);\n    this.context = null;\n\n    if ((this.options.captureOutput != null) && this.options.captureOutput) {\n      // Start capturing so that we can send it to the UI when it connects\n      this.startCapture();\n    }\n\n    if (!this.options.capabilities) {\n      this.options.capabilities = [\n        'protocol:graph',\n        'protocol:component',\n        'protocol:network',\n        'protocol:runtime',\n        'component:setsource',\n        'component:getsource',\n        'graph:readonly',\n        'network:data',\n        'network:control',\n        'network:status',\n      ];\n    }\n\n    if (!this.options.defaultPermissions) {\n      // Default: no capabilities granted for anonymous users\n      this.options.defaultPermissions = [];\n    }\n\n    if (!this.options.permissions) {\n      this.options.permissions = {};\n    }\n\n    setTimeout(() => {\n      this._startDefaultGraph();\n    }, 0);\n  }\n\n  // Generate a name for the main graph\n  getGraphName(graph) {\n    const namespace = this.options.namespace || 'default';\n    const graphName = graph.name || 'main';\n    return withNamespace(graphName, namespace);\n  }\n\n  _startDefaultGraph() {\n    if (!this.options.defaultGraph) {\n      this.emit('ready', null);\n      return;\n    }\n    this.options.defaultGraph.baseDir = this.options.baseDir;\n    const graphName = this.getGraphName(this.options.defaultGraph);\n    this.context = 'none';\n    this.network._startNetwork(\n      this.options.defaultGraph,\n      graphName,\n      this.context,\n      (err, network) => {\n        if (err) {\n          this.emit('error', err);\n          return;\n        }\n        this.graph.registerGraph(graphName, this.options.defaultGraph, false);\n        this.runtime.setMainGraph(graphName, this.options.defaultGraph);\n        this.emit('ready', network);\n      },\n    );\n  }\n\n  // Check if a given user is authorized for a given capability\n  //\n  // @param [Array] Capabilities to check\n  // @param [String] Secret provided by user\n  canDo(capability, secret) {\n    let checkCapabilities;\n    if (typeof capability === 'string') {\n      checkCapabilities = [capability];\n    } else {\n      checkCapabilities = capability;\n    }\n    const userCapabilities = this.getPermitted(secret);\n    const permitted = checkCapabilities.filter((perm) => userCapabilities.includes(perm));\n    if (permitted.length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  // Check if a given user is authorized to send a given message\n  canInput(protocol, topic, secret) {\n    if (protocol === 'graph') {\n      // All graph messages are under the same capability\n      return this.canDo(['protocol:graph'], secret);\n    }\n    const message = `${protocol}:${topic}`;\n    switch (message) {\n      case 'component:list': return this.canDo(['protocol:component'], secret);\n      case 'component:getsource': return this.canDo(['component:getsource'], secret);\n      case 'component:source': return this.canDo(['component:setsource'], secret);\n      case 'network:edges': return this.canDo(['network:data', 'protocol:network'], secret);\n      case 'network:start': return this.canDo(['network:control', 'protocol:network'], secret);\n      case 'network:stop': return this.canDo(['network:control', 'protocol:network'], secret);\n      case 'network:debug': return this.canDo(['network:control', 'protocol:network'], secret);\n      case 'network:getstatus': return this.canDo(['network:status', 'network:control', 'protocol:network'], secret);\n      case 'runtime:getruntime': return true;\n      case 'runtime:packet': return this.canDo(['protocol:runtime'], secret);\n      default: return false;\n    }\n  }\n\n  // Get enabled capabilities for a user\n  //\n  // @param [String] Secret provided by user\n  getPermitted(secret) {\n    if (!secret) {\n      return this.options.defaultPermissions;\n    }\n    if (!this.options.permissions[secret]) {\n      return [];\n    }\n    return this.options.permissions[secret];\n  }\n\n  // Send a message back to the user via the transport protocol.\n  //\n  // Each transport implementation should provide their own implementation\n  // of this method.\n  //\n  // The context is usually the context originally received from the\n  // transport with the request. This could be an iframe origin or a\n  // specific WebSocket connection.\n  //\n  // @param [String] Name of the protocol\n  // @param [String] Topic of the message\n  // @param [Object] Message payload\n  // @param [Object] Message context, dependent on the transport\n  send(protocol, topic, payload) {\n    debugMessagingSend(`${protocol} ${topic}`);\n    return debugMessagingSendPayload(payload);\n  }\n\n  // Send a message to *all users*  via the transport protocol\n  //\n  // The transport should verify that the recipients are authorized to receive\n  // the message by using the `canDo` method.\n  //\n  // Like send() only it sends to all.\n  //\n  // @param [String] Name of the protocol\n  // @param [String] Topic of the message\n  // @param [Object] Message payload\n  // @param [Object] Message context, dependent on the transport\n  sendAll() {}\n\n  // This is the entry-point to actual protocol handlers. When receiving\n  // a message, the runtime should call this to make the requested actions\n  // happen\n  //\n  // The context is originally received from the transport. This could be\n  // an iframe origin or a specific WebSocket connection. The context will\n  // be utilized when sending messages back to the requester.\n  //\n  // @param [String] Name of the protocol\n  // @param [String] Topic of the message\n  // @param [Object] Message payload\n  // @param [Object] Message context, dependent on the transport\n  receive(protocol, topic, payload = {}, context) {\n    debugMessagingReceive(`${protocol} ${topic}`);\n    debugMessagingReceivePayload(payload);\n\n    const secret = payload ? payload.secret : null;\n    if (!this.canInput(protocol, topic, secret)) {\n      this.send(protocol, 'error', new Error(`${protocol}:${topic} is not permitted`), context);\n      return;\n    }\n\n    this.context = context;\n    switch (protocol) {\n      case 'runtime': {\n        this.runtime.receive(topic, payload, context);\n        return;\n      }\n      case 'graph': {\n        this.graph.receive(topic, payload, context);\n        return;\n      }\n      case 'network': {\n        this.network.receive(topic, payload, context);\n        return;\n      }\n      case 'component': {\n        this.component.receive(topic, payload, context);\n        return;\n      }\n      default: {\n        this.send(protocol, 'error', new Error(`Protocol ${protocol} is not supported`), context);\n      }\n    }\n  }\n}\n\nmodule.exports = BaseTransport;\nmodule.exports.trace = require('./trace');\nmodule.exports.direct = require('./direct');\n","// Approach:\n//\n// 1. Get the minimatch set\n// 2. For each pattern in the set, PROCESS(pattern, false)\n// 3. Store matches per-set, then uniq them\n//\n// PROCESS(pattern, inGlobStar)\n// Get the first [n] items from pattern that are all strings\n// Join these together.  This is PREFIX.\n//   If there is no more remaining, then stat(PREFIX) and\n//   add to matches if it succeeds.  END.\n//\n// If inGlobStar and PREFIX is symlink and points to dir\n//   set ENTRIES = []\n// else readdir(PREFIX) as ENTRIES\n//   If fail, END\n//\n// with ENTRIES\n//   If pattern[n] is GLOBSTAR\n//     // handle the case where the globstar match is empty\n//     // by pruning it out, and testing the resulting pattern\n//     PROCESS(pattern[0..n] + pattern[n+1 .. $], false)\n//     // handle other cases.\n//     for ENTRY in ENTRIES (not dotfiles)\n//       // attach globstar + tail onto the entry\n//       // Mark that this entry is a globstar match\n//       PROCESS(pattern[0..n] + ENTRY + pattern[n .. $], true)\n//\n//   else // not globstar\n//     for ENTRY in ENTRIES (not dotfiles, unless pattern[n] is dot)\n//       Test ENTRY against pattern[n]\n//       If fails, continue\n//       If passes, PROCESS(pattern[0..n] + item + pattern[n+1 .. $])\n//\n// Caveat:\n//   Cache all stats and readdirs results to minimize syscall.  Since all\n//   we ever care about is existence and directory-ness, we can just keep\n//   `true` for files, and [children,...] for directories, or `false` for\n//   things that don't exist.\n\nmodule.exports = glob\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar inherits = require('inherits')\nvar EE = require('events').EventEmitter\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar globSync = require('./sync.js')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar inflight = require('inflight')\nvar util = require('util')\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nvar once = require('once')\n\nfunction glob (pattern, options, cb) {\n  if (typeof options === 'function') cb = options, options = {}\n  if (!options) options = {}\n\n  if (options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return globSync(pattern, options)\n  }\n\n  return new Glob(pattern, options, cb)\n}\n\nglob.sync = globSync\nvar GlobSync = glob.GlobSync = globSync.GlobSync\n\n// old api surface\nglob.glob = glob\n\nfunction extend (origin, add) {\n  if (add === null || typeof add !== 'object') {\n    return origin\n  }\n\n  var keys = Object.keys(add)\n  var i = keys.length\n  while (i--) {\n    origin[keys[i]] = add[keys[i]]\n  }\n  return origin\n}\n\nglob.hasMagic = function (pattern, options_) {\n  var options = extend({}, options_)\n  options.noprocess = true\n\n  var g = new Glob(pattern, options)\n  var set = g.minimatch.set\n\n  if (!pattern)\n    return false\n\n  if (set.length > 1)\n    return true\n\n  for (var j = 0; j < set[0].length; j++) {\n    if (typeof set[0][j] !== 'string')\n      return true\n  }\n\n  return false\n}\n\nglob.Glob = Glob\ninherits(Glob, EE)\nfunction Glob (pattern, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = null\n  }\n\n  if (options && options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return new GlobSync(pattern, options)\n  }\n\n  if (!(this instanceof Glob))\n    return new Glob(pattern, options, cb)\n\n  setopts(this, pattern, options)\n  this._didRealPath = false\n\n  // process each pattern in the minimatch set\n  var n = this.minimatch.set.length\n\n  // The matches are stored as {<filename>: true,...} so that\n  // duplicates are automagically pruned.\n  // Later, we do an Object.keys() on these.\n  // Keep them as a list so we can fill in when nonull is set.\n  this.matches = new Array(n)\n\n  if (typeof cb === 'function') {\n    cb = once(cb)\n    this.on('error', cb)\n    this.on('end', function (matches) {\n      cb(null, matches)\n    })\n  }\n\n  var self = this\n  this._processing = 0\n\n  this._emitQueue = []\n  this._processQueue = []\n  this.paused = false\n\n  if (this.noprocess)\n    return this\n\n  if (n === 0)\n    return done()\n\n  var sync = true\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false, done)\n  }\n  sync = false\n\n  function done () {\n    --self._processing\n    if (self._processing <= 0) {\n      if (sync) {\n        process.nextTick(function () {\n          self._finish()\n        })\n      } else {\n        self._finish()\n      }\n    }\n  }\n}\n\nGlob.prototype._finish = function () {\n  assert(this instanceof Glob)\n  if (this.aborted)\n    return\n\n  if (this.realpath && !this._didRealpath)\n    return this._realpath()\n\n  common.finish(this)\n  this.emit('end', this.found)\n}\n\nGlob.prototype._realpath = function () {\n  if (this._didRealpath)\n    return\n\n  this._didRealpath = true\n\n  var n = this.matches.length\n  if (n === 0)\n    return this._finish()\n\n  var self = this\n  for (var i = 0; i < this.matches.length; i++)\n    this._realpathSet(i, next)\n\n  function next () {\n    if (--n === 0)\n      self._finish()\n  }\n}\n\nGlob.prototype._realpathSet = function (index, cb) {\n  var matchset = this.matches[index]\n  if (!matchset)\n    return cb()\n\n  var found = Object.keys(matchset)\n  var self = this\n  var n = found.length\n\n  if (n === 0)\n    return cb()\n\n  var set = this.matches[index] = Object.create(null)\n  found.forEach(function (p, i) {\n    // If there's a problem with the stat, then it means that\n    // one or more of the links in the realpath couldn't be\n    // resolved.  just return the abs value in that case.\n    p = self._makeAbs(p)\n    rp.realpath(p, self.realpathCache, function (er, real) {\n      if (!er)\n        set[real] = true\n      else if (er.syscall === 'stat')\n        set[p] = true\n      else\n        self.emit('error', er) // srsly wtf right here\n\n      if (--n === 0) {\n        self.matches[index] = set\n        cb()\n      }\n    })\n  })\n}\n\nGlob.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlob.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n\nGlob.prototype.abort = function () {\n  this.aborted = true\n  this.emit('abort')\n}\n\nGlob.prototype.pause = function () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\nGlob.prototype.resume = function () {\n  if (this.paused) {\n    this.emit('resume')\n    this.paused = false\n    if (this._emitQueue.length) {\n      var eq = this._emitQueue.slice(0)\n      this._emitQueue.length = 0\n      for (var i = 0; i < eq.length; i ++) {\n        var e = eq[i]\n        this._emitMatch(e[0], e[1])\n      }\n    }\n    if (this._processQueue.length) {\n      var pq = this._processQueue.slice(0)\n      this._processQueue.length = 0\n      for (var i = 0; i < pq.length; i ++) {\n        var p = pq[i]\n        this._processing--\n        this._process(p[0], p[1], p[2], p[3])\n      }\n    }\n  }\n}\n\nGlob.prototype._process = function (pattern, index, inGlobStar, cb) {\n  assert(this instanceof Glob)\n  assert(typeof cb === 'function')\n\n  if (this.aborted)\n    return\n\n  this._processing++\n  if (this.paused) {\n    this._processQueue.push([pattern, index, inGlobStar, cb])\n    return\n  }\n\n  //console.error('PROCESS %d', this._processing, pattern)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // see if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index, cb)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip _processing\n  if (childrenIgnored(this, read))\n    return cb()\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar, cb)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar, cb)\n}\n\nGlob.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    return self._processReaddir2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\nGlob.prototype._processReaddir2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return cb()\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  //console.error('prd2', prefix, entries, remain[0]._glob, matchedEntries)\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return cb()\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return cb()\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix) {\n      if (prefix !== '/')\n        e = prefix + '/' + e\n      else\n        e = prefix + e\n    }\n    this._process([e].concat(remain), index, inGlobStar, cb)\n  }\n  cb()\n}\n\nGlob.prototype._emitMatch = function (index, e) {\n  if (this.aborted)\n    return\n\n  if (isIgnored(this, e))\n    return\n\n  if (this.paused) {\n    this._emitQueue.push([index, e])\n    return\n  }\n\n  var abs = isAbsolute(e) ? e : this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute)\n    e = abs\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  var st = this.statCache[abs]\n  if (st)\n    this.emit('stat', e, st)\n\n  this.emit('match', e)\n}\n\nGlob.prototype._readdirInGlobStar = function (abs, cb) {\n  if (this.aborted)\n    return\n\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false, cb)\n\n  var lstatkey = 'lstat\\0' + abs\n  var self = this\n  var lstatcb = inflight(lstatkey, lstatcb_)\n\n  if (lstatcb)\n    fs.lstat(abs, lstatcb)\n\n  function lstatcb_ (er, lstat) {\n    if (er && er.code === 'ENOENT')\n      return cb()\n\n    var isSym = lstat && lstat.isSymbolicLink()\n    self.symlinks[abs] = isSym\n\n    // If it's not a symlink or a dir, then it's definitely a regular file.\n    // don't bother doing a readdir in that case.\n    if (!isSym && lstat && !lstat.isDirectory()) {\n      self.cache[abs] = 'FILE'\n      cb()\n    } else\n      self._readdir(abs, false, cb)\n  }\n}\n\nGlob.prototype._readdir = function (abs, inGlobStar, cb) {\n  if (this.aborted)\n    return\n\n  cb = inflight('readdir\\0'+abs+'\\0'+inGlobStar, cb)\n  if (!cb)\n    return\n\n  //console.error('RD %j %j', +inGlobStar, abs)\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs, cb)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return cb()\n\n    if (Array.isArray(c))\n      return cb(null, c)\n  }\n\n  var self = this\n  fs.readdir(abs, readdirCb(this, abs, cb))\n}\n\nfunction readdirCb (self, abs, cb) {\n  return function (er, entries) {\n    if (er)\n      self._readdirError(abs, er, cb)\n    else\n      self._readdirEntries(abs, entries, cb)\n  }\n}\n\nGlob.prototype._readdirEntries = function (abs, entries, cb) {\n  if (this.aborted)\n    return\n\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n  return cb(null, entries)\n}\n\nGlob.prototype._readdirError = function (f, er, cb) {\n  if (this.aborted)\n    return\n\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        this.emit('error', error)\n        this.abort()\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict) {\n        this.emit('error', er)\n        // If the error is handled, then we abort\n        // if not, we threw out of here\n        this.abort()\n      }\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n\n  return cb()\n}\n\nGlob.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    self._processGlobStar2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\n\nGlob.prototype._processGlobStar2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n  //console.error('pgs2', prefix, remain[0], entries)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return cb()\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false, cb)\n\n  var isSym = this.symlinks[abs]\n  var len = entries.length\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return cb()\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true, cb)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true, cb)\n  }\n\n  cb()\n}\n\nGlob.prototype._processSimple = function (prefix, index, cb) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var self = this\n  this._stat(prefix, function (er, exists) {\n    self._processSimple2(prefix, index, er, exists, cb)\n  })\n}\nGlob.prototype._processSimple2 = function (prefix, index, er, exists, cb) {\n\n  //console.error('ps2', prefix, exists)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return cb()\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n  cb()\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlob.prototype._stat = function (f, cb) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return cb()\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return cb(null, c)\n\n    if (needDir && c === 'FILE')\n      return cb()\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (stat !== undefined) {\n    if (stat === false)\n      return cb(null, stat)\n    else {\n      var type = stat.isDirectory() ? 'DIR' : 'FILE'\n      if (needDir && type === 'FILE')\n        return cb()\n      else\n        return cb(null, type, stat)\n    }\n  }\n\n  var self = this\n  var statcb = inflight('stat\\0' + abs, lstatcb_)\n  if (statcb)\n    fs.lstat(abs, statcb)\n\n  function lstatcb_ (er, lstat) {\n    if (lstat && lstat.isSymbolicLink()) {\n      // If it's a symlink, then treat it as the target, unless\n      // the target does not exist, then treat it as a file.\n      return fs.stat(abs, function (er, stat) {\n        if (er)\n          self._stat2(f, abs, null, lstat, cb)\n        else\n          self._stat2(f, abs, er, stat, cb)\n      })\n    } else {\n      self._stat2(f, abs, er, lstat, cb)\n    }\n  }\n}\n\nGlob.prototype._stat2 = function (f, abs, er, stat, cb) {\n  if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n    this.statCache[abs] = false\n    return cb()\n  }\n\n  var needDir = f.slice(-1) === '/'\n  this.statCache[abs] = stat\n\n  if (abs.slice(-1) === '/' && stat && !stat.isDirectory())\n    return cb(null, false, stat)\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return cb()\n\n  return cb(null, c, stat)\n}\n","module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n","exports.alphasort = alphasort\nexports.alphasorti = alphasorti\nexports.setopts = setopts\nexports.ownProp = ownProp\nexports.makeAbs = makeAbs\nexports.finish = finish\nexports.mark = mark\nexports.isIgnored = isIgnored\nexports.childrenIgnored = childrenIgnored\n\nfunction ownProp (obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field)\n}\n\nvar path = require(\"path\")\nvar minimatch = require(\"minimatch\")\nvar isAbsolute = require(\"path-is-absolute\")\nvar Minimatch = minimatch.Minimatch\n\nfunction alphasorti (a, b) {\n  return a.toLowerCase().localeCompare(b.toLowerCase())\n}\n\nfunction alphasort (a, b) {\n  return a.localeCompare(b)\n}\n\nfunction setupIgnores (self, options) {\n  self.ignore = options.ignore || []\n\n  if (!Array.isArray(self.ignore))\n    self.ignore = [self.ignore]\n\n  if (self.ignore.length) {\n    self.ignore = self.ignore.map(ignoreMap)\n  }\n}\n\n// ignore patterns are always in dot:true mode.\nfunction ignoreMap (pattern) {\n  var gmatcher = null\n  if (pattern.slice(-3) === '/**') {\n    var gpattern = pattern.replace(/(\\/\\*\\*)+$/, '')\n    gmatcher = new Minimatch(gpattern, { dot: true })\n  }\n\n  return {\n    matcher: new Minimatch(pattern, { dot: true }),\n    gmatcher: gmatcher\n  }\n}\n\nfunction setopts (self, pattern, options) {\n  if (!options)\n    options = {}\n\n  // base-matching: just use globstar for that.\n  if (options.matchBase && -1 === pattern.indexOf(\"/\")) {\n    if (options.noglobstar) {\n      throw new Error(\"base matching requires globstar\")\n    }\n    pattern = \"**/\" + pattern\n  }\n\n  self.silent = !!options.silent\n  self.pattern = pattern\n  self.strict = options.strict !== false\n  self.realpath = !!options.realpath\n  self.realpathCache = options.realpathCache || Object.create(null)\n  self.follow = !!options.follow\n  self.dot = !!options.dot\n  self.mark = !!options.mark\n  self.nodir = !!options.nodir\n  if (self.nodir)\n    self.mark = true\n  self.sync = !!options.sync\n  self.nounique = !!options.nounique\n  self.nonull = !!options.nonull\n  self.nosort = !!options.nosort\n  self.nocase = !!options.nocase\n  self.stat = !!options.stat\n  self.noprocess = !!options.noprocess\n  self.absolute = !!options.absolute\n\n  self.maxLength = options.maxLength || Infinity\n  self.cache = options.cache || Object.create(null)\n  self.statCache = options.statCache || Object.create(null)\n  self.symlinks = options.symlinks || Object.create(null)\n\n  setupIgnores(self, options)\n\n  self.changedCwd = false\n  var cwd = process.cwd()\n  if (!ownProp(options, \"cwd\"))\n    self.cwd = cwd\n  else {\n    self.cwd = path.resolve(options.cwd)\n    self.changedCwd = self.cwd !== cwd\n  }\n\n  self.root = options.root || path.resolve(self.cwd, \"/\")\n  self.root = path.resolve(self.root)\n  if (process.platform === \"win32\")\n    self.root = self.root.replace(/\\\\/g, \"/\")\n\n  // TODO: is an absolute `cwd` supposed to be resolved against `root`?\n  // e.g. { cwd: '/test', root: __dirname } === path.join(__dirname, '/test')\n  self.cwdAbs = isAbsolute(self.cwd) ? self.cwd : makeAbs(self, self.cwd)\n  if (process.platform === \"win32\")\n    self.cwdAbs = self.cwdAbs.replace(/\\\\/g, \"/\")\n  self.nomount = !!options.nomount\n\n  // disable comments and negation in Minimatch.\n  // Note that they are not supported in Glob itself anyway.\n  options.nonegate = true\n  options.nocomment = true\n\n  self.minimatch = new Minimatch(pattern, options)\n  self.options = self.minimatch.options\n}\n\nfunction finish (self) {\n  var nou = self.nounique\n  var all = nou ? [] : Object.create(null)\n\n  for (var i = 0, l = self.matches.length; i < l; i ++) {\n    var matches = self.matches[i]\n    if (!matches || Object.keys(matches).length === 0) {\n      if (self.nonull) {\n        // do like the shell, and spit out the literal glob\n        var literal = self.minimatch.globSet[i]\n        if (nou)\n          all.push(literal)\n        else\n          all[literal] = true\n      }\n    } else {\n      // had matches\n      var m = Object.keys(matches)\n      if (nou)\n        all.push.apply(all, m)\n      else\n        m.forEach(function (m) {\n          all[m] = true\n        })\n    }\n  }\n\n  if (!nou)\n    all = Object.keys(all)\n\n  if (!self.nosort)\n    all = all.sort(self.nocase ? alphasorti : alphasort)\n\n  // at *some* point we statted all of these\n  if (self.mark) {\n    for (var i = 0; i < all.length; i++) {\n      all[i] = self._mark(all[i])\n    }\n    if (self.nodir) {\n      all = all.filter(function (e) {\n        var notDir = !(/\\/$/.test(e))\n        var c = self.cache[e] || self.cache[makeAbs(self, e)]\n        if (notDir && c)\n          notDir = c !== 'DIR' && !Array.isArray(c)\n        return notDir\n      })\n    }\n  }\n\n  if (self.ignore.length)\n    all = all.filter(function(m) {\n      return !isIgnored(self, m)\n    })\n\n  self.found = all\n}\n\nfunction mark (self, p) {\n  var abs = makeAbs(self, p)\n  var c = self.cache[abs]\n  var m = p\n  if (c) {\n    var isDir = c === 'DIR' || Array.isArray(c)\n    var slash = p.slice(-1) === '/'\n\n    if (isDir && !slash)\n      m += '/'\n    else if (!isDir && slash)\n      m = m.slice(0, -1)\n\n    if (m !== p) {\n      var mabs = makeAbs(self, m)\n      self.statCache[mabs] = self.statCache[abs]\n      self.cache[mabs] = self.cache[abs]\n    }\n  }\n\n  return m\n}\n\n// lotta situps...\nfunction makeAbs (self, f) {\n  var abs = f\n  if (f.charAt(0) === '/') {\n    abs = path.join(self.root, f)\n  } else if (isAbsolute(f) || f === '') {\n    abs = f\n  } else if (self.changedCwd) {\n    abs = path.resolve(self.cwd, f)\n  } else {\n    abs = path.resolve(f)\n  }\n\n  if (process.platform === 'win32')\n    abs = abs.replace(/\\\\/g, '/')\n\n  return abs\n}\n\n\n// Return true, if pattern ends with globstar '**', for the accompanying parent directory.\n// Ex:- If node_modules/** is the pattern, add 'node_modules' to ignore list along with it's contents\nfunction isIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return item.matcher.match(path) || !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n\nfunction childrenIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","exports.normalizeOptions = function (options) {\n  const normalizedOptions = options;\n  if (typeof options.catchExceptions === 'undefined') {\n    normalizedOptions.catchExceptions = true;\n    if (window.location.search && window.location.search.substring(1) === 'debug') {\n      normalizedOptions.catchExceptions = false;\n    }\n  }\n  return normalizedOptions;\n};\n\nexports.subscribe = function (ctx, callback) {\n  ctx.addEventListener('message', (message) => {\n    let { data } = message;\n    if (typeof message.data === 'string') {\n      data = JSON.parse(message.data);\n    }\n    if (!data.protocol) {\n      return;\n    }\n    if (!data.command) {\n      return;\n    }\n    callback(data, message);\n  });\n};\n","//     FBP Graph\n//     (c) 2013-2017 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     FBP Graph may be freely distributed under the MIT license\n\n// FBP graphs are Event Emitters, providing signals when the graph\n// definition changes.\n\nvar EventEmitter, Graph, clone, mergeResolveTheirsNaive, platform, resetGraph;\n\n({EventEmitter} = require('events'));\n\nclone = require('clone');\n\nplatform = require('./Platform');\n\nGraph = (function() {\n  // This class represents an abstract FBP graph containing nodes\n  // connected to each other with edges.\n\n  // These graphs can be used for visualization and sketching, but\n  // also are the way to start a NoFlo or other FBP network.\n  class Graph extends EventEmitter {\n    // ## Creating new graphs\n\n    // Graphs are created by simply instantiating the Graph class\n    // and giving it a name:\n\n    //     myGraph = new Graph 'My very cool graph'\n    constructor(name = '', options = {}) {\n      super();\n      this.setMaxListeners(0);\n      this.name = name;\n      this.properties = {};\n      this.nodes = [];\n      this.edges = [];\n      this.initializers = [];\n      this.inports = {};\n      this.outports = {};\n      this.groups = [];\n      this.transaction = {\n        id: null,\n        depth: 0\n      };\n      this.caseSensitive = options.caseSensitive || false;\n    }\n\n    getPortName(port) {\n      if (this.caseSensitive) {\n        return port;\n      } else {\n        return port.toLowerCase();\n      }\n    }\n\n    // ## Group graph changes into transactions\n\n    // If no transaction is explicitly opened, each call to\n    // the graph API will implicitly create a transaction for that change\n    startTransaction(id, metadata) {\n      if (this.transaction.id) {\n        throw Error(\"Nested transactions not supported\");\n      }\n      this.transaction.id = id;\n      this.transaction.depth = 1;\n      return this.emit('startTransaction', id, metadata);\n    }\n\n    endTransaction(id, metadata) {\n      if (!this.transaction.id) {\n        throw Error(\"Attempted to end non-existing transaction\");\n      }\n      this.transaction.id = null;\n      this.transaction.depth = 0;\n      return this.emit('endTransaction', id, metadata);\n    }\n\n    checkTransactionStart() {\n      if (!this.transaction.id) {\n        return this.startTransaction('implicit');\n      } else if (this.transaction.id === 'implicit') {\n        return this.transaction.depth += 1;\n      }\n    }\n\n    checkTransactionEnd() {\n      if (this.transaction.id === 'implicit') {\n        this.transaction.depth -= 1;\n      }\n      if (this.transaction.depth === 0) {\n        return this.endTransaction('implicit');\n      }\n    }\n\n    // ## Modifying Graph properties\n\n    // This method allows changing properties of the graph.\n    setProperties(properties) {\n      var before, item, val;\n      this.checkTransactionStart();\n      before = clone(this.properties);\n      for (item in properties) {\n        val = properties[item];\n        this.properties[item] = val;\n      }\n      this.emit('changeProperties', this.properties, before);\n      return this.checkTransactionEnd();\n    }\n\n    addInport(publicPort, nodeKey, portKey, metadata) {\n      // Check that node exists\n      if (!this.getNode(nodeKey)) {\n        return;\n      }\n      publicPort = this.getPortName(publicPort);\n      this.checkTransactionStart();\n      this.inports[publicPort] = {\n        process: nodeKey,\n        port: this.getPortName(portKey),\n        metadata: metadata\n      };\n      this.emit('addInport', publicPort, this.inports[publicPort]);\n      return this.checkTransactionEnd();\n    }\n\n    removeInport(publicPort) {\n      var port;\n      publicPort = this.getPortName(publicPort);\n      if (!this.inports[publicPort]) {\n        return;\n      }\n      this.checkTransactionStart();\n      port = this.inports[publicPort];\n      this.setInportMetadata(publicPort, {});\n      delete this.inports[publicPort];\n      this.emit('removeInport', publicPort, port);\n      return this.checkTransactionEnd();\n    }\n\n    renameInport(oldPort, newPort) {\n      oldPort = this.getPortName(oldPort);\n      newPort = this.getPortName(newPort);\n      if (!this.inports[oldPort]) {\n        return;\n      }\n      if (newPort === oldPort) {\n        return;\n      }\n      this.checkTransactionStart();\n      this.inports[newPort] = this.inports[oldPort];\n      delete this.inports[oldPort];\n      this.emit('renameInport', oldPort, newPort);\n      return this.checkTransactionEnd();\n    }\n\n    setInportMetadata(publicPort, metadata) {\n      var before, item, val;\n      publicPort = this.getPortName(publicPort);\n      if (!this.inports[publicPort]) {\n        return;\n      }\n      this.checkTransactionStart();\n      before = clone(this.inports[publicPort].metadata);\n      if (!this.inports[publicPort].metadata) {\n        this.inports[publicPort].metadata = {};\n      }\n      for (item in metadata) {\n        val = metadata[item];\n        if (val != null) {\n          this.inports[publicPort].metadata[item] = val;\n        } else {\n          delete this.inports[publicPort].metadata[item];\n        }\n      }\n      this.emit('changeInport', publicPort, this.inports[publicPort], before, metadata);\n      return this.checkTransactionEnd();\n    }\n\n    addOutport(publicPort, nodeKey, portKey, metadata) {\n      // Check that node exists\n      if (!this.getNode(nodeKey)) {\n        return;\n      }\n      publicPort = this.getPortName(publicPort);\n      this.checkTransactionStart();\n      this.outports[publicPort] = {\n        process: nodeKey,\n        port: this.getPortName(portKey),\n        metadata: metadata\n      };\n      this.emit('addOutport', publicPort, this.outports[publicPort]);\n      return this.checkTransactionEnd();\n    }\n\n    removeOutport(publicPort) {\n      var port;\n      publicPort = this.getPortName(publicPort);\n      if (!this.outports[publicPort]) {\n        return;\n      }\n      this.checkTransactionStart();\n      port = this.outports[publicPort];\n      this.setOutportMetadata(publicPort, {});\n      delete this.outports[publicPort];\n      this.emit('removeOutport', publicPort, port);\n      return this.checkTransactionEnd();\n    }\n\n    renameOutport(oldPort, newPort) {\n      oldPort = this.getPortName(oldPort);\n      newPort = this.getPortName(newPort);\n      if (!this.outports[oldPort]) {\n        return;\n      }\n      this.checkTransactionStart();\n      this.outports[newPort] = this.outports[oldPort];\n      delete this.outports[oldPort];\n      this.emit('renameOutport', oldPort, newPort);\n      return this.checkTransactionEnd();\n    }\n\n    setOutportMetadata(publicPort, metadata) {\n      var before, item, val;\n      publicPort = this.getPortName(publicPort);\n      if (!this.outports[publicPort]) {\n        return;\n      }\n      this.checkTransactionStart();\n      before = clone(this.outports[publicPort].metadata);\n      if (!this.outports[publicPort].metadata) {\n        this.outports[publicPort].metadata = {};\n      }\n      for (item in metadata) {\n        val = metadata[item];\n        if (val != null) {\n          this.outports[publicPort].metadata[item] = val;\n        } else {\n          delete this.outports[publicPort].metadata[item];\n        }\n      }\n      this.emit('changeOutport', publicPort, this.outports[publicPort], before, metadata);\n      return this.checkTransactionEnd();\n    }\n\n    // ## Grouping nodes in a graph\n\n    addGroup(group, nodes, metadata) {\n      var g;\n      this.checkTransactionStart();\n      g = {\n        name: group,\n        nodes: nodes,\n        metadata: metadata\n      };\n      this.groups.push(g);\n      this.emit('addGroup', g);\n      return this.checkTransactionEnd();\n    }\n\n    renameGroup(oldName, newName) {\n      var group, i, len, ref;\n      this.checkTransactionStart();\n      ref = this.groups;\n      for (i = 0, len = ref.length; i < len; i++) {\n        group = ref[i];\n        if (!group) {\n          continue;\n        }\n        if (group.name !== oldName) {\n          continue;\n        }\n        group.name = newName;\n        this.emit('renameGroup', oldName, newName);\n      }\n      return this.checkTransactionEnd();\n    }\n\n    removeGroup(groupName) {\n      var group, i, len, ref;\n      this.checkTransactionStart();\n      ref = this.groups;\n      for (i = 0, len = ref.length; i < len; i++) {\n        group = ref[i];\n        if (!group) {\n          continue;\n        }\n        if (group.name !== groupName) {\n          continue;\n        }\n        this.setGroupMetadata(group.name, {});\n        this.groups.splice(this.groups.indexOf(group), 1);\n        this.emit('removeGroup', group);\n      }\n      return this.checkTransactionEnd();\n    }\n\n    setGroupMetadata(groupName, metadata) {\n      var before, group, i, item, len, ref, val;\n      this.checkTransactionStart();\n      ref = this.groups;\n      for (i = 0, len = ref.length; i < len; i++) {\n        group = ref[i];\n        if (!group) {\n          continue;\n        }\n        if (group.name !== groupName) {\n          continue;\n        }\n        before = clone(group.metadata);\n        for (item in metadata) {\n          val = metadata[item];\n          if (val != null) {\n            group.metadata[item] = val;\n          } else {\n            delete group.metadata[item];\n          }\n        }\n        this.emit('changeGroup', group, before, metadata);\n      }\n      return this.checkTransactionEnd();\n    }\n\n    // ## Adding a node to the graph\n\n    // Nodes are identified by an ID unique to the graph. Additionally,\n    // a node may contain information on what FBP component it is and\n    // possible display coordinates.\n\n    // For example:\n\n    //     myGraph.addNode 'Read, 'ReadFile',\n    //       x: 91\n    //       y: 154\n\n    // Addition of a node will emit the `addNode` event.\n    addNode(id, component, metadata) {\n      var node;\n      this.checkTransactionStart();\n      if (!metadata) {\n        metadata = {};\n      }\n      node = {\n        id: id,\n        component: component,\n        metadata: metadata\n      };\n      this.nodes.push(node);\n      this.emit('addNode', node);\n      this.checkTransactionEnd();\n      return node;\n    }\n\n    // ## Removing a node from the graph\n\n    // Existing nodes can be removed from a graph by their ID. This\n    // will remove the node and also remove all edges connected to it.\n\n    //     myGraph.removeNode 'Read'\n\n    // Once the node has been removed, the `removeNode` event will be\n    // emitted.\n    removeNode(id) {\n      var edge, group, i, index, initializer, j, k, l, len, len1, len2, len3, len4, len5, len6, m, n, node, o, priv, pub, ref, ref1, ref2, ref3, ref4, toRemove;\n      node = this.getNode(id);\n      if (!node) {\n        return;\n      }\n      this.checkTransactionStart();\n      toRemove = [];\n      ref = this.edges;\n      for (i = 0, len = ref.length; i < len; i++) {\n        edge = ref[i];\n        if ((edge.from.node === node.id) || (edge.to.node === node.id)) {\n          toRemove.push(edge);\n        }\n      }\n      for (j = 0, len1 = toRemove.length; j < len1; j++) {\n        edge = toRemove[j];\n        this.removeEdge(edge.from.node, edge.from.port, edge.to.node, edge.to.port);\n      }\n      toRemove = [];\n      ref1 = this.initializers;\n      for (k = 0, len2 = ref1.length; k < len2; k++) {\n        initializer = ref1[k];\n        if (initializer.to.node === node.id) {\n          toRemove.push(initializer);\n        }\n      }\n      for (l = 0, len3 = toRemove.length; l < len3; l++) {\n        initializer = toRemove[l];\n        this.removeInitial(initializer.to.node, initializer.to.port);\n      }\n      toRemove = [];\n      ref2 = this.inports;\n      for (pub in ref2) {\n        priv = ref2[pub];\n        if (priv.process === id) {\n          toRemove.push(pub);\n        }\n      }\n      for (m = 0, len4 = toRemove.length; m < len4; m++) {\n        pub = toRemove[m];\n        this.removeInport(pub);\n      }\n      toRemove = [];\n      ref3 = this.outports;\n      for (pub in ref3) {\n        priv = ref3[pub];\n        if (priv.process === id) {\n          toRemove.push(pub);\n        }\n      }\n      for (n = 0, len5 = toRemove.length; n < len5; n++) {\n        pub = toRemove[n];\n        this.removeOutport(pub);\n      }\n      ref4 = this.groups;\n      for (o = 0, len6 = ref4.length; o < len6; o++) {\n        group = ref4[o];\n        if (!group) {\n          continue;\n        }\n        index = group.nodes.indexOf(id);\n        if (index === -1) {\n          continue;\n        }\n        group.nodes.splice(index, 1);\n      }\n      this.setNodeMetadata(id, {});\n      if (-1 !== this.nodes.indexOf(node)) {\n        this.nodes.splice(this.nodes.indexOf(node), 1);\n      }\n      this.emit('removeNode', node);\n      return this.checkTransactionEnd();\n    }\n\n    // ## Getting a node\n\n    // Nodes objects can be retrieved from the graph by their ID:\n\n    //     myNode = myGraph.getNode 'Read'\n    getNode(id) {\n      var i, len, node, ref;\n      ref = this.nodes;\n      for (i = 0, len = ref.length; i < len; i++) {\n        node = ref[i];\n        if (!node) {\n          continue;\n        }\n        if (node.id === id) {\n          return node;\n        }\n      }\n      return null;\n    }\n\n    // ## Renaming a node\n\n    // Nodes IDs can be changed by calling this method.\n    renameNode(oldId, newId) {\n      var edge, group, i, iip, index, j, k, len, len1, len2, node, priv, pub, ref, ref1, ref2, ref3, ref4;\n      this.checkTransactionStart();\n      node = this.getNode(oldId);\n      if (!node) {\n        return;\n      }\n      node.id = newId;\n      ref = this.edges;\n      for (i = 0, len = ref.length; i < len; i++) {\n        edge = ref[i];\n        if (!edge) {\n          continue;\n        }\n        if (edge.from.node === oldId) {\n          edge.from.node = newId;\n        }\n        if (edge.to.node === oldId) {\n          edge.to.node = newId;\n        }\n      }\n      ref1 = this.initializers;\n      for (j = 0, len1 = ref1.length; j < len1; j++) {\n        iip = ref1[j];\n        if (!iip) {\n          continue;\n        }\n        if (iip.to.node === oldId) {\n          iip.to.node = newId;\n        }\n      }\n      ref2 = this.inports;\n      for (pub in ref2) {\n        priv = ref2[pub];\n        if (priv.process === oldId) {\n          priv.process = newId;\n        }\n      }\n      ref3 = this.outports;\n      for (pub in ref3) {\n        priv = ref3[pub];\n        if (priv.process === oldId) {\n          priv.process = newId;\n        }\n      }\n      ref4 = this.groups;\n      for (k = 0, len2 = ref4.length; k < len2; k++) {\n        group = ref4[k];\n        if (!group) {\n          continue;\n        }\n        index = group.nodes.indexOf(oldId);\n        if (index === -1) {\n          continue;\n        }\n        group.nodes[index] = newId;\n      }\n      this.emit('renameNode', oldId, newId);\n      return this.checkTransactionEnd();\n    }\n\n    // ## Changing a node's metadata\n\n    // Node metadata can be set or changed by calling this method.\n    setNodeMetadata(id, metadata) {\n      var before, item, node, val;\n      node = this.getNode(id);\n      if (!node) {\n        return;\n      }\n      this.checkTransactionStart();\n      before = clone(node.metadata);\n      if (!node.metadata) {\n        node.metadata = {};\n      }\n      for (item in metadata) {\n        val = metadata[item];\n        if (val != null) {\n          node.metadata[item] = val;\n        } else {\n          delete node.metadata[item];\n        }\n      }\n      this.emit('changeNode', node, before, metadata);\n      return this.checkTransactionEnd();\n    }\n\n    // ## Connecting nodes\n\n    // Nodes can be connected by adding edges between a node's outport\n    // and another node's inport:\n\n    //     myGraph.addEdge 'Read', 'out', 'Display', 'in'\n    //     myGraph.addEdgeIndex 'Read', 'out', null, 'Display', 'in', 2\n\n    // Adding an edge will emit the `addEdge` event.\n    addEdge(outNode, outPort, inNode, inPort, metadata = {}) {\n      var edge, i, len, ref;\n      outPort = this.getPortName(outPort);\n      inPort = this.getPortName(inPort);\n      ref = this.edges;\n      for (i = 0, len = ref.length; i < len; i++) {\n        edge = ref[i];\n        // don't add a duplicate edge\n        if (edge.from.node === outNode && edge.from.port === outPort && edge.to.node === inNode && edge.to.port === inPort) {\n          return;\n        }\n      }\n      if (!this.getNode(outNode)) {\n        return;\n      }\n      if (!this.getNode(inNode)) {\n        return;\n      }\n      this.checkTransactionStart();\n      edge = {\n        from: {\n          node: outNode,\n          port: outPort\n        },\n        to: {\n          node: inNode,\n          port: inPort\n        },\n        metadata: metadata\n      };\n      this.edges.push(edge);\n      this.emit('addEdge', edge);\n      this.checkTransactionEnd();\n      return edge;\n    }\n\n    // Adding an edge will emit the `addEdge` event.\n    addEdgeIndex(outNode, outPort, outIndex, inNode, inPort, inIndex, metadata = {}) {\n      var edge;\n      if (!this.getNode(outNode)) {\n        return;\n      }\n      if (!this.getNode(inNode)) {\n        return;\n      }\n      outPort = this.getPortName(outPort);\n      inPort = this.getPortName(inPort);\n      if (inIndex === null) {\n        inIndex = void 0;\n      }\n      if (outIndex === null) {\n        outIndex = void 0;\n      }\n      if (!metadata) {\n        metadata = {};\n      }\n      this.checkTransactionStart();\n      edge = {\n        from: {\n          node: outNode,\n          port: outPort,\n          index: outIndex\n        },\n        to: {\n          node: inNode,\n          port: inPort,\n          index: inIndex\n        },\n        metadata: metadata\n      };\n      this.edges.push(edge);\n      this.emit('addEdge', edge);\n      this.checkTransactionEnd();\n      return edge;\n    }\n\n    // ## Disconnected nodes\n\n    // Connections between nodes can be removed by providing the\n    // nodes and ports to disconnect.\n\n    //     myGraph.removeEdge 'Display', 'out', 'Foo', 'in'\n\n    // Removing a connection will emit the `removeEdge` event.\n    removeEdge(node, port, node2, port2) {\n      var edge, i, index, j, k, len, len1, len2, ref, ref1, toKeep, toRemove;\n      this.checkTransactionStart();\n      port = this.getPortName(port);\n      port2 = this.getPortName(port2);\n      toRemove = [];\n      toKeep = [];\n      if (node2 && port2) {\n        ref = this.edges;\n        for (index = i = 0, len = ref.length; i < len; index = ++i) {\n          edge = ref[index];\n          if (edge.from.node === node && edge.from.port === port && edge.to.node === node2 && edge.to.port === port2) {\n            this.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, {});\n            toRemove.push(edge);\n          } else {\n            toKeep.push(edge);\n          }\n        }\n      } else {\n        ref1 = this.edges;\n        for (index = j = 0, len1 = ref1.length; j < len1; index = ++j) {\n          edge = ref1[index];\n          if ((edge.from.node === node && edge.from.port === port) || (edge.to.node === node && edge.to.port === port)) {\n            this.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, {});\n            toRemove.push(edge);\n          } else {\n            toKeep.push(edge);\n          }\n        }\n      }\n      this.edges = toKeep;\n      for (k = 0, len2 = toRemove.length; k < len2; k++) {\n        edge = toRemove[k];\n        this.emit('removeEdge', edge);\n      }\n      return this.checkTransactionEnd();\n    }\n\n    // ## Getting an edge\n\n    // Edge objects can be retrieved from the graph by the node and port IDs:\n\n    //     myEdge = myGraph.getEdge 'Read', 'out', 'Write', 'in'\n    getEdge(node, port, node2, port2) {\n      var edge, i, index, len, ref;\n      port = this.getPortName(port);\n      port2 = this.getPortName(port2);\n      ref = this.edges;\n      for (index = i = 0, len = ref.length; i < len; index = ++i) {\n        edge = ref[index];\n        if (!edge) {\n          continue;\n        }\n        if (edge.from.node === node && edge.from.port === port) {\n          if (edge.to.node === node2 && edge.to.port === port2) {\n            return edge;\n          }\n        }\n      }\n      return null;\n    }\n\n    // ## Changing an edge's metadata\n\n    // Edge metadata can be set or changed by calling this method.\n    setEdgeMetadata(node, port, node2, port2, metadata) {\n      var before, edge, item, val;\n      edge = this.getEdge(node, port, node2, port2);\n      if (!edge) {\n        return;\n      }\n      this.checkTransactionStart();\n      before = clone(edge.metadata);\n      if (!edge.metadata) {\n        edge.metadata = {};\n      }\n      for (item in metadata) {\n        val = metadata[item];\n        if (val != null) {\n          edge.metadata[item] = val;\n        } else {\n          delete edge.metadata[item];\n        }\n      }\n      this.emit('changeEdge', edge, before, metadata);\n      return this.checkTransactionEnd();\n    }\n\n    // ## Adding Initial Information Packets\n\n    // Initial Information Packets (IIPs) can be used for sending data\n    // to specified node inports without a sending node instance.\n\n    // IIPs are especially useful for sending configuration information\n    // to components at FBP network start-up time. This could include\n    // filenames to read, or network ports to listen to.\n\n    //     myGraph.addInitial 'somefile.txt', 'Read', 'source'\n    //     myGraph.addInitialIndex 'somefile.txt', 'Read', 'source', 2\n\n    // If inports are defined on the graph, IIPs can be applied calling\n    // the `addGraphInitial` or `addGraphInitialIndex` methods.\n\n    //     myGraph.addGraphInitial 'somefile.txt', 'file'\n    //     myGraph.addGraphInitialIndex 'somefile.txt', 'file', 2\n\n    // Adding an IIP will emit a `addInitial` event.\n    addInitial(data, node, port, metadata) {\n      var initializer;\n      if (!this.getNode(node)) {\n        return;\n      }\n      port = this.getPortName(port);\n      this.checkTransactionStart();\n      initializer = {\n        from: {\n          data: data\n        },\n        to: {\n          node: node,\n          port: port\n        },\n        metadata: metadata\n      };\n      this.initializers.push(initializer);\n      this.emit('addInitial', initializer);\n      this.checkTransactionEnd();\n      return initializer;\n    }\n\n    addInitialIndex(data, node, port, index, metadata) {\n      var initializer;\n      if (!this.getNode(node)) {\n        return;\n      }\n      if (index === null) {\n        index = void 0;\n      }\n      port = this.getPortName(port);\n      this.checkTransactionStart();\n      initializer = {\n        from: {\n          data: data\n        },\n        to: {\n          node: node,\n          port: port,\n          index: index\n        },\n        metadata: metadata\n      };\n      this.initializers.push(initializer);\n      this.emit('addInitial', initializer);\n      this.checkTransactionEnd();\n      return initializer;\n    }\n\n    addGraphInitial(data, node, metadata) {\n      var inport;\n      inport = this.inports[node];\n      if (!inport) {\n        return;\n      }\n      return this.addInitial(data, inport.process, inport.port, metadata);\n    }\n\n    addGraphInitialIndex(data, node, index, metadata) {\n      var inport;\n      inport = this.inports[node];\n      if (!inport) {\n        return;\n      }\n      return this.addInitialIndex(data, inport.process, inport.port, index, metadata);\n    }\n\n    // ## Removing Initial Information Packets\n\n    // IIPs can be removed by calling the `removeInitial` method.\n\n    //     myGraph.removeInitial 'Read', 'source'\n\n    // If the IIP was applied via the `addGraphInitial` or\n    // `addGraphInitialIndex` functions, it can be removed using\n    // the `removeGraphInitial` method.\n\n    //     myGraph.removeGraphInitial 'file'\n\n    // Remove an IIP will emit a `removeInitial` event.\n    removeInitial(node, port) {\n      var edge, i, index, j, len, len1, ref, toKeep, toRemove;\n      port = this.getPortName(port);\n      this.checkTransactionStart();\n      toRemove = [];\n      toKeep = [];\n      ref = this.initializers;\n      for (index = i = 0, len = ref.length; i < len; index = ++i) {\n        edge = ref[index];\n        if (edge.to.node === node && edge.to.port === port) {\n          toRemove.push(edge);\n        } else {\n          toKeep.push(edge);\n        }\n      }\n      this.initializers = toKeep;\n      for (j = 0, len1 = toRemove.length; j < len1; j++) {\n        edge = toRemove[j];\n        this.emit('removeInitial', edge);\n      }\n      return this.checkTransactionEnd();\n    }\n\n    removeGraphInitial(node) {\n      var inport;\n      inport = this.inports[node];\n      if (!inport) {\n        return;\n      }\n      return this.removeInitial(inport.process, inport.port);\n    }\n\n    toDOT() {\n      var cleanID, cleanPort, data, dot, edge, i, id, initializer, j, k, len, len1, len2, node, ref, ref1, ref2;\n      cleanID = function(id) {\n        return id.replace(/\\s*/g, \"\");\n      };\n      cleanPort = function(port) {\n        return port.replace(/\\./g, \"\");\n      };\n      dot = \"digraph {\\n\";\n      ref = this.nodes;\n      for (i = 0, len = ref.length; i < len; i++) {\n        node = ref[i];\n        dot += `    ${cleanID(node.id)} [label=${node.id} shape=box]\\n`;\n      }\n      ref1 = this.initializers;\n      for (id = j = 0, len1 = ref1.length; j < len1; id = ++j) {\n        initializer = ref1[id];\n        if (typeof initializer.from.data === 'function') {\n          data = 'Function';\n        } else {\n          data = initializer.from.data;\n        }\n        dot += `    data${id} [label=\"'${data}'\" shape=plaintext]\\n`;\n        dot += `    data${id} -> ${cleanID(initializer.to.node)}[headlabel=${cleanPort(initializer.to.port)} labelfontcolor=blue labelfontsize=8.0]\\n`;\n      }\n      ref2 = this.edges;\n      for (k = 0, len2 = ref2.length; k < len2; k++) {\n        edge = ref2[k];\n        dot += `    ${cleanID(edge.from.node)} -> ${cleanID(edge.to.node)}[taillabel=${cleanPort(edge.from.port)} headlabel=${cleanPort(edge.to.port)} labelfontcolor=blue labelfontsize=8.0]\\n`;\n      }\n      dot += \"}\";\n      return dot;\n    }\n\n    toYUML() {\n      var edge, i, initializer, j, len, len1, ref, ref1, yuml;\n      yuml = [];\n      ref = this.initializers;\n      for (i = 0, len = ref.length; i < len; i++) {\n        initializer = ref[i];\n        yuml.push(`(start)[${initializer.to.port}]->(${initializer.to.node})`);\n      }\n      ref1 = this.edges;\n      for (j = 0, len1 = ref1.length; j < len1; j++) {\n        edge = ref1[j];\n        yuml.push(`(${edge.from.node})[${edge.from.port}]->(${edge.to.node})`);\n      }\n      return yuml.join(\",\");\n    }\n\n    toJSON() {\n      var connection, edge, group, groupData, i, initializer, j, json, k, l, len, len1, len2, len3, node, priv, property, pub, ref, ref1, ref2, ref3, ref4, ref5, ref6, value;\n      json = {\n        caseSensitive: this.caseSensitive,\n        properties: {},\n        inports: {},\n        outports: {},\n        groups: [],\n        processes: {},\n        connections: []\n      };\n      if (this.name) {\n        json.properties.name = this.name;\n      }\n      ref = this.properties;\n      for (property in ref) {\n        value = ref[property];\n        json.properties[property] = value;\n      }\n      ref1 = this.inports;\n      for (pub in ref1) {\n        priv = ref1[pub];\n        json.inports[pub] = priv;\n      }\n      ref2 = this.outports;\n      for (pub in ref2) {\n        priv = ref2[pub];\n        json.outports[pub] = priv;\n      }\n      ref3 = this.groups;\n      for (i = 0, len = ref3.length; i < len; i++) {\n        group = ref3[i];\n        groupData = {\n          name: group.name,\n          nodes: group.nodes\n        };\n        if (Object.keys(group.metadata).length) {\n          groupData.metadata = group.metadata;\n        }\n        json.groups.push(groupData);\n      }\n      ref4 = this.nodes;\n      for (j = 0, len1 = ref4.length; j < len1; j++) {\n        node = ref4[j];\n        json.processes[node.id] = {\n          component: node.component\n        };\n        if (node.metadata) {\n          json.processes[node.id].metadata = node.metadata;\n        }\n      }\n      ref5 = this.edges;\n      for (k = 0, len2 = ref5.length; k < len2; k++) {\n        edge = ref5[k];\n        connection = {\n          src: {\n            process: edge.from.node,\n            port: edge.from.port,\n            index: edge.from.index\n          },\n          tgt: {\n            process: edge.to.node,\n            port: edge.to.port,\n            index: edge.to.index\n          }\n        };\n        if (Object.keys(edge.metadata).length) {\n          connection.metadata = edge.metadata;\n        }\n        json.connections.push(connection);\n      }\n      ref6 = this.initializers;\n      for (l = 0, len3 = ref6.length; l < len3; l++) {\n        initializer = ref6[l];\n        json.connections.push({\n          data: initializer.from.data,\n          tgt: {\n            process: initializer.to.node,\n            port: initializer.to.port,\n            index: initializer.to.index\n          }\n        });\n      }\n      return json;\n    }\n\n    save(file, callback) {\n      var json;\n      if (platform.isBrowser()) {\n        return callback(new Error(\"Saving graphs not supported on browser\"));\n      }\n      json = JSON.stringify(this.toJSON(), null, 4);\n      if (!file.match(/\\.json$/)) {\n        file = `${file}.json`;\n      }\n      return require('fs').writeFile(file, json, \"utf-8\", function(err, data) {\n        if (err) {\n          return callback(err);\n        }\n        return callback(null, file);\n      });\n    }\n\n  };\n\n  Graph.prototype.name = '';\n\n  Graph.prototype.caseSensitive = false;\n\n  Graph.prototype.properties = {};\n\n  Graph.prototype.nodes = [];\n\n  Graph.prototype.edges = [];\n\n  Graph.prototype.initializers = [];\n\n  Graph.prototype.inports = {};\n\n  Graph.prototype.outports = {};\n\n  Graph.prototype.groups = [];\n\n  return Graph;\n\n}).call(this);\n\nexports.Graph = Graph;\n\nexports.createGraph = function(name, options) {\n  return new Graph(name, options);\n};\n\nexports.loadJSON = function(passedDefinition, callback, metadata = {}) {\n  var caseSensitive, conn, def, definition, graph, group, i, id, j, len, len1, priv, properties, property, pub, ref, ref1, ref2, ref3, ref4, ref5, value;\n  if (typeof passedDefinition === 'string') {\n    definition = JSON.parse(passedDefinition);\n  } else {\n    definition = JSON.parse(JSON.stringify(passedDefinition));\n  }\n  if (!definition.properties) {\n    definition.properties = {};\n  }\n  if (!definition.processes) {\n    definition.processes = {};\n  }\n  if (!definition.connections) {\n    definition.connections = [];\n  }\n  caseSensitive = definition.caseSensitive || false;\n  graph = new Graph(definition.properties.name, {caseSensitive});\n  graph.startTransaction('loadJSON', metadata);\n  properties = {};\n  ref = definition.properties;\n  for (property in ref) {\n    value = ref[property];\n    if (property === 'name') {\n      continue;\n    }\n    properties[property] = value;\n  }\n  graph.setProperties(properties);\n  ref1 = definition.processes;\n  for (id in ref1) {\n    def = ref1[id];\n    if (!def.metadata) {\n      def.metadata = {};\n    }\n    graph.addNode(id, def.component, def.metadata);\n  }\n  ref2 = definition.connections;\n  for (i = 0, len = ref2.length; i < len; i++) {\n    conn = ref2[i];\n    metadata = conn.metadata ? conn.metadata : {};\n    if (conn.data !== void 0) {\n      if (typeof conn.tgt.index === 'number') {\n        graph.addInitialIndex(conn.data, conn.tgt.process, graph.getPortName(conn.tgt.port), conn.tgt.index, metadata);\n      } else {\n        graph.addInitial(conn.data, conn.tgt.process, graph.getPortName(conn.tgt.port), metadata);\n      }\n      continue;\n    }\n    if (typeof conn.src.index === 'number' || typeof conn.tgt.index === 'number') {\n      graph.addEdgeIndex(conn.src.process, graph.getPortName(conn.src.port), conn.src.index, conn.tgt.process, graph.getPortName(conn.tgt.port), conn.tgt.index, metadata);\n      continue;\n    }\n    graph.addEdge(conn.src.process, graph.getPortName(conn.src.port), conn.tgt.process, graph.getPortName(conn.tgt.port), metadata);\n  }\n  if (definition.inports) {\n    ref3 = definition.inports;\n    for (pub in ref3) {\n      priv = ref3[pub];\n      graph.addInport(pub, priv.process, graph.getPortName(priv.port), priv.metadata);\n    }\n  }\n  if (definition.outports) {\n    ref4 = definition.outports;\n    for (pub in ref4) {\n      priv = ref4[pub];\n      graph.addOutport(pub, priv.process, graph.getPortName(priv.port), priv.metadata);\n    }\n  }\n  if (definition.groups) {\n    ref5 = definition.groups;\n    for (j = 0, len1 = ref5.length; j < len1; j++) {\n      group = ref5[j];\n      graph.addGroup(group.name, group.nodes, group.metadata || {});\n    }\n  }\n  graph.endTransaction('loadJSON');\n  return callback(null, graph);\n};\n\nexports.loadFBP = function(fbpData, callback, metadata = {}, caseSensitive = false) {\n  var definition, e;\n  try {\n    definition = require('fbp').parse(fbpData, {caseSensitive});\n  } catch (error) {\n    e = error;\n    return callback(e);\n  }\n  return exports.loadJSON(definition, callback, metadata);\n};\n\nexports.loadHTTP = function(url, callback) {\n  var req;\n  req = new XMLHttpRequest;\n  req.onreadystatechange = function() {\n    if (req.readyState !== 4) {\n      return;\n    }\n    if (req.status !== 200) {\n      return callback(new Error(`Failed to load ${url}: HTTP ${req.status}`));\n    }\n    return callback(null, req.responseText);\n  };\n  req.open('GET', url, true);\n  return req.send();\n};\n\nexports.loadFile = function(file, callback, metadata = {}, caseSensitive = false) {\n  if (platform.isBrowser()) {\n    // On browser we can try getting the file via AJAX\n    exports.loadHTTP(file, function(err, data) {\n      var definition;\n      if (err) {\n        return callback(err);\n      }\n      if (file.split('.').pop() === 'fbp') {\n        return exports.loadFBP(data, callback, metadata);\n      }\n      definition = JSON.parse(data);\n      return exports.loadJSON(definition, callback, metadata);\n    });\n    return;\n  }\n  // Node.js graph file\n  return require('fs').readFile(file, \"utf-8\", function(err, data) {\n    var definition;\n    if (err) {\n      return callback(err);\n    }\n    if (file.split('.').pop() === 'fbp') {\n      return exports.loadFBP(data, callback, {}, caseSensitive);\n    }\n    definition = JSON.parse(data);\n    return exports.loadJSON(definition, callback, {});\n  });\n};\n\n// remove everything in the graph\nresetGraph = function(graph) {\n  var edge, group, i, iip, j, k, l, len, len1, len2, len3, node, port, ref, ref1, ref2, ref3, ref4, ref5, results, v;\n  ref = (clone(graph.groups)).reverse();\n  // Edges and similar first, to have control over the order\n  // If we'd do nodes first, it will implicitly delete edges\n  // Important to make journal transactions invertible\n  for (i = 0, len = ref.length; i < len; i++) {\n    group = ref[i];\n    if (group != null) {\n      graph.removeGroup(group.name);\n    }\n  }\n  ref1 = clone(graph.outports);\n  for (port in ref1) {\n    v = ref1[port];\n    graph.removeOutport(port);\n  }\n  ref2 = clone(graph.inports);\n  for (port in ref2) {\n    v = ref2[port];\n    graph.removeInport(port);\n  }\n  // XXX: does this actually null the props??\n  graph.setProperties({});\n  ref3 = (clone(graph.initializers)).reverse();\n  for (j = 0, len1 = ref3.length; j < len1; j++) {\n    iip = ref3[j];\n    graph.removeInitial(iip.to.node, iip.to.port);\n  }\n  ref4 = (clone(graph.edges)).reverse();\n  for (k = 0, len2 = ref4.length; k < len2; k++) {\n    edge = ref4[k];\n    graph.removeEdge(edge.from.node, edge.from.port, edge.to.node, edge.to.port);\n  }\n  ref5 = (clone(graph.nodes)).reverse();\n  results = [];\n  for (l = 0, len3 = ref5.length; l < len3; l++) {\n    node = ref5[l];\n    results.push(graph.removeNode(node.id));\n  }\n  return results;\n};\n\n// Note: Caller should create transaction\n// First removes everything in @base, before building it up to mirror @to\nmergeResolveTheirsNaive = function(base, to) {\n  var edge, group, i, iip, j, k, l, len, len1, len2, len3, node, priv, pub, ref, ref1, ref2, ref3, ref4, ref5, results;\n  resetGraph(base);\n  ref = to.nodes;\n  for (i = 0, len = ref.length; i < len; i++) {\n    node = ref[i];\n    base.addNode(node.id, node.component, node.metadata);\n  }\n  ref1 = to.edges;\n  for (j = 0, len1 = ref1.length; j < len1; j++) {\n    edge = ref1[j];\n    base.addEdge(edge.from.node, edge.from.port, edge.to.node, edge.to.port, edge.metadata);\n  }\n  ref2 = to.initializers;\n  for (k = 0, len2 = ref2.length; k < len2; k++) {\n    iip = ref2[k];\n    base.addInitial(iip.from.data, iip.to.node, iip.to.port, iip.metadata);\n  }\n  base.setProperties(to.properties);\n  ref3 = to.inports;\n  for (pub in ref3) {\n    priv = ref3[pub];\n    base.addInport(pub, priv.process, priv.port, priv.metadata);\n  }\n  ref4 = to.outports;\n  for (pub in ref4) {\n    priv = ref4[pub];\n    base.addOutport(pub, priv.process, priv.port, priv.metadata);\n  }\n  ref5 = to.groups;\n  results = [];\n  for (l = 0, len3 = ref5.length; l < len3; l++) {\n    group = ref5[l];\n    results.push(base.addGroup(group.name, group.nodes, group.metadata));\n  }\n  return results;\n};\n\nexports.equivalent = function(a, b, options = {}) {\n  var A, B;\n  // TODO: add option to only compare known fields\n  // TODO: add option to ignore metadata\n  A = JSON.stringify(a);\n  B = JSON.stringify(b);\n  return A === B;\n};\n\nexports.mergeResolveTheirs = mergeResolveTheirsNaive;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\n\n// Platform detection method\nexports.isBrowser = function() {\n  if (typeof process !== 'undefined' && process.execPath && process.execPath.match(/node|iojs/)) {\n    return false;\n  }\n  return true;\n};\n\nexports.deprecated = function(message) {\n  if (exports.isBrowser()) {\n    if (window.NOFLO_FATAL_DEPRECATED) {\n      throw new Error(message);\n    }\n    console.warn(message);\n    return;\n  }\n  if (process.env.NOFLO_FATAL_DEPRECATED) {\n    throw new Error(message);\n  }\n  return console.warn(message);\n};\n","module.exports = (function() {\n  \"use strict\";\n\n  /*\n   * Generated by PEG.js 0.9.0.\n   *\n   * http://pegjs.org/\n   */\n\n  function peg$subclass(child, parent) {\n    function ctor() { this.constructor = child; }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n  }\n\n  function peg$SyntaxError(message, expected, found, location) {\n    this.message  = message;\n    this.expected = expected;\n    this.found    = found;\n    this.location = location;\n    this.name     = \"SyntaxError\";\n\n    if (typeof Error.captureStackTrace === \"function\") {\n      Error.captureStackTrace(this, peg$SyntaxError);\n    }\n  }\n\n  peg$subclass(peg$SyntaxError, Error);\n\n  function peg$parse(input) {\n    var options = arguments.length > 1 ? arguments[1] : {},\n        parser  = this,\n\n        peg$FAILED = {},\n\n        peg$startRuleFunctions = { start: peg$parsestart },\n        peg$startRuleFunction  = peg$parsestart,\n\n        peg$c0 = function() { return parser.getResult();  },\n        peg$c1 = \"INPORT=\",\n        peg$c2 = { type: \"literal\", value: \"INPORT=\", description: \"\\\"INPORT=\\\"\" },\n        peg$c3 = \".\",\n        peg$c4 = { type: \"literal\", value: \".\", description: \"\\\".\\\"\" },\n        peg$c5 = \":\",\n        peg$c6 = { type: \"literal\", value: \":\", description: \"\\\":\\\"\" },\n        peg$c7 = function(node, port, pub) {return parser.registerInports(node,port,pub)},\n        peg$c8 = \"OUTPORT=\",\n        peg$c9 = { type: \"literal\", value: \"OUTPORT=\", description: \"\\\"OUTPORT=\\\"\" },\n        peg$c10 = function(node, port, pub) {return parser.registerOutports(node,port,pub)},\n        peg$c11 = \"DEFAULT_INPORT=\",\n        peg$c12 = { type: \"literal\", value: \"DEFAULT_INPORT=\", description: \"\\\"DEFAULT_INPORT=\\\"\" },\n        peg$c13 = function(name) { defaultInPort = name},\n        peg$c14 = \"DEFAULT_OUTPORT=\",\n        peg$c15 = { type: \"literal\", value: \"DEFAULT_OUTPORT=\", description: \"\\\"DEFAULT_OUTPORT=\\\"\" },\n        peg$c16 = function(name) { defaultOutPort = name},\n        peg$c17 = function(annotation) { return parser.registerAnnotation(annotation[0], annotation[1]); },\n        peg$c18 = function(edges) {return parser.registerEdges(edges);},\n        peg$c19 = \",\",\n        peg$c20 = { type: \"literal\", value: \",\", description: \"\\\",\\\"\" },\n        peg$c21 = /^[\\n\\r\\u2028\\u2029]/,\n        peg$c22 = { type: \"class\", value: \"[\\\\n\\\\r\\\\u2028\\\\u2029]\", description: \"[\\\\n\\\\r\\\\u2028\\\\u2029]\" },\n        peg$c23 = \"#\",\n        peg$c24 = { type: \"literal\", value: \"#\", description: \"\\\"#\\\"\" },\n        peg$c25 = \"->\",\n        peg$c26 = { type: \"literal\", value: \"->\", description: \"\\\"->\\\"\" },\n        peg$c27 = function(x, y) { return [x,y]; },\n        peg$c28 = function(x, proc, y) { return [{\"tgt\":makeInPort(proc, x)},{\"src\":makeOutPort(proc, y)}]; },\n        peg$c29 = function(proc, port) { return {\"src\":makeOutPort(proc, port)} },\n        peg$c30 = function(port, proc) { return {\"tgt\":makeInPort(proc, port)} },\n        peg$c31 = \"'\",\n        peg$c32 = { type: \"literal\", value: \"'\", description: \"\\\"'\\\"\" },\n        peg$c33 = function(iip) { return {\"data\":iip.join(\"\")} },\n        peg$c34 = function(iip) { return {\"data\":iip} },\n        peg$c35 = function(name) { return name},\n        peg$c36 = /^[a-zA-Z_]/,\n        peg$c37 = { type: \"class\", value: \"[a-zA-Z_]\", description: \"[a-zA-Z_]\" },\n        peg$c38 = /^[a-zA-Z0-9_\\-]/,\n        peg$c39 = { type: \"class\", value: \"[a-zA-Z0-9_\\\\-]\", description: \"[a-zA-Z0-9_\\\\-]\" },\n        peg$c40 = function(name) { return makeName(name)},\n        peg$c41 = function(name, comp) { parser.addNode(name,comp); return name},\n        peg$c42 = function(comp) { return parser.addAnonymousNode(comp, location().start.offset) },\n        peg$c43 = \"(\",\n        peg$c44 = { type: \"literal\", value: \"(\", description: \"\\\"(\\\"\" },\n        peg$c45 = /^[a-zA-Z\\/\\-0-9_]/,\n        peg$c46 = { type: \"class\", value: \"[a-zA-Z/\\\\-0-9_]\", description: \"[a-zA-Z/\\\\-0-9_]\" },\n        peg$c47 = \")\",\n        peg$c48 = { type: \"literal\", value: \")\", description: \"\\\")\\\"\" },\n        peg$c49 = function(comp, meta) { var o = {}; comp ? o.comp = comp.join(\"\") : o.comp = ''; meta ? o.meta = meta.join(\"\").split(',') : null; return o; },\n        peg$c50 = /^[a-zA-Z\\/=_,0-9]/,\n        peg$c51 = { type: \"class\", value: \"[a-zA-Z/=_,0-9]\", description: \"[a-zA-Z/=_,0-9]\" },\n        peg$c52 = function(meta) {return meta},\n        peg$c53 = \"@\",\n        peg$c54 = { type: \"literal\", value: \"@\", description: \"\\\"@\\\"\" },\n        peg$c55 = /^[a-zA-Z0-9\\-_]/,\n        peg$c56 = { type: \"class\", value: \"[a-zA-Z0-9\\\\-_]\", description: \"[a-zA-Z0-9\\\\-_]\" },\n        peg$c57 = /^[a-zA-Z0-9\\-_ .]/,\n        peg$c58 = { type: \"class\", value: \"[a-zA-Z0-9\\\\-_ \\\\.]\", description: \"[a-zA-Z0-9\\\\-_ \\\\.]\" },\n        peg$c59 = function(key, value) { return [key.join(''), value.join('')]; },\n        peg$c60 = function(portname, portindex) {return { port: options.caseSensitive? portname : portname.toLowerCase(), index: portindex != null ? portindex : undefined }},\n        peg$c61 = function(port) { return port; },\n        peg$c62 = /^[a-zA-Z.0-9_]/,\n        peg$c63 = { type: \"class\", value: \"[a-zA-Z.0-9_]\", description: \"[a-zA-Z.0-9_]\" },\n        peg$c64 = function(portname) {return makeName(portname)},\n        peg$c65 = \"[\",\n        peg$c66 = { type: \"literal\", value: \"[\", description: \"\\\"[\\\"\" },\n        peg$c67 = /^[0-9]/,\n        peg$c68 = { type: \"class\", value: \"[0-9]\", description: \"[0-9]\" },\n        peg$c69 = \"]\",\n        peg$c70 = { type: \"literal\", value: \"]\", description: \"\\\"]\\\"\" },\n        peg$c71 = function(portindex) {return parseInt(portindex.join(''))},\n        peg$c72 = /^[^\\n\\r\\u2028\\u2029]/,\n        peg$c73 = { type: \"class\", value: \"[^\\\\n\\\\r\\\\u2028\\\\u2029]\", description: \"[^\\\\n\\\\r\\\\u2028\\\\u2029]\" },\n        peg$c74 = /^[\\\\]/,\n        peg$c75 = { type: \"class\", value: \"[\\\\\\\\]\", description: \"[\\\\\\\\]\" },\n        peg$c76 = /^[']/,\n        peg$c77 = { type: \"class\", value: \"[']\", description: \"[']\" },\n        peg$c78 = function() { return \"'\"; },\n        peg$c79 = /^[^']/,\n        peg$c80 = { type: \"class\", value: \"[^']\", description: \"[^']\" },\n        peg$c81 = \" \",\n        peg$c82 = { type: \"literal\", value: \" \", description: \"\\\" \\\"\" },\n        peg$c83 = function(value) { return value; },\n        peg$c84 = \"{\",\n        peg$c85 = { type: \"literal\", value: \"{\", description: \"\\\"{\\\"\" },\n        peg$c86 = \"}\",\n        peg$c87 = { type: \"literal\", value: \"}\", description: \"\\\"}\\\"\" },\n        peg$c88 = { type: \"other\", description: \"whitespace\" },\n        peg$c89 = /^[ \\t\\n\\r]/,\n        peg$c90 = { type: \"class\", value: \"[ \\\\t\\\\n\\\\r]\", description: \"[ \\\\t\\\\n\\\\r]\" },\n        peg$c91 = \"false\",\n        peg$c92 = { type: \"literal\", value: \"false\", description: \"\\\"false\\\"\" },\n        peg$c93 = function() { return false; },\n        peg$c94 = \"null\",\n        peg$c95 = { type: \"literal\", value: \"null\", description: \"\\\"null\\\"\" },\n        peg$c96 = function() { return null;  },\n        peg$c97 = \"true\",\n        peg$c98 = { type: \"literal\", value: \"true\", description: \"\\\"true\\\"\" },\n        peg$c99 = function() { return true;  },\n        peg$c100 = function(head, m) { return m; },\n        peg$c101 = function(head, tail) {\n                  var result = {}, i;\n\n                  result[head.name] = head.value;\n\n                  for (i = 0; i < tail.length; i++) {\n                    result[tail[i].name] = tail[i].value;\n                  }\n\n                  return result;\n                },\n        peg$c102 = function(members) { return members !== null ? members: {}; },\n        peg$c103 = function(name, value) {\n                return { name: name, value: value };\n              },\n        peg$c104 = function(head, v) { return v; },\n        peg$c105 = function(head, tail) { return [head].concat(tail); },\n        peg$c106 = function(values) { return values !== null ? values : []; },\n        peg$c107 = { type: \"other\", description: \"number\" },\n        peg$c108 = function() { return parseFloat(text()); },\n        peg$c109 = /^[1-9]/,\n        peg$c110 = { type: \"class\", value: \"[1-9]\", description: \"[1-9]\" },\n        peg$c111 = /^[eE]/,\n        peg$c112 = { type: \"class\", value: \"[eE]\", description: \"[eE]\" },\n        peg$c113 = \"-\",\n        peg$c114 = { type: \"literal\", value: \"-\", description: \"\\\"-\\\"\" },\n        peg$c115 = \"+\",\n        peg$c116 = { type: \"literal\", value: \"+\", description: \"\\\"+\\\"\" },\n        peg$c117 = \"0\",\n        peg$c118 = { type: \"literal\", value: \"0\", description: \"\\\"0\\\"\" },\n        peg$c119 = { type: \"other\", description: \"string\" },\n        peg$c120 = function(chars) { return chars.join(\"\"); },\n        peg$c121 = \"\\\"\",\n        peg$c122 = { type: \"literal\", value: \"\\\"\", description: \"\\\"\\\\\\\"\\\"\" },\n        peg$c123 = \"\\\\\",\n        peg$c124 = { type: \"literal\", value: \"\\\\\", description: \"\\\"\\\\\\\\\\\"\" },\n        peg$c125 = \"/\",\n        peg$c126 = { type: \"literal\", value: \"/\", description: \"\\\"/\\\"\" },\n        peg$c127 = \"b\",\n        peg$c128 = { type: \"literal\", value: \"b\", description: \"\\\"b\\\"\" },\n        peg$c129 = function() { return \"\\b\"; },\n        peg$c130 = \"f\",\n        peg$c131 = { type: \"literal\", value: \"f\", description: \"\\\"f\\\"\" },\n        peg$c132 = function() { return \"\\f\"; },\n        peg$c133 = \"n\",\n        peg$c134 = { type: \"literal\", value: \"n\", description: \"\\\"n\\\"\" },\n        peg$c135 = function() { return \"\\n\"; },\n        peg$c136 = \"r\",\n        peg$c137 = { type: \"literal\", value: \"r\", description: \"\\\"r\\\"\" },\n        peg$c138 = function() { return \"\\r\"; },\n        peg$c139 = \"t\",\n        peg$c140 = { type: \"literal\", value: \"t\", description: \"\\\"t\\\"\" },\n        peg$c141 = function() { return \"\\t\"; },\n        peg$c142 = \"u\",\n        peg$c143 = { type: \"literal\", value: \"u\", description: \"\\\"u\\\"\" },\n        peg$c144 = function(digits) {\n                    return String.fromCharCode(parseInt(digits, 16));\n                  },\n        peg$c145 = function(sequence) { return sequence; },\n        peg$c146 = /^[^\\0-\\x1F\"\\\\]/,\n        peg$c147 = { type: \"class\", value: \"[^\\\\0-\\\\x1F\\\\x22\\\\x5C]\", description: \"[^\\\\0-\\\\x1F\\\\x22\\\\x5C]\" },\n        peg$c148 = /^[0-9a-f]/i,\n        peg$c149 = { type: \"class\", value: \"[0-9a-f]i\", description: \"[0-9a-f]i\" },\n\n        peg$currPos          = 0,\n        peg$savedPos         = 0,\n        peg$posDetailsCache  = [{ line: 1, column: 1, seenCR: false }],\n        peg$maxFailPos       = 0,\n        peg$maxFailExpected  = [],\n        peg$silentFails      = 0,\n\n        peg$result;\n\n    if (\"startRule\" in options) {\n      if (!(options.startRule in peg$startRuleFunctions)) {\n        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n      }\n\n      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n\n    function text() {\n      return input.substring(peg$savedPos, peg$currPos);\n    }\n\n    function location() {\n      return peg$computeLocation(peg$savedPos, peg$currPos);\n    }\n\n    function expected(description) {\n      throw peg$buildException(\n        null,\n        [{ type: \"other\", description: description }],\n        input.substring(peg$savedPos, peg$currPos),\n        peg$computeLocation(peg$savedPos, peg$currPos)\n      );\n    }\n\n    function error(message) {\n      throw peg$buildException(\n        message,\n        null,\n        input.substring(peg$savedPos, peg$currPos),\n        peg$computeLocation(peg$savedPos, peg$currPos)\n      );\n    }\n\n    function peg$computePosDetails(pos) {\n      var details = peg$posDetailsCache[pos],\n          p, ch;\n\n      if (details) {\n        return details;\n      } else {\n        p = pos - 1;\n        while (!peg$posDetailsCache[p]) {\n          p--;\n        }\n\n        details = peg$posDetailsCache[p];\n        details = {\n          line:   details.line,\n          column: details.column,\n          seenCR: details.seenCR\n        };\n\n        while (p < pos) {\n          ch = input.charAt(p);\n          if (ch === \"\\n\") {\n            if (!details.seenCR) { details.line++; }\n            details.column = 1;\n            details.seenCR = false;\n          } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n            details.line++;\n            details.column = 1;\n            details.seenCR = true;\n          } else {\n            details.column++;\n            details.seenCR = false;\n          }\n\n          p++;\n        }\n\n        peg$posDetailsCache[pos] = details;\n        return details;\n      }\n    }\n\n    function peg$computeLocation(startPos, endPos) {\n      var startPosDetails = peg$computePosDetails(startPos),\n          endPosDetails   = peg$computePosDetails(endPos);\n\n      return {\n        start: {\n          offset: startPos,\n          line:   startPosDetails.line,\n          column: startPosDetails.column\n        },\n        end: {\n          offset: endPos,\n          line:   endPosDetails.line,\n          column: endPosDetails.column\n        }\n      };\n    }\n\n    function peg$fail(expected) {\n      if (peg$currPos < peg$maxFailPos) { return; }\n\n      if (peg$currPos > peg$maxFailPos) {\n        peg$maxFailPos = peg$currPos;\n        peg$maxFailExpected = [];\n      }\n\n      peg$maxFailExpected.push(expected);\n    }\n\n    function peg$buildException(message, expected, found, location) {\n      function cleanupExpected(expected) {\n        var i = 1;\n\n        expected.sort(function(a, b) {\n          if (a.description < b.description) {\n            return -1;\n          } else if (a.description > b.description) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n\n        while (i < expected.length) {\n          if (expected[i - 1] === expected[i]) {\n            expected.splice(i, 1);\n          } else {\n            i++;\n          }\n        }\n      }\n\n      function buildMessage(expected, found) {\n        function stringEscape(s) {\n          function hex(ch) { return ch.charCodeAt(0).toString(16).toUpperCase(); }\n\n          return s\n            .replace(/\\\\/g,   '\\\\\\\\')\n            .replace(/\"/g,    '\\\\\"')\n            .replace(/\\x08/g, '\\\\b')\n            .replace(/\\t/g,   '\\\\t')\n            .replace(/\\n/g,   '\\\\n')\n            .replace(/\\f/g,   '\\\\f')\n            .replace(/\\r/g,   '\\\\r')\n            .replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function(ch) { return '\\\\x0' + hex(ch); })\n            .replace(/[\\x10-\\x1F\\x80-\\xFF]/g,    function(ch) { return '\\\\x'  + hex(ch); })\n            .replace(/[\\u0100-\\u0FFF]/g,         function(ch) { return '\\\\u0' + hex(ch); })\n            .replace(/[\\u1000-\\uFFFF]/g,         function(ch) { return '\\\\u'  + hex(ch); });\n        }\n\n        var expectedDescs = new Array(expected.length),\n            expectedDesc, foundDesc, i;\n\n        for (i = 0; i < expected.length; i++) {\n          expectedDescs[i] = expected[i].description;\n        }\n\n        expectedDesc = expected.length > 1\n          ? expectedDescs.slice(0, -1).join(\", \")\n              + \" or \"\n              + expectedDescs[expected.length - 1]\n          : expectedDescs[0];\n\n        foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n\n        return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n      }\n\n      if (expected !== null) {\n        cleanupExpected(expected);\n      }\n\n      return new peg$SyntaxError(\n        message !== null ? message : buildMessage(expected, found),\n        expected,\n        found,\n        location\n      );\n    }\n\n    function peg$parsestart() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseline();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseline();\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c0();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseline() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 7) === peg$c1) {\n          s2 = peg$c1;\n          peg$currPos += 7;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c2); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsenode();\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s4 = peg$c3;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c4); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseportName();\n              if (s5 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 58) {\n                  s6 = peg$c5;\n                  peg$currPos++;\n                } else {\n                  s6 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c6); }\n                }\n                if (s6 !== peg$FAILED) {\n                  s7 = peg$parseportName();\n                  if (s7 !== peg$FAILED) {\n                    s8 = peg$parse_();\n                    if (s8 !== peg$FAILED) {\n                      s9 = peg$parseLineTerminator();\n                      if (s9 === peg$FAILED) {\n                        s9 = null;\n                      }\n                      if (s9 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c7(s3, s5, s7);\n                        s0 = s1;\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parse_();\n        if (s1 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 8) === peg$c8) {\n            s2 = peg$c8;\n            peg$currPos += 8;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c9); }\n          }\n          if (s2 !== peg$FAILED) {\n            s3 = peg$parsenode();\n            if (s3 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 46) {\n                s4 = peg$c3;\n                peg$currPos++;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n              if (s4 !== peg$FAILED) {\n                s5 = peg$parseportName();\n                if (s5 !== peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 58) {\n                    s6 = peg$c5;\n                    peg$currPos++;\n                  } else {\n                    s6 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c6); }\n                  }\n                  if (s6 !== peg$FAILED) {\n                    s7 = peg$parseportName();\n                    if (s7 !== peg$FAILED) {\n                      s8 = peg$parse_();\n                      if (s8 !== peg$FAILED) {\n                        s9 = peg$parseLineTerminator();\n                        if (s9 === peg$FAILED) {\n                          s9 = null;\n                        }\n                        if (s9 !== peg$FAILED) {\n                          peg$savedPos = s0;\n                          s1 = peg$c10(s3, s5, s7);\n                          s0 = s1;\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = peg$parse_();\n          if (s1 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 15) === peg$c11) {\n              s2 = peg$c11;\n              peg$currPos += 15;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c12); }\n            }\n            if (s2 !== peg$FAILED) {\n              s3 = peg$parseportName();\n              if (s3 !== peg$FAILED) {\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                  s5 = peg$parseLineTerminator();\n                  if (s5 === peg$FAILED) {\n                    s5 = null;\n                  }\n                  if (s5 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c13(s3);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parse_();\n            if (s1 !== peg$FAILED) {\n              if (input.substr(peg$currPos, 16) === peg$c14) {\n                s2 = peg$c14;\n                peg$currPos += 16;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c15); }\n              }\n              if (s2 !== peg$FAILED) {\n                s3 = peg$parseportName();\n                if (s3 !== peg$FAILED) {\n                  s4 = peg$parse_();\n                  if (s4 !== peg$FAILED) {\n                    s5 = peg$parseLineTerminator();\n                    if (s5 === peg$FAILED) {\n                      s5 = null;\n                    }\n                    if (s5 !== peg$FAILED) {\n                      peg$savedPos = s0;\n                      s1 = peg$c16(s3);\n                      s0 = s1;\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n            if (s0 === peg$FAILED) {\n              s0 = peg$currPos;\n              s1 = peg$parseannotation();\n              if (s1 !== peg$FAILED) {\n                s2 = peg$parsenewline();\n                if (s2 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c17(s1);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n              if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                s1 = peg$parsecomment();\n                if (s1 !== peg$FAILED) {\n                  s2 = peg$parsenewline();\n                  if (s2 === peg$FAILED) {\n                    s2 = null;\n                  }\n                  if (s2 !== peg$FAILED) {\n                    s1 = [s1, s2];\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n                if (s0 === peg$FAILED) {\n                  s0 = peg$currPos;\n                  s1 = peg$parse_();\n                  if (s1 !== peg$FAILED) {\n                    s2 = peg$parsenewline();\n                    if (s2 !== peg$FAILED) {\n                      s1 = [s1, s2];\n                      s0 = s1;\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$currPos;\n                    s1 = peg$parse_();\n                    if (s1 !== peg$FAILED) {\n                      s2 = peg$parseconnection();\n                      if (s2 !== peg$FAILED) {\n                        s3 = peg$parse_();\n                        if (s3 !== peg$FAILED) {\n                          s4 = peg$parseLineTerminator();\n                          if (s4 === peg$FAILED) {\n                            s4 = null;\n                          }\n                          if (s4 !== peg$FAILED) {\n                            peg$savedPos = s0;\n                            s1 = peg$c18(s2);\n                            s0 = s1;\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseLineTerminator() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 44) {\n          s2 = peg$c19;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c20); }\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsecomment();\n          if (s3 === peg$FAILED) {\n            s3 = null;\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parsenewline();\n            if (s4 === peg$FAILED) {\n              s4 = null;\n            }\n            if (s4 !== peg$FAILED) {\n              s1 = [s1, s2, s3, s4];\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenewline() {\n      var s0;\n\n      if (peg$c21.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c22); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsecomment() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 35) {\n          s2 = peg$c23;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c24); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseanychar();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseanychar();\n          }\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseconnection() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = peg$parsesource();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 2) === peg$c25) {\n            s3 = peg$c25;\n            peg$currPos += 2;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c26); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseconnection();\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c27(s1, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsedestination();\n      }\n\n      return s0;\n    }\n\n    function peg$parsesource() {\n      var s0;\n\n      s0 = peg$parsebridge();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseoutport();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseiip();\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsedestination() {\n      var s0;\n\n      s0 = peg$parseinport();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsebridge();\n      }\n\n      return s0;\n    }\n\n    function peg$parsebridge() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parseport__();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsenode();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parse__port();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c28(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseport__();\n        if (s1 === peg$FAILED) {\n          s1 = null;\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsenodeWithComponent();\n          if (s2 !== peg$FAILED) {\n            s3 = peg$parse__port();\n            if (s3 === peg$FAILED) {\n              s3 = null;\n            }\n            if (s3 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c28(s1, s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseoutport() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsenode();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse__port();\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c29(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseinport() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parseport__();\n      if (s1 === peg$FAILED) {\n        s1 = null;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsenode();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c30(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseiip() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 39) {\n        s1 = peg$c31;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c32); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseiipchar();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseiipchar();\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 39) {\n            s3 = peg$c31;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c32); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c33(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseJSON_text();\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c34(s1);\n        }\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenode() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      s1 = peg$parsenodeNameAndComponent();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c35(s1);\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsenodeName();\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c35(s1);\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = peg$parsenodeComponent();\n          if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c35(s1);\n          }\n          s0 = s1;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsenodeName() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      if (peg$c36.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c37); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        if (peg$c38.test(input.charAt(peg$currPos))) {\n          s4 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c39); }\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          if (peg$c38.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c39); }\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c40(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsenodeNameAndComponent() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsenodeName();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsecomponent();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c41(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenodeComponent() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      s1 = peg$parsecomponent();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c42(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsenodeWithComponent() {\n      var s0;\n\n      s0 = peg$parsenodeNameAndComponent();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsenodeComponent();\n      }\n\n      return s0;\n    }\n\n    function peg$parsecomponent() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s1 = peg$c43;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c44); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c45.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c46); }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c45.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c46); }\n          }\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsecompMeta();\n          if (s3 === peg$FAILED) {\n            s3 = null;\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 41) {\n              s4 = peg$c47;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c48); }\n            }\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c49(s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsecompMeta() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 58) {\n        s1 = peg$c5;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c6); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c50.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c51); }\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            if (peg$c50.test(input.charAt(peg$currPos))) {\n              s3 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c51); }\n            }\n          }\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c52(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseannotation() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 35) {\n        s1 = peg$c23;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c24); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse__();\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 64) {\n            s3 = peg$c53;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c54); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            if (peg$c55.test(input.charAt(peg$currPos))) {\n              s5 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c56); }\n            }\n            if (s5 !== peg$FAILED) {\n              while (s5 !== peg$FAILED) {\n                s4.push(s5);\n                if (peg$c55.test(input.charAt(peg$currPos))) {\n                  s5 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s5 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c56); }\n                }\n              }\n            } else {\n              s4 = peg$FAILED;\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parse__();\n              if (s5 !== peg$FAILED) {\n                s6 = [];\n                if (peg$c57.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c58); }\n                }\n                if (s7 !== peg$FAILED) {\n                  while (s7 !== peg$FAILED) {\n                    s6.push(s7);\n                    if (peg$c57.test(input.charAt(peg$currPos))) {\n                      s7 = input.charAt(peg$currPos);\n                      peg$currPos++;\n                    } else {\n                      s7 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c58); }\n                    }\n                  }\n                } else {\n                  s6 = peg$FAILED;\n                }\n                if (s6 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c59(s4, s6);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseport() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parseportName();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseportIndex();\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c60(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseport__() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parseport();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse__();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c61(s1);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parse__port() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parse__();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseport();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c61(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseportName() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      if (peg$c36.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c37); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        if (peg$c62.test(input.charAt(peg$currPos))) {\n          s4 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c63); }\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          if (peg$c62.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c63); }\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c64(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseportIndex() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s1 = peg$c65;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c66); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c67.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c68); }\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            if (peg$c67.test(input.charAt(peg$currPos))) {\n              s3 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c68); }\n            }\n          }\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 93) {\n            s3 = peg$c69;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c70); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c71(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseanychar() {\n      var s0;\n\n      if (peg$c72.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c73); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseiipchar() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      if (peg$c74.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c75); }\n      }\n      if (s1 !== peg$FAILED) {\n        if (peg$c76.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c77); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c78();\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        if (peg$c79.test(input.charAt(peg$currPos))) {\n          s0 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s0 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c80); }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parse_() {\n      var s0, s1;\n\n      s0 = [];\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s1 = peg$c81;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c82); }\n      }\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        if (input.charCodeAt(peg$currPos) === 32) {\n          s1 = peg$c81;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c82); }\n        }\n      }\n      if (s0 === peg$FAILED) {\n        s0 = null;\n      }\n\n      return s0;\n    }\n\n    function peg$parse__() {\n      var s0, s1;\n\n      s0 = [];\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s1 = peg$c81;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c82); }\n      }\n      if (s1 !== peg$FAILED) {\n        while (s1 !== peg$FAILED) {\n          s0.push(s1);\n          if (input.charCodeAt(peg$currPos) === 32) {\n            s1 = peg$c81;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c82); }\n          }\n        }\n      } else {\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseJSON_text() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsevalue();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c83(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsebegin_array() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 91) {\n          s2 = peg$c65;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c66); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsebegin_object() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 123) {\n          s2 = peg$c84;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c85); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseend_array() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 93) {\n          s2 = peg$c69;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c70); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseend_object() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 125) {\n          s2 = peg$c86;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c87); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsename_separator() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 58) {\n          s2 = peg$c5;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c6); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsevalue_separator() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 44) {\n          s2 = peg$c19;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c20); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsews() {\n      var s0, s1;\n\n      peg$silentFails++;\n      s0 = [];\n      if (peg$c89.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c90); }\n      }\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        if (peg$c89.test(input.charAt(peg$currPos))) {\n          s1 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c90); }\n        }\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c88); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsevalue() {\n      var s0;\n\n      s0 = peg$parsefalse();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsenull();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsetrue();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseobject();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parsearray();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsenumber();\n                if (s0 === peg$FAILED) {\n                  s0 = peg$parsestring();\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsefalse() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 5) === peg$c91) {\n        s1 = peg$c91;\n        peg$currPos += 5;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c92); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c93();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsenull() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 4) === peg$c94) {\n        s1 = peg$c94;\n        peg$currPos += 4;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c95); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c96();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsetrue() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 4) === peg$c97) {\n        s1 = peg$c97;\n        peg$currPos += 4;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c98); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c99();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseobject() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      s1 = peg$parsebegin_object();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = peg$parsemember();\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          s5 = peg$currPos;\n          s6 = peg$parsevalue_separator();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsemember();\n            if (s7 !== peg$FAILED) {\n              peg$savedPos = s5;\n              s6 = peg$c100(s3, s7);\n              s5 = s6;\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$currPos;\n            s6 = peg$parsevalue_separator();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsemember();\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c100(s3, s7);\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s2;\n            s3 = peg$c101(s3, s4);\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseend_object();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c102(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsemember() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsestring();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsename_separator();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsevalue();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c103(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsearray() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      s1 = peg$parsebegin_array();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = peg$parsevalue();\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          s5 = peg$currPos;\n          s6 = peg$parsevalue_separator();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsevalue();\n            if (s7 !== peg$FAILED) {\n              peg$savedPos = s5;\n              s6 = peg$c104(s3, s7);\n              s5 = s6;\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$currPos;\n            s6 = peg$parsevalue_separator();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsevalue();\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c104(s3, s7);\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s2;\n            s3 = peg$c105(s3, s4);\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseend_array();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c106(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenumber() {\n      var s0, s1, s2, s3, s4;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = peg$parseminus();\n      if (s1 === peg$FAILED) {\n        s1 = null;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseint();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsefrac();\n          if (s3 === peg$FAILED) {\n            s3 = null;\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseexp();\n            if (s4 === peg$FAILED) {\n              s4 = null;\n            }\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c108();\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c107); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsedecimal_point() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s0 = peg$c3;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c4); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsedigit1_9() {\n      var s0;\n\n      if (peg$c109.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c110); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsee() {\n      var s0;\n\n      if (peg$c111.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c112); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseexp() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$parsee();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseminus();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parseplus();\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseDIGIT();\n          if (s4 !== peg$FAILED) {\n            while (s4 !== peg$FAILED) {\n              s3.push(s4);\n              s4 = peg$parseDIGIT();\n            }\n          } else {\n            s3 = peg$FAILED;\n          }\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsefrac() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsedecimal_point();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseDIGIT();\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$parseDIGIT();\n          }\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseint() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$parsezero();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsedigit1_9();\n        if (s1 !== peg$FAILED) {\n          s2 = [];\n          s3 = peg$parseDIGIT();\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$parseDIGIT();\n          }\n          if (s2 !== peg$FAILED) {\n            s1 = [s1, s2];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseminus() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 45) {\n        s0 = peg$c113;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c114); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseplus() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 43) {\n        s0 = peg$c115;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c116); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsezero() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 48) {\n        s0 = peg$c117;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c118); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsestring() {\n      var s0, s1, s2, s3;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = peg$parsequotation_mark();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsechar();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsechar();\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsequotation_mark();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c120(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c119); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsechar() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n      s0 = peg$parseunescaped();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseescape();\n        if (s1 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s2 = peg$c121;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c122); }\n          }\n          if (s2 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 92) {\n              s2 = peg$c123;\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c124); }\n            }\n            if (s2 === peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 47) {\n                s2 = peg$c125;\n                peg$currPos++;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c126); }\n              }\n              if (s2 === peg$FAILED) {\n                s2 = peg$currPos;\n                if (input.charCodeAt(peg$currPos) === 98) {\n                  s3 = peg$c127;\n                  peg$currPos++;\n                } else {\n                  s3 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c128); }\n                }\n                if (s3 !== peg$FAILED) {\n                  peg$savedPos = s2;\n                  s3 = peg$c129();\n                }\n                s2 = s3;\n                if (s2 === peg$FAILED) {\n                  s2 = peg$currPos;\n                  if (input.charCodeAt(peg$currPos) === 102) {\n                    s3 = peg$c130;\n                    peg$currPos++;\n                  } else {\n                    s3 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c131); }\n                  }\n                  if (s3 !== peg$FAILED) {\n                    peg$savedPos = s2;\n                    s3 = peg$c132();\n                  }\n                  s2 = s3;\n                  if (s2 === peg$FAILED) {\n                    s2 = peg$currPos;\n                    if (input.charCodeAt(peg$currPos) === 110) {\n                      s3 = peg$c133;\n                      peg$currPos++;\n                    } else {\n                      s3 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c134); }\n                    }\n                    if (s3 !== peg$FAILED) {\n                      peg$savedPos = s2;\n                      s3 = peg$c135();\n                    }\n                    s2 = s3;\n                    if (s2 === peg$FAILED) {\n                      s2 = peg$currPos;\n                      if (input.charCodeAt(peg$currPos) === 114) {\n                        s3 = peg$c136;\n                        peg$currPos++;\n                      } else {\n                        s3 = peg$FAILED;\n                        if (peg$silentFails === 0) { peg$fail(peg$c137); }\n                      }\n                      if (s3 !== peg$FAILED) {\n                        peg$savedPos = s2;\n                        s3 = peg$c138();\n                      }\n                      s2 = s3;\n                      if (s2 === peg$FAILED) {\n                        s2 = peg$currPos;\n                        if (input.charCodeAt(peg$currPos) === 116) {\n                          s3 = peg$c139;\n                          peg$currPos++;\n                        } else {\n                          s3 = peg$FAILED;\n                          if (peg$silentFails === 0) { peg$fail(peg$c140); }\n                        }\n                        if (s3 !== peg$FAILED) {\n                          peg$savedPos = s2;\n                          s3 = peg$c141();\n                        }\n                        s2 = s3;\n                        if (s2 === peg$FAILED) {\n                          s2 = peg$currPos;\n                          if (input.charCodeAt(peg$currPos) === 117) {\n                            s3 = peg$c142;\n                            peg$currPos++;\n                          } else {\n                            s3 = peg$FAILED;\n                            if (peg$silentFails === 0) { peg$fail(peg$c143); }\n                          }\n                          if (s3 !== peg$FAILED) {\n                            s4 = peg$currPos;\n                            s5 = peg$currPos;\n                            s6 = peg$parseHEXDIG();\n                            if (s6 !== peg$FAILED) {\n                              s7 = peg$parseHEXDIG();\n                              if (s7 !== peg$FAILED) {\n                                s8 = peg$parseHEXDIG();\n                                if (s8 !== peg$FAILED) {\n                                  s9 = peg$parseHEXDIG();\n                                  if (s9 !== peg$FAILED) {\n                                    s6 = [s6, s7, s8, s9];\n                                    s5 = s6;\n                                  } else {\n                                    peg$currPos = s5;\n                                    s5 = peg$FAILED;\n                                  }\n                                } else {\n                                  peg$currPos = s5;\n                                  s5 = peg$FAILED;\n                                }\n                              } else {\n                                peg$currPos = s5;\n                                s5 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s5;\n                              s5 = peg$FAILED;\n                            }\n                            if (s5 !== peg$FAILED) {\n                              s4 = input.substring(s4, peg$currPos);\n                            } else {\n                              s4 = s5;\n                            }\n                            if (s4 !== peg$FAILED) {\n                              peg$savedPos = s2;\n                              s3 = peg$c144(s4);\n                              s2 = s3;\n                            } else {\n                              peg$currPos = s2;\n                              s2 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s2;\n                            s2 = peg$FAILED;\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c145(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseescape() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 92) {\n        s0 = peg$c123;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c124); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsequotation_mark() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 34) {\n        s0 = peg$c121;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c122); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseunescaped() {\n      var s0;\n\n      if (peg$c146.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c147); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseDIGIT() {\n      var s0;\n\n      if (peg$c67.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c68); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseHEXDIG() {\n      var s0;\n\n      if (peg$c148.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c149); }\n      }\n\n      return s0;\n    }\n\n\n      var parser, edges, nodes;\n\n      var defaultInPort = \"IN\", defaultOutPort = \"OUT\";\n\n      parser = this;\n      delete parser.properties;\n      delete parser.inports;\n      delete parser.outports;\n      delete parser.groups;\n\n      edges = parser.edges = [];\n\n      nodes = {};\n\n      var serialize, indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n      parser.validateContents = function(graph, options) {\n        // Ensure all nodes have a component\n        if (graph.processes) {\n          Object.keys(graph.processes).forEach(function (node) {\n            if (!graph.processes[node].component) {\n              throw new Error('Node \"' + node + '\" does not have a component defined');\n            }\n          });\n        }\n        // Ensure all inports point to existing nodes\n        if (graph.inports) {\n          Object.keys(graph.inports).forEach(function (port) {\n            var portDef = graph.inports[port];\n            if (!graph.processes[portDef.process]) {\n              throw new Error('Inport \"' + port + '\" is connected to an undefined target node \"' + portDef.process + '\"');\n            }\n          });\n        }\n        // Ensure all outports point to existing nodes\n        if (graph.outports) {\n          Object.keys(graph.outports).forEach(function (port) {\n            var portDef = graph.outports[port];\n            if (!graph.processes[portDef.process]) {\n              throw new Error('Outport \"' + port + '\" is connected to an undefined source node \"' + portDef.process + '\"');\n            }\n          });\n        }\n        // Ensure all edges have nodes defined\n        if (graph.connections) {\n          graph.connections.forEach(function (edge) {\n            if (edge.tgt && !graph.processes[edge.tgt.process]) {\n              if (edge.data) {\n                throw new Error('IIP containing \"' + edge.data + '\" is connected to an undefined target node \"' + edge.tgt.process + '\"');\n              }\n              throw new Error('Edge from \"' + edge.src.process + '\" port \"' + edge.src.port + '\" is connected to an undefined target node \"' + edge.tgt.process + '\"');\n            }\n            if (edge.src && !graph.processes[edge.src.process]) {\n              throw new Error('Edge to \"' + edge.tgt.process + '\" port \"' + edge.tgt.port + '\" is connected to an undefined source node \"' + edge.src.process + '\"');\n            }\n          });\n        }\n      };\n\n      parser.serialize = function(graph) {\n        var conn, getInOutName, getName, i, inPort, input, len, name, namedComponents, outPort, output, process, ref, ref1, ref2, src, srcName, srcPort, srcProcess, tgt, tgtName, tgtPort, tgtProcess;\n        if (options == null) {\n          options = {};\n        }\n        if (typeof(graph) === 'string') {\n          input = JSON.parse(graph);\n        } else {\n          input = graph;\n        }\n        namedComponents = [];\n        output = \"\";\n        getName = function(name) {\n          if (input.processes[name].metadata != null) {\n            name = input.processes[name].metadata.label;\n          }\n          if (name.indexOf('/') > -1) {\n            name = name.split('/').pop();\n          }\n          return name;\n        };\n        getInOutName = function(name, data) {\n          if ((data.process != null) && (input.processes[data.process].metadata != null)) {\n            name = input.processes[data.process].metadata.label;\n          } else if (data.process != null) {\n            name = data.process;\n          }\n          if (name.indexOf('/') > -1) {\n            name = name.split('/').pop();\n          }\n          return name;\n        };\n        if (input.properties) {\n          if (input.properties.environment && input.properties.environment.type) {\n            output += \"# @runtime \" + input.properties.environment.type + \"\\n\";\n          }\n          Object.keys(input.properties).forEach(function (prop) {\n            if (!prop.match(/^[a-zA-Z0-9\\-_]+$/)) {\n              return;\n            }\n            var propval = input.properties[prop];\n            if (typeof propval !== 'string') {\n              return;\n            }\n            if (!propval.match(/^[a-zA-Z0-9\\-_\\s\\.]+$/)) {\n              return;\n            }\n            output += \"# @\" + prop + \" \" + propval + '\\n';\n          });\n        }\n        ref = input.inports;\n        for (name in ref) {\n          inPort = ref[name];\n          process = getInOutName(name, inPort);\n          name = input.caseSensitive ? name : name.toUpperCase();\n          inPort.port = input.caseSensitive ? inPort.port : inPort.port.toUpperCase();\n          output += \"INPORT=\" + process + \".\" + inPort.port + \":\" + name + \"\\n\";\n        }\n        ref1 = input.outports;\n        for (name in ref1) {\n          outPort = ref1[name];\n          process = getInOutName(name, inPort);\n          name = input.caseSensitive ? name : name.toUpperCase();\n          outPort.port = input.caseSensitive ? outPort.port : outPort.port.toUpperCase();\n          output += \"OUTPORT=\" + process + \".\" + outPort.port + \":\" + name + \"\\n\";\n        }\n        output += \"\\n\";\n        ref2 = input.connections;\n        for (i = 0, len = ref2.length; i < len; i++) {\n          conn = ref2[i];\n          if (conn.data != null) {\n            tgtPort = input.caseSensitive ? conn.tgt.port : conn.tgt.port.toUpperCase();\n            tgtName = conn.tgt.process;\n            tgtProcess = input.processes[tgtName].component;\n            tgt = getName(tgtName);\n            if (indexOf.call(namedComponents, tgtProcess) < 0) {\n              tgt += \"(\" + tgtProcess + \")\";\n              namedComponents.push(tgtProcess);\n            }\n            output += '\"' + conn.data + '\"' + (\" -> \" + tgtPort + \" \" + tgt + \"\\n\");\n          } else {\n            srcPort = input.caseSensitive ? conn.src.port : conn.src.port.toUpperCase();\n            srcName = conn.src.process;\n            srcProcess = input.processes[srcName].component;\n            src = getName(srcName);\n            if (indexOf.call(namedComponents, srcProcess) < 0) {\n              src += \"(\" + srcProcess + \")\";\n              namedComponents.push(srcProcess);\n            }\n            tgtPort = input.caseSensitive ? conn.tgt.port : conn.tgt.port.toUpperCase();\n            tgtName = conn.tgt.process;\n            tgtProcess = input.processes[tgtName].component;\n            tgt = getName(tgtName);\n            if (indexOf.call(namedComponents, tgtProcess) < 0) {\n              tgt += \"(\" + tgtProcess + \")\";\n              namedComponents.push(tgtProcess);\n            }\n            output += src + \" \" + srcPort + \" -> \" + tgtPort + \" \" + tgt + \"\\n\";\n          }\n        }\n        return output;\n      };\n\n      parser.addNode = function (nodeName, comp) {\n        if (!nodes[nodeName]) {\n          nodes[nodeName] = {}\n        }\n        if (!!comp.comp) {\n          nodes[nodeName].component = comp.comp;\n        }\n        if (!!comp.meta) {\n          var metadata = {};\n          for (var i = 0; i < comp.meta.length; i++) {\n            var item = comp.meta[i].split('=');\n            if (item.length === 1) {\n              item = ['routes', item[0]];\n            }\n            var key = item[0];\n            var value = item[1];\n            if (key==='x' || key==='y') {\n              value = parseFloat(value);\n            }\n            metadata[key] = value;\n          }\n          nodes[nodeName].metadata=metadata;\n        }\n\n      }\n\n      var anonymousIndexes = {};\n      var anonymousNodeNames = {};\n      parser.addAnonymousNode = function(comp, offset) {\n          if (!anonymousNodeNames[offset]) {\n              var componentName = comp.comp.replace(/[^a-zA-Z0-9]+/, \"_\");\n              anonymousIndexes[componentName] = (anonymousIndexes[componentName] || 0) + 1;\n              anonymousNodeNames[offset] = \"_\" + componentName + \"_\" + anonymousIndexes[componentName];\n              this.addNode(anonymousNodeNames[offset], comp);\n          }\n          return anonymousNodeNames[offset];\n      }\n\n      parser.getResult = function () {\n        var result = {\n          inports: parser.inports || {},\n          outports: parser.outports || {},\n          groups: parser.groups || [],\n          processes: nodes || {},\n          connections: parser.processEdges()\n        };\n\n        if (parser.properties) {\n          result.properties = parser.properties;\n        }\n        result.caseSensitive = options.caseSensitive || false;\n\n        var validateSchema = parser.validateSchema; // default\n        if (typeof(options.validateSchema) !== 'undefined') { validateSchema = options.validateSchema; } // explicit option\n        if (validateSchema) {\n          if (typeof(tv4) === 'undefined') {\n            var tv4 = require(\"tv4\");\n          }\n          var schema = require(\"../schema/graph.json\");\n          var validation = tv4.validateMultiple(result, schema);\n          if (!validation.valid) {\n            throw new Error(\"fbp: Did not validate againt graph schema:\\n\" + JSON.stringify(validation.errors, null, 2));\n          }\n        }\n\n        if (typeof options.validateContents === 'undefined' || options.validateContents) {\n          parser.validateContents(result);\n        }\n\n        return result;\n      }\n\n      var flatten = function (array, isShallow) {\n        var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n        while (++index < length) {\n          var value = array[index];\n\n          if (value instanceof Array) {\n            Array.prototype.push.apply(result, isShallow ? value : flatten(value));\n          }\n          else {\n            result.push(value);\n          }\n        }\n        return result;\n      }\n\n      parser.registerAnnotation = function (key, value) {\n        if (!parser.properties) {\n          parser.properties = {};\n        }\n\n        if (key === 'runtime') {\n          parser.properties.environment = {};\n          parser.properties.environment.type = value;\n          return;\n        }\n\n        parser.properties[key] = value;\n      };\n\n      parser.registerInports = function (node, port, pub) {\n        if (!parser.inports) {\n          parser.inports = {};\n        }\n\n        if (!options.caseSensitive) {\n          pub = pub.toLowerCase();\n          port = port.toLowerCase();\n        }\n\n        parser.inports[pub] = {process:node, port:port};\n      }\n      parser.registerOutports = function (node, port, pub) {\n        if (!parser.outports) {\n          parser.outports = {};\n        }\n\n        if (!options.caseSensitive) {\n          pub = pub.toLowerCase();\n          port = port.toLowerCase();\n        }\n\n        parser.outports[pub] = {process:node, port:port};\n      }\n\n      parser.registerEdges = function (edges) {\n        if (Array.isArray(edges)) {\n          edges.forEach(function (o, i) {\n            parser.edges.push(o);\n          });\n        }\n      }\n\n      parser.processEdges = function () {\n        var flats, grouped;\n        flats = flatten(parser.edges);\n        grouped = [];\n        var current = {};\n        for (var i = 1; i < flats.length; i += 1) {\n            // skip over default ports at the beginning of lines (could also handle this in grammar)\n            if ((\"src\" in flats[i - 1] || \"data\" in flats[i - 1]) && \"tgt\" in flats[i]) {\n                flats[i - 1].tgt = flats[i].tgt;\n                grouped.push(flats[i - 1]);\n                i++;\n            }\n        }\n        return grouped;\n      }\n\n      function makeName(s) {\n        return s[0] + s[1].join(\"\");\n      }\n\n      function makePort(process, port, defaultPort) {\n        if (!options.caseSensitive) {\n          defaultPort = defaultPort.toLowerCase()\n        }\n        var p = {\n            process: process,\n            port: port ? port.port : defaultPort\n        };\n        if (port && port.index != null) {\n            p.index = port.index;\n        }\n        return p;\n    }\n\n      function makeInPort(process, port) {\n          return makePort(process, port, defaultInPort);\n      }\n      function makeOutPort(process, port) {\n          return makePort(process, port, defaultOutPort);\n      }\n\n\n    peg$result = peg$startRuleFunction();\n\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n      return peg$result;\n    } else {\n      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n        peg$fail({ type: \"end\", description: \"end of input\" });\n      }\n\n      throw peg$buildException(\n        null,\n        peg$maxFailExpected,\n        peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n        peg$maxFailPos < input.length\n          ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n          : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n      );\n    }\n  }\n\n  return {\n    SyntaxError: peg$SyntaxError,\n    parse:       peg$parse\n  };\n})();","/*\r\nAuthor: Geraint Luff and others\r\nYear: 2013\r\n\r\nThis code is released into the \"public domain\" by its author(s).  Anybody may use, alter and distribute the code without restriction.  The author makes no guarantees, and takes no liability of any kind for use of this code.\r\n\r\nIf you find a bug or make an improvement, it would be courteous to let the author know, but it is not compulsory.\r\n*/\r\n(function (global, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define([], factory);\r\n  } else if (typeof module !== 'undefined' && module.exports){\r\n    // CommonJS. Define export.\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.tv4 = factory();\r\n  }\r\n}(this, function () {\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FObject%2Fkeys\r\nif (!Object.keys) {\r\n\tObject.keys = (function () {\r\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty,\r\n\t\t\thasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\r\n\t\t\tdontEnums = [\r\n\t\t\t\t'toString',\r\n\t\t\t\t'toLocaleString',\r\n\t\t\t\t'valueOf',\r\n\t\t\t\t'hasOwnProperty',\r\n\t\t\t\t'isPrototypeOf',\r\n\t\t\t\t'propertyIsEnumerable',\r\n\t\t\t\t'constructor'\r\n\t\t\t],\r\n\t\t\tdontEnumsLength = dontEnums.length;\r\n\r\n\t\treturn function (obj) {\r\n\t\t\tif (typeof obj !== 'object' && typeof obj !== 'function' || obj === null) {\r\n\t\t\t\tthrow new TypeError('Object.keys called on non-object');\r\n\t\t\t}\r\n\r\n\t\t\tvar result = [];\r\n\r\n\t\t\tfor (var prop in obj) {\r\n\t\t\t\tif (hasOwnProperty.call(obj, prop)) {\r\n\t\t\t\t\tresult.push(prop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (hasDontEnumBug) {\r\n\t\t\t\tfor (var i=0; i < dontEnumsLength; i++) {\r\n\t\t\t\t\tif (hasOwnProperty.call(obj, dontEnums[i])) {\r\n\t\t\t\t\t\tresult.push(dontEnums[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t})();\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\r\nif (!Object.create) {\r\n\tObject.create = (function(){\r\n\t\tfunction F(){}\r\n\r\n\t\treturn function(o){\r\n\t\t\tif (arguments.length !== 1) {\r\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\r\n\t\t\t}\r\n\t\t\tF.prototype = o;\r\n\t\t\treturn new F();\r\n\t\t};\r\n\t})();\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FisArray\r\nif(!Array.isArray) {\r\n\tArray.isArray = function (vArg) {\r\n\t\treturn Object.prototype.toString.call(vArg) === \"[object Array]\";\r\n\t};\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FindexOf\r\nif (!Array.prototype.indexOf) {\r\n\tArray.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\r\n\t\tif (this === null) {\r\n\t\t\tthrow new TypeError();\r\n\t\t}\r\n\t\tvar t = Object(this);\r\n\t\tvar len = t.length >>> 0;\r\n\r\n\t\tif (len === 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar n = 0;\r\n\t\tif (arguments.length > 1) {\r\n\t\t\tn = Number(arguments[1]);\r\n\t\t\tif (n !== n) { // shortcut for verifying if it's NaN\r\n\t\t\t\tn = 0;\r\n\t\t\t} else if (n !== 0 && n !== Infinity && n !== -Infinity) {\r\n\t\t\t\tn = (n > 0 || -1) * Math.floor(Math.abs(n));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (n >= len) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\r\n\t\tfor (; k < len; k++) {\r\n\t\t\tif (k in t && t[k] === searchElement) {\r\n\t\t\t\treturn k;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n}\r\n\r\n// Grungey Object.isFrozen hack\r\nif (!Object.isFrozen) {\r\n\tObject.isFrozen = function (obj) {\r\n\t\tvar key = \"tv4_test_frozen_key\";\r\n\t\twhile (obj.hasOwnProperty(key)) {\r\n\t\t\tkey += Math.random();\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tobj[key] = true;\r\n\t\t\tdelete obj[key];\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n}\r\n// Based on: https://github.com/geraintluff/uri-templates, but with all the de-substitution stuff removed\r\n\r\nvar uriTemplateGlobalModifiers = {\r\n\t\"+\": true,\r\n\t\"#\": true,\r\n\t\".\": true,\r\n\t\"/\": true,\r\n\t\";\": true,\r\n\t\"?\": true,\r\n\t\"&\": true\r\n};\r\nvar uriTemplateSuffices = {\r\n\t\"*\": true\r\n};\r\n\r\nfunction notReallyPercentEncode(string) {\r\n\treturn encodeURI(string).replace(/%25[0-9][0-9]/g, function (doubleEncoded) {\r\n\t\treturn \"%\" + doubleEncoded.substring(3);\r\n\t});\r\n}\r\n\r\nfunction uriTemplateSubstitution(spec) {\r\n\tvar modifier = \"\";\r\n\tif (uriTemplateGlobalModifiers[spec.charAt(0)]) {\r\n\t\tmodifier = spec.charAt(0);\r\n\t\tspec = spec.substring(1);\r\n\t}\r\n\tvar separator = \"\";\r\n\tvar prefix = \"\";\r\n\tvar shouldEscape = true;\r\n\tvar showVariables = false;\r\n\tvar trimEmptyString = false;\r\n\tif (modifier === '+') {\r\n\t\tshouldEscape = false;\r\n\t} else if (modifier === \".\") {\r\n\t\tprefix = \".\";\r\n\t\tseparator = \".\";\r\n\t} else if (modifier === \"/\") {\r\n\t\tprefix = \"/\";\r\n\t\tseparator = \"/\";\r\n\t} else if (modifier === '#') {\r\n\t\tprefix = \"#\";\r\n\t\tshouldEscape = false;\r\n\t} else if (modifier === ';') {\r\n\t\tprefix = \";\";\r\n\t\tseparator = \";\";\r\n\t\tshowVariables = true;\r\n\t\ttrimEmptyString = true;\r\n\t} else if (modifier === '?') {\r\n\t\tprefix = \"?\";\r\n\t\tseparator = \"&\";\r\n\t\tshowVariables = true;\r\n\t} else if (modifier === '&') {\r\n\t\tprefix = \"&\";\r\n\t\tseparator = \"&\";\r\n\t\tshowVariables = true;\r\n\t}\r\n\r\n\tvar varNames = [];\r\n\tvar varList = spec.split(\",\");\r\n\tvar varSpecs = [];\r\n\tvar varSpecMap = {};\r\n\tfor (var i = 0; i < varList.length; i++) {\r\n\t\tvar varName = varList[i];\r\n\t\tvar truncate = null;\r\n\t\tif (varName.indexOf(\":\") !== -1) {\r\n\t\t\tvar parts = varName.split(\":\");\r\n\t\t\tvarName = parts[0];\r\n\t\t\ttruncate = parseInt(parts[1], 10);\r\n\t\t}\r\n\t\tvar suffices = {};\r\n\t\twhile (uriTemplateSuffices[varName.charAt(varName.length - 1)]) {\r\n\t\t\tsuffices[varName.charAt(varName.length - 1)] = true;\r\n\t\t\tvarName = varName.substring(0, varName.length - 1);\r\n\t\t}\r\n\t\tvar varSpec = {\r\n\t\t\ttruncate: truncate,\r\n\t\t\tname: varName,\r\n\t\t\tsuffices: suffices\r\n\t\t};\r\n\t\tvarSpecs.push(varSpec);\r\n\t\tvarSpecMap[varName] = varSpec;\r\n\t\tvarNames.push(varName);\r\n\t}\r\n\tvar subFunction = function (valueFunction) {\r\n\t\tvar result = \"\";\r\n\t\tvar startIndex = 0;\r\n\t\tfor (var i = 0; i < varSpecs.length; i++) {\r\n\t\t\tvar varSpec = varSpecs[i];\r\n\t\t\tvar value = valueFunction(varSpec.name);\r\n\t\t\tif (value === null || value === undefined || (Array.isArray(value) && value.length === 0) || (typeof value === 'object' && Object.keys(value).length === 0)) {\r\n\t\t\t\tstartIndex++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (i === startIndex) {\r\n\t\t\t\tresult += prefix;\r\n\t\t\t} else {\r\n\t\t\t\tresult += (separator || \",\");\r\n\t\t\t}\r\n\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\tif (showVariables) {\r\n\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t}\r\n\t\t\t\tfor (var j = 0; j < value.length; j++) {\r\n\t\t\t\t\tif (j > 0) {\r\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\r\n\t\t\t\t\t\tif (varSpec.suffices['*'] && showVariables) {\r\n\t\t\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[j]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[j]);\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof value === \"object\") {\r\n\t\t\t\tif (showVariables && !varSpec.suffices['*']) {\r\n\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t}\r\n\t\t\t\tvar first = true;\r\n\t\t\t\tfor (var key in value) {\r\n\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(key).replace(/!/g, \"%21\") : notReallyPercentEncode(key);\r\n\t\t\t\t\tresult += varSpec.suffices['*'] ? '=' : \",\";\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[key]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[key]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (showVariables) {\r\n\t\t\t\t\tresult += varSpec.name;\r\n\t\t\t\t\tif (!trimEmptyString || value !== \"\") {\r\n\t\t\t\t\t\tresult += \"=\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (varSpec.truncate != null) {\r\n\t\t\t\t\tvalue = value.substring(0, varSpec.truncate);\r\n\t\t\t\t}\r\n\t\t\t\tresult += shouldEscape ? encodeURIComponent(value).replace(/!/g, \"%21\"): notReallyPercentEncode(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\tsubFunction.varNames = varNames;\r\n\treturn {\r\n\t\tprefix: prefix,\r\n\t\tsubstitution: subFunction\r\n\t};\r\n}\r\n\r\nfunction UriTemplate(template) {\r\n\tif (!(this instanceof UriTemplate)) {\r\n\t\treturn new UriTemplate(template);\r\n\t}\r\n\tvar parts = template.split(\"{\");\r\n\tvar textParts = [parts.shift()];\r\n\tvar prefixes = [];\r\n\tvar substitutions = [];\r\n\tvar varNames = [];\r\n\twhile (parts.length > 0) {\r\n\t\tvar part = parts.shift();\r\n\t\tvar spec = part.split(\"}\")[0];\r\n\t\tvar remainder = part.substring(spec.length + 1);\r\n\t\tvar funcs = uriTemplateSubstitution(spec);\r\n\t\tsubstitutions.push(funcs.substitution);\r\n\t\tprefixes.push(funcs.prefix);\r\n\t\ttextParts.push(remainder);\r\n\t\tvarNames = varNames.concat(funcs.substitution.varNames);\r\n\t}\r\n\tthis.fill = function (valueFunction) {\r\n\t\tvar result = textParts[0];\r\n\t\tfor (var i = 0; i < substitutions.length; i++) {\r\n\t\t\tvar substitution = substitutions[i];\r\n\t\t\tresult += substitution(valueFunction);\r\n\t\t\tresult += textParts[i + 1];\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\tthis.varNames = varNames;\r\n\tthis.template = template;\r\n}\r\nUriTemplate.prototype = {\r\n\ttoString: function () {\r\n\t\treturn this.template;\r\n\t},\r\n\tfillFromObject: function (obj) {\r\n\t\treturn this.fill(function (varName) {\r\n\t\t\treturn obj[varName];\r\n\t\t});\r\n\t}\r\n};\r\nvar ValidatorContext = function ValidatorContext(parent, collectMultiple, errorReporter, checkRecursive, trackUnknownProperties) {\r\n\tthis.missing = [];\r\n\tthis.missingMap = {};\r\n\tthis.formatValidators = parent ? Object.create(parent.formatValidators) : {};\r\n\tthis.schemas = parent ? Object.create(parent.schemas) : {};\r\n\tthis.collectMultiple = collectMultiple;\r\n\tthis.errors = [];\r\n\tthis.handleError = collectMultiple ? this.collectError : this.returnError;\r\n\tif (checkRecursive) {\r\n\t\tthis.checkRecursive = true;\r\n\t\tthis.scanned = [];\r\n\t\tthis.scannedFrozen = [];\r\n\t\tthis.scannedFrozenSchemas = [];\r\n\t\tthis.scannedFrozenValidationErrors = [];\r\n\t\tthis.validatedSchemasKey = 'tv4_validation_id';\r\n\t\tthis.validationErrorsKey = 'tv4_validation_errors_id';\r\n\t}\r\n\tif (trackUnknownProperties) {\r\n\t\tthis.trackUnknownProperties = true;\r\n\t\tthis.knownPropertyPaths = {};\r\n\t\tthis.unknownPropertyPaths = {};\r\n\t}\r\n\tthis.errorReporter = errorReporter || defaultErrorReporter('en');\r\n\tif (typeof this.errorReporter === 'string') {\r\n\t\tthrow new Error('debug');\r\n\t}\r\n\tthis.definedKeywords = {};\r\n\tif (parent) {\r\n\t\tfor (var key in parent.definedKeywords) {\r\n\t\t\tthis.definedKeywords[key] = parent.definedKeywords[key].slice(0);\r\n\t\t}\r\n\t}\r\n};\r\nValidatorContext.prototype.defineKeyword = function (keyword, keywordFunction) {\r\n\tthis.definedKeywords[keyword] = this.definedKeywords[keyword] || [];\r\n\tthis.definedKeywords[keyword].push(keywordFunction);\r\n};\r\nValidatorContext.prototype.createError = function (code, messageParams, dataPath, schemaPath, subErrors, data, schema) {\r\n\tvar error = new ValidationError(code, messageParams, dataPath, schemaPath, subErrors);\r\n\terror.message = this.errorReporter(error, data, schema);\r\n\treturn error;\r\n};\r\nValidatorContext.prototype.returnError = function (error) {\r\n\treturn error;\r\n};\r\nValidatorContext.prototype.collectError = function (error) {\r\n\tif (error) {\r\n\t\tthis.errors.push(error);\r\n\t}\r\n\treturn null;\r\n};\r\nValidatorContext.prototype.prefixErrors = function (startIndex, dataPath, schemaPath) {\r\n\tfor (var i = startIndex; i < this.errors.length; i++) {\r\n\t\tthis.errors[i] = this.errors[i].prefixWith(dataPath, schemaPath);\r\n\t}\r\n\treturn this;\r\n};\r\nValidatorContext.prototype.banUnknownProperties = function (data, schema) {\r\n\tfor (var unknownPath in this.unknownPropertyPaths) {\r\n\t\tvar error = this.createError(ErrorCodes.UNKNOWN_PROPERTY, {path: unknownPath}, unknownPath, \"\", null, data, schema);\r\n\t\tvar result = this.handleError(error);\r\n\t\tif (result) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.addFormat = function (format, validator) {\r\n\tif (typeof format === 'object') {\r\n\t\tfor (var key in format) {\r\n\t\t\tthis.addFormat(key, format[key]);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\tthis.formatValidators[format] = validator;\r\n};\r\nValidatorContext.prototype.resolveRefs = function (schema, urlHistory) {\r\n\tif (schema['$ref'] !== undefined) {\r\n\t\turlHistory = urlHistory || {};\r\n\t\tif (urlHistory[schema['$ref']]) {\r\n\t\t\treturn this.createError(ErrorCodes.CIRCULAR_REFERENCE, {urls: Object.keys(urlHistory).join(', ')}, '', '', null, undefined, schema);\r\n\t\t}\r\n\t\turlHistory[schema['$ref']] = true;\r\n\t\tschema = this.getSchema(schema['$ref'], urlHistory);\r\n\t}\r\n\treturn schema;\r\n};\r\nValidatorContext.prototype.getSchema = function (url, urlHistory) {\r\n\tvar schema;\r\n\tif (this.schemas[url] !== undefined) {\r\n\t\tschema = this.schemas[url];\r\n\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t}\r\n\tvar baseUrl = url;\r\n\tvar fragment = \"\";\r\n\tif (url.indexOf('#') !== -1) {\r\n\t\tfragment = url.substring(url.indexOf(\"#\") + 1);\r\n\t\tbaseUrl = url.substring(0, url.indexOf(\"#\"));\r\n\t}\r\n\tif (typeof this.schemas[baseUrl] === 'object') {\r\n\t\tschema = this.schemas[baseUrl];\r\n\t\tvar pointerPath = decodeURIComponent(fragment);\r\n\t\tif (pointerPath === \"\") {\r\n\t\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t\t} else if (pointerPath.charAt(0) !== \"/\") {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tvar parts = pointerPath.split(\"/\").slice(1);\r\n\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\tvar component = parts[i].replace(/~1/g, \"/\").replace(/~0/g, \"~\");\r\n\t\t\tif (schema[component] === undefined) {\r\n\t\t\t\tschema = undefined;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tschema = schema[component];\r\n\t\t}\r\n\t\tif (schema !== undefined) {\r\n\t\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t\t}\r\n\t}\r\n\tif (this.missing[baseUrl] === undefined) {\r\n\t\tthis.missing.push(baseUrl);\r\n\t\tthis.missing[baseUrl] = baseUrl;\r\n\t\tthis.missingMap[baseUrl] = baseUrl;\r\n\t}\r\n};\r\nValidatorContext.prototype.searchSchemas = function (schema, url) {\r\n\tif (Array.isArray(schema)) {\r\n\t\tfor (var i = 0; i < schema.length; i++) {\r\n\t\t\tthis.searchSchemas(schema[i], url);\r\n\t\t}\r\n\t} else if (schema && typeof schema === \"object\") {\r\n\t\tif (typeof schema.id === \"string\") {\r\n\t\t\tif (isTrustedUrl(url, schema.id)) {\r\n\t\t\t\tif (this.schemas[schema.id] === undefined) {\r\n\t\t\t\t\tthis.schemas[schema.id] = schema;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var key in schema) {\r\n\t\t\tif (key !== \"enum\") {\r\n\t\t\t\tif (typeof schema[key] === \"object\") {\r\n\t\t\t\t\tthis.searchSchemas(schema[key], url);\r\n\t\t\t\t} else if (key === \"$ref\") {\r\n\t\t\t\t\tvar uri = getDocumentUri(schema[key]);\r\n\t\t\t\t\tif (uri && this.schemas[uri] === undefined && this.missingMap[uri] === undefined) {\r\n\t\t\t\t\t\tthis.missingMap[uri] = uri;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\nValidatorContext.prototype.addSchema = function (url, schema) {\r\n\t//overload\r\n\tif (typeof url !== 'string' || typeof schema === 'undefined') {\r\n\t\tif (typeof url === 'object' && typeof url.id === 'string') {\r\n\t\t\tschema = url;\r\n\t\t\turl = schema.id;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif (url === getDocumentUri(url) + \"#\") {\r\n\t\t// Remove empty fragment\r\n\t\turl = getDocumentUri(url);\r\n\t}\r\n\tthis.schemas[url] = schema;\r\n\tdelete this.missingMap[url];\r\n\tnormSchema(schema, url);\r\n\tthis.searchSchemas(schema, url);\r\n};\r\n\r\nValidatorContext.prototype.getSchemaMap = function () {\r\n\tvar map = {};\r\n\tfor (var key in this.schemas) {\r\n\t\tmap[key] = this.schemas[key];\r\n\t}\r\n\treturn map;\r\n};\r\n\r\nValidatorContext.prototype.getSchemaUris = function (filterRegExp) {\r\n\tvar list = [];\r\n\tfor (var key in this.schemas) {\r\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\r\n\t\t\tlist.push(key);\r\n\t\t}\r\n\t}\r\n\treturn list;\r\n};\r\n\r\nValidatorContext.prototype.getMissingUris = function (filterRegExp) {\r\n\tvar list = [];\r\n\tfor (var key in this.missingMap) {\r\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\r\n\t\t\tlist.push(key);\r\n\t\t}\r\n\t}\r\n\treturn list;\r\n};\r\n\r\nValidatorContext.prototype.dropSchemas = function () {\r\n\tthis.schemas = {};\r\n\tthis.reset();\r\n};\r\nValidatorContext.prototype.reset = function () {\r\n\tthis.missing = [];\r\n\tthis.missingMap = {};\r\n\tthis.errors = [];\r\n};\r\n\r\nValidatorContext.prototype.validateAll = function (data, schema, dataPathParts, schemaPathParts, dataPointerPath) {\r\n\tvar topLevel;\r\n\tschema = this.resolveRefs(schema);\r\n\tif (!schema) {\r\n\t\treturn null;\r\n\t} else if (schema instanceof ValidationError) {\r\n\t\tthis.errors.push(schema);\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar frozenIndex, scannedFrozenSchemaIndex = null, scannedSchemasIndex = null;\r\n\tif (this.checkRecursive && data && typeof data === 'object') {\r\n\t\ttopLevel = !this.scanned.length;\r\n\t\tif (data[this.validatedSchemasKey]) {\r\n\t\t\tvar schemaIndex = data[this.validatedSchemasKey].indexOf(schema);\r\n\t\t\tif (schemaIndex !== -1) {\r\n\t\t\t\tthis.errors = this.errors.concat(data[this.validationErrorsKey][schemaIndex]);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (Object.isFrozen(data)) {\r\n\t\t\tfrozenIndex = this.scannedFrozen.indexOf(data);\r\n\t\t\tif (frozenIndex !== -1) {\r\n\t\t\t\tvar frozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].indexOf(schema);\r\n\t\t\t\tif (frozenSchemaIndex !== -1) {\r\n\t\t\t\t\tthis.errors = this.errors.concat(this.scannedFrozenValidationErrors[frozenIndex][frozenSchemaIndex]);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.scanned.push(data);\r\n\t\tif (Object.isFrozen(data)) {\r\n\t\t\tif (frozenIndex === -1) {\r\n\t\t\t\tfrozenIndex = this.scannedFrozen.length;\r\n\t\t\t\tthis.scannedFrozen.push(data);\r\n\t\t\t\tthis.scannedFrozenSchemas.push([]);\r\n\t\t\t}\r\n\t\t\tscannedFrozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].length;\r\n\t\t\tthis.scannedFrozenSchemas[frozenIndex][scannedFrozenSchemaIndex] = schema;\r\n\t\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = [];\r\n\t\t} else {\r\n\t\t\tif (!data[this.validatedSchemasKey]) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tObject.defineProperty(data, this.validatedSchemasKey, {\r\n\t\t\t\t\t\tvalue: [],\r\n\t\t\t\t\t\tconfigurable: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tObject.defineProperty(data, this.validationErrorsKey, {\r\n\t\t\t\t\t\tvalue: [],\r\n\t\t\t\t\t\tconfigurable: true\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//IE 7/8 workaround\r\n\t\t\t\t\tdata[this.validatedSchemasKey] = [];\r\n\t\t\t\t\tdata[this.validationErrorsKey] = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tscannedSchemasIndex = data[this.validatedSchemasKey].length;\r\n\t\t\tdata[this.validatedSchemasKey][scannedSchemasIndex] = schema;\r\n\t\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = [];\r\n\t\t}\r\n\t}\r\n\r\n\tvar errorCount = this.errors.length;\r\n\tvar error = this.validateBasic(data, schema, dataPointerPath)\r\n\t\t|| this.validateNumeric(data, schema, dataPointerPath)\r\n\t\t|| this.validateString(data, schema, dataPointerPath)\r\n\t\t|| this.validateArray(data, schema, dataPointerPath)\r\n\t\t|| this.validateObject(data, schema, dataPointerPath)\r\n\t\t|| this.validateCombinations(data, schema, dataPointerPath)\r\n\t\t|| this.validateHypermedia(data, schema, dataPointerPath)\r\n\t\t|| this.validateFormat(data, schema, dataPointerPath)\r\n\t\t|| this.validateDefinedKeywords(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n\r\n\tif (topLevel) {\r\n\t\twhile (this.scanned.length) {\r\n\t\t\tvar item = this.scanned.pop();\r\n\t\t\tdelete item[this.validatedSchemasKey];\r\n\t\t}\r\n\t\tthis.scannedFrozen = [];\r\n\t\tthis.scannedFrozenSchemas = [];\r\n\t}\r\n\r\n\tif (error || errorCount !== this.errors.length) {\r\n\t\twhile ((dataPathParts && dataPathParts.length) || (schemaPathParts && schemaPathParts.length)) {\r\n\t\t\tvar dataPart = (dataPathParts && dataPathParts.length) ? \"\" + dataPathParts.pop() : null;\r\n\t\t\tvar schemaPart = (schemaPathParts && schemaPathParts.length) ? \"\" + schemaPathParts.pop() : null;\r\n\t\t\tif (error) {\r\n\t\t\t\terror = error.prefixWith(dataPart, schemaPart);\r\n\t\t\t}\r\n\t\t\tthis.prefixErrors(errorCount, dataPart, schemaPart);\r\n\t\t}\r\n\t}\r\n\r\n\tif (scannedFrozenSchemaIndex !== null) {\r\n\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = this.errors.slice(startErrorCount);\r\n\t} else if (scannedSchemasIndex !== null) {\r\n\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = this.errors.slice(startErrorCount);\r\n\t}\r\n\r\n\treturn this.handleError(error);\r\n};\r\nValidatorContext.prototype.validateFormat = function (data, schema) {\r\n\tif (typeof schema.format !== 'string' || !this.formatValidators[schema.format]) {\r\n\t\treturn null;\r\n\t}\r\n\tvar errorMessage = this.formatValidators[schema.format].call(null, data, schema);\r\n\tif (typeof errorMessage === 'string' || typeof errorMessage === 'number') {\r\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage}, '', '/format', null, data, schema);\r\n\t} else if (errorMessage && typeof errorMessage === 'object') {\r\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage.message || \"?\"}, errorMessage.dataPath || '', errorMessage.schemaPath || \"/format\", null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\nValidatorContext.prototype.validateDefinedKeywords = function (data, schema, dataPointerPath) {\r\n\tfor (var key in this.definedKeywords) {\r\n\t\tif (typeof schema[key] === 'undefined') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tvar validationFunctions = this.definedKeywords[key];\r\n\t\tfor (var i = 0; i < validationFunctions.length; i++) {\r\n\t\t\tvar func = validationFunctions[i];\r\n\t\t\tvar result = func(data, schema[key], schema, dataPointerPath);\r\n\t\t\tif (typeof result === 'string' || typeof result === 'number') {\r\n\t\t\t\treturn this.createError(ErrorCodes.KEYWORD_CUSTOM, {key: key, message: result}, '', '', null, data, schema).prefixWith(null, key);\r\n\t\t\t} else if (result && typeof result === 'object') {\r\n\t\t\t\tvar code = result.code;\r\n\t\t\t\tif (typeof code === 'string') {\r\n\t\t\t\t\tif (!ErrorCodes[code]) {\r\n\t\t\t\t\t\tthrow new Error('Undefined error code (use defineError): ' + code);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcode = ErrorCodes[code];\r\n\t\t\t\t} else if (typeof code !== 'number') {\r\n\t\t\t\t\tcode = ErrorCodes.KEYWORD_CUSTOM;\r\n\t\t\t\t}\r\n\t\t\t\tvar messageParams = (typeof result.message === 'object') ? result.message : {key: key, message: result.message || \"?\"};\r\n\t\t\t\tvar schemaPath = result.schemaPath || (\"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1'));\r\n\t\t\t\treturn this.createError(code, messageParams, result.dataPath || null, schemaPath, null, data, schema);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nfunction recursiveCompare(A, B) {\r\n\tif (A === B) {\r\n\t\treturn true;\r\n\t}\r\n\tif (A && B && typeof A === \"object\" && typeof B === \"object\") {\r\n\t\tif (Array.isArray(A) !== Array.isArray(B)) {\r\n\t\t\treturn false;\r\n\t\t} else if (Array.isArray(A)) {\r\n\t\t\tif (A.length !== B.length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < A.length; i++) {\r\n\t\t\t\tif (!recursiveCompare(A[i], B[i])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar key;\r\n\t\t\tfor (key in A) {\r\n\t\t\t\tif (B[key] === undefined && A[key] !== undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (key in B) {\r\n\t\t\t\tif (A[key] === undefined && B[key] !== undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (key in A) {\r\n\t\t\t\tif (!recursiveCompare(A[key], B[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValidatorContext.prototype.validateBasic = function validateBasic(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tif (error = this.validateType(data, schema, dataPointerPath)) {\r\n\t\treturn error.prefixWith(null, \"type\");\r\n\t}\r\n\tif (error = this.validateEnum(data, schema, dataPointerPath)) {\r\n\t\treturn error.prefixWith(null, \"type\");\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateType = function validateType(data, schema) {\r\n\tif (schema.type === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar dataType = typeof data;\r\n\tif (data === null) {\r\n\t\tdataType = \"null\";\r\n\t} else if (Array.isArray(data)) {\r\n\t\tdataType = \"array\";\r\n\t}\r\n\tvar allowedTypes = schema.type;\r\n\tif (!Array.isArray(allowedTypes)) {\r\n\t\tallowedTypes = [allowedTypes];\r\n\t}\r\n\r\n\tfor (var i = 0; i < allowedTypes.length; i++) {\r\n\t\tvar type = allowedTypes[i];\r\n\t\tif (type === dataType || (type === \"integer\" && dataType === \"number\" && (data % 1 === 0))) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn this.createError(ErrorCodes.INVALID_TYPE, {type: dataType, expected: allowedTypes.join(\"/\")}, '', '', null, data, schema);\r\n};\r\n\r\nValidatorContext.prototype.validateEnum = function validateEnum(data, schema) {\r\n\tif (schema[\"enum\"] === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tfor (var i = 0; i < schema[\"enum\"].length; i++) {\r\n\t\tvar enumVal = schema[\"enum\"][i];\r\n\t\tif (recursiveCompare(data, enumVal)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn this.createError(ErrorCodes.ENUM_MISMATCH, {value: (typeof JSON !== 'undefined') ? JSON.stringify(data) : data}, '', '', null, data, schema);\r\n};\r\n\r\nValidatorContext.prototype.validateNumeric = function validateNumeric(data, schema, dataPointerPath) {\r\n\treturn this.validateMultipleOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateMinMax(data, schema, dataPointerPath)\r\n\t\t|| this.validateNaN(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nvar CLOSE_ENOUGH_LOW = Math.pow(2, -51);\r\nvar CLOSE_ENOUGH_HIGH = 1 - CLOSE_ENOUGH_LOW;\r\nValidatorContext.prototype.validateMultipleOf = function validateMultipleOf(data, schema) {\r\n\tvar multipleOf = schema.multipleOf || schema.divisibleBy;\r\n\tif (multipleOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tif (typeof data === \"number\") {\r\n\t\tvar remainder = (data/multipleOf)%1;\r\n\t\tif (remainder >= CLOSE_ENOUGH_LOW && remainder < CLOSE_ENOUGH_HIGH) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MULTIPLE_OF, {value: data, multipleOf: multipleOf}, '', '', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateMinMax = function validateMinMax(data, schema) {\r\n\tif (typeof data !== \"number\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (schema.minimum !== undefined) {\r\n\t\tif (data < schema.minimum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM, {value: data, minimum: schema.minimum}, '', '/minimum', null, data, schema);\r\n\t\t}\r\n\t\tif (schema.exclusiveMinimum && data === schema.minimum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM_EXCLUSIVE, {value: data, minimum: schema.minimum}, '', '/exclusiveMinimum', null, data, schema);\r\n\t\t}\r\n\t}\r\n\tif (schema.maximum !== undefined) {\r\n\t\tif (data > schema.maximum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM, {value: data, maximum: schema.maximum}, '', '/maximum', null, data, schema);\r\n\t\t}\r\n\t\tif (schema.exclusiveMaximum && data === schema.maximum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM_EXCLUSIVE, {value: data, maximum: schema.maximum}, '', '/exclusiveMaximum', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateNaN = function validateNaN(data, schema) {\r\n\tif (typeof data !== \"number\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (isNaN(data) === true || data === Infinity || data === -Infinity) {\r\n\t\treturn this.createError(ErrorCodes.NUMBER_NOT_A_NUMBER, {value: data}, '', '/type', null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateString = function validateString(data, schema, dataPointerPath) {\r\n\treturn this.validateStringLength(data, schema, dataPointerPath)\r\n\t\t|| this.validateStringPattern(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateStringLength = function validateStringLength(data, schema) {\r\n\tif (typeof data !== \"string\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (schema.minLength !== undefined) {\r\n\t\tif (data.length < schema.minLength) {\r\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_SHORT, {length: data.length, minimum: schema.minLength}, '', '/minLength', null, data, schema);\r\n\t\t}\r\n\t}\r\n\tif (schema.maxLength !== undefined) {\r\n\t\tif (data.length > schema.maxLength) {\r\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_LONG, {length: data.length, maximum: schema.maxLength}, '', '/maxLength', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateStringPattern = function validateStringPattern(data, schema) {\r\n\tif (typeof data !== \"string\" || (typeof schema.pattern !== \"string\" && !(schema.pattern instanceof RegExp))) {\r\n\t\treturn null;\r\n\t}\r\n\tvar regexp;\r\n\tif (schema.pattern instanceof RegExp) {\r\n\t  regexp = schema.pattern;\r\n\t}\r\n\telse {\r\n\t  var body, flags = '';\r\n\t  // Check for regular expression literals\r\n\t  // @see http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5\r\n\t  var literal = schema.pattern.match(/^\\/(.+)\\/([img]*)$/);\r\n\t  if (literal) {\r\n\t    body = literal[1];\r\n\t    flags = literal[2];\r\n\t  }\r\n\t  else {\r\n\t    body = schema.pattern;\r\n\t  }\r\n\t  regexp = new RegExp(body, flags);\r\n\t}\r\n\tif (!regexp.test(data)) {\r\n\t\treturn this.createError(ErrorCodes.STRING_PATTERN, {pattern: schema.pattern}, '', '/pattern', null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArray = function validateArray(data, schema, dataPointerPath) {\r\n\tif (!Array.isArray(data)) {\r\n\t\treturn null;\r\n\t}\r\n\treturn this.validateArrayLength(data, schema, dataPointerPath)\r\n\t\t|| this.validateArrayUniqueItems(data, schema, dataPointerPath)\r\n\t\t|| this.validateArrayItems(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayLength = function validateArrayLength(data, schema) {\r\n\tvar error;\r\n\tif (schema.minItems !== undefined) {\r\n\t\tif (data.length < schema.minItems) {\r\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_SHORT, {length: data.length, minimum: schema.minItems}, '', '/minItems', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (schema.maxItems !== undefined) {\r\n\t\tif (data.length > schema.maxItems) {\r\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_LONG, {length: data.length, maximum: schema.maxItems}, '', '/maxItems', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayUniqueItems = function validateArrayUniqueItems(data, schema) {\r\n\tif (schema.uniqueItems) {\r\n\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\tfor (var j = i + 1; j < data.length; j++) {\r\n\t\t\t\tif (recursiveCompare(data[i], data[j])) {\r\n\t\t\t\t\tvar error = this.createError(ErrorCodes.ARRAY_UNIQUE, {match1: i, match2: j}, '', '/uniqueItems', null, data, schema);\r\n\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayItems = function validateArrayItems(data, schema, dataPointerPath) {\r\n\tif (schema.items === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error, i;\r\n\tif (Array.isArray(schema.items)) {\r\n\t\tfor (i = 0; i < data.length; i++) {\r\n\t\t\tif (i < schema.items.length) {\r\n\t\t\t\tif (error = this.validateAll(data[i], schema.items[i], [i], [\"items\", i], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t} else if (schema.additionalItems !== undefined) {\r\n\t\t\t\tif (typeof schema.additionalItems === \"boolean\") {\r\n\t\t\t\t\tif (!schema.additionalItems) {\r\n\t\t\t\t\t\terror = (this.createError(ErrorCodes.ARRAY_ADDITIONAL_ITEMS, {}, '/' + i, '/additionalItems', null, data, schema));\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (error = this.validateAll(data[i], schema.additionalItems, [i], [\"additionalItems\"], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tfor (i = 0; i < data.length; i++) {\r\n\t\t\tif (error = this.validateAll(data[i], schema.items, [i], [\"items\"], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObject = function validateObject(data, schema, dataPointerPath) {\r\n\tif (typeof data !== \"object\" || data === null || Array.isArray(data)) {\r\n\t\treturn null;\r\n\t}\r\n\treturn this.validateObjectMinMaxProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectRequiredProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectDependencies(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectMinMaxProperties = function validateObjectMinMaxProperties(data, schema) {\r\n\tvar keys = Object.keys(data);\r\n\tvar error;\r\n\tif (schema.minProperties !== undefined) {\r\n\t\tif (keys.length < schema.minProperties) {\r\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MINIMUM, {propertyCount: keys.length, minimum: schema.minProperties}, '', '/minProperties', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (schema.maxProperties !== undefined) {\r\n\t\tif (keys.length > schema.maxProperties) {\r\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MAXIMUM, {propertyCount: keys.length, maximum: schema.maxProperties}, '', '/maxProperties', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectRequiredProperties = function validateObjectRequiredProperties(data, schema) {\r\n\tif (schema.required !== undefined) {\r\n\t\tfor (var i = 0; i < schema.required.length; i++) {\r\n\t\t\tvar key = schema.required[i];\r\n\t\t\tif (data[key] === undefined) {\r\n\t\t\t\tvar error = this.createError(ErrorCodes.OBJECT_REQUIRED, {key: key}, '', '/required/' + i, null, data, schema);\r\n\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectProperties = function validateObjectProperties(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tfor (var key in data) {\r\n\t\tvar keyPointerPath = dataPointerPath + \"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1');\r\n\t\tvar foundMatch = false;\r\n\t\tif (schema.properties !== undefined && schema.properties[key] !== undefined) {\r\n\t\t\tfoundMatch = true;\r\n\t\t\tif (error = this.validateAll(data[key], schema.properties[key], [key], [\"properties\", key], keyPointerPath)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (schema.patternProperties !== undefined) {\r\n\t\t\tfor (var patternKey in schema.patternProperties) {\r\n\t\t\t\tvar regexp = new RegExp(patternKey);\r\n\t\t\t\tif (regexp.test(key)) {\r\n\t\t\t\t\tfoundMatch = true;\r\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.patternProperties[patternKey], [key], [\"patternProperties\", patternKey], keyPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!foundMatch) {\r\n\t\t\tif (schema.additionalProperties !== undefined) {\r\n\t\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\r\n\t\t\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof schema.additionalProperties === \"boolean\") {\r\n\t\t\t\t\tif (!schema.additionalProperties) {\r\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_ADDITIONAL_PROPERTIES, {key: key}, '', '/additionalProperties', null, data, schema).prefixWith(key, null);\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.additionalProperties, [key], [\"additionalProperties\"], keyPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (this.trackUnknownProperties && !this.knownPropertyPaths[keyPointerPath]) {\r\n\t\t\t\tthis.unknownPropertyPaths[keyPointerPath] = true;\r\n\t\t\t}\r\n\t\t} else if (this.trackUnknownProperties) {\r\n\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\r\n\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectDependencies = function validateObjectDependencies(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tif (schema.dependencies !== undefined) {\r\n\t\tfor (var depKey in schema.dependencies) {\r\n\t\t\tif (data[depKey] !== undefined) {\r\n\t\t\t\tvar dep = schema.dependencies[depKey];\r\n\t\t\t\tif (typeof dep === \"string\") {\r\n\t\t\t\t\tif (data[dep] === undefined) {\r\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: dep}, '', '', null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (Array.isArray(dep)) {\r\n\t\t\t\t\tfor (var i = 0; i < dep.length; i++) {\r\n\t\t\t\t\t\tvar requiredKey = dep[i];\r\n\t\t\t\t\t\tif (data[requiredKey] === undefined) {\r\n\t\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: requiredKey}, '', '/' + i, null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\r\n\t\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (error = this.validateAll(data, dep, [], [\"dependencies\", depKey], dataPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateCombinations = function validateCombinations(data, schema, dataPointerPath) {\r\n\treturn this.validateAllOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateAnyOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateOneOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateNot(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateAllOf = function validateAllOf(data, schema, dataPointerPath) {\r\n\tif (schema.allOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error;\r\n\tfor (var i = 0; i < schema.allOf.length; i++) {\r\n\t\tvar subSchema = schema.allOf[i];\r\n\t\tif (error = this.validateAll(data, subSchema, [], [\"allOf\", i], dataPointerPath)) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateAnyOf = function validateAnyOf(data, schema, dataPointerPath) {\r\n\tif (schema.anyOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar errors = [];\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t}\r\n\tvar errorAtEnd = true;\r\n\tfor (var i = 0; i < schema.anyOf.length; i++) {\r\n\t\tif (this.trackUnknownProperties) {\r\n\t\t\tthis.unknownPropertyPaths = {};\r\n\t\t\tthis.knownPropertyPaths = {};\r\n\t\t}\r\n\t\tvar subSchema = schema.anyOf[i];\r\n\r\n\t\tvar errorCount = this.errors.length;\r\n\t\tvar error = this.validateAll(data, subSchema, [], [\"anyOf\", i], dataPointerPath);\r\n\r\n\t\tif (error === null && errorCount === this.errors.length) {\r\n\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\r\n\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\r\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\r\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\r\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\r\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// We need to continue looping so we catch all the property definitions, but we don't want to return an error\r\n\t\t\t\terrorAtEnd = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (error) {\r\n\t\t\terrors.push(error.prefixWith(null, \"\" + i).prefixWith(null, \"anyOf\"));\r\n\t\t}\r\n\t}\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (errorAtEnd) {\r\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\treturn this.createError(ErrorCodes.ANY_OF_MISSING, {}, \"\", \"/anyOf\", errors, data, schema);\r\n\t}\r\n};\r\n\r\nValidatorContext.prototype.validateOneOf = function validateOneOf(data, schema, dataPointerPath) {\r\n\tif (schema.oneOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar validIndex = null;\r\n\tvar errors = [];\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t}\r\n\tfor (var i = 0; i < schema.oneOf.length; i++) {\r\n\t\tif (this.trackUnknownProperties) {\r\n\t\t\tthis.unknownPropertyPaths = {};\r\n\t\t\tthis.knownPropertyPaths = {};\r\n\t\t}\r\n\t\tvar subSchema = schema.oneOf[i];\r\n\r\n\t\tvar errorCount = this.errors.length;\r\n\t\tvar error = this.validateAll(data, subSchema, [], [\"oneOf\", i], dataPointerPath);\r\n\r\n\t\tif (error === null && errorCount === this.errors.length) {\r\n\t\t\tif (validIndex === null) {\r\n\t\t\t\tvalidIndex = i;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\t\t\treturn this.createError(ErrorCodes.ONE_OF_MULTIPLE, {index1: validIndex, index2: i}, \"\", \"/oneOf\", null, data, schema);\r\n\t\t\t}\r\n\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\r\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\r\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\r\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\r\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (error) {\r\n\t\t\terrors.push(error);\r\n\t\t}\r\n\t}\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (validIndex === null) {\r\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\treturn this.createError(ErrorCodes.ONE_OF_MISSING, {}, \"\", \"/oneOf\", errors, data, schema);\r\n\t} else {\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateNot = function validateNot(data, schema, dataPointerPath) {\r\n\tif (schema.not === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar oldErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t\tthis.unknownPropertyPaths = {};\r\n\t\tthis.knownPropertyPaths = {};\r\n\t}\r\n\tvar error = this.validateAll(data, schema.not, null, null, dataPointerPath);\r\n\tvar notErrors = this.errors.slice(oldErrorCount);\r\n\tthis.errors = this.errors.slice(0, oldErrorCount);\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (error === null && notErrors.length === 0) {\r\n\t\treturn this.createError(ErrorCodes.NOT_PASSED, {}, \"\", \"/not\", null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateHypermedia = function validateCombinations(data, schema, dataPointerPath) {\r\n\tif (!schema.links) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error;\r\n\tfor (var i = 0; i < schema.links.length; i++) {\r\n\t\tvar ldo = schema.links[i];\r\n\t\tif (ldo.rel === \"describedby\") {\r\n\t\t\tvar template = new UriTemplate(ldo.href);\r\n\t\t\tvar allPresent = true;\r\n\t\t\tfor (var j = 0; j < template.varNames.length; j++) {\r\n\t\t\t\tif (!(template.varNames[j] in data)) {\r\n\t\t\t\t\tallPresent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (allPresent) {\r\n\t\t\t\tvar schemaUrl = template.fillFromObject(data);\r\n\t\t\t\tvar subSchema = {\"$ref\": schemaUrl};\r\n\t\t\t\tif (error = this.validateAll(data, subSchema, [], [\"links\", i], dataPointerPath)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// parseURI() and resolveUrl() are from https://gist.github.com/1088850\r\n//   -  released as public domain by author (\"Yaffle\") - see comments on gist\r\n\r\nfunction parseURI(url) {\r\n\tvar m = String(url).replace(/^\\s+|\\s+$/g, '').match(/^([^:\\/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);\r\n\t// authority = '//' + user + ':' + pass '@' + hostname + ':' port\r\n\treturn (m ? {\r\n\t\thref     : m[0] || '',\r\n\t\tprotocol : m[1] || '',\r\n\t\tauthority: m[2] || '',\r\n\t\thost     : m[3] || '',\r\n\t\thostname : m[4] || '',\r\n\t\tport     : m[5] || '',\r\n\t\tpathname : m[6] || '',\r\n\t\tsearch   : m[7] || '',\r\n\t\thash     : m[8] || ''\r\n\t} : null);\r\n}\r\n\r\nfunction resolveUrl(base, href) {// RFC 3986\r\n\r\n\tfunction removeDotSegments(input) {\r\n\t\tvar output = [];\r\n\t\tinput.replace(/^(\\.\\.?(\\/|$))+/, '')\r\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\r\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\r\n\t\t\t.replace(/\\/?[^\\/]*/g, function (p) {\r\n\t\t\t\tif (p === '/..') {\r\n\t\t\t\t\toutput.pop();\r\n\t\t\t\t} else {\r\n\t\t\t\t\toutput.push(p);\r\n\t\t\t\t}\r\n\t\t});\r\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\r\n\t}\r\n\r\n\thref = parseURI(href || '');\r\n\tbase = parseURI(base || '');\r\n\r\n\treturn !href || !base ? null : (href.protocol || base.protocol) +\r\n\t\t(href.protocol || href.authority ? href.authority : base.authority) +\r\n\t\tremoveDotSegments(href.protocol || href.authority || href.pathname.charAt(0) === '/' ? href.pathname : (href.pathname ? ((base.authority && !base.pathname ? '/' : '') + base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) + href.pathname) : base.pathname)) +\r\n\t\t(href.protocol || href.authority || href.pathname ? href.search : (href.search || base.search)) +\r\n\t\thref.hash;\r\n}\r\n\r\nfunction getDocumentUri(uri) {\r\n\treturn uri.split('#')[0];\r\n}\r\nfunction normSchema(schema, baseUri) {\r\n\tif (schema && typeof schema === \"object\") {\r\n\t\tif (baseUri === undefined) {\r\n\t\t\tbaseUri = schema.id;\r\n\t\t} else if (typeof schema.id === \"string\") {\r\n\t\t\tbaseUri = resolveUrl(baseUri, schema.id);\r\n\t\t\tschema.id = baseUri;\r\n\t\t}\r\n\t\tif (Array.isArray(schema)) {\r\n\t\t\tfor (var i = 0; i < schema.length; i++) {\r\n\t\t\t\tnormSchema(schema[i], baseUri);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (typeof schema['$ref'] === \"string\") {\r\n\t\t\t\tschema['$ref'] = resolveUrl(baseUri, schema['$ref']);\r\n\t\t\t}\r\n\t\t\tfor (var key in schema) {\r\n\t\t\t\tif (key !== \"enum\") {\r\n\t\t\t\t\tnormSchema(schema[key], baseUri);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction defaultErrorReporter(language) {\r\n\tlanguage = language || 'en';\r\n\r\n\tvar errorMessages = languages[language];\r\n\r\n\treturn function (error) {\r\n\t\tvar messageTemplate = errorMessages[error.code] || ErrorMessagesDefault[error.code];\r\n\t\tif (typeof messageTemplate !== 'string') {\r\n\t\t\treturn \"Unknown error code \" + error.code + \": \" + JSON.stringify(error.messageParams);\r\n\t\t}\r\n\t\tvar messageParams = error.params;\r\n\t\t// Adapted from Crockford's supplant()\r\n\t\treturn messageTemplate.replace(/\\{([^{}]*)\\}/g, function (whole, varName) {\r\n\t\t\tvar subValue = messageParams[varName];\r\n\t\t\treturn typeof subValue === 'string' || typeof subValue === 'number' ? subValue : whole;\r\n\t\t});\r\n\t};\r\n}\r\n\r\nvar ErrorCodes = {\r\n\tINVALID_TYPE: 0,\r\n\tENUM_MISMATCH: 1,\r\n\tANY_OF_MISSING: 10,\r\n\tONE_OF_MISSING: 11,\r\n\tONE_OF_MULTIPLE: 12,\r\n\tNOT_PASSED: 13,\r\n\t// Numeric errors\r\n\tNUMBER_MULTIPLE_OF: 100,\r\n\tNUMBER_MINIMUM: 101,\r\n\tNUMBER_MINIMUM_EXCLUSIVE: 102,\r\n\tNUMBER_MAXIMUM: 103,\r\n\tNUMBER_MAXIMUM_EXCLUSIVE: 104,\r\n\tNUMBER_NOT_A_NUMBER: 105,\r\n\t// String errors\r\n\tSTRING_LENGTH_SHORT: 200,\r\n\tSTRING_LENGTH_LONG: 201,\r\n\tSTRING_PATTERN: 202,\r\n\t// Object errors\r\n\tOBJECT_PROPERTIES_MINIMUM: 300,\r\n\tOBJECT_PROPERTIES_MAXIMUM: 301,\r\n\tOBJECT_REQUIRED: 302,\r\n\tOBJECT_ADDITIONAL_PROPERTIES: 303,\r\n\tOBJECT_DEPENDENCY_KEY: 304,\r\n\t// Array errors\r\n\tARRAY_LENGTH_SHORT: 400,\r\n\tARRAY_LENGTH_LONG: 401,\r\n\tARRAY_UNIQUE: 402,\r\n\tARRAY_ADDITIONAL_ITEMS: 403,\r\n\t// Custom/user-defined errors\r\n\tFORMAT_CUSTOM: 500,\r\n\tKEYWORD_CUSTOM: 501,\r\n\t// Schema structure\r\n\tCIRCULAR_REFERENCE: 600,\r\n\t// Non-standard validation options\r\n\tUNKNOWN_PROPERTY: 1000\r\n};\r\nvar ErrorCodeLookup = {};\r\nfor (var key in ErrorCodes) {\r\n\tErrorCodeLookup[ErrorCodes[key]] = key;\r\n}\r\nvar ErrorMessagesDefault = {\r\n\tINVALID_TYPE: \"Invalid type: {type} (expected {expected})\",\r\n\tENUM_MISMATCH: \"No enum match for: {value}\",\r\n\tANY_OF_MISSING: \"Data does not match any schemas from \\\"anyOf\\\"\",\r\n\tONE_OF_MISSING: \"Data does not match any schemas from \\\"oneOf\\\"\",\r\n\tONE_OF_MULTIPLE: \"Data is valid against more than one schema from \\\"oneOf\\\": indices {index1} and {index2}\",\r\n\tNOT_PASSED: \"Data matches schema from \\\"not\\\"\",\r\n\t// Numeric errors\r\n\tNUMBER_MULTIPLE_OF: \"Value {value} is not a multiple of {multipleOf}\",\r\n\tNUMBER_MINIMUM: \"Value {value} is less than minimum {minimum}\",\r\n\tNUMBER_MINIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive minimum {minimum}\",\r\n\tNUMBER_MAXIMUM: \"Value {value} is greater than maximum {maximum}\",\r\n\tNUMBER_MAXIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive maximum {maximum}\",\r\n\tNUMBER_NOT_A_NUMBER: \"Value {value} is not a valid number\",\r\n\t// String errors\r\n\tSTRING_LENGTH_SHORT: \"String is too short ({length} chars), minimum {minimum}\",\r\n\tSTRING_LENGTH_LONG: \"String is too long ({length} chars), maximum {maximum}\",\r\n\tSTRING_PATTERN: \"String does not match pattern: {pattern}\",\r\n\t// Object errors\r\n\tOBJECT_PROPERTIES_MINIMUM: \"Too few properties defined ({propertyCount}), minimum {minimum}\",\r\n\tOBJECT_PROPERTIES_MAXIMUM: \"Too many properties defined ({propertyCount}), maximum {maximum}\",\r\n\tOBJECT_REQUIRED: \"Missing required property: {key}\",\r\n\tOBJECT_ADDITIONAL_PROPERTIES: \"Additional properties not allowed\",\r\n\tOBJECT_DEPENDENCY_KEY: \"Dependency failed - key must exist: {missing} (due to key: {key})\",\r\n\t// Array errors\r\n\tARRAY_LENGTH_SHORT: \"Array is too short ({length}), minimum {minimum}\",\r\n\tARRAY_LENGTH_LONG: \"Array is too long ({length}), maximum {maximum}\",\r\n\tARRAY_UNIQUE: \"Array items are not unique (indices {match1} and {match2})\",\r\n\tARRAY_ADDITIONAL_ITEMS: \"Additional items not allowed\",\r\n\t// Format errors\r\n\tFORMAT_CUSTOM: \"Format validation failed ({message})\",\r\n\tKEYWORD_CUSTOM: \"Keyword failed: {key} ({message})\",\r\n\t// Schema structure\r\n\tCIRCULAR_REFERENCE: \"Circular $refs: {urls}\",\r\n\t// Non-standard validation options\r\n\tUNKNOWN_PROPERTY: \"Unknown property (not in schema)\"\r\n};\r\n\r\nfunction ValidationError(code, params, dataPath, schemaPath, subErrors) {\r\n\tError.call(this);\r\n\tif (code === undefined) {\r\n\t\tthrow new Error (\"No error code supplied: \" + schemaPath);\r\n\t}\r\n\tthis.message = '';\r\n\tthis.params = params;\r\n\tthis.code = code;\r\n\tthis.dataPath = dataPath || \"\";\r\n\tthis.schemaPath = schemaPath || \"\";\r\n\tthis.subErrors = subErrors || null;\r\n\r\n\tvar err = new Error(this.message);\r\n\tthis.stack = err.stack || err.stacktrace;\r\n\tif (!this.stack) {\r\n\t\ttry {\r\n\t\t\tthrow err;\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthis.stack = err.stack || err.stacktrace;\r\n\t\t}\r\n\t}\r\n}\r\nValidationError.prototype = Object.create(Error.prototype);\r\nValidationError.prototype.constructor = ValidationError;\r\nValidationError.prototype.name = 'ValidationError';\r\n\r\nValidationError.prototype.prefixWith = function (dataPrefix, schemaPrefix) {\r\n\tif (dataPrefix !== null) {\r\n\t\tdataPrefix = dataPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\r\n\t\tthis.dataPath = \"/\" + dataPrefix + this.dataPath;\r\n\t}\r\n\tif (schemaPrefix !== null) {\r\n\t\tschemaPrefix = schemaPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\r\n\t\tthis.schemaPath = \"/\" + schemaPrefix + this.schemaPath;\r\n\t}\r\n\tif (this.subErrors !== null) {\r\n\t\tfor (var i = 0; i < this.subErrors.length; i++) {\r\n\t\t\tthis.subErrors[i].prefixWith(dataPrefix, schemaPrefix);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nfunction isTrustedUrl(baseUrl, testUrl) {\r\n\tif(testUrl.substring(0, baseUrl.length) === baseUrl){\r\n\t\tvar remainder = testUrl.substring(baseUrl.length);\r\n\t\tif ((testUrl.length > 0 && testUrl.charAt(baseUrl.length - 1) === \"/\")\r\n\t\t\t|| remainder.charAt(0) === \"#\"\r\n\t\t\t|| remainder.charAt(0) === \"?\") {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nvar languages = {};\r\nfunction createApi(language) {\r\n\tvar globalContext = new ValidatorContext();\r\n\tvar currentLanguage;\r\n\tvar customErrorReporter;\r\n\tvar api = {\r\n\t\tsetErrorReporter: function (reporter) {\r\n\t\t\tif (typeof reporter === 'string') {\r\n\t\t\t\treturn this.language(reporter);\r\n\t\t\t}\r\n\t\t\tcustomErrorReporter = reporter;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\taddFormat: function () {\r\n\t\t\tglobalContext.addFormat.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tlanguage: function (code) {\r\n\t\t\tif (!code) {\r\n\t\t\t\treturn currentLanguage;\r\n\t\t\t}\r\n\t\t\tif (!languages[code]) {\r\n\t\t\t\tcode = code.split('-')[0]; // fall back to base language\r\n\t\t\t}\r\n\t\t\tif (languages[code]) {\r\n\t\t\t\tcurrentLanguage = code;\r\n\t\t\t\treturn code; // so you can tell if fall-back has happened\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\taddLanguage: function (code, messageMap) {\r\n\t\t\tvar key;\r\n\t\t\tfor (key in ErrorCodes) {\r\n\t\t\t\tif (messageMap[key] && !messageMap[ErrorCodes[key]]) {\r\n\t\t\t\t\tmessageMap[ErrorCodes[key]] = messageMap[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar rootCode = code.split('-')[0];\r\n\t\t\tif (!languages[rootCode]) { // use for base language if not yet defined\r\n\t\t\t\tlanguages[code] = messageMap;\r\n\t\t\t\tlanguages[rootCode] = messageMap;\r\n\t\t\t} else {\r\n\t\t\t\tlanguages[code] = Object.create(languages[rootCode]);\r\n\t\t\t\tfor (key in messageMap) {\r\n\t\t\t\t\tif (typeof languages[rootCode][key] === 'undefined') {\r\n\t\t\t\t\t\tlanguages[rootCode][key] = messageMap[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlanguages[code][key] = messageMap[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tfreshApi: function (language) {\r\n\t\t\tvar result = createApi();\r\n\t\t\tif (language) {\r\n\t\t\t\tresult.language(language);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tvalidate: function (data, schema, checkRecursive, banUnknownProperties) {\r\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\r\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\r\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\r\n\t\t\t} : def;\r\n\t\t\tvar context = new ValidatorContext(globalContext, false, errorReporter, checkRecursive, banUnknownProperties);\r\n\t\t\tif (typeof schema === \"string\") {\r\n\t\t\t\tschema = {\"$ref\": schema};\r\n\t\t\t}\r\n\t\t\tcontext.addSchema(\"\", schema);\r\n\t\t\tvar error = context.validateAll(data, schema, null, null, \"\");\r\n\t\t\tif (!error && banUnknownProperties) {\r\n\t\t\t\terror = context.banUnknownProperties(data, schema);\r\n\t\t\t}\r\n\t\t\tthis.error = error;\r\n\t\t\tthis.missing = context.missing;\r\n\t\t\tthis.valid = (error === null);\r\n\t\t\treturn this.valid;\r\n\t\t},\r\n\t\tvalidateResult: function () {\r\n\t\t\tvar result = {toString: function () {\r\n\t\t\t\treturn this.valid ? 'valid' : this.error.message;\r\n\t\t\t}};\r\n\t\t\tthis.validate.apply(result, arguments);\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tvalidateMultiple: function (data, schema, checkRecursive, banUnknownProperties) {\r\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\r\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\r\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\r\n\t\t\t} : def;\r\n\t\t\tvar context = new ValidatorContext(globalContext, true, errorReporter, checkRecursive, banUnknownProperties);\r\n\t\t\tif (typeof schema === \"string\") {\r\n\t\t\t\tschema = {\"$ref\": schema};\r\n\t\t\t}\r\n\t\t\tcontext.addSchema(\"\", schema);\r\n\t\t\tcontext.validateAll(data, schema, null, null, \"\");\r\n\t\t\tif (banUnknownProperties) {\r\n\t\t\t\tcontext.banUnknownProperties(data, schema);\r\n\t\t\t}\r\n\t\t\tvar result = {toString: function () {\r\n\t\t\t\treturn this.valid ? 'valid' : this.error.message;\r\n\t\t\t}};\r\n\t\t\tresult.errors = context.errors;\r\n\t\t\tresult.missing = context.missing;\r\n\t\t\tresult.valid = (result.errors.length === 0);\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\taddSchema: function () {\r\n\t\t\treturn globalContext.addSchema.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchema: function () {\r\n\t\t\treturn globalContext.getSchema.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchemaMap: function () {\r\n\t\t\treturn globalContext.getSchemaMap.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchemaUris: function () {\r\n\t\t\treturn globalContext.getSchemaUris.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetMissingUris: function () {\r\n\t\t\treturn globalContext.getMissingUris.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdropSchemas: function () {\r\n\t\t\tglobalContext.dropSchemas.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdefineKeyword: function () {\r\n\t\t\tglobalContext.defineKeyword.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdefineError: function (codeName, codeNumber, defaultMessage) {\r\n\t\t\tif (typeof codeName !== 'string' || !/^[A-Z]+(_[A-Z]+)*$/.test(codeName)) {\r\n\t\t\t\tthrow new Error('Code name must be a string in UPPER_CASE_WITH_UNDERSCORES');\r\n\t\t\t}\r\n\t\t\tif (typeof codeNumber !== 'number' || codeNumber%1 !== 0 || codeNumber < 10000) {\r\n\t\t\t\tthrow new Error('Code number must be an integer > 10000');\r\n\t\t\t}\r\n\t\t\tif (typeof ErrorCodes[codeName] !== 'undefined') {\r\n\t\t\t\tthrow new Error('Error already defined: ' + codeName + ' as ' + ErrorCodes[codeName]);\r\n\t\t\t}\r\n\t\t\tif (typeof ErrorCodeLookup[codeNumber] !== 'undefined') {\r\n\t\t\t\tthrow new Error('Error code already used: ' + ErrorCodeLookup[codeNumber] + ' as ' + codeNumber);\r\n\t\t\t}\r\n\t\t\tErrorCodes[codeName] = codeNumber;\r\n\t\t\tErrorCodeLookup[codeNumber] = codeName;\r\n\t\t\tErrorMessagesDefault[codeName] = ErrorMessagesDefault[codeNumber] = defaultMessage;\r\n\t\t\tfor (var langCode in languages) {\r\n\t\t\t\tvar language = languages[langCode];\r\n\t\t\t\tif (language[codeName]) {\r\n\t\t\t\t\tlanguage[codeNumber] = language[codeNumber] || language[codeName];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\treset: function () {\r\n\t\t\tglobalContext.reset();\r\n\t\t\tthis.error = null;\r\n\t\t\tthis.missing = [];\r\n\t\t\tthis.valid = true;\r\n\t\t},\r\n\t\tmissing: [],\r\n\t\terror: null,\r\n\t\tvalid: true,\r\n\t\tnormSchema: normSchema,\r\n\t\tresolveUrl: resolveUrl,\r\n\t\tgetDocumentUri: getDocumentUri,\r\n\t\terrorCodes: ErrorCodes\r\n\t};\r\n\tapi.language(language || 'en');\r\n\treturn api;\r\n}\r\n\r\nvar tv4 = createApi();\r\ntv4.addLanguage('en-gb', ErrorMessagesDefault);\r\n\r\n//legacy property\r\ntv4.tv4 = tv4;\r\n\r\nreturn tv4; // used by _header.js to globalise.\r\n\r\n}));","  //     FBP Graph Journal\n  //     (c) 2016-2017 Flowhub UG\n  //     (c) 2014 Jon Nordby\n  //     (c) 2013 Flowhub UG\n  //     (c) 2011-2012 Henri Bergius, Nemein\n  //     FBP Graph may be freely distributed under the MIT license\n\nvar EventEmitter, Journal, JournalStore, MemoryJournalStore, calculateMeta, clone, entryToPrettyString,\n  boundMethodCheck = function(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new Error('Bound instance method accessed before binding'); } };\n\n({EventEmitter} = require('events'));\n\nclone = require('clone');\n\nentryToPrettyString = function(entry) {\n  var a;\n  a = entry.args;\n  switch (entry.cmd) {\n    case 'addNode':\n      return `${a.id}(${a.component})`;\n    case 'removeNode':\n      return `DEL ${a.id}(${a.component})`;\n    case 'renameNode':\n      return `RENAME ${a.oldId} ${a.newId}`;\n    case 'changeNode':\n      return `META ${a.id}`;\n    case 'addEdge':\n      return `${a.from.node} ${a.from.port} -> ${a.to.port} ${a.to.node}`;\n    case 'removeEdge':\n      return `${a.from.node} ${a.from.port} -X> ${a.to.port} ${a.to.node}`;\n    case 'changeEdge':\n      return `META ${a.from.node} ${a.from.port} -> ${a.to.port} ${a.to.node}`;\n    case 'addInitial':\n      return `'${a.from.data}' -> ${a.to.port} ${a.to.node}`;\n    case 'removeInitial':\n      return `'${a.from.data}' -X> ${a.to.port} ${a.to.node}`;\n    case 'startTransaction':\n      return `>>> ${entry.rev}: ${a.id}`;\n    case 'endTransaction':\n      return `<<< ${entry.rev}: ${a.id}`;\n    case 'changeProperties':\n      return \"PROPERTIES\";\n    case 'addGroup':\n      return `GROUP ${a.name}`;\n    case 'renameGroup':\n      return `RENAME GROUP ${a.oldName} ${a.newName}`;\n    case 'removeGroup':\n      return `DEL GROUP ${a.name}`;\n    case 'changeGroup':\n      return `META GROUP ${a.name}`;\n    case 'addInport':\n      return `INPORT ${a.name}`;\n    case 'removeInport':\n      return `DEL INPORT ${a.name}`;\n    case 'renameInport':\n      return `RENAME INPORT ${a.oldId} ${a.newId}`;\n    case 'changeInport':\n      return `META INPORT ${a.name}`;\n    case 'addOutport':\n      return `OUTPORT ${a.name}`;\n    case 'removeOutport':\n      return `DEL OUTPORT ${a.name}`;\n    case 'renameOutport':\n      return `RENAME OUTPORT ${a.oldId} ${a.newId}`;\n    case 'changeOutport':\n      return `META OUTPORT ${a.name}`;\n    default:\n      throw new Error(`Unknown journal entry: ${entry.cmd}`);\n  }\n};\n\n// To set, not just update (append) metadata\ncalculateMeta = function(oldMeta, newMeta) {\n  var k, setMeta, v;\n  setMeta = {};\n  for (k in oldMeta) {\n    v = oldMeta[k];\n    setMeta[k] = null;\n  }\n  for (k in newMeta) {\n    v = newMeta[k];\n    setMeta[k] = v;\n  }\n  return setMeta;\n};\n\nJournalStore = (function() {\n  class JournalStore extends EventEmitter {\n    constructor(graph) {\n      super();\n      this.graph = graph;\n      this.lastRevision = 0;\n    }\n\n    putTransaction(revId, entries) {\n      if (revId > this.lastRevision) {\n        this.lastRevision = revId;\n      }\n      return this.emit('transaction', revId);\n    }\n\n    fetchTransaction(revId, entries) {}\n\n  };\n\n  JournalStore.prototype.lastRevision = 0;\n\n  return JournalStore;\n\n}).call(this);\n\nMemoryJournalStore = class MemoryJournalStore extends JournalStore {\n  constructor(graph) {\n    super(graph);\n    this.transactions = [];\n  }\n\n  putTransaction(revId, entries) {\n    super.putTransaction(revId, entries);\n    return this.transactions[revId] = entries;\n  }\n\n  fetchTransaction(revId) {\n    return this.transactions[revId];\n  }\n\n};\n\nJournal = (function() {\n  // ## Journalling graph changes\n\n  // The Journal can follow graph changes, store them\n  // and allows to recall previous revisions of the graph.\n\n  // Revisions stored in the journal follow the transactions of the graph.\n  // It is not possible to operate on smaller changes than individual transactions.\n  // Use startTransaction and endTransaction on Graph to structure the revisions logical changesets.\n  class Journal extends EventEmitter {\n    constructor(graph, metadata, store) {\n      var edge, group, iip, j, k, l, len, len1, len2, len3, m, n, node, ref, ref1, ref2, ref3, ref4, ref5, v;\n      super();\n      this.startTransaction = this.startTransaction.bind(this);\n      this.endTransaction = this.endTransaction.bind(this);\n      this.graph = graph;\n      this.entries = [];\n      this.subscribed = true;\n      this.store = store || new MemoryJournalStore(this.graph);\n      if (this.store.transactions.length === 0) {\n        // Sync journal with current graph to start transaction history\n        this.currentRevision = -1;\n        this.startTransaction('initial', metadata);\n        ref = this.graph.nodes;\n        for (j = 0, len = ref.length; j < len; j++) {\n          node = ref[j];\n          this.appendCommand('addNode', node);\n        }\n        ref1 = this.graph.edges;\n        for (l = 0, len1 = ref1.length; l < len1; l++) {\n          edge = ref1[l];\n          this.appendCommand('addEdge', edge);\n        }\n        ref2 = this.graph.initializers;\n        for (m = 0, len2 = ref2.length; m < len2; m++) {\n          iip = ref2[m];\n          this.appendCommand('addInitial', iip);\n        }\n        if (Object.keys(this.graph.properties).length > 0) {\n          this.appendCommand('changeProperties', this.graph.properties, {});\n        }\n        ref3 = this.graph.inports;\n        for (k in ref3) {\n          v = ref3[k];\n          this.appendCommand('addInport', {\n            name: k,\n            port: v\n          });\n        }\n        ref4 = this.graph.outports;\n        for (k in ref4) {\n          v = ref4[k];\n          this.appendCommand('addOutport', {\n            name: k,\n            port: v\n          });\n        }\n        ref5 = this.graph.groups;\n        for (n = 0, len3 = ref5.length; n < len3; n++) {\n          group = ref5[n];\n          this.appendCommand('addGroup', group);\n        }\n        this.endTransaction('initial', metadata);\n      } else {\n        // Persistent store, start with its latest rev\n        this.currentRevision = this.store.lastRevision;\n      }\n      // Subscribe to graph changes\n      this.graph.on('addNode', (node) => {\n        return this.appendCommand('addNode', node);\n      });\n      this.graph.on('removeNode', (node) => {\n        return this.appendCommand('removeNode', node);\n      });\n      this.graph.on('renameNode', (oldId, newId) => {\n        var args;\n        args = {\n          oldId: oldId,\n          newId: newId\n        };\n        return this.appendCommand('renameNode', args);\n      });\n      this.graph.on('changeNode', (node, oldMeta) => {\n        return this.appendCommand('changeNode', {\n          id: node.id,\n          new: node.metadata,\n          old: oldMeta\n        });\n      });\n      this.graph.on('addEdge', (edge) => {\n        return this.appendCommand('addEdge', edge);\n      });\n      this.graph.on('removeEdge', (edge) => {\n        return this.appendCommand('removeEdge', edge);\n      });\n      this.graph.on('changeEdge', (edge, oldMeta) => {\n        return this.appendCommand('changeEdge', {\n          from: edge.from,\n          to: edge.to,\n          new: edge.metadata,\n          old: oldMeta\n        });\n      });\n      this.graph.on('addInitial', (iip) => {\n        return this.appendCommand('addInitial', iip);\n      });\n      this.graph.on('removeInitial', (iip) => {\n        return this.appendCommand('removeInitial', iip);\n      });\n      this.graph.on('changeProperties', (newProps, oldProps) => {\n        return this.appendCommand('changeProperties', {\n          new: newProps,\n          old: oldProps\n        });\n      });\n      this.graph.on('addGroup', (group) => {\n        return this.appendCommand('addGroup', group);\n      });\n      this.graph.on('renameGroup', (oldName, newName) => {\n        return this.appendCommand('renameGroup', {\n          oldName: oldName,\n          newName: newName\n        });\n      });\n      this.graph.on('removeGroup', (group) => {\n        return this.appendCommand('removeGroup', group);\n      });\n      this.graph.on('changeGroup', (group, oldMeta) => {\n        return this.appendCommand('changeGroup', {\n          name: group.name,\n          new: group.metadata,\n          old: oldMeta\n        });\n      });\n      this.graph.on('addExport', (exported) => {\n        return this.appendCommand('addExport', exported);\n      });\n      this.graph.on('removeExport', (exported) => {\n        return this.appendCommand('removeExport', exported);\n      });\n      this.graph.on('addInport', (name, port) => {\n        return this.appendCommand('addInport', {\n          name: name,\n          port: port\n        });\n      });\n      this.graph.on('removeInport', (name, port) => {\n        return this.appendCommand('removeInport', {\n          name: name,\n          port: port\n        });\n      });\n      this.graph.on('renameInport', (oldId, newId) => {\n        return this.appendCommand('renameInport', {\n          oldId: oldId,\n          newId: newId\n        });\n      });\n      this.graph.on('changeInport', (name, port, oldMeta) => {\n        return this.appendCommand('changeInport', {\n          name: name,\n          new: port.metadata,\n          old: oldMeta\n        });\n      });\n      this.graph.on('addOutport', (name, port) => {\n        return this.appendCommand('addOutport', {\n          name: name,\n          port: port\n        });\n      });\n      this.graph.on('removeOutport', (name, port) => {\n        return this.appendCommand('removeOutport', {\n          name: name,\n          port: port\n        });\n      });\n      this.graph.on('renameOutport', (oldId, newId) => {\n        return this.appendCommand('renameOutport', {\n          oldId: oldId,\n          newId: newId\n        });\n      });\n      this.graph.on('changeOutport', (name, port, oldMeta) => {\n        return this.appendCommand('changeOutport', {\n          name: name,\n          new: port.metadata,\n          old: oldMeta\n        });\n      });\n      this.graph.on('startTransaction', (id, meta) => {\n        return this.startTransaction(id, meta);\n      });\n      this.graph.on('endTransaction', (id, meta) => {\n        return this.endTransaction(id, meta);\n      });\n    }\n\n    startTransaction(id, meta) {\n      boundMethodCheck(this, Journal);\n      if (!this.subscribed) {\n        return;\n      }\n      if (this.entries.length > 0) {\n        throw Error(\"Inconsistent @entries\");\n      }\n      this.currentRevision++;\n      return this.appendCommand('startTransaction', {\n        id: id,\n        metadata: meta\n      }, this.currentRevision);\n    }\n\n    endTransaction(id, meta) {\n      boundMethodCheck(this, Journal);\n      if (!this.subscribed) {\n        return;\n      }\n      this.appendCommand('endTransaction', {\n        id: id,\n        metadata: meta\n      }, this.currentRevision);\n      // TODO: this would be the place to refine @entries into\n      // a minimal set of changes, like eliminating changes early in transaction\n      // which were later reverted/overwritten\n      this.store.putTransaction(this.currentRevision, this.entries);\n      return this.entries = [];\n    }\n\n    appendCommand(cmd, args, rev) {\n      var entry;\n      if (!this.subscribed) {\n        return;\n      }\n      entry = {\n        cmd: cmd,\n        args: clone(args)\n      };\n      if (rev != null) {\n        entry.rev = rev;\n      }\n      return this.entries.push(entry);\n    }\n\n    executeEntry(entry) {\n      var a;\n      a = entry.args;\n      switch (entry.cmd) {\n        case 'addNode':\n          return this.graph.addNode(a.id, a.component);\n        case 'removeNode':\n          return this.graph.removeNode(a.id);\n        case 'renameNode':\n          return this.graph.renameNode(a.oldId, a.newId);\n        case 'changeNode':\n          return this.graph.setNodeMetadata(a.id, calculateMeta(a.old, a.new));\n        case 'addEdge':\n          return this.graph.addEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n        case 'removeEdge':\n          return this.graph.removeEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n        case 'changeEdge':\n          return this.graph.setEdgeMetadata(a.from.node, a.from.port, a.to.node, a.to.port, calculateMeta(a.old, a.new));\n        case 'addInitial':\n          return this.graph.addInitial(a.from.data, a.to.node, a.to.port);\n        case 'removeInitial':\n          return this.graph.removeInitial(a.to.node, a.to.port);\n        case 'startTransaction':\n          return null;\n        case 'endTransaction':\n          return null;\n        case 'changeProperties':\n          return this.graph.setProperties(a.new);\n        case 'addGroup':\n          return this.graph.addGroup(a.name, a.nodes, a.metadata);\n        case 'renameGroup':\n          return this.graph.renameGroup(a.oldName, a.newName);\n        case 'removeGroup':\n          return this.graph.removeGroup(a.name);\n        case 'changeGroup':\n          return this.graph.setGroupMetadata(a.name, calculateMeta(a.old, a.new));\n        case 'addInport':\n          return this.graph.addInport(a.name, a.port.process, a.port.port, a.port.metadata);\n        case 'removeInport':\n          return this.graph.removeInport(a.name);\n        case 'renameInport':\n          return this.graph.renameInport(a.oldId, a.newId);\n        case 'changeInport':\n          return this.graph.setInportMetadata(a.name, calculateMeta(a.old, a.new));\n        case 'addOutport':\n          return this.graph.addOutport(a.name, a.port.process, a.port.port, a.port.metadata(a.name));\n        case 'removeOutport':\n          return this.graph.removeOutport;\n        case 'renameOutport':\n          return this.graph.renameOutport(a.oldId, a.newId);\n        case 'changeOutport':\n          return this.graph.setOutportMetadata(a.name, calculateMeta(a.old, a.new));\n        default:\n          throw new Error(`Unknown journal entry: ${entry.cmd}`);\n      }\n    }\n\n    executeEntryInversed(entry) {\n      var a;\n      a = entry.args;\n      switch (entry.cmd) {\n        case 'addNode':\n          return this.graph.removeNode(a.id);\n        case 'removeNode':\n          return this.graph.addNode(a.id, a.component);\n        case 'renameNode':\n          return this.graph.renameNode(a.newId, a.oldId);\n        case 'changeNode':\n          return this.graph.setNodeMetadata(a.id, calculateMeta(a.new, a.old));\n        case 'addEdge':\n          return this.graph.removeEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n        case 'removeEdge':\n          return this.graph.addEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n        case 'changeEdge':\n          return this.graph.setEdgeMetadata(a.from.node, a.from.port, a.to.node, a.to.port, calculateMeta(a.new, a.old));\n        case 'addInitial':\n          return this.graph.removeInitial(a.to.node, a.to.port);\n        case 'removeInitial':\n          return this.graph.addInitial(a.from.data, a.to.node, a.to.port);\n        case 'startTransaction':\n          return null;\n        case 'endTransaction':\n          return null;\n        case 'changeProperties':\n          return this.graph.setProperties(a.old);\n        case 'addGroup':\n          return this.graph.removeGroup(a.name);\n        case 'renameGroup':\n          return this.graph.renameGroup(a.newName, a.oldName);\n        case 'removeGroup':\n          return this.graph.addGroup(a.name, a.nodes, a.metadata);\n        case 'changeGroup':\n          return this.graph.setGroupMetadata(a.name, calculateMeta(a.new, a.old));\n        case 'addInport':\n          return this.graph.removeInport(a.name);\n        case 'removeInport':\n          return this.graph.addInport(a.name, a.port.process, a.port.port, a.port.metadata);\n        case 'renameInport':\n          return this.graph.renameInport(a.newId, a.oldId);\n        case 'changeInport':\n          return this.graph.setInportMetadata(a.name, calculateMeta(a.new, a.old));\n        case 'addOutport':\n          return this.graph.removeOutport(a.name);\n        case 'removeOutport':\n          return this.graph.addOutport(a.name, a.port.process, a.port.port, a.port.metadata);\n        case 'renameOutport':\n          return this.graph.renameOutport(a.newId, a.oldId);\n        case 'changeOutport':\n          return this.graph.setOutportMetadata(a.name, calculateMeta(a.new, a.old));\n        default:\n          throw new Error(`Unknown journal entry: ${entry.cmd}`);\n      }\n    }\n\n    moveToRevision(revId) {\n      var entries, entry, i, j, l, len, m, n, r, ref, ref1, ref2, ref3, ref4, ref5;\n      if (revId === this.currentRevision) {\n        return;\n      }\n      this.subscribed = false;\n      if (revId > this.currentRevision) {\n// Forward replay journal to revId\n        for (r = j = ref = this.currentRevision + 1, ref1 = revId; (ref <= ref1 ? j <= ref1 : j >= ref1); r = ref <= ref1 ? ++j : --j) {\n          ref2 = this.store.fetchTransaction(r);\n          for (l = 0, len = ref2.length; l < len; l++) {\n            entry = ref2[l];\n            this.executeEntry(entry);\n          }\n        }\n      } else {\n// Move backwards, and apply inverse changes\n        for (r = m = ref3 = this.currentRevision, ref4 = revId + 1; m >= ref4; r = m += -1) {\n          entries = this.store.fetchTransaction(r);\n          for (i = n = ref5 = entries.length - 1; n >= 0; i = n += -1) {\n            this.executeEntryInversed(entries[i]);\n          }\n        }\n      }\n      this.currentRevision = revId;\n      return this.subscribed = true;\n    }\n\n    // ## Undoing & redoing\n    // Undo the last graph change\n    undo() {\n      if (!this.canUndo()) {\n        return;\n      }\n      return this.moveToRevision(this.currentRevision - 1);\n    }\n\n    // If there is something to undo\n    canUndo() {\n      return this.currentRevision > 0;\n    }\n\n    // Redo the last undo\n    redo() {\n      if (!this.canRedo()) {\n        return;\n      }\n      return this.moveToRevision(this.currentRevision + 1);\n    }\n\n    // If there is something to redo\n    canRedo() {\n      return this.currentRevision < this.store.lastRevision;\n    }\n\n    //# Serializing\n    // Render a pretty printed string of the journal. Changes are abbreviated\n    toPrettyString(startRev, endRev) {\n      var e, entry, j, l, len, lines, r, ref, ref1;\n      startRev |= 0;\n      endRev |= this.store.lastRevision;\n      lines = [];\n      for (r = j = ref = startRev, ref1 = endRev; (ref <= ref1 ? j < ref1 : j > ref1); r = ref <= ref1 ? ++j : --j) {\n        e = this.store.fetchTransaction(r);\n        for (l = 0, len = e.length; l < len; l++) {\n          entry = e[l];\n          lines.push(entryToPrettyString(entry));\n        }\n      }\n      return lines.join('\\n');\n    }\n\n    // Serialize journal to JSON\n    toJSON(startRev, endRev) {\n      var entries, entry, j, l, len, r, ref, ref1, ref2;\n      startRev |= 0;\n      endRev |= this.store.lastRevision;\n      entries = [];\n      for (r = j = ref = startRev, ref1 = endRev; j < ref1; r = j += 1) {\n        ref2 = this.store.fetchTransaction(r);\n        for (l = 0, len = ref2.length; l < len; l++) {\n          entry = ref2[l];\n          entries.push(entryToPrettyString(entry));\n        }\n      }\n      return entries;\n    }\n\n    save(file, success) {\n      var json;\n      json = JSON.stringify(this.toJSON(), null, 4);\n      return require('fs').writeFile(`${file}.json`, json, \"utf-8\", function(err, data) {\n        if (err) {\n          throw err;\n        }\n        return success(file);\n      });\n    }\n\n  };\n\n  Journal.prototype.graph = null;\n\n  Journal.prototype.entries = [];\n\n  Journal.prototype.subscribed = true; // Whether we should respond to graph change notifications or not\n\n  return Journal;\n\n}).call(this);\n\nexports.Journal = Journal;\n\nexports.JournalStore = JournalStore;\n\nexports.MemoryJournalStore = MemoryJournalStore;\n","\n// File generated by noflo-component-loader on 2020-09-28T13:46:46.765Z\nvar baseLoader = require('noflo-component-loader/lib/loader.js');\nvar sources = {\"browser-app/DoSomething\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  // Define a meaningful icon for component from http://fontawesome.io/icons/\\n  c.icon = 'cog';\\n  // Provide a description on component usage\\n  c.description = 'do X';\\n  // Add input ports\\n  c.inPorts.add('in', {\\n    datatype: 'string',\\n  });\\n  // Add output ports\\n  c.outPorts.add('out', {\\n    datatype: 'string',\\n  });\\n  // What to do when port receives a packet\\n  c.process((input, output) => {\\n    // Check that input has received data packet\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read the contents of the data packet\\n    const data = input.getData('in');\\n    // Send the contents to output port\\n    output.send({\\n      out: data,\\n    });\\n    // Finish processing\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"tests\":\"topic: \\\"browser-app/DoSomething\\\"\\ncases:\\n-\\n  name: 'sending a boolean'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: true\\n  expect:\\n    out:\\n     equals: true\\n-\\n  name: 'sending a number'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: 1000\\n  expect:\\n    out:\\n      equals: 1000\\n-\\n  name: 'sending a string'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: \\\"my string\\\"\\n  expect:\\n    out:\\n      equals: \\\"my string\\\"\\n\"},\"Graph\":{\"language\":\"javascript\",\"source\":\"\\\"use strict\\\";\\n\\nfunction _typeof(obj) { \\\"@babel/helpers - typeof\\\"; if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \\\"undefined\\\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \\\"function\\\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\n//     NoFlo - Flow-Based Programming for JavaScript\\n//     (c) 2013-2017 Flowhub UG\\n//     (c) 2011-2012 Henri Bergius, Nemein\\n//     NoFlo may be freely distributed under the MIT license\\n\\n/* eslint-disable\\n    class-methods-use-this,\\n    import/no-unresolved,\\n*/\\nvar noflo = require('../lib/NoFlo'); // The Graph component is used to wrap NoFlo Networks into components inside\\n// another network.\\n\\n\\nvar Graph = /*#__PURE__*/function (_noflo$Component) {\\n  _inherits(Graph, _noflo$Component);\\n\\n  var _super = _createSuper(Graph);\\n\\n  function Graph(metadata) {\\n    var _this;\\n\\n    _classCallCheck(this, Graph);\\n\\n    _this = _super.call(this);\\n    _this.metadata = metadata;\\n    _this.network = null;\\n    _this.ready = true;\\n    _this.started = false;\\n    _this.starting = false;\\n    _this.baseDir = null;\\n    _this.loader = null;\\n    _this.load = 0;\\n    _this.inPorts = new noflo.InPorts({\\n      graph: {\\n        datatype: 'all',\\n        description: 'NoFlo graph definition to be used with the subgraph component',\\n        required: true\\n      }\\n    });\\n    _this.outPorts = new noflo.OutPorts();\\n\\n    _this.inPorts.graph.on('ip', function (packet) {\\n      if (packet.type !== 'data') {\\n        return;\\n      }\\n\\n      _this.setGraph(packet.data, function (err) {\\n        // TODO: Port this part to Process API and use output.error method instead\\n        if (err) {\\n          _this.error(err);\\n        }\\n      });\\n    });\\n\\n    return _this;\\n  }\\n\\n  _createClass(Graph, [{\\n    key: \\\"setGraph\\\",\\n    value: function setGraph(graph, callback) {\\n      var _this2 = this;\\n\\n      this.ready = false;\\n\\n      if (_typeof(graph) === 'object') {\\n        if (typeof graph.addNode === 'function') {\\n          // Existing Graph object\\n          this.createNetwork(graph, callback);\\n          return;\\n        } // JSON definition of a graph\\n\\n\\n        noflo.graph.loadJSON(graph, function (err, instance) {\\n          var inst = instance;\\n\\n          if (err) {\\n            callback(err);\\n            return;\\n          }\\n\\n          inst.baseDir = _this2.baseDir;\\n\\n          _this2.createNetwork(inst, callback);\\n        });\\n        return;\\n      }\\n\\n      var graphName = graph;\\n\\n      if (graphName.substr(0, 1) !== '/' && graphName.substr(1, 1) !== ':' && process && process.cwd) {\\n        graphName = \\\"\\\".concat(process.cwd(), \\\"/\\\").concat(graphName);\\n      }\\n\\n      noflo.graph.loadFile(graphName, function (err, instance) {\\n        var inst = instance;\\n\\n        if (err) {\\n          callback(err);\\n          return;\\n        }\\n\\n        inst.baseDir = _this2.baseDir;\\n\\n        _this2.createNetwork(inst, callback);\\n      });\\n    }\\n  }, {\\n    key: \\\"createNetwork\\\",\\n    value: function createNetwork(graph, callback) {\\n      var _this3 = this;\\n\\n      this.description = graph.properties.description || '';\\n      this.icon = graph.properties.icon || this.icon;\\n      var graphObj = graph;\\n\\n      if (!graphObj.name) {\\n        graphObj.name = this.nodeId;\\n      }\\n\\n      graphObj.componentLoader = this.loader;\\n      noflo.createNetwork(graphObj, {\\n        delay: true,\\n        subscribeGraph: false\\n      }, function (err, network) {\\n        _this3.network = network;\\n\\n        if (err) {\\n          callback(err);\\n          return;\\n        }\\n\\n        _this3.emit('network', _this3.network); // Subscribe to network lifecycle\\n\\n\\n        _this3.subscribeNetwork(_this3.network); // Wire the network up\\n\\n\\n        _this3.network.connect(function (err2) {\\n          if (err2) {\\n            callback(err2);\\n            return;\\n          }\\n\\n          Object.keys(_this3.network.processes).forEach(function (name) {\\n            // Map exported ports to local component\\n            var node = _this3.network.processes[name];\\n\\n            _this3.findEdgePorts(name, node);\\n          }); // Finally set ourselves as \\\"ready\\\"\\n\\n          _this3.setToReady();\\n\\n          callback();\\n        });\\n      });\\n    }\\n  }, {\\n    key: \\\"subscribeNetwork\\\",\\n    value: function subscribeNetwork() {\\n      var _this4 = this;\\n\\n      var contexts = [];\\n      this.network.on('start', function () {\\n        var ctx = {};\\n        contexts.push(ctx);\\n        return _this4.activate(ctx);\\n      });\\n      return this.network.on('end', function () {\\n        var ctx = contexts.pop();\\n\\n        if (!ctx) {\\n          return;\\n        }\\n\\n        _this4.deactivate(ctx);\\n      });\\n    }\\n  }, {\\n    key: \\\"isExportedInport\\\",\\n    value: function isExportedInport(port, nodeName, portName) {\\n      // First we check disambiguated exported ports\\n      var keys = Object.keys(this.network.graph.inports);\\n\\n      for (var i = 0; i < keys.length; i += 1) {\\n        var pub = keys[i];\\n        var priv = this.network.graph.inports[pub];\\n\\n        if (priv.process === nodeName && priv.port === portName) {\\n          return pub;\\n        }\\n      } // Component has exported ports and this isn't one of them\\n\\n\\n      return false;\\n    }\\n  }, {\\n    key: \\\"isExportedOutport\\\",\\n    value: function isExportedOutport(port, nodeName, portName) {\\n      // First we check disambiguated exported ports\\n      var keys = Object.keys(this.network.graph.outports);\\n\\n      for (var i = 0; i < keys.length; i += 1) {\\n        var pub = keys[i];\\n        var priv = this.network.graph.outports[pub];\\n\\n        if (priv.process === nodeName && priv.port === portName) {\\n          return pub;\\n        }\\n      } // Component has exported ports and this isn't one of them\\n\\n\\n      return false;\\n    }\\n  }, {\\n    key: \\\"setToReady\\\",\\n    value: function setToReady() {\\n      var _this5 = this;\\n\\n      if (typeof process !== 'undefined' && process.execPath && process.execPath.indexOf('node') !== -1) {\\n        process.nextTick(function () {\\n          _this5.ready = true;\\n          return _this5.emit('ready');\\n        });\\n      } else {\\n        setTimeout(function () {\\n          _this5.ready = true;\\n          return _this5.emit('ready');\\n        }, 0);\\n      }\\n    }\\n  }, {\\n    key: \\\"findEdgePorts\\\",\\n    value: function findEdgePorts(name, process) {\\n      var _this6 = this;\\n\\n      var inPorts = process.component.inPorts.ports;\\n      var outPorts = process.component.outPorts.ports;\\n      Object.keys(inPorts).forEach(function (portName) {\\n        var port = inPorts[portName];\\n\\n        var targetPortName = _this6.isExportedInport(port, name, portName);\\n\\n        if (targetPortName === false) {\\n          return;\\n        }\\n\\n        _this6.inPorts.add(targetPortName, port);\\n\\n        _this6.inPorts[targetPortName].on('connect', function () {\\n          // Start the network implicitly if we're starting to get data\\n          if (_this6.starting) {\\n            return;\\n          }\\n\\n          if (_this6.network.isStarted()) {\\n            return;\\n          }\\n\\n          if (_this6.network.startupDate) {\\n            // Network was started, but did finish. Re-start simply\\n            _this6.network.setStarted(true);\\n\\n            return;\\n          } // Network was never started, start properly\\n\\n\\n          _this6.setUp(function () {});\\n        });\\n      });\\n      Object.keys(outPorts).forEach(function (portName) {\\n        var port = outPorts[portName];\\n\\n        var targetPortName = _this6.isExportedOutport(port, name, portName);\\n\\n        if (targetPortName === false) {\\n          return;\\n        }\\n\\n        _this6.outPorts.add(targetPortName, port);\\n      });\\n      return true;\\n    }\\n  }, {\\n    key: \\\"isReady\\\",\\n    value: function isReady() {\\n      return this.ready;\\n    }\\n  }, {\\n    key: \\\"isSubgraph\\\",\\n    value: function isSubgraph() {\\n      return true;\\n    }\\n  }, {\\n    key: \\\"isLegacy\\\",\\n    value: function isLegacy() {\\n      return false;\\n    }\\n  }, {\\n    key: \\\"setUp\\\",\\n    value: function setUp(callback) {\\n      var _this7 = this;\\n\\n      this.starting = true;\\n\\n      if (!this.isReady()) {\\n        this.once('ready', function () {\\n          _this7.setUp(callback);\\n        });\\n        return;\\n      }\\n\\n      if (!this.network) {\\n        callback(null);\\n        return;\\n      }\\n\\n      this.network.start(function (err) {\\n        if (err) {\\n          callback(err);\\n          return;\\n        }\\n\\n        _this7.starting = false;\\n        callback();\\n      });\\n    }\\n  }, {\\n    key: \\\"tearDown\\\",\\n    value: function tearDown(callback) {\\n      this.starting = false;\\n\\n      if (!this.network) {\\n        callback(null);\\n        return;\\n      }\\n\\n      this.network.stop(function (err) {\\n        if (err) {\\n          callback(err);\\n          return;\\n        }\\n\\n        callback();\\n      });\\n    }\\n  }]);\\n\\n  return Graph;\\n}(noflo.Component);\\n\\nexports.getComponent = function (metadata) {\\n  return new Graph(metadata);\\n};\"},\"core/Callback\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = `This component calls a given callback function for each\\nIP it receives.  The Callback component is typically used to connect\\nNoFlo with external Node.js code.`;\\n  c.icon = 'sign-out';\\n\\n  c.inPorts.add('in', {\\n    description: 'Object passed as argument of the callback',\\n    datatype: 'all',\\n  });\\n  c.inPorts.add('callback', {\\n    description: 'Callback to invoke',\\n    datatype: 'function',\\n    control: true,\\n    required: true,\\n  });\\n  c.outPorts.add(\\n    'error',\\n    { datatype: 'object' },\\n  );\\n\\n  return c.process((input, output) => {\\n    if (!input.hasData('callback', 'in')) {\\n      return;\\n    }\\n    const [callback, data] = input.getData('callback', 'in');\\n    if (typeof callback !== 'function') {\\n      output.done(new Error('The provided callback must be a function'));\\n      return;\\n    }\\n\\n    // Call the callback when receiving data\\n    try {\\n      callback(data);\\n    } catch (e) {\\n      output.done(e);\\n      return;\\n    }\\n    output.done();\\n  });\\n};\\n\"},\"core/Copy\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\nconst owl = require('owl-deepcopy');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'deep (i.e. recursively) copy an object';\\n  c.icon = 'copy';\\n\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to be copied',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n    description: 'Copy of the original packet',\\n  });\\n\\n  return c.process((input, output) => {\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    const data = input.getData('in');\\n\\n    const copy = owl.deepCopy(data);\\n    output.sendDone({ out: copy });\\n  });\\n};\\n\"},\"core/DisconnectAfterPacket\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'Makes each data packet a stream of its own';\\n  c.icon = 'pause';\\n  c.forwardBrackets = {};\\n  c.autoOrdering = false;\\n\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to be forward with disconnection',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  let brackets = {};\\n  c.tearDown = (callback) => {\\n    brackets = {};\\n    callback();\\n  };\\n  return c.process((input, output) => {\\n    // Force auto-ordering to be off for this one\\n    c.autoOrdering = false;\\n\\n    const data = input.get('in');\\n    if (!brackets[input.scope]) { brackets[input.scope] = []; }\\n    if (data.type === 'openBracket') {\\n      brackets[input.scope].push(data.data);\\n      output.done();\\n      return;\\n    }\\n    if (data.type === 'closeBracket') {\\n      brackets[input.scope].pop();\\n      output.done();\\n      return;\\n    }\\n\\n    if (data.type !== 'data') { return; }\\n\\n    brackets[input.scope].forEach((bracket) => {\\n      output.sendIP('out', new noflo.IP('openBracket', bracket));\\n    });\\n    output.sendIP('out', data);\\n    const closes = brackets[input.scope].slice(0);\\n    closes.reverse();\\n    brackets[input.scope].forEach((bracket) => {\\n      output.sendIP('out', new noflo.IP('closeBracket', bracket));\\n    });\\n\\n    output.done();\\n  });\\n};\\n\"},\"core/Drop\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'This component drops every packet it receives with no action';\\n  c.icon = 'trash-o';\\n\\n  c.inPorts.add('in', {\\n    datatypes: 'all',\\n    description: 'Packet to be dropped',\\n  });\\n\\n  return c.process((input, output) => {\\n    const data = input.get('in');\\n    data.drop();\\n    output.done();\\n  });\\n};\\n\"},\"core/Kick\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = `This component generates a single packet and sends it to\\nthe output port. Mostly usable for debugging, but can also be useful\\nfor starting up networks.`;\\n  c.icon = 'share';\\n\\n  c.inPorts.add('in', {\\n    datatype: 'bang',\\n    description: 'Signal to send the data packet',\\n  });\\n  c.inPorts.add('data', {\\n    datatype: 'all',\\n    description: 'Packet to be sent',\\n    control: true,\\n    default: null,\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  return c.process((input, output) => {\\n    if (!input.hasStream('in')) { return; }\\n    if (input.attached('data').length && !input.hasData('data')) { return; }\\n    input.getData('in');\\n    const data = input.getData('data');\\n    output.send({ out: data });\\n    output.done();\\n  });\\n};\\n\"},\"core/MakeFunction\":{\"language\":\"javascript\",\"source\":\"/* eslint no-new-func: \\\"warn\\\" */\\nconst noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = `Evaluates a function each time data hits the \\\"in\\\" port \\nand sends the return value to \\\"out\\\". Within the function \\\"x\\\" will \\nbe the variable from the in port. For example, to make a ^2 function \\ninput \\\"return x*x;\\\" to the function port.`;\\n  c.icon = 'code';\\n\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to be processed',\\n  });\\n  c.inPorts.add('function', {\\n    datatype: 'string',\\n    description: 'Function to evaluate',\\n    control: true,\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n  c.outPorts.add('function', {\\n    datatype: 'function',\\n  });\\n  c.outPorts.add('error', {\\n    datatype: 'object',\\n  });\\n\\n  const prepareFunction = (func, callback) => {\\n    let newFunc;\\n    if (typeof func === 'function') {\\n      callback(null, func);\\n      return;\\n    }\\n    try {\\n      newFunc = Function('x', func);\\n    } catch (e) {\\n      callback(e);\\n      return;\\n    }\\n    callback(null, newFunc);\\n  };\\n\\n  return c.process((input, output) => {\\n    if (input.attached('in').length && !input.hasData('in')) { return; }\\n    if (input.hasData('function', 'in')) {\\n      // Both function and input data\\n      prepareFunction(input.getData('function'), (err, func) => {\\n        let result;\\n        if (err) {\\n          output.done(err);\\n          return;\\n        }\\n        const data = input.getData('in');\\n        try {\\n          result = func(data);\\n        } catch (error) {\\n          output.done(error);\\n          return;\\n        }\\n        output.sendDone({\\n          function: func,\\n          out: result,\\n        });\\n      });\\n      return;\\n    }\\n    if (!input.hasData('function')) { return; }\\n    prepareFunction(input.getData('function'), (err, func) => {\\n      if (err) {\\n        output.done(err);\\n        return;\\n      }\\n      output.sendDone({ function: func });\\n    });\\n  });\\n};\\n\"},\"core/Merge\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = `This component receives data on multiple input ports and \\nsends the same data out to the connected output port`;\\n  c.icon = 'compress';\\n\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to be forwarded',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  return c.process((input, output) => {\\n    const data = input.get('in');\\n    return output.sendDone({ out: data });\\n  });\\n};\\n\"},\"core/Output\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\nconst { inspect } = require('util');\\n\\nconst log = (options, data) => {\\n  if (options != null) {\\n    return console.log(inspect(\\n      data,\\n      options.showHidden,\\n      options.depth,\\n      options.colors,\\n    ));\\n  }\\n  return console.log(data);\\n};\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'Sends the data items to console.log';\\n  c.icon = 'bug';\\n\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to be printed through console.log',\\n  });\\n  c.inPorts.add('options', {\\n    datatype: 'object',\\n    description: 'Options to be passed to console.log',\\n    control: true,\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  return c.process((input, output) => {\\n    if (!input.hasData('in')) { return; }\\n    if (input.attached('options').length && !input.hasData('options')) { return; }\\n\\n    let options = null;\\n    if (input.has('options')) {\\n      options = input.getData('options');\\n    }\\n\\n    const data = input.getData('in');\\n    log(options, data);\\n    output.sendDone({ out: data });\\n  });\\n};\\n\"},\"core/ReadGlobal\":{\"language\":\"javascript\",\"source\":\"/* global window: true */\\nconst noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'Returns the value of a global variable.';\\n  c.icon = 'usd';\\n\\n  c.inPorts.add('name', {\\n    description: 'The name of the global variable.',\\n    datatype: 'string',\\n  });\\n\\n  c.outPorts.add('value', {\\n    description: 'The value of the variable.',\\n  });\\n  c.outPorts.add('error', {\\n    description: 'Any errors that occured reading the variables value.',\\n    datatype: 'object',\\n  });\\n\\n  c.forwardBrackets = { name: ['value', 'error'] };\\n\\n  return c.process((input, output) => {\\n    if (!input.hasData('name')) { return; }\\n    const data = input.getData('name');\\n\\n    const value = !noflo.isBrowser() ? global[data] : window[data];\\n\\n    if (typeof value === 'undefined') {\\n      const err = new Error(`\\\"${data}\\\" is undefined on the global object.`);\\n      output.sendDone(err);\\n      return;\\n    }\\n    output.sendDone({ value });\\n  });\\n};\\n\"},\"core/Repeat\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = `Forwards packets and metadata in the same way \\nit receives them`;\\n  c.icon = 'forward';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  return c.process((input, output) => {\\n    const data = input.get('in');\\n    output.sendDone({ out: data });\\n  });\\n};\\n\",\"tests\":\"topic: \\\"core/Repeat\\\"\\ncases:\\n-\\n  name: 'sending a boolean'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: true\\n  expect:\\n    out:\\n     equals: true\\n-\\n  name: 'sending a number'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: 1000\\n  expect:\\n    out:\\n      equals: 1000\\n-\\n  name: 'sending a string'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: \\\"my string\\\"\\n  expect:\\n    out:\\n      equals: \\\"my string\\\"\\n\"},\"core/RepeatAsync\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = \\\"Like 'Repeat', except repeat on next tick\\\";\\n  c.icon = 'step-forward';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  return c.process((input, output) => {\\n    const data = input.get('in');\\n    setTimeout(() => output.sendDone({ out: data }), 0);\\n  });\\n};\\n\"},\"core/RepeatDelayed\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'Forward packet after a set delay';\\n  c.icon = 'clock-o';\\n\\n  c.timers = [];\\n\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to be forwarded with a delay',\\n  });\\n  c.inPorts.add('delay', {\\n    datatype: 'number',\\n    description: 'How much to delay',\\n    default: 500,\\n    control: true,\\n  });\\n\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  c.tearDown = (callback) => {\\n    c.timers.forEach(timer => clearTimeout(timer));\\n    c.timers = [];\\n    return callback();\\n  };\\n\\n  return c.process((input, output) => {\\n    if (!input.hasData('in')) { return; }\\n    if (input.attached('delay').length && !input.hasData('delay')) { return; }\\n\\n    let delay = 500;\\n    if (input.hasData('delay')) {\\n      delay = input.getData('delay');\\n    }\\n    const payload = input.get('in');\\n\\n    const timer = setTimeout(() => {\\n      c.timers.splice(c.timers.indexOf(timer), 1);\\n      return output.sendDone({ out: payload });\\n    }, delay);\\n    c.timers.push(timer);\\n  });\\n};\\n\",\"tests\":\"topic: \\\"core/RepeatDelayed\\\"\\ncases:\\n-\\n  name: 'sending a boolean'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: true\\n  expect:\\n    out:\\n     equals: true\\n-\\n  name: 'sending a number'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: 1000\\n  expect:\\n    out:\\n      equals: 1000\\n-\\n  name: 'sending a string'\\n  assertion: 'should repeat the same'\\n  inputs:\\n    in: \\\"my string\\\"\\n  expect:\\n    out:\\n      equals: \\\"my string\\\"\\n\\n\"},\"core/RunInterval\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'Send a packet at the given interval';\\n  c.icon = 'clock-o';\\n  c.inPorts.add('interval', {\\n    datatype: 'number',\\n    description: 'Interval at which output packets are emitted (ms)',\\n    required: true,\\n    control: true,\\n  });\\n  c.inPorts.add('start', {\\n    datatype: 'bang',\\n    description: 'Start the emission',\\n  });\\n  c.inPorts.add('stop', {\\n    datatype: 'bang',\\n    description: 'Stop the emission',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'bang',\\n  });\\n\\n  c.timers = {};\\n\\n  const cleanUp = (scope) => {\\n    if (!c.timers[scope]) { return; }\\n    clearInterval(c.timers[scope].interval);\\n    c.timers[scope].deactivate();\\n    c.timers[scope] = null;\\n  };\\n\\n  c.tearDown = (callback) => {\\n    Object.keys(c.timers).forEach(cleanUp);\\n    c.timers = {};\\n    callback();\\n  };\\n\\n  c.forwardBrackets = {};\\n  return c.process((input, output, context) => {\\n    if (input.hasData('start')) {\\n      if (!input.hasData('interval')) { return; }\\n      const start = input.get('start');\\n      if (start.type !== 'data') { return; }\\n      const interval = parseInt(input.getData('interval'), 10);\\n      // Ensure we deactivate previous interval in this scope, if any\\n      cleanUp(start.scope);\\n\\n      // Set up interval\\n      const ctx = context;\\n      ctx.interval = setInterval(() => {\\n        const bang = new noflo.IP('data', true);\\n        bang.scope = start.scope;\\n        return c.outPorts.out.sendIP(bang);\\n      }, interval);\\n\\n      // Register scope, we keep it active until stopped\\n      c.timers[start.scope] = context;\\n      return;\\n    }\\n\\n    if (input.hasData('stop')) {\\n      const stop = input.get('stop');\\n      if (stop.type !== 'data') { return; }\\n      // Deactivate interval in this scope\\n      cleanUp(stop.scope);\\n      output.done();\\n    }\\n  });\\n};\\n\"},\"core/RunTimeout\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'Send a packet after the given time in ms';\\n  c.icon = 'clock-o';\\n\\n  c.timer = {};\\n\\n  c.inPorts.add('time', {\\n    datatype: 'number',\\n    description: 'Time after which a packet will be sent',\\n    required: true,\\n    control: true,\\n  });\\n  c.inPorts.add('start', {\\n    datatype: 'bang',\\n    description: 'Start the timeout before sending a packet',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'bang',\\n  });\\n\\n  c.forwardBrackets = { start: ['out'] };\\n\\n  c.stopTimer = (scope) => {\\n    if (!c.timer[scope]) { return; }\\n    clearTimeout(c.timer[scope].timeout);\\n    c.timer[scope].deactivate();\\n    delete c.timer[scope];\\n  };\\n\\n  c.tearDown = (callback) => {\\n    Object.keys(c.timer).forEach(scope => c.stopTimer(scope));\\n    callback();\\n  };\\n\\n  return c.process((input, output, context) => {\\n    if (!input.hasData('time', 'start')) { return; }\\n    const time = parseInt(input.getData('time'), 10);\\n    input.getData('start');\\n    // Ensure we deactivate previous timeout, if any\\n    c.stopTimer(input.scope);\\n    // Set up new timer\\n    const ctx = context;\\n    ctx.timeout = setTimeout(() => {\\n      c.timer = null;\\n      output.sendDone({ out: true });\\n    }, time);\\n    c.timer[input.scope] = context;\\n  });\\n};\\n\"},\"core/SendNext\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = 'Sends next packet in buffer when receiving a bang';\\n  c.icon = 'forward';\\n\\n  c.inPorts.add('data', {\\n    datatype: 'all',\\n  });\\n  c.inPorts.add('in', {\\n    datatype: 'bang',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n  c.outPorts.add('empty', {\\n    datatype: 'bang',\\n    required: false,\\n  });\\n\\n  c.forwardBrackets = {};\\n  return c.process((input, output) => {\\n    if (!input.hasData('in')) { return; }\\n    const bang = input.getData('in');\\n\\n    if (!input.hasData('data')) {\\n      // No data packets in the buffer, send \\\"empty\\\"\\n      output.sendDone({ empty: true });\\n      return;\\n    }\\n\\n    let sent = false;\\n    // Loop until we've either drained the buffer completely, or until\\n    // we hit the next data packet\\n    while (input.has('data')) {\\n      if (sent) {\\n        // If we already sent data, we look ahead to see if next packet is data and bail out\\n        const buf = c.inPorts.data.getBuffer(bang.scope);\\n        if (buf[0].type === 'data') { break; }\\n      }\\n\\n      const packet = input.get('data');\\n      output.send({ out: packet });\\n      if (packet.type === 'data') { sent = true; }\\n    }\\n    // After the loop we can deactivate\\n    output.done();\\n  });\\n};\\n\"},\"core/Split\":{\"language\":\"javascript\",\"source\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.icon = 'expand';\\n  c.description = `This component receives data on a single input port and \\nsends the same data out to all connected output ports`;\\n\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to be forwarded',\\n  });\\n\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n\\n  return c.process((input, output) => {\\n    const data = input.get('in');\\n    output.sendDone({ out: data });\\n  });\\n};\\n\"},\"dom/AddClass\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Add a class to an element'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.inPorts.add 'class',\\n    datatype: 'string'\\n\\n  c.process (input, output) ->\\n    return unless input.has 'element', 'class'\\n    [element, className] = input.getData 'element', 'class'\\n    element.classList.add className\\n    output.done()\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'AddClass component', ->\\n  c = null\\n  element = null\\n  classSocket = null\\n  before (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/AddClass', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = noflo.internalSocket.createSocket()\\n      classSocket = noflo.internalSocket.createSocket()\\n      c.inPorts.element.attach element\\n      c.inPorts.class.attach classSocket\\n      done()\\n\\n  describe 'adding a class to an element', ->\\n    el = document.querySelector '#fixtures .addclass'\\n    it 'should be able to add the class', (done) ->\\n      element.send el\\n      classSocket.send 'foo'\\n      setTimeout ->\\n        chai.expect(el.classList.contains('foo')).to.equal true\\n        done()\\n      , 0\\n\"},\"dom/AppendChild\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Append elements as children of a parent element'\\n  c.inPorts.add 'parent',\\n    datatype: 'object'\\n  c.inPorts.add 'child',\\n    datatype: 'object'\\n\\n  c.process (input, output) ->\\n    return unless input.hasData 'parent', 'child'\\n    [parent, child] = input.getData 'parent', 'child'\\n    parent.appendChild child\\n    output.done()\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'AppendChild component', ->\\n  c = null\\n  parent = null\\n  child = null\\n  before (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/AppendChild', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      parent = noflo.internalSocket.createSocket()\\n      child = noflo.internalSocket.createSocket()\\n      c.inPorts.parent.attach parent\\n      c.inPorts.child.attach child\\n      done()\\n\\n  describe 'adding children to an element', ->\\n    el = document.querySelector '#fixtures .appendchild'\\n    newEl = document.createElement 'p'\\n    it 'should initially have no child elements', ->\\n      chai.expect(el.hasChildNodes()).to.equal false\\n    it 'should be able to add an element', (done) ->\\n      parent.send el\\n      child.send newEl\\n      setTimeout ->\\n        chai.expect(el.hasChildNodes()).to.equal true\\n        done()\\n      , 0\\n\"},\"dom/CreateElement\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Create a new DOM Element'\\n  c.inPorts.add 'tagname',\\n    datatype: 'string'\\n  c.inPorts.add 'container',\\n    datatype: 'object'\\n  c.outPorts.add 'element',\\n    datatype: 'object'\\n  c.forwardBrackets =\\n    tagname: ['element']\\n\\n  c.process (input, output) ->\\n    return unless input.hasData 'tagname'\\n    if c.inPorts.container.isAttached()\\n      # If container is attached, we want it too\\n      return unless input.hasData 'container'\\n\\n    tagname = input.getData 'tagname'\\n    element = document.createElement tagname\\n    if input.hasData 'container'\\n      container = input.getData 'container'\\n      container.appendChild element\\n\\n    output.sendDone\\n      element: element\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'CreateElement component', ->\\n  c = null\\n  tagname = null\\n  element = null\\n  before (done) ->\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/CreateElement', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      tagname = noflo.internalSocket.createSocket()\\n      element = noflo.internalSocket.createSocket()\\n      c.inPorts.tagname.attach tagname\\n      c.outPorts.element.attach element\\n      done()\\n\\n  describe 'creating an Element', ->\\n    it 'should produce a new element', (done) ->\\n      element.on 'data', (data) ->\\n        chai.expect(data).to.be.instanceof HTMLElement\\n        done()\\n      tagname.send 'div'\\n\"},\"dom/CreateFragment\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c. description = 'Create a new DOM DocumentFragment'\\n  c.inPorts.add 'in',\\n    datatype: 'bang'\\n  c.outPorts.add 'fragment',\\n    datatype: 'object'\\n\\n  c.forwardBrackets =\\n    in: ['fragment']\\n\\n  c.process (input, output) ->\\n    return unless input.hasData 'in'\\n    input.getData 'in'\\n    fragment = document.createDocumentFragment()\\n    output.sendDone\\n      fragment: fragment\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'CreateFragment component', ->\\n  c = null\\n  ins = null\\n  fragment = null\\n  before (done) ->\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/CreateFragment', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      ins = noflo.internalSocket.createSocket()\\n      fragment = noflo.internalSocket.createSocket()\\n      c.inPorts.in.attach ins\\n      c.outPorts.fragment.attach fragment\\n      done()\\n\\n  describe 'creating a DocumentFragment', ->\\n    it 'should produce a new fragment', (done) ->\\n      fragment.on 'data', (data) ->\\n        chai.expect(data).to.be.instanceof DocumentFragment\\n        done()\\n      ins.send true\\n\"},\"dom/GetAttribute\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = \\\"Reads the given attribute from the DOM element on the in\\n    port.\\\"\\n\\n  # Define in ports.\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n    description: 'The element from which to read the attribute from.'\\n    required: true\\n\\n  c.inPorts.add 'attribute',\\n    datatype: 'string'\\n    description: 'The attribute which is read from the DOM element.'\\n    required: true\\n    control: true\\n\\n  # Define out ports.\\n  c.outPorts.add 'out',\\n    datatype: 'string'\\n    description: 'Value of the attribute being read.'\\n\\n  c.forwardBrackets =\\n    element: ['out']\\n\\n  # On data flow.\\n  c.process (input, output) ->\\n    return unless input.hasData 'element', 'attribute'\\n    [element, attribute] = input.getData 'element', 'attribute'\\n    value = element.getAttribute attribute\\n    output.sendDone\\n      out: value\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'GetAttribute component', ->\\n  c = null\\n  element = null\\n  attribute = null\\n  out = null\\n  el = document.querySelector '#fixtures .getattribute'\\n  before (done) ->\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/GetAttribute', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = noflo.internalSocket.createSocket()\\n      attribute = noflo.internalSocket.createSocket()\\n      c.inPorts.element.attach element\\n      c.inPorts.attribute.attach attribute\\n      done()\\n  beforeEach ->\\n    out = noflo.internalSocket.createSocket()\\n    c.outPorts.out.attach out\\n  afterEach ->\\n    c.outPorts.out.detach out\\n    out = null\\n\\n  describe 'with matching query', ->\\n    it 'should return value', (done) ->\\n      out.on 'data', (data) ->\\n        chai.expect(data).to.equal 'bar'\\n        done()\\n      element.send el\\n      attribute.send 'foo'\\n  describe 'with non-matching query', ->\\n    it 'should return a NULL', (done) ->\\n      out.on 'data', (data) ->\\n        chai.expect(data).to.be.a 'null'\\n        done()\\n      attribute.send 'bar'\\n      element.send el\\n\"},\"dom/GetElement\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description ='Get a DOM element matching a query'\\n  c.inPorts.add 'in',\\n    datatype: 'object'\\n    description: 'DOM element to constrain the query to'\\n  c.inPorts.add 'selector',\\n    datatype: 'string'\\n    description: 'CSS selector'\\n  c.outPorts.add 'element',\\n    datatype: 'object'\\n  c.outPorts.add 'error',\\n    datatype: 'object'\\n  c.forwardBrackets =\\n    selector: ['element', 'error']\\n  c.process (input, output) ->\\n    return unless input.hasData 'selector'\\n    return unless input.hasData 'in' if input.attached('in').length > 0\\n    if input.hasData 'in'\\n      # Element-scoped selector\\n      [container, selector] = input.getData 'in', 'selector'\\n      unless typeof container.querySelector is 'function'\\n        output.done new Error 'Given container doesn\\\\'t support querySelectors'\\n        return\\n      el = container.querySelectorAll selector\\n      unless el.length\\n        output.done new Error \\\"No element matching '#{selector}' found under container\\\"\\n        return\\n      for element in el\\n        output.send\\n          element: element\\n      output.done()\\n      return\\n    selector = input.getData 'selector'\\n    el = document.querySelectorAll selector\\n    unless el.length\\n      output.done new Error \\\"No element matching '#{selector}' found under document\\\"\\n      return\\n    for element in el\\n      output.send\\n        element: element\\n    output.done()\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'GetElement component', ->\\n  c = null\\n  ins = null\\n  selector = null\\n  element = null\\n  error = null\\n  before (done) ->\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/GetElement', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      selector = noflo.internalSocket.createSocket()\\n      c.inPorts.selector.attach selector\\n      done()\\n  beforeEach ->\\n    element = noflo.internalSocket.createSocket()\\n    c.outPorts.element.attach element\\n    error = noflo.internalSocket.createSocket()\\n    c.outPorts.error.attach error\\n  afterEach ->\\n    c.outPorts.element.detach element\\n    element = null\\n    c.outPorts.error.detach error\\n    error = null\\n\\n  describe 'with non-matching query', ->\\n    it 'should transmit an Error when ERROR port is attached', (done) ->\\n      error.on 'data', (data) ->\\n        chai.expect(data).to.be.an.instanceof Error\\n        done()\\n      selector.send 'Foo'\\n\\n  describe 'with invalid query', ->\\n    before ->\\n      ins = noflo.internalSocket.createSocket()\\n      c.inPorts.in.attach ins\\n    after ->\\n      c.inPorts.in.detach ins\\n    it 'should transmit an Error when ERROR port is attached', (done) ->\\n      error.on 'data', (data) ->\\n        chai.expect(data).to.be.an.instanceof Error\\n        done()\\n      selector.send 'baz'\\n      ins.send {}\\n\\n  describe 'with invalid container', ->\\n    before ->\\n      ins = noflo.internalSocket.createSocket()\\n      c.inPorts.in.attach ins\\n    after ->\\n      c.inPorts.in.detach ins\\n    it 'should transmit an Error when ERROR port is attached', (done) ->\\n      error.on 'data', (data) ->\\n        chai.expect(data).to.be.an.instanceof Error\\n        done()\\n      selector.send 'baz'\\n      ins.send {}\\n\\n  describe 'with matching query without container', ->\\n    it 'should send the matched element to the ELEMENT port', (done) ->\\n      query = '#fixtures .getelement'\\n      el = document.querySelector query\\n      error.on 'data', (data) ->\\n        done data\\n      element.on 'data', (data) ->\\n        chai.expect(data.tagName).to.exist\\n        chai.expect(data.tagName).to.equal 'DIV'\\n        chai.expect(data.innerHTML).to.equal 'Foo'\\n        chai.expect(data).to.equal el\\n        done()\\n      selector.send query\\n\\n  describe 'with matching query with container', ->\\n    before ->\\n      ins = noflo.internalSocket.createSocket()\\n      c.inPorts.in.attach ins\\n    after ->\\n      c.inPorts.in.detach ins\\n    it 'should send the matched element to the ELEMENT port', (done) ->\\n      container = document.querySelector '#fixtures'\\n      el = document.querySelector '#fixtures .getelement'\\n      error.on 'data', (data) ->\\n        done data\\n      element.on 'data', (data) ->\\n        chai.expect(data.tagName).to.exist\\n        chai.expect(data.tagName).to.equal 'DIV'\\n        chai.expect(data.innerHTML).to.equal 'Foo'\\n        chai.expect(data).to.equal el\\n        done()\\n      ins.send container\\n      selector.send '.getelement'\\n\"},\"dom/HasClass\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Check if an element has a given class'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.inPorts.add 'class',\\n    datatype: 'string'\\n  c.outPorts.add 'element',\\n    datatype: 'object'\\n  c.outPorts.add 'missed',\\n    datatype: 'object'\\n  c.process (input, output) ->\\n    return unless input.hasData 'element', 'class'\\n    [element, klass] = input.getData 'element', 'class'\\n    if element.classList.contains klass\\n      output.sendDone\\n        element: element\\n      return\\n    output.sendDone\\n      missed: element\\n\"},\"dom/Listen\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'addEventListener for specified event type'\\n  c.icon = 'stethoscope'\\n\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.inPorts.add 'type',\\n    datatype: 'string'\\n  c.inPorts.add 'preventdefault',\\n    datatype: 'boolean'\\n    control: true\\n    default: false\\n  c.outPorts.add 'element',\\n    datatype: 'object'\\n  c.outPorts.add 'event',\\n    datatype: 'object'\\n\\n  c.elements = {}\\n  cleanUp = (scope) ->\\n    return unless c.elements[scope]\\n    {element, event, listener} = c.elements[scope]\\n    element.removeEventListener event, listener\\n    c.elements[scope].deactivate()\\n    delete c.elements[scope]\\n  c.tearDown = (callback) ->\\n    for scope, element of c.elements\\n      cleanUp scope\\n    c.elements = {}\\n    callback()\\n  c.forwardBrackets = {}\\n\\n  c.process (input, output, context) ->\\n\\n    return unless input.hasData 'element', 'type'\\n    [element, type] = input.getData 'element', 'type'\\n\\n    preventDefault = false\\n    if input.hasData 'preventdefault'\\n      preventDefault = input.getData 'preventdefault'\\n\\n    scope = null\\n    cleanUp scope\\n\\n    context.element = element\\n    context.event = type\\n    context.listener = (event) ->\\n      event.preventDefault() if preventDefault\\n      output.send\\n        element: context.element\\n        event: event\\n    c.elements[context] = context\\n    element.addEventListener type, context.listener\\n\"},\"dom/ReadHtml\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Read HTML from an existing element'\\n  c.inPorts.add 'container',\\n    datatype: 'object'\\n  c.outPorts.add 'html',\\n    datatype: 'string'\\n  c.forwardBrackets =\\n    container: ['html']\\n  c.process (input, output) ->\\n    return unless input.hasData 'container'\\n    container = input.getData 'container'\\n    output.sendDone\\n      html: container.innerHTML\\n\"},\"dom/RemoveClass\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Remove a class from an element'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.inPorts.add 'class',\\n    datatype: 'string'\\n\\n  c.process (input, output) ->\\n    return unless input.has 'element', 'class'\\n    [element, className] = input.getData 'element', 'class'\\n    element.classList.remove className\\n    output.done()\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'RemoveClass component', ->\\n  c = null\\n  element = null\\n  classSocket = null\\n  before (done) ->\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/RemoveClass', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = noflo.internalSocket.createSocket()\\n      classSocket = noflo.internalSocket.createSocket()\\n      c.inPorts.element.attach element\\n      c.inPorts.class.attach classSocket\\n      done()\\n\\n  describe 'removing a class from an element', ->\\n    el = document.querySelector '#fixtures .removeclass'\\n    it 'should be able to remove the class', (done) ->\\n      element.send el\\n      classSocket.send 'foo'\\n      setTimeout ->\\n        chai.expect(el.classList.contains('foo')).to.equal false\\n        done()\\n      , 0\\n\"},\"dom/RemoveElement\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Remove an element from DOM'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.process (input, output) ->\\n    return unless input.hasData 'element'\\n    element = input.getData 'element'\\n    return unless element.parentNode\\n    element.parentNode.removeChild element\\n    output.done()\\n\"},\"dom/RequestAnimationFrame\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nrequestAnimationFrame =\\n  window.requestAnimationFrame       ||\\n  window.webkitRequestAnimationFrame ||\\n  window.mozRequestAnimationFrame    ||\\n  window.oRequestAnimationFrame      ||\\n  window.msRequestAnimationFrame     ||\\n  (callback, element) ->\\n    window.setTimeout( ->\\n      callback(+new Date())\\n    , 1000 / 60)\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Sends bangs that correspond with screen refresh rate.'\\n  c.icon = 'film'\\n\\n  c.inPorts.add 'start',\\n    datatype: 'bang'\\n  c.inPorts.add 'stop',\\n    datatype: 'bang'\\n  c.outPorts.add 'out',\\n    datatype: 'bang'\\n\\n  c.running = {}\\n  cleanUp = (scope) ->\\n    return unless c.running[scope]\\n    c.running[scope].deactivate()\\n    delete c.running[scope]\\n  c.tearDown = (callback) ->\\n    for scope, running of c.running\\n      cleanUp scope\\n    c.running = {}\\n    callback()\\n  c.animate = (scope, output) ->\\n    # Stop when context has been stopped\\n    return unless c.running[scope]\\n    # Send bang\\n    output.send true\\n    # Request next frame\\n    requestAnimationFrame c.animate.bind c, scope, output\\n\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    if input.hasData 'start'\\n      start = input.get 'start'\\n      return unless start.type is 'data'\\n      # Ensure previous was deactivated\\n      cleanUp start.scope\\n\\n      # Register scope\\n      c.running[start.scope] = context\\n\\n      # Request first frame\\n      requestAnimationFrame c.animate.bind c, start.scope, output\\n      return\\n\\n    if input.hasData 'stop'\\n      stop = input.get 'stop'\\n      return unless stop.type is 'data'\\n      # Deactivate this scope\\n      cleanUp stop.scope\\n      return\\n\"},\"dom/SetAttribute\":{\"language\":\"coffeescript\",\"source\":\"'use strict'\\n\\n# @runtime noflo-browser\\n\\nnoflo = require 'noflo'\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = \\\"Set the given attribute on the DOM element to the received\\n    value.\\\"\\n    \\n  # Define in ports.\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n    description: 'The element on which to set the attribute.'\\n\\n  c.inPorts.add 'attribute',\\n    datatype: 'string'\\n    description: 'The attribute which is set on the DOM element.'\\n\\n  c.inPorts.add 'value',\\n    datatype: 'string'\\n    description: 'Value of the attribute being set.'\\n  \\n  # Define out ports.\\n  c.outPorts.add 'element',\\n    datatype: 'object'\\n    description: 'The element that was updated.'\\n\\n  c.forwardBrackets =\\n    element: ['element']\\n    value: ['element']\\n\\n  c.process (input, output) ->\\n    return unless input.hasData 'element', 'attribute', 'value'\\n    [element, attribute, value] = input.getData 'element', 'attribute', 'value'\\n    if typeof value is 'object'\\n      if toString.call(value) is '[object Array]'\\n        value = value.join ' '\\n      else\\n        newVal = []\\n        newVal.push val for key, val of value\\n        value = newVal.join ' '\\n    if attribute is \\\"value\\\"\\n      element.value = value\\n    else\\n      element.setAttribute attribute, value\\n\\n    output.sendDone\\n      element: element\\n\",\"tests\":\"noflo = require 'noflo'\\nbaseDir = 'noflo-dom'\\n\\ndescribe 'SetAttribute component', ->\\n  c = null\\n  element = null\\n  attribute = null\\n  value = null\\n  out = null\\n  el = document.querySelector '#fixtures .setattribute'\\n  before (done) ->\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'dom/SetAttribute', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = noflo.internalSocket.createSocket()\\n      attribute = noflo.internalSocket.createSocket()\\n      value = noflo.internalSocket.createSocket()\\n      c.inPorts.element.attach element\\n      c.inPorts.attribute.attach attribute\\n      c.inPorts.value.attach value\\n      done()\\n  beforeEach ->\\n    out = noflo.internalSocket.createSocket()\\n    c.outPorts.element.attach out\\n  afterEach ->\\n    c.outPorts.element.detach out\\n    out = null\\n\\n  describe 'when called', ->\\n    it 'should return element', (done) ->\\n      out.on 'data', (data) ->\\n        chai.expect(data).to.equal el\\n        done()\\n      element.send el\\n      attribute.send 'foo'\\n      value.send 'baz'\\n  describe 'with matching query', ->\\n    it 'should update attribute', (done) ->\\n      out.on 'data', (data) ->\\n        content = el.getAttribute 'foo'\\n        chai.expect(content).to.equal 'baz'\\n        done()\\n      element.send el\\n      attribute.send 'foo'\\n      value.send 'baz'\\n  describe 'with non-matching query', ->\\n    it 'should create attribute', (done) ->\\n      out.on 'data', (data) ->\\n        content = el.getAttribute 'bar'\\n        chai.expect(content).to.equal 'baz'\\n        done()\\n      element.send el\\n      attribute.send 'bar'\\n      value.send 'baz'\\n\\n\"},\"dom/WriteHtml\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Write HTML inside an existing element'\\n  c.inPorts.add 'container',\\n    datatype: 'object'\\n  c.inPorts.add 'html',\\n    datatype: 'string'\\n  c.outPorts.add 'container',\\n    datatype: 'object'\\n  c.process (input, output) ->\\n    return unless input.hasData 'container', 'html'\\n    [container, html] = input.getData 'container', 'html'\\n    container.innerHTML = html\\n    output.sendDone\\n      container: container\\n\"},\"interaction/Focus\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.icon = 'i-cursor'\\n  c.description = 'focus element'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n    description: 'element to be focused'\\n    control: true\\n  c.inPorts.add 'trigger',\\n    datatype: 'bang'\\n    description: 'trigger focus'\\n  c.outPorts.add 'out',\\n    datatype: 'bang'\\n  c.process (input, output) ->\\n    return unless input.hasData 'element', 'trigger'\\n    element = input.getData 'element'\\n    input.getData 'trigger'\\n    window.setTimeout ->\\n      element.focus()\\n      output.sendDone\\n        out: true\\n    , 0\\n\",\"tests\":\"noflo = require 'noflo'\\nsocket = noflo.internalSocket\\nbaseDir = 'noflo-interaction'\\n\\ndescribe 'Focus component', ->\\n  c = null\\n  element = null\\n  trigger = null\\n  out = null\\n\\n  beforeEach (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'interaction/Focus', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = socket.createSocket()\\n      trigger = socket.createSocket()\\n      out = socket.createSocket()\\n\\n      c.inPorts.element.attach element\\n      c.inPorts.trigger.attach trigger\\n      c.outPorts.out.attach out\\n      done()\\n\\n  describe 'on trigger', ->\\n    it 'should call focus', (done) ->\\n      input = document.createElement 'input'\\n\\n      focusCalled = false\\n      input.focus = callback = -> focusCalled = true\\n      element.send input\\n\\n      chai.expect(focusCalled).to.equal false\\n\\n      out.once 'data', (data) ->\\n        chai.expect(focusCalled).to.equal true\\n        done()\\n\\n      trigger.send true\\n\\n\"},\"interaction/ListenChange\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen to changes on an input element'\\n  c.icon = 'hourglass'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.outPorts.add 'value',\\n    datatype: 'object'\\n  c.elements = []\\n  c.tearDown = (callback) ->\\n    for element in c.elements\\n      element.el.removeEventListener 'change', element.listener, false\\n      element.ctx.deactivate()\\n    c.elements = []\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    return unless input.hasData 'element'\\n    data =\\n      el: input.getData 'element'\\n      listener: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        output.send\\n          value: event.target.value\\n      ctx: context\\n    data.el.addEventListener 'change', data.listener, false\\n    c.elements.push data\\n    return\\n\"},\"interaction/ListenDrag\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description =  'Listen to drag events on a DOM element'\\n  c.icon = 'arrows'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.outPorts.add 'start',\\n    datatype: 'object'\\n  c.outPorts.add 'movey',\\n    datatype: 'number'\\n  c.outPorts.add 'movex',\\n    datatype: 'number'\\n  c.outPorts.add 'end',\\n    datatype: 'object'\\n  c.elements = []\\n  c.tearDown = (callback) ->\\n    for element in c.elements\\n      element.el.removeEventListener 'dragstart', element.dragstart, false\\n      element.el.removeEventListener 'drag', element.dragmove, false\\n      element.el.removeEventListener 'dragend', element.dragend, false\\n      element.ctx.deactivate()\\n    c.elements = []\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    return unless input.hasData 'element'\\n    data =\\n      el: input.getData 'element'\\n      dragstart: (event) ->\\n        event.stopPropagation()\\n        output.send\\n          start: event\\n      dragmove: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        output.send\\n          movex: event.clientX\\n          movey: event.clientY\\n      dragend: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        output.send\\n          end: event\\n      ctx: context\\n    data.el.addEventListener 'dragstart', data.dragstart, false\\n    data.el.addEventListener 'drag', data.dragmove, false\\n    data.el.addEventListener 'dragend', data.dragend, false\\n    c.elements.push data\\n    return\\n\",\"tests\":\"noflo = require 'noflo'\\nsocket = noflo.internalSocket\\nbaseDir = 'noflo-interaction'\\n\\ndescribe 'ListenDrag component', ->\\n  c = null\\n  element = null\\n  start = null\\n  movex = null\\n  movey = null\\n  end = null\\n  beforeEach (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'interaction/ListenDrag', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = socket.createSocket()\\n      start = socket.createSocket()\\n      movex = socket.createSocket()\\n      movey = socket.createSocket()\\n      end = socket.createSocket()\\n      c.inPorts.element.attach element\\n      c.outPorts.start.attach start\\n      c.outPorts.movex.attach movex\\n      c.outPorts.movey.attach movey\\n      c.outPorts.end.attach end\\n      done()\\n\\n  describe 'on matched element', ->\\n    el = document.querySelector '#fixtures .listendrag .target'\\n    it 'should transmit a start event on drag start', (done) ->\\n      element.send el\\n      start.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'dragstart', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n\\n    it 'should transmit a movex event on drag move', (done) ->\\n      element.send el\\n      movex.once 'data', (data) ->\\n        chai.expect(data).to.equal 5\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'drag', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n\\n    it 'should transmit a movey event on drag move', (done) ->\\n      element.send el\\n      movey.once 'data', (data) ->\\n        chai.expect(data).to.equal 10\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'drag', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n\\n    it 'should transmit a end event on drag end', (done) ->\\n      element.send el\\n      end.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'dragend', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n\"},\"interaction/ListenEvent\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.icon = 'rss'\\n  c.description = 'Listen to custom events on a DOM element'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.inPorts.add 'event',\\n    datatype: 'string'\\n  c.outPorts.add 'out',\\n    datatype: 'object'\\n  c.elements = []\\n  c.tearDown = (callback) ->\\n    for element in c.elements\\n      element.el.removeEventListener element.eventName, element.onEvent, false\\n      element.ctx.deactivate()\\n    c.elements = []\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    return unless input.hasData 'element', 'event'\\n    el = input.getData 'element'\\n    eventName = input.getData 'event'\\n    data =\\n      el: el\\n      eventName: eventName\\n      onEvent: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        event.eventName = eventName\\n        output.send\\n          out: event\\n      ctx: context\\n    data.el.addEventListener eventName, data.onEvent, false\\n    c.elements.push data\\n    return\\n\",\"tests\":\"noflo = require 'noflo'\\nsocket = noflo.internalSocket\\nbaseDir = 'noflo-interaction'\\n\\ndescribe 'ListenEvent component', ->\\n  c = null\\n  element = null\\n  event = null\\n  out = null\\n  beforeEach (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'interaction/ListenEvent', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = socket.createSocket()\\n      event = socket.createSocket()\\n      out = socket.createSocket()\\n      c.inPorts.element.attach element\\n      c.inPorts.event.attach event\\n      c.outPorts.out.attach out\\n      done()\\n\\n  describe 'on matched element', ->\\n    el = document.querySelector '#fixtures .listenevent .target'\\n    it 'should transmit a click packet on click event', (done) ->\\n      element.send el\\n      event.send 'click'\\n      out.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        chai.expect(data.eventName).to.equal 'click'\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'click', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n    it 'should transmit a foo packet on foo event', (done) ->\\n      element.send el\\n      event.send 'foo'\\n      out.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        chai.expect(data.eventName).to.equal 'foo'\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'foo', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n\"},\"interaction/ListenHash\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen for hash changes in browser\\\\'s URL bar'\\n  c.icon = 'slack'\\n  c.inPorts.add 'start',\\n    datatype: 'bang'\\n    description: 'Start listening for hash changes'\\n  c.inPorts.add 'stop',\\n    datatype: 'bang'\\n    description: 'Stop listening for hash changes'\\n  c.outPorts.add 'initial',\\n    datatype: 'string'\\n  c.outPorts.add 'change',\\n    datatype: 'string'\\n  c.current = null\\n  c.subscriber = null\\n  unsubscribe = ->\\n    return unless c.subscriber\\n    window.removeEventListener 'hashchange', c.subscriber.callback, false\\n    c.subscriber.ctx.deactivate()\\n    c.subscriber = null\\n  c.tearDown = (callback) ->\\n    c.current = null\\n    do unsubscribe\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    if input.hasData 'start'\\n      input.getData 'start'\\n      # Ensure previous subscription is ended\\n      do unsubscribe\\n      sendHash = (port) ->\\n        oldHash = c.current\\n        c.current = window.location.href.split('#')[1] or ''\\n        if oldHash\\n          output.send\\n            change: new noflo.IP 'openBracket', oldHash\\n        payload = {}\\n        payload[port] = c.current\\n        output.send payload\\n        if oldHash\\n          output.send\\n            change: new noflo.IP 'closeBracket', oldHash\\n      c.subscriber =\\n        callback: (event) ->\\n          sendHash 'change'\\n        ctx: context\\n      # Send initial\\n      sendHash 'initial'\\n      window.addEventListener 'hashchange', c.subscriber.callback, false\\n      return\\n    if input.hasData 'stop'\\n      input.getData 'stop'\\n      do unsubscribe\\n      output.done()\\n      return\\n\"},\"interaction/ListenKeyboard\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen for key presses on a given DOM element'\\n  c.icon = 'keyboard-o'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.inPorts.add 'stop',\\n    datatype: 'object'\\n  c.outPorts.add 'keypress',\\n    datatype: 'integer'\\n  c.elements = []\\n  unsubcribe = (element) ->\\n    element.el.removeEventListener 'keypress', element.listener, false\\n    element.ctx.deactivate()\\n  c.tearDown = (callback) ->\\n    unsubscribe element for element in c.elements\\n    c.elements = []\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    if input.hasData 'element'\\n      data =\\n        el: input.getData 'element'\\n        listener: (event) ->\\n          output.send\\n            keypress: event.keyCode\\n        ctx: context\\n      data.el.addEventListener 'keypress', data.listener, false\\n      c.elements.push data\\n      return\\n    if input.hasData 'stop'\\n      element = input.getData 'stop'\\n      ctx = null\\n      for el in c.elements\\n        continue unless el.el is element\\n        ctx = el\\n      return unless ctx\\n      unsubscribe ctx\\n      output.done()\\n\"},\"interaction/ListenKeyboardShortcuts\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen for keyboard shortcuts and route them'\\n  c.icon = 'keyboard-o'\\n  c.inPorts.add 'keys',\\n    datatype: 'array'\\n  c.inPorts.add 'ignoreinput',\\n    datatype: 'boolean'\\n    default: true\\n    control: true\\n  c.inPorts.add 'stop',\\n    datatype: 'bang'\\n  c.outPorts.add 'shortcut',\\n    datatype: 'bang'\\n    addressable: true\\n  c.outPorts.add 'missed',\\n    datatype: 'integer'\\n  c.subscriber = null\\n  unsubscribe = ->\\n    return unless c.subscriber\\n    document.removeEventListener 'keydown', c.subscriber.callback, false\\n    c.subscriber.ctx.deactivate()\\n    c.subscriber = null\\n  c.tearDown = (callback) ->\\n    do unsubscribe\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    if input.hasData 'keys'\\n      keys = input.getData 'keys'\\n\\n      # Ensure previous subscription is ended\\n      do unsubscribe\\n\\n      # Older version of this component used string input\\n      keys = keys.split ',' if typeof keys is 'string'\\n\\n      # We allow some common keyboard shortcuts to be passed as strings\\n      for key, index in keys\\n        switch key\\n          when '-' then keys[index] = 189\\n          when '=' then keys[index] = 187\\n          when '0' then keys[index] = 48\\n          when 'a' then keys[index] = 65\\n          when 'x' then keys[index] = 88\\n          when 'c' then keys[index] = 67\\n          when 'v' then keys[index] = 86\\n          when 'z' then keys[index] = 90\\n          when 'r' then keys[index] = 82\\n\\n      ignoreInput = if input.hasData('ignoreinput') then input.getData('ignoreinput') else true\\n\\n      c.subscriber =\\n        callback: (event) ->\\n          return unless event.ctrlKey or event.metaKey\\n          return if event.target.tagName is 'TEXTAREA' and ignoreInput\\n          return if event.target.tagName is 'INPUT' and ignoreInput\\n          return if String(event.target.contentEditable) is 'true' and ignoreInput\\n          route = keys.indexOf event.keyCode\\n          if route is -1\\n            output.send\\n              missed: event.keyCode\\n            return\\n          event.preventDefault()\\n          event.stopPropagation()\\n          output.send\\n            shortcut: new noflo.IP 'data', event.keyCode,\\n              index: route\\n        ctx: context\\n      document.addEventListener 'keydown', c.subscriber.callback, false\\n      return\\n    if input.hasData 'stop'\\n      input.getData 'stop'\\n      do unsubscribe\\n      output.done()\\n      return\\n\"},\"interaction/ListenMouse\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.icon = 'mouse-pointer'\\n  c.description = 'Listen to mouse events on a DOM element'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.outPorts.add 'click',\\n    datatype: 'object'\\n  c.outPorts.add 'dblclick',\\n    datatype: 'object'\\n  c.elements = []\\n  c.tearDown = (callback) ->\\n    for element in c.elements\\n      element.el.removeEventListener 'click', element.click, false\\n      element.el.removeEventListener 'dblclick', element.dblclick, false\\n      element.ctx.deactivate()\\n    c.elements = []\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    return unless input.hasData 'element'\\n    data =\\n      el: input.getData 'element'\\n      click: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        output.send\\n          click: event\\n      dblclick: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        output.send\\n          dblclick: event\\n      ctx: context\\n    data.el.addEventListener 'click', data.click, false\\n    data.el.addEventListener 'dblclick', data.dblclick, false\\n    c.elements.push data\\n    return\\n\",\"tests\":\"noflo = require 'noflo'\\nsocket = noflo.internalSocket\\nbaseDir = 'noflo-interaction'\\n\\ndescribe 'ListenMouse component', ->\\n  c = null\\n  element = null\\n  click = null\\n  beforeEach (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'interaction/ListenMouse', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = socket.createSocket()\\n      click = socket.createSocket()\\n      c.inPorts.element.attach element\\n      c.outPorts.click.attach click\\n      done()\\n\\n  describe 'on matched element', ->\\n    el = document.querySelector '#fixtures .listenmouse .target'\\n    it 'should transmit a click event on mouse click', (done) ->\\n      element.send el\\n      click.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'click', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n    it 'should transmit a dblclick event on mouse dblclick', (done) ->\\n      element.send el\\n      dblclick = socket.createSocket()\\n      c.outPorts.dblclick.attach dblclick\\n      dblclick.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'dblclick', true, true, window, 1\\n      evt.clientX = 5\\n      evt.clientY = 10\\n      el.dispatchEvent evt\\n\"},\"interaction/ListenPointer\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen to pointer events on a DOM element'\\n  c.icon = 'pencil-square-o'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.inPorts.add 'action',\\n    datatype: 'string'\\n    default: 'none'\\n    control: true\\n  events = [\\n    'down'\\n    'up'\\n    'cancel'\\n    'move'\\n    'over'\\n    'out'\\n    'enter'\\n    'leave'\\n  ]\\n  for event in events\\n    c.outPorts.add event,\\n      datatype: 'object'\\n      description: \\\"Sends event on pointer#{event}\\\"\\n  c.elements = []\\n  c.tearDown = (callback) ->\\n    for element in c.elements\\n      if element.el.removeAttribute\\n        element.el.removeAttribute 'touch-action'\\n      for event in events\\n        element.el.removeEventListener \\\"pointer#{event}\\\", element[\\\"pointer#{event}\\\"], false\\n      element.ctx.deactivate()\\n    c.elements = []\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    return unless input.hasData 'element'\\n    action = if input.hasData('action') then input.getData('action') else 'none'\\n    data =\\n      el: input.getData 'element'\\n      ctx: context\\n    data.el.setAttribute 'touch-action', action\\n    events.forEach (event) ->\\n      data[\\\"pointer#{event}\\\"] = (ev) ->\\n        ev.preventDefault()\\n        ev.stopPropagation()\\n        payload = {}\\n        payload[event] = ev.target.value\\n        output.send payload\\n      data.el.addEventListener \\\"pointer#{event}\\\", data[\\\"pointer#{event}\\\"], false\\n    c.elements.push data\\n    return\\n\"},\"interaction/ListenResize\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen to window resize events'\\n  c.icon = 'desktop'\\n  c.inPorts.add 'start',\\n    datatype: 'bang'\\n    description: 'Start listening for screen resizes'\\n  c.inPorts.add 'stop',\\n    datatype: 'bang'\\n    description: 'Stop listening for screen resizes'\\n  c.outPorts.add 'width',\\n    datatype: 'number'\\n  c.outPorts.add 'height',\\n    datatype: 'number'\\n  c.subscriber = null\\n  unsubscribe = ->\\n    return unless c.subscriber\\n    window.removeEventListener 'resize', c.subscriber.callback, false\\n    c.subscriber.ctx.deactivate()\\n    c.subscriber = null\\n  c.tearDown = (callback) ->\\n    do unsubscribe\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    if input.hasData 'start'\\n      input.getData 'start'\\n      # Ensure previous subscription is ended\\n      do unsubscribe\\n      c.subscriber =\\n        callback: (event) ->\\n          output.send\\n            width: window.innerWidth\\n            height: window.innerHeight\\n        ctx: context\\n      output.send\\n        width: window.innerWidth\\n        height: window.innerHeight\\n      window.addEventListener 'resize', c.subscriber.callback, false\\n      return\\n    if input.hasData 'stop'\\n      input.getData 'stop'\\n      do unsubscribe\\n      output.done()\\n      return\\n\"},\"interaction/ListenScroll\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen to scroll events on the browser window'\\n  c.icon = 'arrows-v'\\n  c.inPorts.add 'start',\\n    datatype: 'bang'\\n    description: 'Start listening for hash changes'\\n  c.inPorts.add 'stop',\\n    datatype: 'bang'\\n    description: 'Stop listening for hash changes'\\n  c.outPorts.add 'top',\\n    datatype: 'number'\\n  c.outPorts.add 'bottom',\\n    datatype: 'number'\\n  c.outPorts.add 'left',\\n    datatype: 'number'\\n  c.outPorts.add 'right',\\n    datatype: 'number'\\n  c.subscriber = null\\n  unsubscribe = ->\\n    return unless c.subscriber\\n    window.removeEventListener 'scroll', c.subscriber.callback, false\\n    c.subscriber.ctx.deactivate()\\n    c.subscriber = null\\n  c.tearDown = (callback) ->\\n    do unsubscribe\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    if input.hasData 'start'\\n      input.getData 'start'\\n      # Ensure previous subscription is ended\\n      do unsubscribe\\n      c.subscriber =\\n        callback: (event) ->\\n          top = window.scrollY\\n          left = window.scrollX\\n          output.send\\n            top: top\\n            bottom: top + window.innerHeight\\n            left: left\\n            right: left.window.innerWidth\\n        ctx: context\\n      window.addEventListener 'scroll', c.subscriber.callback, false\\n      return\\n    if input.hasData 'stop'\\n      input.getData 'stop'\\n      do unsubscribe\\n      output.done()\\n      return\\n\",\"tests\":\"noflo = require 'noflo'\\nsocket = noflo.internalSocket\\nbaseDir = 'noflo-interaction'\\n\\ndescribe 'ListenScroll component', ->\\n  c = null\\n  start = null\\n  top = null\\n  left = null\\n  origTop = window.scrollY\\n  origLeft = window.scrollX\\n  beforeEach (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'interaction/ListenScroll', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      start = socket.createSocket()\\n      top = socket.createSocket()\\n      left = socket.createSocket()\\n      c.inPorts.start.attach start\\n      c.outPorts.top.attach top\\n      c.outPorts.left.attach left\\n      done()\\n\\n  afterEach ->\\n    window.scrollTo origLeft, origTop\\n\\n  describe 'when started', ->\\n    it 'should send the new scroll coordinates', (done) ->\\n      unless window.navigator.userAgent.indexOf('Phantom') is -1\\n        # Scroll API doesn't seem to work in the PhantomJS test runner\\n        return @skip()\\n      if window.location.href is 'http://127.0.0.1:9999/spec/runner.html'\\n        # Scroll API doesn't seem to work in the SauceLabs test runner\\n        return @skip()\\n\\n      start.send true\\n      top.once 'data', (data) ->\\n        chai.expect(data).to.equal 10\\n      left.once 'data', (data) ->\\n        chai.expect(data).to.equal 0\\n      top.once 'disconnect', ->\\n        done()\\n      window.scrollTo 0, 10\\n\"},\"interaction/ListenSpeech\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen for user\\\\'s microphone and recognize phrases'\\n  c.icon = 'microphone'\\n  c.inPorts.add 'start',\\n    datatype: 'bang'\\n    description: 'Start listening for hash changes'\\n  c.inPorts.add 'stop',\\n    datatype: 'bang'\\n    description: 'Stop listening for hash changes'\\n  c.outPorts.add 'result',\\n    datatype: 'string'\\n  c.outPorts.add 'error',\\n    datatype: 'object'\\n  c.subscriber = null\\n  unsubscribe = ->\\n    return unless c.subscriber\\n    do c.subscriber.recognition.stop\\n    do c.subscriber.ctx.deactivate\\n    c.subscriber = null\\n  c.tearDown = (callback) ->\\n    do unsubscribe\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    if input.hasData 'start'\\n      input.getData 'start'\\n      # Ensure previous subscription is ended\\n      do unsubscribe\\n      unless window.webkitSpeechRecognition\\n        output.done new Error 'Speech recognition support not available'\\n        return\\n      c.subscriber =\\n        sent: []\\n        callback: (event) ->\\n          for result, idx in event.results\\n            continue unless result.isFinal\\n            if c.subscriber.sent.indexOf(idx) isnt -1\\n              continue\\n            output.send\\n              result: result[0].transcript\\n            c.subscriber.sent.push idx\\n        error: (err) ->\\n          output.send\\n            error: err\\n        ctx: context\\n      c.subscriber.recognition = new window.webkitSpeechRecognition\\n      c.subscriber.recognition.continuous = true\\n      c.subscriber.recognition.start()\\n      c.subscriber.recognition.onresult = c.subscriber.callback\\n      c.subscriber.recognition.onerror = c.subscriber.error\\n      return\\n    if input.hasData 'stop'\\n      input.getData 'stop'\\n      do unsubscribe\\n      output.done()\\n      return\\n\"},\"interaction/ListenTouch\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Listen to touch events on a DOM element'\\n  c.icon = 'hand-o-up'\\n  c.inPorts.add 'element',\\n    datatype: 'object'\\n  c.outPorts.add 'start',\\n    datatype: 'object'\\n  c.outPorts.add 'movex',\\n    datatype: 'number'\\n  c.outPorts.add 'movey',\\n    datatype: 'number'\\n  c.outPorts.add 'end',\\n    datatype: 'object'\\n  c.elements = []\\n  c.tearDown = (callback) ->\\n    for element in c.elements\\n      element.el.removeEventListener 'touchstart', element.touchstart, false\\n      element.el.removeEventListener 'touchmove', element.touchmove, false\\n      element.el.removeEventListener 'touchend', element.touchend, false\\n      element.ctx.deactivate()\\n    c.elements = []\\n    do callback\\n  c.forwardBrackets = {}\\n  c.process (input, output, context) ->\\n    return unless input.hasData 'element'\\n    data =\\n      el: input.getData 'element'\\n      touchstart: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        return unless event.changedTouches\\n        return unless event.changedTouches.length\\n        for touch, idx in event.changedTouches\\n          output.send\\n            start: new noflo.IP 'data', event,\\n              touch: idx\\n      touchmove: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        return unless event.changedTouches\\n        return unless event.changedTouches.length\\n        for touch, idx in event.changedTouches\\n          output.send\\n            movex: new noflo.IP 'data', touch.pageX,\\n              touch: idx\\n            movey: new noflo.IP 'data', touch.pageY,\\n              touch: idx\\n      touchend: (event) ->\\n        event.preventDefault()\\n        event.stopPropagation()\\n        return unless event.changedTouches\\n        return unless event.changedTouches.length\\n        for touch, idx in event.changedTouches\\n          output.send\\n            end: new noflo.IP 'data', event,\\n              touch: idx\\n      ctx: context\\n    data.el.addEventListener 'touchstart', data.touchstart, false\\n    data.el.addEventListener 'touchmove', data.touchmove, false\\n    data.el.addEventListener 'touchend', data.touchend, false\\n    c.elements.push data\\n    return\\n\",\"tests\":\"noflo = require 'noflo'\\nsocket = noflo.internalSocket\\nbaseDir = 'noflo-interaction'\\n\\ndescribe 'ListenTouch component', ->\\n  c = null\\n  element = null\\n  start = null\\n  movex = null\\n  movey = null\\n  end = null\\n  beforeEach (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'interaction/ListenTouch', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      element = socket.createSocket()\\n      start = socket.createSocket()\\n      movex = socket.createSocket()\\n      movey = socket.createSocket()\\n      end = socket.createSocket()\\n      c.inPorts.element.attach element\\n      c.outPorts.start.attach start\\n      c.outPorts.movex.attach movex\\n      c.outPorts.movey.attach movey\\n      c.outPorts.end.attach end\\n      done()\\n\\n  describe 'on matched element', ->\\n    el = document.querySelector '#fixtures .listentouch .target'\\n    it 'should transmit a start event on touch start', (done) ->\\n      element.send el\\n      start.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'touchstart', true, true, window, 1\\n      evt.changedTouches = []\\n      evt.changedTouches.push\\n        pageX: 5\\n        pageY: 10\\n      el.dispatchEvent evt\\n\\n    it 'should transmit a movex event on touch move', (done) ->\\n      element.send el\\n      movex.once 'data', (data) ->\\n        chai.expect(data).to.equal 5\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'touchmove', true, true, window, 1\\n      evt.changedTouches = []\\n      evt.changedTouches.push\\n        pageX: 5\\n        pageY: 10\\n      el.dispatchEvent evt\\n\\n    it 'should transmit a movey event on touch move', (done) ->\\n      element.send el\\n      movey.once 'data', (data) ->\\n        chai.expect(data).to.equal 10\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'touchmove', true, true, window, 1\\n      evt.changedTouches = []\\n      evt.changedTouches.push\\n        pageX: 5\\n        pageY: 10\\n      el.dispatchEvent evt\\n\\n    it 'should transmit a end event on touch end', (done) ->\\n      element.send el\\n      end.once 'data', (data) ->\\n        chai.expect(data).is.instanceof UIEvent\\n        done()\\n      evt = document.createEvent 'UIEvent'\\n      evt.initUIEvent 'touchend', true, true, window, 1\\n      evt.changedTouches = []\\n      evt.changedTouches.push\\n        pageX: 5\\n        pageY: 10\\n      el.dispatchEvent evt\\n\"},\"interaction/ReadCoordinates\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Read the coordinates from a DOM event'\\n  c.icon = 'map-marker'\\n  c.inPorts.add 'event',\\n    datatype: 'object'\\n  c.outPorts.add 'screen',\\n    datatype: 'object'\\n  c.outPorts.add 'client',\\n    datatype: 'object'\\n  c.outPorts.add 'page',\\n    datatype: 'object'\\n  c.forwardBrackets =\\n    event: ['screen', 'client', 'page']\\n  c.process (input, output) ->\\n    return unless input.hasData 'event'\\n    event = input.getData 'event'\\n    output.sendDone\\n      screen:\\n        x: event.screenX\\n        y: event.screenY\\n      client:\\n        x: event.clientX\\n        y: event.clientY\\n      page:\\n        x: event.pageX\\n        y: event.pageY\\n\",\"tests\":\"noflo = require 'noflo'\\nsocket = noflo.internalSocket\\nbaseDir = 'noflo-interaction'\\n\\ndescribe 'ReadCoordinates component', ->\\n  c = null\\n  event = null\\n  screen = null\\n  client = null\\n  page = null\\n\\n  beforeEach (done) ->\\n    @timeout 4000\\n    loader = new noflo.ComponentLoader baseDir\\n    loader.load 'interaction/ReadCoordinates', (err, instance) ->\\n      return done err if err\\n      c = instance\\n      event = socket.createSocket()\\n      screen = socket.createSocket()\\n      client = socket.createSocket()\\n      page = socket.createSocket()\\n      c.inPorts.event.attach event\\n      c.outPorts.screen.attach screen\\n      c.outPorts.client.attach client\\n      c.outPorts.page.attach page\\n      done()\\n  describe 'when receiving an event',\\n    it 'should send coordinates out', (done) ->\\n      expected = [\\n        ['screen', 42, 31]\\n        ['client', 12, 15]\\n        ['page', 56, 1]\\n      ]\\n      screen.on 'data', (data) ->\\n        exp = expected.shift()\\n        chai.expect(exp[0]).to.equal 'screen'\\n        chai.expect(data.x).to.equal exp[1]\\n        chai.expect(data.y).to.equal exp[2]\\n        return done() unless expected.length\\n      client.on 'data', (data) ->\\n        exp = expected.shift()\\n        chai.expect(exp[0]).to.equal 'client'\\n        chai.expect(data.x).to.equal exp[1]\\n        chai.expect(data.y).to.equal exp[2]\\n        return done() unless expected.length\\n      page.on 'data', (data) ->\\n        exp = expected.shift()\\n        chai.expect(exp[0]).to.equal 'page'\\n        chai.expect(data.x).to.equal exp[1]\\n        chai.expect(data.y).to.equal exp[2]\\n        return done() unless expected.length\\n      event.send\\n        screenX: expected[0][1]\\n        screenY: expected[0][2]\\n        clientX: expected[1][1]\\n        clientY: expected[1][2]\\n        pageX: expected[2][1]\\n        pageY: expected[2][2]\\n\"},\"interaction/ReadGamepad\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Read the state of a gamepad'\\n  c.icon = 'gamepad'\\n  c.inPorts.add 'gamepad',\\n    datatype: 'integer'\\n  c.outPorts.add 'out',\\n    datatype: 'object'\\n  c.outPorts.add 'error',\\n    datatype: 'object'\\n  c.lastTimestamps = {}\\n  c.tearDown = (callback) ->\\n    c.lastTimestamps = {}\\n    do callback\\n  c.process (input, output) ->\\n    return unless input.hasData 'gamepad'\\n    gamepad = input.getData 'gamepad'\\n    unless navigator.webkitGetGamepads\\n      output.done new Error \\\"No WebKit Gamepad API available\\\"\\n      return\\n    gamepadState = navigator.webkitGetGamepads()[gamepad]\\n    unless gamepadState\\n      output.done new Error \\\"Gamepad '#{gamepad}' not available\\\"\\n    if c.lastTimestamps[gamepad] = gamepadState.timestamp\\n      # No change\\n      output.done()\\n      return\\n    c.lastTimestamps[gamepad] = gamepadState.timestamp\\n    output.sendDone\\n      out: gamepadState\\n\"},\"interaction/SetHash\":{\"language\":\"coffeescript\",\"source\":\"noflo = require 'noflo'\\n\\n# @runtime noflo-browser\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = 'Set the hash in browser\\\\'s URL bar'\\n  c.icon = 'slack'\\n  c.inPorts.add 'hash',\\n    datatype: 'string'\\n  c.outPorts.add 'out',\\n    datatype: 'string'\\n  c.process (input, output) ->\\n    return unless input.hasData 'hash'\\n    hash = input.getData 'hash'\\n    window.location.hash = \\\"##{hash}\\\"\\n    output.sendDone\\n      out: hash\\n\"}};\n\nexports.setSource = function (loader, packageId, name, source, language, callback) {\n  baseLoader.setSource(sources, loader, packageId, name, source, language, callback);\n};\nexports.getSource = function (loader, name, callback) {\n  baseLoader.getSource(sources, loader,  name, callback);\n}\nexports.getLanguages = baseLoader.getLanguages;\n\nexports.register = function (loader, callback) {\n  loader.setLibraryIcon(\"dom\", \"html5\");\n  loader.registerComponent(\"browser-app\", \"DoSomething\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/components/DoSomething.js\"));\n  loader.registerComponent(\"browser-app\", \"main\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/graphs/main.json\"));\n  loader.registerComponent(null, \"Graph\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo/components/Graph.js\"));\n  loader.registerComponent(\"core\", \"Callback\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Callback.js\"));\n  loader.registerComponent(\"core\", \"Copy\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Copy.js\"));\n  loader.registerComponent(\"core\", \"DisconnectAfterPacket\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/DisconnectAfterPacket.js\"));\n  loader.registerComponent(\"core\", \"Drop\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Drop.js\"));\n  loader.registerComponent(\"core\", \"Kick\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Kick.js\"));\n  loader.registerComponent(\"core\", \"MakeFunction\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/MakeFunction.js\"));\n  loader.registerComponent(\"core\", \"Merge\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Merge.js\"));\n  loader.registerComponent(\"core\", \"Output\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Output.js\"));\n  loader.registerComponent(\"core\", \"ReadGlobal\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/ReadGlobal.js\"));\n  loader.registerComponent(\"core\", \"Repeat\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Repeat.js\"));\n  loader.registerComponent(\"core\", \"RepeatAsync\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/RepeatAsync.js\"));\n  loader.registerComponent(\"core\", \"RepeatDelayed\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/RepeatDelayed.js\"));\n  loader.registerComponent(\"core\", \"RunInterval\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/RunInterval.js\"));\n  loader.registerComponent(\"core\", \"RunTimeout\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/RunTimeout.js\"));\n  loader.registerComponent(\"core\", \"SendNext\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/SendNext.js\"));\n  loader.registerComponent(\"core\", \"Split\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-core/components/Split.js\"));\n  loader.registerComponent(\"dom\", \"AddClass\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/AddClass.coffee\"));\n  loader.registerComponent(\"dom\", \"AppendChild\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/AppendChild.coffee\"));\n  loader.registerComponent(\"dom\", \"CreateElement\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/CreateElement.coffee\"));\n  loader.registerComponent(\"dom\", \"CreateFragment\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/CreateFragment.coffee\"));\n  loader.registerComponent(\"dom\", \"GetAttribute\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/GetAttribute.coffee\"));\n  loader.registerComponent(\"dom\", \"GetElement\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/GetElement.coffee\"));\n  loader.registerComponent(\"dom\", \"HasClass\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/HasClass.coffee\"));\n  loader.registerComponent(\"dom\", \"Listen\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/Listen.coffee\"));\n  loader.registerComponent(\"dom\", \"ReadHtml\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/ReadHtml.coffee\"));\n  loader.registerComponent(\"dom\", \"RemoveClass\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/RemoveClass.coffee\"));\n  loader.registerComponent(\"dom\", \"RemoveElement\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/RemoveElement.coffee\"));\n  loader.registerComponent(\"dom\", \"RequestAnimationFrame\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/RequestAnimationFrame.coffee\"));\n  loader.registerComponent(\"dom\", \"SetAttribute\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/SetAttribute.coffee\"));\n  loader.registerComponent(\"dom\", \"WriteHtml\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-dom/components/WriteHtml.coffee\"));\n  loader.registerComponent(\"interaction\", \"Focus\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/Focus.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenChange\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenChange.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenDrag\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenDrag.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenEvent\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenEvent.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenHash\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenHash.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenKeyboard\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenKeyboard.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenKeyboardShortcuts\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenKeyboardShortcuts.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenMouse\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenMouse.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenPointer\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenPointer.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenResize\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenResize.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenScroll\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenScroll.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenSpeech\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenSpeech.coffee\"));\n  loader.registerComponent(\"interaction\", \"ListenTouch\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ListenTouch.coffee\"));\n  loader.registerComponent(\"interaction\", \"ReadCoordinates\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ReadCoordinates.coffee\"));\n  loader.registerComponent(\"interaction\", \"ReadGamepad\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/ReadGamepad.coffee\"));\n  loader.registerComponent(\"interaction\", \"SetHash\", require(\"/home/runner/work/noflo-browser-app/noflo-browser-app/node_modules/noflo-interaction/components/SetHash.coffee\"));\n  var loaders = [];\n  \n  baseLoader.registerCustomLoaders(loader, loaders, callback);\n};\n  ","/* eslint-disable */\nexports.registerCustomLoaders = function (loader, loaders, callback) {\n  if (!loaders.length) {\n    return callback();\n  }\n  var customLoader = loaders.shift();\n  loader.registerLoader(customLoader, function (err) {\n    if (err) {\n      return callback(err);\n    }\n    exports.registerCustomLoaders(loader, loaders, callback);\n  });\n};\n\n\nexports.setSource = function (sources, loader, packageId, name, source, language, callback) {\n  var implementation;\n  var originalSource = source;\n  // Transpiling\n  if (language === 'coffeescript') {\n    if (typeof window !== 'undefined' && !window.CoffeeScript) {\n      return callback(new Error('CoffeeScript compiler needed for ' + packageId + '/' + name + ' not available'));\n    }\n    try {\n      source = window.CoffeeScript.compile(source, {\n        bare: true\n      });\n    } catch (e) {\n      return callback(e);\n    }\n  }\n  if (language === 'es6' || language === 'es2015') {\n    if (typeof window !== 'undefined' && window.babel) {\n      try {\n        source = window.babel.transform(source).code;\n      } catch (e) {\n        return callback(e);\n      }\n    }\n  }\n  // Eval the contents to get a runnable component\n  try {\n    var withExports = '(function () { var exports = {}; ' + source + '; return exports; })();';\n    implementation = eval(withExports);\n  } catch (e) {\n    return callback(e);\n  }\n\n  if (typeof implementation !== 'function' && (!implementation.getComponent || typeof implementation.getComponent !== 'function')) {\n    return callback(new Error('Provided source for ' + packageId + '/' + name + ' failed to create a runnable component'));\n  }\n\n  var fullName = packageId + '/' + name;\n  sources[fullName] = {\n    language: language,\n    source: originalSource\n  };\n\n  loader.registerComponent(packageId, name, implementation, callback);\n};\n\nexports.getSource = function (sources, loader, name, callback) {\n  if (!loader.components[name]) {\n    return callback(new Error('Component ' + name + ' not available'));\n  }\n  var component = loader.components[name];\n  if (name.indexOf('/') !== -1) {\n    var nameParts = name.split('/');\n    var componentData = {\n      name: nameParts[1],\n      library: nameParts[0]\n    };\n  } else {\n    var componentData = {\n      name: name,\n      library: ''\n    };\n  }\n  if (loader.isGraph(component)) {\n    componentData.code = JSON.stringify(component, null, 2);\n    componentData.language = 'json';\n    return callback(null, componentData);\n  } else if (sources[name]) {\n    componentData.code = sources[name].source;\n    componentData.language = sources[name].language;\n    componentData.tests = sources[name].tests;\n    return callback(null, componentData);\n  } else if (typeof component === 'function') {\n    componentData.code = component.toString();\n    componentData.language = 'javascript';\n    return callback(null, componentData);\n  } else if (typeof component.getComponent === 'function') {\n    componentData.code = component.getComponent.toString();\n    componentData.language = 'javascript';\n    return callback(null, componentData);\n  }\n  return callback(new Error('Unable to get sources for ' + name));\n};\n\nexports.getLanguages = function () {\n  var languages = ['javascript', 'es2015'];\n  if (typeof window !== 'undefined' && window.CoffeeScript) {\n    languages.push('coffeescript');\n  }\n  return languages;\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  // Define a meaningful icon for component from http://fontawesome.io/icons/\n  c.icon = 'cog';\n  // Provide a description on component usage\n  c.description = 'do X';\n  // Add input ports\n  c.inPorts.add('in', {\n    datatype: 'string',\n  });\n  // Add output ports\n  c.outPorts.add('out', {\n    datatype: 'string',\n  });\n  // What to do when port receives a packet\n  c.process((input, output) => {\n    // Check that input has received data packet\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read the contents of the data packet\n    const data = input.getData('in');\n    // Send the contents to output port\n    output.send({\n      out: data,\n    });\n    // Finish processing\n    output.done();\n  });\n  return c;\n};\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2017 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable\n    class-methods-use-this,\n    import/no-unresolved,\n*/\nvar noflo = require('../lib/NoFlo'); // The Graph component is used to wrap NoFlo Networks into components inside\n// another network.\n\n\nvar Graph = /*#__PURE__*/function (_noflo$Component) {\n  _inherits(Graph, _noflo$Component);\n\n  var _super = _createSuper(Graph);\n\n  function Graph(metadata) {\n    var _this;\n\n    _classCallCheck(this, Graph);\n\n    _this = _super.call(this);\n    _this.metadata = metadata;\n    _this.network = null;\n    _this.ready = true;\n    _this.started = false;\n    _this.starting = false;\n    _this.baseDir = null;\n    _this.loader = null;\n    _this.load = 0;\n    _this.inPorts = new noflo.InPorts({\n      graph: {\n        datatype: 'all',\n        description: 'NoFlo graph definition to be used with the subgraph component',\n        required: true\n      }\n    });\n    _this.outPorts = new noflo.OutPorts();\n\n    _this.inPorts.graph.on('ip', function (packet) {\n      if (packet.type !== 'data') {\n        return;\n      }\n\n      _this.setGraph(packet.data, function (err) {\n        // TODO: Port this part to Process API and use output.error method instead\n        if (err) {\n          _this.error(err);\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Graph, [{\n    key: \"setGraph\",\n    value: function setGraph(graph, callback) {\n      var _this2 = this;\n\n      this.ready = false;\n\n      if (_typeof(graph) === 'object') {\n        if (typeof graph.addNode === 'function') {\n          // Existing Graph object\n          this.createNetwork(graph, callback);\n          return;\n        } // JSON definition of a graph\n\n\n        noflo.graph.loadJSON(graph, function (err, instance) {\n          var inst = instance;\n\n          if (err) {\n            callback(err);\n            return;\n          }\n\n          inst.baseDir = _this2.baseDir;\n\n          _this2.createNetwork(inst, callback);\n        });\n        return;\n      }\n\n      var graphName = graph;\n\n      if (graphName.substr(0, 1) !== '/' && graphName.substr(1, 1) !== ':' && process && process.cwd) {\n        graphName = \"\".concat(process.cwd(), \"/\").concat(graphName);\n      }\n\n      noflo.graph.loadFile(graphName, function (err, instance) {\n        var inst = instance;\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        inst.baseDir = _this2.baseDir;\n\n        _this2.createNetwork(inst, callback);\n      });\n    }\n  }, {\n    key: \"createNetwork\",\n    value: function createNetwork(graph, callback) {\n      var _this3 = this;\n\n      this.description = graph.properties.description || '';\n      this.icon = graph.properties.icon || this.icon;\n      var graphObj = graph;\n\n      if (!graphObj.name) {\n        graphObj.name = this.nodeId;\n      }\n\n      graphObj.componentLoader = this.loader;\n      noflo.createNetwork(graphObj, {\n        delay: true,\n        subscribeGraph: false\n      }, function (err, network) {\n        _this3.network = network;\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this3.emit('network', _this3.network); // Subscribe to network lifecycle\n\n\n        _this3.subscribeNetwork(_this3.network); // Wire the network up\n\n\n        _this3.network.connect(function (err2) {\n          if (err2) {\n            callback(err2);\n            return;\n          }\n\n          Object.keys(_this3.network.processes).forEach(function (name) {\n            // Map exported ports to local component\n            var node = _this3.network.processes[name];\n\n            _this3.findEdgePorts(name, node);\n          }); // Finally set ourselves as \"ready\"\n\n          _this3.setToReady();\n\n          callback();\n        });\n      });\n    }\n  }, {\n    key: \"subscribeNetwork\",\n    value: function subscribeNetwork() {\n      var _this4 = this;\n\n      var contexts = [];\n      this.network.on('start', function () {\n        var ctx = {};\n        contexts.push(ctx);\n        return _this4.activate(ctx);\n      });\n      return this.network.on('end', function () {\n        var ctx = contexts.pop();\n\n        if (!ctx) {\n          return;\n        }\n\n        _this4.deactivate(ctx);\n      });\n    }\n  }, {\n    key: \"isExportedInport\",\n    value: function isExportedInport(port, nodeName, portName) {\n      // First we check disambiguated exported ports\n      var keys = Object.keys(this.network.graph.inports);\n\n      for (var i = 0; i < keys.length; i += 1) {\n        var pub = keys[i];\n        var priv = this.network.graph.inports[pub];\n\n        if (priv.process === nodeName && priv.port === portName) {\n          return pub;\n        }\n      } // Component has exported ports and this isn't one of them\n\n\n      return false;\n    }\n  }, {\n    key: \"isExportedOutport\",\n    value: function isExportedOutport(port, nodeName, portName) {\n      // First we check disambiguated exported ports\n      var keys = Object.keys(this.network.graph.outports);\n\n      for (var i = 0; i < keys.length; i += 1) {\n        var pub = keys[i];\n        var priv = this.network.graph.outports[pub];\n\n        if (priv.process === nodeName && priv.port === portName) {\n          return pub;\n        }\n      } // Component has exported ports and this isn't one of them\n\n\n      return false;\n    }\n  }, {\n    key: \"setToReady\",\n    value: function setToReady() {\n      var _this5 = this;\n\n      if (typeof process !== 'undefined' && process.execPath && process.execPath.indexOf('node') !== -1) {\n        process.nextTick(function () {\n          _this5.ready = true;\n          return _this5.emit('ready');\n        });\n      } else {\n        setTimeout(function () {\n          _this5.ready = true;\n          return _this5.emit('ready');\n        }, 0);\n      }\n    }\n  }, {\n    key: \"findEdgePorts\",\n    value: function findEdgePorts(name, process) {\n      var _this6 = this;\n\n      var inPorts = process.component.inPorts.ports;\n      var outPorts = process.component.outPorts.ports;\n      Object.keys(inPorts).forEach(function (portName) {\n        var port = inPorts[portName];\n\n        var targetPortName = _this6.isExportedInport(port, name, portName);\n\n        if (targetPortName === false) {\n          return;\n        }\n\n        _this6.inPorts.add(targetPortName, port);\n\n        _this6.inPorts[targetPortName].on('connect', function () {\n          // Start the network implicitly if we're starting to get data\n          if (_this6.starting) {\n            return;\n          }\n\n          if (_this6.network.isStarted()) {\n            return;\n          }\n\n          if (_this6.network.startupDate) {\n            // Network was started, but did finish. Re-start simply\n            _this6.network.setStarted(true);\n\n            return;\n          } // Network was never started, start properly\n\n\n          _this6.setUp(function () {});\n        });\n      });\n      Object.keys(outPorts).forEach(function (portName) {\n        var port = outPorts[portName];\n\n        var targetPortName = _this6.isExportedOutport(port, name, portName);\n\n        if (targetPortName === false) {\n          return;\n        }\n\n        _this6.outPorts.add(targetPortName, port);\n      });\n      return true;\n    }\n  }, {\n    key: \"isReady\",\n    value: function isReady() {\n      return this.ready;\n    }\n  }, {\n    key: \"isSubgraph\",\n    value: function isSubgraph() {\n      return true;\n    }\n  }, {\n    key: \"isLegacy\",\n    value: function isLegacy() {\n      return false;\n    }\n  }, {\n    key: \"setUp\",\n    value: function setUp(callback) {\n      var _this7 = this;\n\n      this.starting = true;\n\n      if (!this.isReady()) {\n        this.once('ready', function () {\n          _this7.setUp(callback);\n        });\n        return;\n      }\n\n      if (!this.network) {\n        callback(null);\n        return;\n      }\n\n      this.network.start(function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        _this7.starting = false;\n        callback();\n      });\n    }\n  }, {\n    key: \"tearDown\",\n    value: function tearDown(callback) {\n      this.starting = false;\n\n      if (!this.network) {\n        callback(null);\n        return;\n      }\n\n      this.network.stop(function (err) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        callback();\n      });\n    }\n  }]);\n\n  return Graph;\n}(noflo.Component);\n\nexports.getComponent = function (metadata) {\n  return new Graph(metadata);\n};","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = `This component calls a given callback function for each\nIP it receives.  The Callback component is typically used to connect\nNoFlo with external Node.js code.`;\n  c.icon = 'sign-out';\n\n  c.inPorts.add('in', {\n    description: 'Object passed as argument of the callback',\n    datatype: 'all',\n  });\n  c.inPorts.add('callback', {\n    description: 'Callback to invoke',\n    datatype: 'function',\n    control: true,\n    required: true,\n  });\n  c.outPorts.add(\n    'error',\n    { datatype: 'object' },\n  );\n\n  return c.process((input, output) => {\n    if (!input.hasData('callback', 'in')) {\n      return;\n    }\n    const [callback, data] = input.getData('callback', 'in');\n    if (typeof callback !== 'function') {\n      output.done(new Error('The provided callback must be a function'));\n      return;\n    }\n\n    // Call the callback when receiving data\n    try {\n      callback(data);\n    } catch (e) {\n      output.done(e);\n      return;\n    }\n    output.done();\n  });\n};\n","const noflo = require('noflo');\nconst owl = require('owl-deepcopy');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'deep (i.e. recursively) copy an object';\n  c.icon = 'copy';\n\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to be copied',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n    description: 'Copy of the original packet',\n  });\n\n  return c.process((input, output) => {\n    if (!input.hasData('in')) {\n      return;\n    }\n    const data = input.getData('in');\n\n    const copy = owl.deepCopy(data);\n    output.sendDone({ out: copy });\n  });\n};\n","/* This file is part of OWL JavaScript Utilities.\r\n\r\nOWL JavaScript Utilities is free software: you can redistribute it and/or \r\nmodify it under the terms of the GNU Lesser General Public License\r\nas published by the Free Software Foundation, either version 3 of\r\nthe License, or (at your option) any later version.\r\n\r\nOWL JavaScript Utilities is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public \r\nLicense along with OWL JavaScript Utilities.  If not, see \r\n<http://www.gnu.org/licenses/>.\r\n*/\r\n\r\n/*\r\n  Hey, so, this deep copy is still the only attempt at a truly\r\n  comprehensive approach, even years later. Kudos to the original\r\n  author, one 'Oran Looney' (or, at least, that's what his blog\r\n  sez'.\r\n\r\n  All I did was lift it out of the closure wrapper to make it\r\n  CommonJS requireable.\r\n*/\r\n\r\n\r\nfunction Clone() {}\r\n\r\n// clone objects, skip other types.\r\nfunction clone(target) {\r\n  if ( typeof target == 'object' ) {\r\n    Clone.prototype = target;\r\n    return new Clone();\r\n  } else {\r\n    return target;\r\n  }\r\n}\r\n\r\n\r\n// Shallow Copy \r\nfunction copy(target) {\r\n  if (typeof target !== 'object' ) {\r\n    return target;  // non-object have value sematics, so target is already a copy.\r\n  } else {\r\n    var value = target.valueOf();\r\n    if (target != value) { \r\n      // the object is a standard object wrapper for a native type, say String.\r\n      // we can make a copy by instantiating a new object around the value.\r\n      return new target.constructor(value);\r\n    } else {\r\n      // ok, we have a normal object. If possible, we'll clone the original's prototype \r\n      // (not the original) to get an empty object with the same prototype chain as\r\n      // the original.  If just copy the instance properties.  Otherwise, we have to \r\n      // copy the whole thing, property-by-property.\r\n      if ( target instanceof target.constructor && target.constructor !== Object ) { \r\n\tvar c = clone(target.constructor.prototype);\r\n\t\r\n\t// give the copy all the instance properties of target.  It has the same\r\n\t// prototype as target, so inherited properties are already there.\r\n\tfor ( var property in target) { \r\n\t  if (target.hasOwnProperty(property)) {\r\n\t    c[property] = target[property];\r\n\t  } \r\n\t}\r\n      } else {\r\n\tvar c = {};\r\n\tfor ( var property in target ) c[property] = target[property];\r\n      }\r\n      \r\n      return c;\r\n    }\r\n  }\r\n}\r\n\r\n// Deep Copy\r\nvar deepCopiers = [];\r\n\r\nfunction DeepCopier(config) {\r\n  for ( var key in config ) this[key] = config[key];\r\n}\r\nDeepCopier.prototype = {\r\n  constructor: DeepCopier,\r\n  \r\n  // determines if this DeepCopier can handle the given object.\r\n  canCopy: function(source) { return false; },\r\n  \r\n  // starts the deep copying process by creating the copy object.  You\r\n  // can initialize any properties you want, but you can't call recursively\r\n  // into the DeeopCopyAlgorithm.\r\n  create: function(source) { },\r\n  \r\n  // Completes the deep copy of the source object by populating any properties\r\n  // that need to be recursively deep copied.  You can do this by using the\r\n  // provided deepCopyAlgorithm instance's deepCopy() method.  This will handle\r\n  // cyclic references for objects already deepCopied, including the source object\r\n  // itself.  The \"result\" passed in is the object returned from create().\r\n  populate: function(deepCopyAlgorithm, source, result) {}\r\n};\r\n\r\nfunction DeepCopyAlgorithm() {\r\n  // copiedObjects keeps track of objects already copied by this\r\n  // deepCopy operation, so we can correctly handle cyclic references.\r\n  this.copiedObjects = [];\r\n  var thisPass = this;\r\n  this.recursiveDeepCopy = function(source) {\r\n    return thisPass.deepCopy(source);\r\n  }\r\n  this.depth = 0;\r\n}\r\nDeepCopyAlgorithm.prototype = {\r\n  constructor: DeepCopyAlgorithm,\r\n  \r\n  maxDepth: 256,\r\n  \r\n  // add an object to the cache.  No attempt is made to filter duplicates;\r\n  // we always check getCachedResult() before calling it.\r\n  cacheResult: function(source, result) {\r\n    this.copiedObjects.push([source, result]);\r\n  },\r\n  \r\n  // Returns the cached copy of a given object, or undefined if it's an\r\n  // object we haven't seen before.\r\n  getCachedResult: function(source) {\r\n    var copiedObjects = this.copiedObjects;\r\n    var length = copiedObjects.length;\r\n    for ( var i=0; i<length; i++ ) {\r\n      if ( copiedObjects[i][0] === source ) {\r\n\treturn copiedObjects[i][1];\r\n      }\r\n    }\r\n    return undefined;\r\n  },\r\n  \r\n  // deepCopy handles the simple cases itself: non-objects and object's we've seen before.\r\n  // For complex cases, it first identifies an appropriate DeepCopier, then calls\r\n  // applyDeepCopier() to delegate the details of copying the object to that DeepCopier.\r\n  deepCopy: function(source) {\r\n    // null is a special case: it's the only value of type 'object' without properties.\r\n    if ( source === null ) return null;\r\n    \r\n    // All non-objects use value semantics and don't need explict copying.\r\n    if ( typeof source !== 'object' ) return source;\r\n    \r\n    var cachedResult = this.getCachedResult(source);\r\n    \r\n    // we've already seen this object during this deep copy operation\r\n    // so can immediately return the result.  This preserves the cyclic\r\n    // reference structure and protects us from infinite recursion.\r\n    if ( cachedResult ) return cachedResult;\r\n    \r\n    // objects may need special handling depending on their class.  There is\r\n    // a class of handlers call \"DeepCopiers\"  that know how to copy certain\r\n    // objects.  There is also a final, generic deep copier that can handle any object.\r\n    for ( var i=0; i<deepCopiers.length; i++ ) {\r\n      var deepCopier = deepCopiers[i];\r\n      if ( deepCopier.canCopy(source) ) {\r\n\treturn this.applyDeepCopier(deepCopier, source);\r\n      }\r\n    }\r\n    // the generic copier can handle anything, so we should never reach this line.\r\n    throw new Error(\"no DeepCopier is able to copy \" + source);\r\n  },\r\n  \r\n  // once we've identified which DeepCopier to use, we need to call it in a very\r\n  // particular order: create, cache, populate.  This is the key to detecting cycles.\r\n  // We also keep track of recursion depth when calling the potentially recursive\r\n  // populate(): this is a fail-fast to prevent an infinite loop from consuming all\r\n  // available memory and crashing or slowing down the browser.\r\n  applyDeepCopier: function(deepCopier, source) {\r\n    // Start by creating a stub object that represents the copy.\r\n    var result = deepCopier.create(source);\r\n    \r\n    // we now know the deep copy of source should always be result, so if we encounter\r\n    // source again during this deep copy we can immediately use result instead of\r\n    // descending into it recursively.  \r\n    this.cacheResult(source, result);\r\n    \r\n    // only DeepCopier::populate() can recursively deep copy.  So, to keep track\r\n    // of recursion depth, we increment this shared counter before calling it,\r\n    // and decrement it afterwards.\r\n    this.depth++;\r\n    if ( this.depth > this.maxDepth ) {\r\n      throw new Error(\"Exceeded max recursion depth in deep copy.\");\r\n    }\r\n    \r\n    // It's now safe to let the deepCopier recursively deep copy its properties.\r\n    deepCopier.populate(this.recursiveDeepCopy, source, result);\r\n    \r\n    this.depth--;\r\n    \r\n    return result;\r\n  }\r\n};\r\n\r\n// entry point for deep copy.\r\n//   source is the object to be deep copied.\r\n//   maxDepth is an optional recursion limit. Defaults to 256.\r\nfunction deepCopy(source, maxDepth) {\r\n  var deepCopyAlgorithm = new DeepCopyAlgorithm();\r\n  if ( maxDepth ) deepCopyAlgorithm.maxDepth = maxDepth;\r\n  return deepCopyAlgorithm.deepCopy(source);\r\n}\r\n\r\n// publicly expose the DeepCopier class.\r\ndeepCopy.DeepCopier = DeepCopier;\r\n\r\n// publicly expose the list of deepCopiers.\r\ndeepCopy.deepCopiers = deepCopiers;\r\n\r\n// make deepCopy() extensible by allowing others to \r\n// register their own custom DeepCopiers.\r\ndeepCopy.register = function(deepCopier) {\r\n  if ( !(deepCopier instanceof DeepCopier) ) {\r\n    deepCopier = new DeepCopier(deepCopier);\r\n  }\r\n  deepCopiers.unshift(deepCopier);\r\n}\r\n\r\n// Generic Object copier\r\n// the ultimate fallback DeepCopier, which tries to handle the generic case.  This\r\n// should work for base Objects and many user-defined classes.\r\ndeepCopy.register({\r\n  canCopy: function(source) { return true; },\r\n\r\n  create: function(source) {\r\n    if ( source.hasOwnProperty && source instanceof source.constructor ) {\r\n      return clone(source.constructor.prototype);\r\n    } else {\r\n      return {};\r\n    }\r\n  },\r\n\r\n  populate: function(deepCopy, source, result) {\r\n    for ( var key in source ) {\r\n      if ( source.hasOwnProperty && source.hasOwnProperty(key) ) {\r\n    result[key] = deepCopy(source[key]);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n});\r\n\r\n// Array copier\r\ndeepCopy.register({\r\n  canCopy: function(source) {\r\n    return ( source instanceof Array );\r\n  },\r\n  \r\n  create: function(source) {\r\n    return new source.constructor();\r\n  },\r\n  \r\n  populate: function(deepCopy, source, result) {\r\n    for ( var i=0; i<source.length; i++) {\r\n      result.push( deepCopy(source[i]) );\r\n    }\r\n    return result;\r\n  }\r\n});\r\n\r\n// Date copier\r\ndeepCopy.register({\r\n  canCopy: function(source) {\r\n    return ( source instanceof Date );\r\n  },\r\n  \r\n  create: function(source) {\r\n    return new Date(source);\r\n  }\r\n});\r\n\r\n// EventEmitter copier\r\n// EventEmitters have a property which is an object, but doesn't \r\n// have an object prototype, so instanceof doesn't work on them\r\nvar EventEmitter = require('events').EventEmitter;\r\ndeepCopy.register({\r\n  canCopy: function(source) { return source instanceof EventEmitter; },\r\n  \r\n  create: function(source) {\r\n    if ( source.hasOwnProperty && source instanceof source.constructor ) {\r\n      return clone(source.constructor.prototype);\r\n    } else {\r\n      return {};\r\n    }\r\n  },\r\n  \r\n  populate: function(deepCopy, source, result) {\r\n    for ( var key in source ) {\r\n      if ( !source.hasOwnProperty || source.hasOwnProperty(key) ) {\r\n        result[key] = deepCopy(source[key]);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n});\r\n\r\n// HTML DOM Node\r\n\r\n// utility function to detect Nodes.  In particular, we're looking\r\n// for the cloneNode method.  The global document is also defined to\r\n// be a Node, but is a special case in many ways.\r\nfunction isNode(source) {\r\n  return false; // LJF change here -- I don't care that I am breaking\r\n  // this for the browser. at all.\r\n  if ( window.Node ) {\r\n    return source instanceof Node;\r\n  } else {\r\n    // the document is a special Node and doesn't have many of\r\n    // the common properties so we use an identity check instead.\r\n    if ( source === document ) return true;\r\n    return (\r\n      typeof source.nodeType === 'number' &&\r\n\tsource.attributes &&\r\n\tsource.childNodes &&\r\n\tsource.cloneNode\r\n    );\r\n  }\r\n}\r\n\r\n// Node copier\r\ndeepCopy.register({\r\n  canCopy: function(source) { return isNode(source); },\r\n  \r\n  create: function(source) {\r\n    // there can only be one (document).\r\n    if ( source === document ) return document;\r\n    \r\n    // start with a shallow copy.  We'll handle the deep copy of\r\n    // its children ourselves.\r\n    return source.cloneNode(false);\r\n  },\r\n  \r\n  populate: function(deepCopy, source, result) {\r\n    // we're not copying the global document, so don't have to populate it either.\r\n    if ( source === document ) return document;\r\n    \r\n    // if this Node has children, deep copy them one-by-one.\r\n    if ( source.childNodes && source.childNodes.length ) {\r\n      for ( var i=0; i<source.childNodes.length; i++ ) {\r\n\tvar childCopy = deepCopy(source.childNodes[i]);\r\n\tresult.appendChild(childCopy);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexports.DeepCopyAlgorithm = DeepCopyAlgorithm;\r\nexports.copy = copy;\r\nexports.clone = clone;\r\nexports.deepCopy = deepCopy;\r\n\r\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'Makes each data packet a stream of its own';\n  c.icon = 'pause';\n  c.forwardBrackets = {};\n  c.autoOrdering = false;\n\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to be forward with disconnection',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  let brackets = {};\n  c.tearDown = (callback) => {\n    brackets = {};\n    callback();\n  };\n  return c.process((input, output) => {\n    // Force auto-ordering to be off for this one\n    c.autoOrdering = false;\n\n    const data = input.get('in');\n    if (!brackets[input.scope]) { brackets[input.scope] = []; }\n    if (data.type === 'openBracket') {\n      brackets[input.scope].push(data.data);\n      output.done();\n      return;\n    }\n    if (data.type === 'closeBracket') {\n      brackets[input.scope].pop();\n      output.done();\n      return;\n    }\n\n    if (data.type !== 'data') { return; }\n\n    brackets[input.scope].forEach((bracket) => {\n      output.sendIP('out', new noflo.IP('openBracket', bracket));\n    });\n    output.sendIP('out', data);\n    const closes = brackets[input.scope].slice(0);\n    closes.reverse();\n    brackets[input.scope].forEach((bracket) => {\n      output.sendIP('out', new noflo.IP('closeBracket', bracket));\n    });\n\n    output.done();\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'This component drops every packet it receives with no action';\n  c.icon = 'trash-o';\n\n  c.inPorts.add('in', {\n    datatypes: 'all',\n    description: 'Packet to be dropped',\n  });\n\n  return c.process((input, output) => {\n    const data = input.get('in');\n    data.drop();\n    output.done();\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = `This component generates a single packet and sends it to\nthe output port. Mostly usable for debugging, but can also be useful\nfor starting up networks.`;\n  c.icon = 'share';\n\n  c.inPorts.add('in', {\n    datatype: 'bang',\n    description: 'Signal to send the data packet',\n  });\n  c.inPorts.add('data', {\n    datatype: 'all',\n    description: 'Packet to be sent',\n    control: true,\n    default: null,\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  return c.process((input, output) => {\n    if (!input.hasStream('in')) { return; }\n    if (input.attached('data').length && !input.hasData('data')) { return; }\n    input.getData('in');\n    const data = input.getData('data');\n    output.send({ out: data });\n    output.done();\n  });\n};\n","/* eslint no-new-func: \"warn\" */\nconst noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = `Evaluates a function each time data hits the \"in\" port \nand sends the return value to \"out\". Within the function \"x\" will \nbe the variable from the in port. For example, to make a ^2 function \ninput \"return x*x;\" to the function port.`;\n  c.icon = 'code';\n\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to be processed',\n  });\n  c.inPorts.add('function', {\n    datatype: 'string',\n    description: 'Function to evaluate',\n    control: true,\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n  c.outPorts.add('function', {\n    datatype: 'function',\n  });\n  c.outPorts.add('error', {\n    datatype: 'object',\n  });\n\n  const prepareFunction = (func, callback) => {\n    let newFunc;\n    if (typeof func === 'function') {\n      callback(null, func);\n      return;\n    }\n    try {\n      newFunc = Function('x', func);\n    } catch (e) {\n      callback(e);\n      return;\n    }\n    callback(null, newFunc);\n  };\n\n  return c.process((input, output) => {\n    if (input.attached('in').length && !input.hasData('in')) { return; }\n    if (input.hasData('function', 'in')) {\n      // Both function and input data\n      prepareFunction(input.getData('function'), (err, func) => {\n        let result;\n        if (err) {\n          output.done(err);\n          return;\n        }\n        const data = input.getData('in');\n        try {\n          result = func(data);\n        } catch (error) {\n          output.done(error);\n          return;\n        }\n        output.sendDone({\n          function: func,\n          out: result,\n        });\n      });\n      return;\n    }\n    if (!input.hasData('function')) { return; }\n    prepareFunction(input.getData('function'), (err, func) => {\n      if (err) {\n        output.done(err);\n        return;\n      }\n      output.sendDone({ function: func });\n    });\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = `This component receives data on multiple input ports and \nsends the same data out to the connected output port`;\n  c.icon = 'compress';\n\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to be forwarded',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  return c.process((input, output) => {\n    const data = input.get('in');\n    return output.sendDone({ out: data });\n  });\n};\n","const noflo = require('noflo');\nconst { inspect } = require('util');\n\nconst log = (options, data) => {\n  if (options != null) {\n    return console.log(inspect(\n      data,\n      options.showHidden,\n      options.depth,\n      options.colors,\n    ));\n  }\n  return console.log(data);\n};\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'Sends the data items to console.log';\n  c.icon = 'bug';\n\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to be printed through console.log',\n  });\n  c.inPorts.add('options', {\n    datatype: 'object',\n    description: 'Options to be passed to console.log',\n    control: true,\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  return c.process((input, output) => {\n    if (!input.hasData('in')) { return; }\n    if (input.attached('options').length && !input.hasData('options')) { return; }\n\n    let options = null;\n    if (input.has('options')) {\n      options = input.getData('options');\n    }\n\n    const data = input.getData('in');\n    log(options, data);\n    output.sendDone({ out: data });\n  });\n};\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","/* global window: true */\nconst noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'Returns the value of a global variable.';\n  c.icon = 'usd';\n\n  c.inPorts.add('name', {\n    description: 'The name of the global variable.',\n    datatype: 'string',\n  });\n\n  c.outPorts.add('value', {\n    description: 'The value of the variable.',\n  });\n  c.outPorts.add('error', {\n    description: 'Any errors that occured reading the variables value.',\n    datatype: 'object',\n  });\n\n  c.forwardBrackets = { name: ['value', 'error'] };\n\n  return c.process((input, output) => {\n    if (!input.hasData('name')) { return; }\n    const data = input.getData('name');\n\n    const value = !noflo.isBrowser() ? global[data] : window[data];\n\n    if (typeof value === 'undefined') {\n      const err = new Error(`\"${data}\" is undefined on the global object.`);\n      output.sendDone(err);\n      return;\n    }\n    output.sendDone({ value });\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = `Forwards packets and metadata in the same way \nit receives them`;\n  c.icon = 'forward';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  return c.process((input, output) => {\n    const data = input.get('in');\n    output.sendDone({ out: data });\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = \"Like 'Repeat', except repeat on next tick\";\n  c.icon = 'step-forward';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  return c.process((input, output) => {\n    const data = input.get('in');\n    setTimeout(() => output.sendDone({ out: data }), 0);\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'Forward packet after a set delay';\n  c.icon = 'clock-o';\n\n  c.timers = [];\n\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to be forwarded with a delay',\n  });\n  c.inPorts.add('delay', {\n    datatype: 'number',\n    description: 'How much to delay',\n    default: 500,\n    control: true,\n  });\n\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  c.tearDown = (callback) => {\n    c.timers.forEach(timer => clearTimeout(timer));\n    c.timers = [];\n    return callback();\n  };\n\n  return c.process((input, output) => {\n    if (!input.hasData('in')) { return; }\n    if (input.attached('delay').length && !input.hasData('delay')) { return; }\n\n    let delay = 500;\n    if (input.hasData('delay')) {\n      delay = input.getData('delay');\n    }\n    const payload = input.get('in');\n\n    const timer = setTimeout(() => {\n      c.timers.splice(c.timers.indexOf(timer), 1);\n      return output.sendDone({ out: payload });\n    }, delay);\n    c.timers.push(timer);\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'Send a packet at the given interval';\n  c.icon = 'clock-o';\n  c.inPorts.add('interval', {\n    datatype: 'number',\n    description: 'Interval at which output packets are emitted (ms)',\n    required: true,\n    control: true,\n  });\n  c.inPorts.add('start', {\n    datatype: 'bang',\n    description: 'Start the emission',\n  });\n  c.inPorts.add('stop', {\n    datatype: 'bang',\n    description: 'Stop the emission',\n  });\n  c.outPorts.add('out', {\n    datatype: 'bang',\n  });\n\n  c.timers = {};\n\n  const cleanUp = (scope) => {\n    if (!c.timers[scope]) { return; }\n    clearInterval(c.timers[scope].interval);\n    c.timers[scope].deactivate();\n    c.timers[scope] = null;\n  };\n\n  c.tearDown = (callback) => {\n    Object.keys(c.timers).forEach(cleanUp);\n    c.timers = {};\n    callback();\n  };\n\n  c.forwardBrackets = {};\n  return c.process((input, output, context) => {\n    if (input.hasData('start')) {\n      if (!input.hasData('interval')) { return; }\n      const start = input.get('start');\n      if (start.type !== 'data') { return; }\n      const interval = parseInt(input.getData('interval'), 10);\n      // Ensure we deactivate previous interval in this scope, if any\n      cleanUp(start.scope);\n\n      // Set up interval\n      const ctx = context;\n      ctx.interval = setInterval(() => {\n        const bang = new noflo.IP('data', true);\n        bang.scope = start.scope;\n        return c.outPorts.out.sendIP(bang);\n      }, interval);\n\n      // Register scope, we keep it active until stopped\n      c.timers[start.scope] = context;\n      return;\n    }\n\n    if (input.hasData('stop')) {\n      const stop = input.get('stop');\n      if (stop.type !== 'data') { return; }\n      // Deactivate interval in this scope\n      cleanUp(stop.scope);\n      output.done();\n    }\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'Send a packet after the given time in ms';\n  c.icon = 'clock-o';\n\n  c.timer = {};\n\n  c.inPorts.add('time', {\n    datatype: 'number',\n    description: 'Time after which a packet will be sent',\n    required: true,\n    control: true,\n  });\n  c.inPorts.add('start', {\n    datatype: 'bang',\n    description: 'Start the timeout before sending a packet',\n  });\n  c.outPorts.add('out', {\n    datatype: 'bang',\n  });\n\n  c.forwardBrackets = { start: ['out'] };\n\n  c.stopTimer = (scope) => {\n    if (!c.timer[scope]) { return; }\n    clearTimeout(c.timer[scope].timeout);\n    c.timer[scope].deactivate();\n    delete c.timer[scope];\n  };\n\n  c.tearDown = (callback) => {\n    Object.keys(c.timer).forEach(scope => c.stopTimer(scope));\n    callback();\n  };\n\n  return c.process((input, output, context) => {\n    if (!input.hasData('time', 'start')) { return; }\n    const time = parseInt(input.getData('time'), 10);\n    input.getData('start');\n    // Ensure we deactivate previous timeout, if any\n    c.stopTimer(input.scope);\n    // Set up new timer\n    const ctx = context;\n    ctx.timeout = setTimeout(() => {\n      c.timer = null;\n      output.sendDone({ out: true });\n    }, time);\n    c.timer[input.scope] = context;\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = 'Sends next packet in buffer when receiving a bang';\n  c.icon = 'forward';\n\n  c.inPorts.add('data', {\n    datatype: 'all',\n  });\n  c.inPorts.add('in', {\n    datatype: 'bang',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n  c.outPorts.add('empty', {\n    datatype: 'bang',\n    required: false,\n  });\n\n  c.forwardBrackets = {};\n  return c.process((input, output) => {\n    if (!input.hasData('in')) { return; }\n    const bang = input.getData('in');\n\n    if (!input.hasData('data')) {\n      // No data packets in the buffer, send \"empty\"\n      output.sendDone({ empty: true });\n      return;\n    }\n\n    let sent = false;\n    // Loop until we've either drained the buffer completely, or until\n    // we hit the next data packet\n    while (input.has('data')) {\n      if (sent) {\n        // If we already sent data, we look ahead to see if next packet is data and bail out\n        const buf = c.inPorts.data.getBuffer(bang.scope);\n        if (buf[0].type === 'data') { break; }\n      }\n\n      const packet = input.get('data');\n      output.send({ out: packet });\n      if (packet.type === 'data') { sent = true; }\n    }\n    // After the loop we can deactivate\n    output.done();\n  });\n};\n","const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.icon = 'expand';\n  c.description = `This component receives data on a single input port and \nsends the same data out to all connected output ports`;\n\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to be forwarded',\n  });\n\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n\n  return c.process((input, output) => {\n    const data = input.get('in');\n    output.sendDone({ out: data });\n  });\n};\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Add a class to an element'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.inPorts.add 'class',\n    datatype: 'string'\n\n  c.process (input, output) ->\n    return unless input.has 'element', 'class'\n    [element, className] = input.getData 'element', 'class'\n    element.classList.add className\n    output.done()\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Append elements as children of a parent element'\n  c.inPorts.add 'parent',\n    datatype: 'object'\n  c.inPorts.add 'child',\n    datatype: 'object'\n\n  c.process (input, output) ->\n    return unless input.hasData 'parent', 'child'\n    [parent, child] = input.getData 'parent', 'child'\n    parent.appendChild child\n    output.done()\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Create a new DOM Element'\n  c.inPorts.add 'tagname',\n    datatype: 'string'\n  c.inPorts.add 'container',\n    datatype: 'object'\n  c.outPorts.add 'element',\n    datatype: 'object'\n  c.forwardBrackets =\n    tagname: ['element']\n\n  c.process (input, output) ->\n    return unless input.hasData 'tagname'\n    if c.inPorts.container.isAttached()\n      # If container is attached, we want it too\n      return unless input.hasData 'container'\n\n    tagname = input.getData 'tagname'\n    element = document.createElement tagname\n    if input.hasData 'container'\n      container = input.getData 'container'\n      container.appendChild element\n\n    output.sendDone\n      element: element\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c. description = 'Create a new DOM DocumentFragment'\n  c.inPorts.add 'in',\n    datatype: 'bang'\n  c.outPorts.add 'fragment',\n    datatype: 'object'\n\n  c.forwardBrackets =\n    in: ['fragment']\n\n  c.process (input, output) ->\n    return unless input.hasData 'in'\n    input.getData 'in'\n    fragment = document.createDocumentFragment()\n    output.sendDone\n      fragment: fragment\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = \"Reads the given attribute from the DOM element on the in\n    port.\"\n\n  # Define in ports.\n  c.inPorts.add 'element',\n    datatype: 'object'\n    description: 'The element from which to read the attribute from.'\n    required: true\n\n  c.inPorts.add 'attribute',\n    datatype: 'string'\n    description: 'The attribute which is read from the DOM element.'\n    required: true\n    control: true\n\n  # Define out ports.\n  c.outPorts.add 'out',\n    datatype: 'string'\n    description: 'Value of the attribute being read.'\n\n  c.forwardBrackets =\n    element: ['out']\n\n  # On data flow.\n  c.process (input, output) ->\n    return unless input.hasData 'element', 'attribute'\n    [element, attribute] = input.getData 'element', 'attribute'\n    value = element.getAttribute attribute\n    output.sendDone\n      out: value\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description ='Get a DOM element matching a query'\n  c.inPorts.add 'in',\n    datatype: 'object'\n    description: 'DOM element to constrain the query to'\n  c.inPorts.add 'selector',\n    datatype: 'string'\n    description: 'CSS selector'\n  c.outPorts.add 'element',\n    datatype: 'object'\n  c.outPorts.add 'error',\n    datatype: 'object'\n  c.forwardBrackets =\n    selector: ['element', 'error']\n  c.process (input, output) ->\n    return unless input.hasData 'selector'\n    return unless input.hasData 'in' if input.attached('in').length > 0\n    if input.hasData 'in'\n      # Element-scoped selector\n      [container, selector] = input.getData 'in', 'selector'\n      unless typeof container.querySelector is 'function'\n        output.done new Error 'Given container doesn\\'t support querySelectors'\n        return\n      el = container.querySelectorAll selector\n      unless el.length\n        output.done new Error \"No element matching '#{selector}' found under container\"\n        return\n      for element in el\n        output.send\n          element: element\n      output.done()\n      return\n    selector = input.getData 'selector'\n    el = document.querySelectorAll selector\n    unless el.length\n      output.done new Error \"No element matching '#{selector}' found under document\"\n      return\n    for element in el\n      output.send\n        element: element\n    output.done()\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Check if an element has a given class'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.inPorts.add 'class',\n    datatype: 'string'\n  c.outPorts.add 'element',\n    datatype: 'object'\n  c.outPorts.add 'missed',\n    datatype: 'object'\n  c.process (input, output) ->\n    return unless input.hasData 'element', 'class'\n    [element, klass] = input.getData 'element', 'class'\n    if element.classList.contains klass\n      output.sendDone\n        element: element\n      return\n    output.sendDone\n      missed: element\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'addEventListener for specified event type'\n  c.icon = 'stethoscope'\n\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.inPorts.add 'type',\n    datatype: 'string'\n  c.inPorts.add 'preventdefault',\n    datatype: 'boolean'\n    control: true\n    default: false\n  c.outPorts.add 'element',\n    datatype: 'object'\n  c.outPorts.add 'event',\n    datatype: 'object'\n\n  c.elements = {}\n  cleanUp = (scope) ->\n    return unless c.elements[scope]\n    {element, event, listener} = c.elements[scope]\n    element.removeEventListener event, listener\n    c.elements[scope].deactivate()\n    delete c.elements[scope]\n  c.tearDown = (callback) ->\n    for scope, element of c.elements\n      cleanUp scope\n    c.elements = {}\n    callback()\n  c.forwardBrackets = {}\n\n  c.process (input, output, context) ->\n\n    return unless input.hasData 'element', 'type'\n    [element, type] = input.getData 'element', 'type'\n\n    preventDefault = false\n    if input.hasData 'preventdefault'\n      preventDefault = input.getData 'preventdefault'\n\n    scope = null\n    cleanUp scope\n\n    context.element = element\n    context.event = type\n    context.listener = (event) ->\n      event.preventDefault() if preventDefault\n      output.send\n        element: context.element\n        event: event\n    c.elements[context] = context\n    element.addEventListener type, context.listener\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Read HTML from an existing element'\n  c.inPorts.add 'container',\n    datatype: 'object'\n  c.outPorts.add 'html',\n    datatype: 'string'\n  c.forwardBrackets =\n    container: ['html']\n  c.process (input, output) ->\n    return unless input.hasData 'container'\n    container = input.getData 'container'\n    output.sendDone\n      html: container.innerHTML\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Remove a class from an element'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.inPorts.add 'class',\n    datatype: 'string'\n\n  c.process (input, output) ->\n    return unless input.has 'element', 'class'\n    [element, className] = input.getData 'element', 'class'\n    element.classList.remove className\n    output.done()\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Remove an element from DOM'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.process (input, output) ->\n    return unless input.hasData 'element'\n    element = input.getData 'element'\n    return unless element.parentNode\n    element.parentNode.removeChild element\n    output.done()\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nrequestAnimationFrame =\n  window.requestAnimationFrame       ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame    ||\n  window.oRequestAnimationFrame      ||\n  window.msRequestAnimationFrame     ||\n  (callback, element) ->\n    window.setTimeout( ->\n      callback(+new Date())\n    , 1000 / 60)\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Sends bangs that correspond with screen refresh rate.'\n  c.icon = 'film'\n\n  c.inPorts.add 'start',\n    datatype: 'bang'\n  c.inPorts.add 'stop',\n    datatype: 'bang'\n  c.outPorts.add 'out',\n    datatype: 'bang'\n\n  c.running = {}\n  cleanUp = (scope) ->\n    return unless c.running[scope]\n    c.running[scope].deactivate()\n    delete c.running[scope]\n  c.tearDown = (callback) ->\n    for scope, running of c.running\n      cleanUp scope\n    c.running = {}\n    callback()\n  c.animate = (scope, output) ->\n    # Stop when context has been stopped\n    return unless c.running[scope]\n    # Send bang\n    output.send true\n    # Request next frame\n    requestAnimationFrame c.animate.bind c, scope, output\n\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    if input.hasData 'start'\n      start = input.get 'start'\n      return unless start.type is 'data'\n      # Ensure previous was deactivated\n      cleanUp start.scope\n\n      # Register scope\n      c.running[start.scope] = context\n\n      # Request first frame\n      requestAnimationFrame c.animate.bind c, start.scope, output\n      return\n\n    if input.hasData 'stop'\n      stop = input.get 'stop'\n      return unless stop.type is 'data'\n      # Deactivate this scope\n      cleanUp stop.scope\n      return\n","'use strict'\n\n# @runtime noflo-browser\n\nnoflo = require 'noflo'\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = \"Set the given attribute on the DOM element to the received\n    value.\"\n    \n  # Define in ports.\n  c.inPorts.add 'element',\n    datatype: 'object'\n    description: 'The element on which to set the attribute.'\n\n  c.inPorts.add 'attribute',\n    datatype: 'string'\n    description: 'The attribute which is set on the DOM element.'\n\n  c.inPorts.add 'value',\n    datatype: 'string'\n    description: 'Value of the attribute being set.'\n  \n  # Define out ports.\n  c.outPorts.add 'element',\n    datatype: 'object'\n    description: 'The element that was updated.'\n\n  c.forwardBrackets =\n    element: ['element']\n    value: ['element']\n\n  c.process (input, output) ->\n    return unless input.hasData 'element', 'attribute', 'value'\n    [element, attribute, value] = input.getData 'element', 'attribute', 'value'\n    if typeof value is 'object'\n      if toString.call(value) is '[object Array]'\n        value = value.join ' '\n      else\n        newVal = []\n        newVal.push val for key, val of value\n        value = newVal.join ' '\n    if attribute is \"value\"\n      element.value = value\n    else\n      element.setAttribute attribute, value\n\n    output.sendDone\n      element: element\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Write HTML inside an existing element'\n  c.inPorts.add 'container',\n    datatype: 'object'\n  c.inPorts.add 'html',\n    datatype: 'string'\n  c.outPorts.add 'container',\n    datatype: 'object'\n  c.process (input, output) ->\n    return unless input.hasData 'container', 'html'\n    [container, html] = input.getData 'container', 'html'\n    container.innerHTML = html\n    output.sendDone\n      container: container\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.icon = 'i-cursor'\n  c.description = 'focus element'\n  c.inPorts.add 'element',\n    datatype: 'object'\n    description: 'element to be focused'\n    control: true\n  c.inPorts.add 'trigger',\n    datatype: 'bang'\n    description: 'trigger focus'\n  c.outPorts.add 'out',\n    datatype: 'bang'\n  c.process (input, output) ->\n    return unless input.hasData 'element', 'trigger'\n    element = input.getData 'element'\n    input.getData 'trigger'\n    window.setTimeout ->\n      element.focus()\n      output.sendDone\n        out: true\n    , 0\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen to changes on an input element'\n  c.icon = 'hourglass'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.outPorts.add 'value',\n    datatype: 'object'\n  c.elements = []\n  c.tearDown = (callback) ->\n    for element in c.elements\n      element.el.removeEventListener 'change', element.listener, false\n      element.ctx.deactivate()\n    c.elements = []\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    return unless input.hasData 'element'\n    data =\n      el: input.getData 'element'\n      listener: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        output.send\n          value: event.target.value\n      ctx: context\n    data.el.addEventListener 'change', data.listener, false\n    c.elements.push data\n    return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description =  'Listen to drag events on a DOM element'\n  c.icon = 'arrows'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.outPorts.add 'start',\n    datatype: 'object'\n  c.outPorts.add 'movey',\n    datatype: 'number'\n  c.outPorts.add 'movex',\n    datatype: 'number'\n  c.outPorts.add 'end',\n    datatype: 'object'\n  c.elements = []\n  c.tearDown = (callback) ->\n    for element in c.elements\n      element.el.removeEventListener 'dragstart', element.dragstart, false\n      element.el.removeEventListener 'drag', element.dragmove, false\n      element.el.removeEventListener 'dragend', element.dragend, false\n      element.ctx.deactivate()\n    c.elements = []\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    return unless input.hasData 'element'\n    data =\n      el: input.getData 'element'\n      dragstart: (event) ->\n        event.stopPropagation()\n        output.send\n          start: event\n      dragmove: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        output.send\n          movex: event.clientX\n          movey: event.clientY\n      dragend: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        output.send\n          end: event\n      ctx: context\n    data.el.addEventListener 'dragstart', data.dragstart, false\n    data.el.addEventListener 'drag', data.dragmove, false\n    data.el.addEventListener 'dragend', data.dragend, false\n    c.elements.push data\n    return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.icon = 'rss'\n  c.description = 'Listen to custom events on a DOM element'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.inPorts.add 'event',\n    datatype: 'string'\n  c.outPorts.add 'out',\n    datatype: 'object'\n  c.elements = []\n  c.tearDown = (callback) ->\n    for element in c.elements\n      element.el.removeEventListener element.eventName, element.onEvent, false\n      element.ctx.deactivate()\n    c.elements = []\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    return unless input.hasData 'element', 'event'\n    el = input.getData 'element'\n    eventName = input.getData 'event'\n    data =\n      el: el\n      eventName: eventName\n      onEvent: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        event.eventName = eventName\n        output.send\n          out: event\n      ctx: context\n    data.el.addEventListener eventName, data.onEvent, false\n    c.elements.push data\n    return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen for hash changes in browser\\'s URL bar'\n  c.icon = 'slack'\n  c.inPorts.add 'start',\n    datatype: 'bang'\n    description: 'Start listening for hash changes'\n  c.inPorts.add 'stop',\n    datatype: 'bang'\n    description: 'Stop listening for hash changes'\n  c.outPorts.add 'initial',\n    datatype: 'string'\n  c.outPorts.add 'change',\n    datatype: 'string'\n  c.current = null\n  c.subscriber = null\n  unsubscribe = ->\n    return unless c.subscriber\n    window.removeEventListener 'hashchange', c.subscriber.callback, false\n    c.subscriber.ctx.deactivate()\n    c.subscriber = null\n  c.tearDown = (callback) ->\n    c.current = null\n    do unsubscribe\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    if input.hasData 'start'\n      input.getData 'start'\n      # Ensure previous subscription is ended\n      do unsubscribe\n      sendHash = (port) ->\n        oldHash = c.current\n        c.current = window.location.href.split('#')[1] or ''\n        if oldHash\n          output.send\n            change: new noflo.IP 'openBracket', oldHash\n        payload = {}\n        payload[port] = c.current\n        output.send payload\n        if oldHash\n          output.send\n            change: new noflo.IP 'closeBracket', oldHash\n      c.subscriber =\n        callback: (event) ->\n          sendHash 'change'\n        ctx: context\n      # Send initial\n      sendHash 'initial'\n      window.addEventListener 'hashchange', c.subscriber.callback, false\n      return\n    if input.hasData 'stop'\n      input.getData 'stop'\n      do unsubscribe\n      output.done()\n      return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen for key presses on a given DOM element'\n  c.icon = 'keyboard-o'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.inPorts.add 'stop',\n    datatype: 'object'\n  c.outPorts.add 'keypress',\n    datatype: 'integer'\n  c.elements = []\n  unsubcribe = (element) ->\n    element.el.removeEventListener 'keypress', element.listener, false\n    element.ctx.deactivate()\n  c.tearDown = (callback) ->\n    unsubscribe element for element in c.elements\n    c.elements = []\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    if input.hasData 'element'\n      data =\n        el: input.getData 'element'\n        listener: (event) ->\n          output.send\n            keypress: event.keyCode\n        ctx: context\n      data.el.addEventListener 'keypress', data.listener, false\n      c.elements.push data\n      return\n    if input.hasData 'stop'\n      element = input.getData 'stop'\n      ctx = null\n      for el in c.elements\n        continue unless el.el is element\n        ctx = el\n      return unless ctx\n      unsubscribe ctx\n      output.done()\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen for keyboard shortcuts and route them'\n  c.icon = 'keyboard-o'\n  c.inPorts.add 'keys',\n    datatype: 'array'\n  c.inPorts.add 'ignoreinput',\n    datatype: 'boolean'\n    default: true\n    control: true\n  c.inPorts.add 'stop',\n    datatype: 'bang'\n  c.outPorts.add 'shortcut',\n    datatype: 'bang'\n    addressable: true\n  c.outPorts.add 'missed',\n    datatype: 'integer'\n  c.subscriber = null\n  unsubscribe = ->\n    return unless c.subscriber\n    document.removeEventListener 'keydown', c.subscriber.callback, false\n    c.subscriber.ctx.deactivate()\n    c.subscriber = null\n  c.tearDown = (callback) ->\n    do unsubscribe\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    if input.hasData 'keys'\n      keys = input.getData 'keys'\n\n      # Ensure previous subscription is ended\n      do unsubscribe\n\n      # Older version of this component used string input\n      keys = keys.split ',' if typeof keys is 'string'\n\n      # We allow some common keyboard shortcuts to be passed as strings\n      for key, index in keys\n        switch key\n          when '-' then keys[index] = 189\n          when '=' then keys[index] = 187\n          when '0' then keys[index] = 48\n          when 'a' then keys[index] = 65\n          when 'x' then keys[index] = 88\n          when 'c' then keys[index] = 67\n          when 'v' then keys[index] = 86\n          when 'z' then keys[index] = 90\n          when 'r' then keys[index] = 82\n\n      ignoreInput = if input.hasData('ignoreinput') then input.getData('ignoreinput') else true\n\n      c.subscriber =\n        callback: (event) ->\n          return unless event.ctrlKey or event.metaKey\n          return if event.target.tagName is 'TEXTAREA' and ignoreInput\n          return if event.target.tagName is 'INPUT' and ignoreInput\n          return if String(event.target.contentEditable) is 'true' and ignoreInput\n          route = keys.indexOf event.keyCode\n          if route is -1\n            output.send\n              missed: event.keyCode\n            return\n          event.preventDefault()\n          event.stopPropagation()\n          output.send\n            shortcut: new noflo.IP 'data', event.keyCode,\n              index: route\n        ctx: context\n      document.addEventListener 'keydown', c.subscriber.callback, false\n      return\n    if input.hasData 'stop'\n      input.getData 'stop'\n      do unsubscribe\n      output.done()\n      return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.icon = 'mouse-pointer'\n  c.description = 'Listen to mouse events on a DOM element'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.outPorts.add 'click',\n    datatype: 'object'\n  c.outPorts.add 'dblclick',\n    datatype: 'object'\n  c.elements = []\n  c.tearDown = (callback) ->\n    for element in c.elements\n      element.el.removeEventListener 'click', element.click, false\n      element.el.removeEventListener 'dblclick', element.dblclick, false\n      element.ctx.deactivate()\n    c.elements = []\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    return unless input.hasData 'element'\n    data =\n      el: input.getData 'element'\n      click: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        output.send\n          click: event\n      dblclick: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        output.send\n          dblclick: event\n      ctx: context\n    data.el.addEventListener 'click', data.click, false\n    data.el.addEventListener 'dblclick', data.dblclick, false\n    c.elements.push data\n    return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen to pointer events on a DOM element'\n  c.icon = 'pencil-square-o'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.inPorts.add 'action',\n    datatype: 'string'\n    default: 'none'\n    control: true\n  events = [\n    'down'\n    'up'\n    'cancel'\n    'move'\n    'over'\n    'out'\n    'enter'\n    'leave'\n  ]\n  for event in events\n    c.outPorts.add event,\n      datatype: 'object'\n      description: \"Sends event on pointer#{event}\"\n  c.elements = []\n  c.tearDown = (callback) ->\n    for element in c.elements\n      if element.el.removeAttribute\n        element.el.removeAttribute 'touch-action'\n      for event in events\n        element.el.removeEventListener \"pointer#{event}\", element[\"pointer#{event}\"], false\n      element.ctx.deactivate()\n    c.elements = []\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    return unless input.hasData 'element'\n    action = if input.hasData('action') then input.getData('action') else 'none'\n    data =\n      el: input.getData 'element'\n      ctx: context\n    data.el.setAttribute 'touch-action', action\n    events.forEach (event) ->\n      data[\"pointer#{event}\"] = (ev) ->\n        ev.preventDefault()\n        ev.stopPropagation()\n        payload = {}\n        payload[event] = ev.target.value\n        output.send payload\n      data.el.addEventListener \"pointer#{event}\", data[\"pointer#{event}\"], false\n    c.elements.push data\n    return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen to window resize events'\n  c.icon = 'desktop'\n  c.inPorts.add 'start',\n    datatype: 'bang'\n    description: 'Start listening for screen resizes'\n  c.inPorts.add 'stop',\n    datatype: 'bang'\n    description: 'Stop listening for screen resizes'\n  c.outPorts.add 'width',\n    datatype: 'number'\n  c.outPorts.add 'height',\n    datatype: 'number'\n  c.subscriber = null\n  unsubscribe = ->\n    return unless c.subscriber\n    window.removeEventListener 'resize', c.subscriber.callback, false\n    c.subscriber.ctx.deactivate()\n    c.subscriber = null\n  c.tearDown = (callback) ->\n    do unsubscribe\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    if input.hasData 'start'\n      input.getData 'start'\n      # Ensure previous subscription is ended\n      do unsubscribe\n      c.subscriber =\n        callback: (event) ->\n          output.send\n            width: window.innerWidth\n            height: window.innerHeight\n        ctx: context\n      output.send\n        width: window.innerWidth\n        height: window.innerHeight\n      window.addEventListener 'resize', c.subscriber.callback, false\n      return\n    if input.hasData 'stop'\n      input.getData 'stop'\n      do unsubscribe\n      output.done()\n      return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen to scroll events on the browser window'\n  c.icon = 'arrows-v'\n  c.inPorts.add 'start',\n    datatype: 'bang'\n    description: 'Start listening for hash changes'\n  c.inPorts.add 'stop',\n    datatype: 'bang'\n    description: 'Stop listening for hash changes'\n  c.outPorts.add 'top',\n    datatype: 'number'\n  c.outPorts.add 'bottom',\n    datatype: 'number'\n  c.outPorts.add 'left',\n    datatype: 'number'\n  c.outPorts.add 'right',\n    datatype: 'number'\n  c.subscriber = null\n  unsubscribe = ->\n    return unless c.subscriber\n    window.removeEventListener 'scroll', c.subscriber.callback, false\n    c.subscriber.ctx.deactivate()\n    c.subscriber = null\n  c.tearDown = (callback) ->\n    do unsubscribe\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    if input.hasData 'start'\n      input.getData 'start'\n      # Ensure previous subscription is ended\n      do unsubscribe\n      c.subscriber =\n        callback: (event) ->\n          top = window.scrollY\n          left = window.scrollX\n          output.send\n            top: top\n            bottom: top + window.innerHeight\n            left: left\n            right: left.window.innerWidth\n        ctx: context\n      window.addEventListener 'scroll', c.subscriber.callback, false\n      return\n    if input.hasData 'stop'\n      input.getData 'stop'\n      do unsubscribe\n      output.done()\n      return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen for user\\'s microphone and recognize phrases'\n  c.icon = 'microphone'\n  c.inPorts.add 'start',\n    datatype: 'bang'\n    description: 'Start listening for hash changes'\n  c.inPorts.add 'stop',\n    datatype: 'bang'\n    description: 'Stop listening for hash changes'\n  c.outPorts.add 'result',\n    datatype: 'string'\n  c.outPorts.add 'error',\n    datatype: 'object'\n  c.subscriber = null\n  unsubscribe = ->\n    return unless c.subscriber\n    do c.subscriber.recognition.stop\n    do c.subscriber.ctx.deactivate\n    c.subscriber = null\n  c.tearDown = (callback) ->\n    do unsubscribe\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    if input.hasData 'start'\n      input.getData 'start'\n      # Ensure previous subscription is ended\n      do unsubscribe\n      unless window.webkitSpeechRecognition\n        output.done new Error 'Speech recognition support not available'\n        return\n      c.subscriber =\n        sent: []\n        callback: (event) ->\n          for result, idx in event.results\n            continue unless result.isFinal\n            if c.subscriber.sent.indexOf(idx) isnt -1\n              continue\n            output.send\n              result: result[0].transcript\n            c.subscriber.sent.push idx\n        error: (err) ->\n          output.send\n            error: err\n        ctx: context\n      c.subscriber.recognition = new window.webkitSpeechRecognition\n      c.subscriber.recognition.continuous = true\n      c.subscriber.recognition.start()\n      c.subscriber.recognition.onresult = c.subscriber.callback\n      c.subscriber.recognition.onerror = c.subscriber.error\n      return\n    if input.hasData 'stop'\n      input.getData 'stop'\n      do unsubscribe\n      output.done()\n      return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Listen to touch events on a DOM element'\n  c.icon = 'hand-o-up'\n  c.inPorts.add 'element',\n    datatype: 'object'\n  c.outPorts.add 'start',\n    datatype: 'object'\n  c.outPorts.add 'movex',\n    datatype: 'number'\n  c.outPorts.add 'movey',\n    datatype: 'number'\n  c.outPorts.add 'end',\n    datatype: 'object'\n  c.elements = []\n  c.tearDown = (callback) ->\n    for element in c.elements\n      element.el.removeEventListener 'touchstart', element.touchstart, false\n      element.el.removeEventListener 'touchmove', element.touchmove, false\n      element.el.removeEventListener 'touchend', element.touchend, false\n      element.ctx.deactivate()\n    c.elements = []\n    do callback\n  c.forwardBrackets = {}\n  c.process (input, output, context) ->\n    return unless input.hasData 'element'\n    data =\n      el: input.getData 'element'\n      touchstart: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        return unless event.changedTouches\n        return unless event.changedTouches.length\n        for touch, idx in event.changedTouches\n          output.send\n            start: new noflo.IP 'data', event,\n              touch: idx\n      touchmove: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        return unless event.changedTouches\n        return unless event.changedTouches.length\n        for touch, idx in event.changedTouches\n          output.send\n            movex: new noflo.IP 'data', touch.pageX,\n              touch: idx\n            movey: new noflo.IP 'data', touch.pageY,\n              touch: idx\n      touchend: (event) ->\n        event.preventDefault()\n        event.stopPropagation()\n        return unless event.changedTouches\n        return unless event.changedTouches.length\n        for touch, idx in event.changedTouches\n          output.send\n            end: new noflo.IP 'data', event,\n              touch: idx\n      ctx: context\n    data.el.addEventListener 'touchstart', data.touchstart, false\n    data.el.addEventListener 'touchmove', data.touchmove, false\n    data.el.addEventListener 'touchend', data.touchend, false\n    c.elements.push data\n    return\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Read the coordinates from a DOM event'\n  c.icon = 'map-marker'\n  c.inPorts.add 'event',\n    datatype: 'object'\n  c.outPorts.add 'screen',\n    datatype: 'object'\n  c.outPorts.add 'client',\n    datatype: 'object'\n  c.outPorts.add 'page',\n    datatype: 'object'\n  c.forwardBrackets =\n    event: ['screen', 'client', 'page']\n  c.process (input, output) ->\n    return unless input.hasData 'event'\n    event = input.getData 'event'\n    output.sendDone\n      screen:\n        x: event.screenX\n        y: event.screenY\n      client:\n        x: event.clientX\n        y: event.clientY\n      page:\n        x: event.pageX\n        y: event.pageY\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Read the state of a gamepad'\n  c.icon = 'gamepad'\n  c.inPorts.add 'gamepad',\n    datatype: 'integer'\n  c.outPorts.add 'out',\n    datatype: 'object'\n  c.outPorts.add 'error',\n    datatype: 'object'\n  c.lastTimestamps = {}\n  c.tearDown = (callback) ->\n    c.lastTimestamps = {}\n    do callback\n  c.process (input, output) ->\n    return unless input.hasData 'gamepad'\n    gamepad = input.getData 'gamepad'\n    unless navigator.webkitGetGamepads\n      output.done new Error \"No WebKit Gamepad API available\"\n      return\n    gamepadState = navigator.webkitGetGamepads()[gamepad]\n    unless gamepadState\n      output.done new Error \"Gamepad '#{gamepad}' not available\"\n    if c.lastTimestamps[gamepad] = gamepadState.timestamp\n      # No change\n      output.done()\n      return\n    c.lastTimestamps[gamepad] = gamepadState.timestamp\n    output.sendDone\n      out: gamepadState\n","noflo = require 'noflo'\n\n# @runtime noflo-browser\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = 'Set the hash in browser\\'s URL bar'\n  c.icon = 'slack'\n  c.inPorts.add 'hash',\n    datatype: 'string'\n  c.outPorts.add 'out',\n    datatype: 'string'\n  c.process (input, output) ->\n    return unless input.hasData 'hash'\n    hash = input.getData 'hash'\n    window.location.hash = \"##{hash}\"\n    output.sendDone\n      out: hash\n","\"use strict\";\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable\n    no-param-reassign,\n    prefer-rest-params,\n*/\n// Guess language from filename\nfunction guessLanguageFromFilename(filename) {\n  if (/.*\\.coffee$/.test(filename)) {\n    return 'coffeescript';\n  }\n\n  if (/.*\\.ts$/.test(filename)) {\n    return 'typescript';\n  }\n\n  return 'javascript';\n}\n\nfunction isArray(obj) {\n  if (Array.isArray) {\n    return Array.isArray(obj);\n  }\n\n  return Object.prototype.toString.call(obj) === '[object Array]';\n} // the following functions are from http://underscorejs.org/docs/underscore.html\n// Underscore.js 1.8.3 http://underscorejs.org\n// (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n// Underscore may be freely distributed under the MIT license.\n// Internal function that returns an efficient (for current engines)\n// version of the passed-in callback,\n// to be repeatedly applied in other Underscore functions.\n\n\nfunction optimizeCb(func, context, argCount) {\n  if (context === undefined) {\n    return func;\n  }\n\n  switch (argCount === null ? 3 : argCount) {\n    case 1:\n      return function (value) {\n        return func.call(context, value);\n      };\n\n    case 2:\n      return function (value, other) {\n        return func.call(context, value, other);\n      };\n\n    case 3:\n      return function (value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n\n    case 4:\n      return function (accumulator, value, index, collection) {\n        func.call(context, accumulator, value, index, collection);\n      };\n\n    default: // No-op\n\n  }\n\n  return function call() {\n    return func.apply(context, arguments);\n  };\n} // Create a reducing function iterating left or right.\n// Optimized iterator function as using arguments.length in the main function\n// will deoptimize the, see #1991.\n\n\nfunction createReduce(dir) {\n  function iterator(obj, iteratee, memo, keys, index, length) {\n    while (index >= 0 && index < length) {\n      var currentKey = keys ? keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      index += dir;\n    }\n\n    return memo;\n  }\n\n  return function reduce(obj, iteratee, memo, context) {\n    iteratee = optimizeCb(iteratee, context, 4);\n    var keys = Object.keys(obj);\n\n    var _ref = keys || obj,\n        length = _ref.length;\n\n    var index = dir > 0 ? 0 : length - 1;\n\n    if (arguments.length < 3) {\n      memo = obj[keys ? keys[index] : index];\n      index += dir;\n    }\n\n    return iterator(obj, iteratee, memo, keys, index, length);\n  };\n}\n\nvar reduceRight = createReduce(-1); // Returns a function, that, as long as it continues to be invoked,\n// will not be triggered.\n// The function will be called after it stops being called for N milliseconds.\n// If immediate is passed, trigger the function on the leading edge,\n// instead of the trailing.\n\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  var args;\n  var context;\n  var timestamp;\n  var result;\n\n  function later() {\n    var last = Date.now - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n\n      if (!immediate) {\n        result = func.apply(context, args);\n\n        if (!timeout) {\n          context = null;\n          args = null;\n        }\n      }\n    }\n  }\n\n  return function after() {\n    context = this;\n    args = arguments;\n    timestamp = Date.now;\n    var callNow = immediate && !timeout;\n\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n    }\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = null;\n      args = null;\n    }\n\n    return result;\n  };\n}\n\nexports.guessLanguageFromFilename = guessLanguageFromFilename;\nexports.reduceRight = reduceRight;\nexports.debounce = debounce;\nexports.isArray = isArray;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2018 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\nvar BaseNetwork = require('./BaseNetwork');\n\nvar _require = require('./Platform'),\n    deprecated = _require.deprecated; // ## The NoFlo network coordinator\n//\n// NoFlo networks consist of processes connected to each other\n// via sockets attached from outports to inports.\n//\n// The role of the network coordinator is to take a graph and\n// instantiate all the necessary processes from the designated\n// components, attach sockets between them, and handle the sending\n// of Initial Information Packets.\n\n\nvar LegacyNetwork = /*#__PURE__*/function (_BaseNetwork) {\n  _inherits(LegacyNetwork, _BaseNetwork);\n\n  var _super = _createSuper(LegacyNetwork);\n\n  // All NoFlo networks are instantiated with a graph. Upon instantiation\n  // they will load all the needed components, instantiate them, and\n  // set up the defined connections and IIPs.\n  //\n  // The legacy network will also listen to graph changes and modify itself\n  // accordingly, including removing connections, adding new nodes,\n  // and sending new IIPs.\n  function LegacyNetwork(graph) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, LegacyNetwork);\n\n    deprecated('noflo.Network construction is deprecated, use noflo.createNetwork');\n    return _super.call(this, graph, options);\n  }\n\n  _createClass(LegacyNetwork, [{\n    key: \"connect\",\n    value: function connect() {\n      var _this = this;\n\n      var done = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      _get(_getPrototypeOf(LegacyNetwork.prototype), \"connect\", this).call(this, function (err) {\n        if (err) {\n          done(err);\n          return;\n        }\n\n        _this.subscribeGraph();\n\n        done();\n      });\n    } // A NoFlo graph may change after network initialization.\n    // For this, the legacy network subscribes to the change events\n    // from the graph.\n    //\n    // In graph we talk about nodes and edges. Nodes correspond\n    // to NoFlo processes, and edges to connections between them.\n\n  }, {\n    key: \"subscribeGraph\",\n    value: function subscribeGraph() {\n      var _this2 = this;\n\n      var graphOps = [];\n      var processing = false;\n\n      var registerOp = function registerOp(op, details) {\n        graphOps.push({\n          op: op,\n          details: details\n        });\n      };\n\n      var processOps = function processOps(err) {\n        if (err) {\n          if (_this2.listeners('process-error').length === 0) {\n            throw err;\n          }\n\n          _this2.bufferedEmit('process-error', err);\n        }\n\n        if (!graphOps.length) {\n          processing = false;\n          return;\n        }\n\n        processing = true;\n        var op = graphOps.shift();\n        var cb = processOps;\n\n        switch (op.op) {\n          case 'renameNode':\n            _this2.renameNode(op.details.from, op.details.to, cb);\n\n            break;\n\n          default:\n            _this2[op.op](op.details, cb);\n\n        }\n      };\n\n      this.graph.on('addNode', function (node) {\n        registerOp('addNode', node);\n\n        if (!processing) {\n          processOps();\n        }\n      });\n      this.graph.on('removeNode', function (node) {\n        registerOp('removeNode', node);\n\n        if (!processing) {\n          processOps();\n        }\n      });\n      this.graph.on('renameNode', function (oldId, newId) {\n        registerOp('renameNode', {\n          from: oldId,\n          to: newId\n        });\n\n        if (!processing) {\n          processOps();\n        }\n      });\n      this.graph.on('addEdge', function (edge) {\n        registerOp('addEdge', edge);\n\n        if (!processing) {\n          processOps();\n        }\n      });\n      this.graph.on('removeEdge', function (edge) {\n        registerOp('removeEdge', edge);\n\n        if (!processing) {\n          processOps();\n        }\n      });\n      this.graph.on('addInitial', function (iip) {\n        registerOp('addInitial', iip);\n\n        if (!processing) {\n          processOps();\n        }\n      });\n      return this.graph.on('removeInitial', function (iip) {\n        registerOp('removeInitial', iip);\n\n        if (!processing) {\n          processOps();\n        }\n      });\n    }\n  }]);\n\n  return LegacyNetwork;\n}(BaseNetwork);\n\nexports.Network = LegacyNetwork;","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2020 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\nmodule.exports = /*#__PURE__*/function () {\n  function ProcessContext(ip, nodeInstance, port, result) {\n    _classCallCheck(this, ProcessContext);\n\n    this.ip = ip;\n    this.nodeInstance = nodeInstance;\n    this.port = port;\n    this.result = result;\n    this.scope = this.ip.scope;\n    this.activated = false;\n    this.deactivated = false;\n  }\n\n  _createClass(ProcessContext, [{\n    key: \"activate\",\n    value: function activate() {\n      // Push a new result value if previous has been sent already\n\n      /* eslint-disable no-underscore-dangle */\n      if (this.result.__resolved || this.nodeInstance.outputQ.indexOf(this.result) === -1) {\n        this.result = {};\n      }\n\n      this.nodeInstance.activate(this);\n    }\n  }, {\n    key: \"deactivate\",\n    value: function deactivate() {\n      if (!this.result.__resolved) {\n        this.result.__resolved = true;\n      }\n\n      this.nodeInstance.deactivate(this);\n    }\n  }]);\n\n  return ProcessContext;\n}();","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2020 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable no-underscore-dangle */\nvar debug = require('debug')('noflo:component');\n\nmodule.exports = /*#__PURE__*/function () {\n  function ProcessInput(ports, context) {\n    _classCallCheck(this, ProcessInput);\n\n    this.ports = ports;\n    this.context = context;\n    this.nodeInstance = this.context.nodeInstance;\n    this.ip = this.context.ip;\n    this.port = this.context.port;\n    this.result = this.context.result;\n    this.scope = this.context.scope;\n  } // When preconditions are met, set component state to `activated`\n\n\n  _createClass(ProcessInput, [{\n    key: \"activate\",\n    value: function activate() {\n      if (this.context.activated) {\n        return;\n      }\n\n      if (this.nodeInstance.isOrdered()) {\n        // We're handling packets in order. Set the result as non-resolved\n        // so that it can be send when the order comes up\n        this.result.__resolved = false;\n      }\n\n      this.nodeInstance.activate(this.context);\n\n      if (this.port.isAddressable()) {\n        debug(\"\".concat(this.nodeInstance.nodeId, \" packet on '\").concat(this.port.name, \"[\").concat(this.ip.index, \"]' caused activation \").concat(this.nodeInstance.load, \": \").concat(this.ip.type));\n      } else {\n        debug(\"\".concat(this.nodeInstance.nodeId, \" packet on '\").concat(this.port.name, \"' caused activation \").concat(this.nodeInstance.load, \": \").concat(this.ip.type));\n      }\n    } // ## Connection listing\n    // This allows components to check which input ports are attached. This is\n    // useful mainly for addressable ports\n\n  }, {\n    key: \"attached\",\n    value: function attached() {\n      var _this = this;\n\n      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n        params[_key] = arguments[_key];\n      }\n\n      var args = params;\n\n      if (!args.length) {\n        args = ['in'];\n      }\n\n      var res = [];\n      args.forEach(function (port) {\n        if (!_this.ports[port]) {\n          throw new Error(\"Node \".concat(_this.nodeInstance.nodeId, \" has no port '\").concat(port, \"'\"));\n        }\n\n        res.push(_this.ports[port].listAttached());\n      });\n\n      if (args.length === 1) {\n        return res.pop();\n      }\n\n      return res;\n    } // ## Input preconditions\n    // When the processing function is called, it can check if input buffers\n    // contain the packets needed for the process to fire.\n    // This precondition handling is done via the `has` and `hasStream` methods.\n    // Returns true if a port (or ports joined by logical AND) has a new IP\n    // Passing a validation callback as a last argument allows more selective\n    // checking of packets.\n\n  }, {\n    key: \"has\",\n    value: function has() {\n      for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        params[_key2] = arguments[_key2];\n      }\n\n      var args = params;\n      var validate;\n\n      if (!args.length) {\n        args = ['in'];\n      }\n\n      if (typeof args[args.length - 1] === 'function') {\n        validate = args.pop();\n      } else {\n        validate = function validate() {\n          return true;\n        };\n      }\n\n      for (var i = 0; i < args.length; i += 1) {\n        var port = args[i];\n\n        if (Array.isArray(port)) {\n          if (!this.ports[port[0]]) {\n            throw new Error(\"Node \".concat(this.nodeInstance.nodeId, \" has no port '\").concat(port[0], \"'\"));\n          }\n\n          if (!this.ports[port[0]].isAddressable()) {\n            throw new Error(\"Non-addressable ports, access must be with string \".concat(port[0]));\n          }\n\n          if (!this.ports[port[0]].has(this.scope, port[1], validate)) {\n            return false;\n          }\n        } else {\n          if (!this.ports[port]) {\n            throw new Error(\"Node \".concat(this.nodeInstance.nodeId, \" has no port '\").concat(port, \"'\"));\n          }\n\n          if (this.ports[port].isAddressable()) {\n            throw new Error(\"For addressable ports, access must be with array [\".concat(port, \", idx]\"));\n          }\n\n          if (!this.ports[port].has(this.scope, validate)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    } // Returns true if the ports contain data packets\n\n  }, {\n    key: \"hasData\",\n    value: function hasData() {\n      for (var _len3 = arguments.length, params = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        params[_key3] = arguments[_key3];\n      }\n\n      var args = params;\n\n      if (!args.length) {\n        args = ['in'];\n      }\n\n      args.push(function (ip) {\n        return ip.type === 'data';\n      });\n      return this.has.apply(this, _toConsumableArray(args));\n    } // Returns true if a port has a complete stream in its input buffer.\n\n  }, {\n    key: \"hasStream\",\n    value: function hasStream() {\n      var _this2 = this;\n\n      for (var _len4 = arguments.length, params = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        params[_key4] = arguments[_key4];\n      }\n\n      var args = params;\n      var validateStream;\n\n      if (!args.length) {\n        args = ['in'];\n      }\n\n      if (typeof args[args.length - 1] === 'function') {\n        validateStream = args.pop();\n      } else {\n        validateStream = function validateStream() {\n          return true;\n        };\n      }\n\n      var _loop = function _loop(i) {\n        var port = args[i];\n        var portBrackets = [];\n        var hasData = false;\n\n        var validate = function validate(ip) {\n          if (ip.type === 'openBracket') {\n            portBrackets.push(ip.data);\n            return false;\n          }\n\n          if (ip.type === 'data') {\n            // Run the stream validation callback\n            hasData = validateStream(ip, portBrackets); // Data IP on its own is a valid stream\n\n            if (!portBrackets.length) {\n              return hasData;\n            } // Otherwise we need to check for complete stream\n\n\n            return false;\n          }\n\n          if (ip.type === 'closeBracket') {\n            portBrackets.pop();\n\n            if (portBrackets.length) {\n              return false;\n            }\n\n            if (!hasData) {\n              return false;\n            }\n\n            return true;\n          }\n\n          return false;\n        };\n\n        if (!_this2.has(port, validate)) {\n          return {\n            v: false\n          };\n        }\n      };\n\n      for (var i = 0; i < args.length; i += 1) {\n        var _ret = _loop(i);\n\n        if (_typeof(_ret) === \"object\") return _ret.v;\n      }\n\n      return true;\n    } // ## Input processing\n    //\n    // Once preconditions have been met, the processing function can read from\n    // the input buffers. Reading packets sets the component as \"activated\".\n    //\n    // Fetches IP object(s) for port(s)\n\n  }, {\n    key: \"get\",\n    value: function get() {\n      this.activate();\n\n      for (var _len5 = arguments.length, params = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        params[_key5] = arguments[_key5];\n      }\n\n      var args = params;\n\n      if (!args.length) {\n        args = ['in'];\n      }\n\n      var res = [];\n\n      for (var i = 0; i < args.length; i += 1) {\n        var port = args[i];\n        var idx = void 0;\n        var ip = void 0;\n        var portname = void 0;\n\n        if (Array.isArray(port)) {\n          var _Array$from = Array.from(port);\n\n          var _Array$from2 = _slicedToArray(_Array$from, 2);\n\n          portname = _Array$from2[0];\n          idx = _Array$from2[1];\n\n          if (!this.ports[portname].isAddressable()) {\n            throw new Error('Non-addressable ports, access must be with string portname');\n          }\n        } else {\n          portname = port;\n\n          if (this.ports[portname].isAddressable()) {\n            throw new Error('For addressable ports, access must be with array [portname, idx]');\n          }\n        }\n\n        if (this.nodeInstance.isForwardingInport(portname)) {\n          ip = this.__getForForwarding(portname, idx);\n          res.push(ip);\n        } else {\n          ip = this.ports[portname].get(this.scope, idx);\n          res.push(ip);\n        }\n      }\n\n      if (args.length === 1) {\n        return res[0];\n      }\n\n      return res;\n    }\n  }, {\n    key: \"__getForForwarding\",\n    value: function __getForForwarding(port, idx) {\n      var prefix = [];\n      var dataIp = null; // Read IPs until we hit data\n\n      var ok = true;\n\n      while (ok) {\n        // Read next packet\n        var ip = this.ports[port].get(this.scope, idx); // Stop at the end of the buffer\n\n        if (!ip) {\n          break;\n        }\n\n        if (ip.type === 'data') {\n          // Hit the data IP, stop here\n          dataIp = ip;\n          ok = false;\n          break;\n        } // Keep track of bracket closings and openings before\n\n\n        prefix.push(ip);\n      } // Forwarding brackets that came before data packet need to manipulate context\n      // and be added to result so they can be forwarded correctly to ports that\n      // need them\n\n\n      for (var i = 0; i < prefix.length; i += 1) {\n        var _ip = prefix[i];\n\n        if (_ip.type === 'closeBracket') {\n          // Bracket closings before data should remove bracket context\n          if (!this.result.__bracketClosingBefore) {\n            this.result.__bracketClosingBefore = [];\n          }\n\n          var context = this.nodeInstance.getBracketContext('in', port, this.scope, idx).pop();\n          context.closeIp = _ip;\n\n          this.result.__bracketClosingBefore.push(context);\n        } else if (_ip.type === 'openBracket') {\n          // Bracket openings need to go to bracket context\n          this.nodeInstance.getBracketContext('in', port, this.scope, idx).push({\n            ip: _ip,\n            ports: [],\n            source: port\n          });\n        }\n      } // Add current bracket context to the result so that when we send\n      // to ports we can also add the surrounding brackets\n\n\n      if (!this.result.__bracketContext) {\n        this.result.__bracketContext = {};\n      }\n\n      this.result.__bracketContext[port] = this.nodeInstance.getBracketContext('in', port, this.scope, idx).slice(0); // Bracket closings that were in buffer after the data packet need to\n      // be added to result for done() to read them from\n\n      return dataIp;\n    } // Fetches `data` property of IP object(s) for given port(s)\n\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _this3 = this;\n\n      for (var _len6 = arguments.length, params = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        params[_key6] = arguments[_key6];\n      }\n\n      var args = params;\n\n      if (!args.length) {\n        args = ['in'];\n      }\n\n      var datas = [];\n      args.forEach(function (port) {\n        var packet = _this3.get(port);\n\n        if (packet == null) {\n          // we add the null packet to the array so when getting\n          // multiple ports, if one is null we still return it\n          // so the indexes are correct.\n          datas.push(packet);\n          return;\n        }\n\n        while (packet.type !== 'data') {\n          packet = _this3.get(port);\n\n          if (!packet) {\n            break;\n          }\n        }\n\n        datas.push(packet.data);\n      });\n\n      if (args.length === 1) {\n        return datas.pop();\n      }\n\n      return datas;\n    } // Fetches a complete data stream from the buffer.\n\n  }, {\n    key: \"getStream\",\n    value: function getStream() {\n      for (var _len7 = arguments.length, params = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        params[_key7] = arguments[_key7];\n      }\n\n      var args = params;\n\n      if (!args.length) {\n        args = ['in'];\n      }\n\n      var datas = [];\n\n      for (var i = 0; i < args.length; i += 1) {\n        var port = args[i];\n        var portBrackets = [];\n        var portPackets = [];\n        var hasData = false;\n        var ip = this.get(port);\n\n        if (!ip) {\n          datas.push(undefined);\n        }\n\n        while (ip) {\n          if (ip.type === 'openBracket') {\n            if (!portBrackets.length) {\n              // First openBracket in stream, drop previous\n              portPackets = [];\n              hasData = false;\n            }\n\n            portBrackets.push(ip.data);\n            portPackets.push(ip);\n          }\n\n          if (ip.type === 'data') {\n            portPackets.push(ip);\n            hasData = true; // Unbracketed data packet is a valid stream\n\n            if (!portBrackets.length) {\n              break;\n            }\n          }\n\n          if (ip.type === 'closeBracket') {\n            portPackets.push(ip);\n            portBrackets.pop();\n\n            if (hasData && !portBrackets.length) {\n              // Last close bracket finishes stream if there was data inside\n              break;\n            }\n          }\n\n          ip = this.get(port);\n        }\n\n        datas.push(portPackets);\n      }\n\n      if (args.length === 1) {\n        return datas.pop();\n      }\n\n      return datas;\n    }\n  }]);\n\n  return ProcessInput;\n}();","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2013-2020 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable no-underscore-dangle */\nvar debug = require('debug')('noflo:component');\n\nvar IP = require('./IP'); // Checks if a value is an Error\n\n\nfunction isError(err) {\n  return err instanceof Error || Array.isArray(err) && err.length > 0 && err[0] instanceof Error;\n}\n\nmodule.exports = /*#__PURE__*/function () {\n  function ProcessOutput(ports, context) {\n    _classCallCheck(this, ProcessOutput);\n\n    this.ports = ports;\n    this.context = context;\n    this.nodeInstance = this.context.nodeInstance;\n    this.ip = this.context.ip;\n    this.result = this.context.result;\n    this.scope = this.context.scope;\n  } // Sends an error object\n\n\n  _createClass(ProcessOutput, [{\n    key: \"error\",\n    value: function error(err) {\n      var _this = this;\n\n      var errs = err;\n      var multiple = Array.isArray(err);\n\n      if (!multiple) {\n        errs = [err];\n      }\n\n      if ('error' in this.ports && (this.ports.error.isAttached() || !this.ports.error.isRequired())) {\n        if (multiple) {\n          this.sendIP('error', new IP('openBracket'));\n        }\n\n        errs.forEach(function (e) {\n          _this.sendIP('error', e);\n        });\n\n        if (multiple) {\n          this.sendIP('error', new IP('closeBracket'));\n        }\n      } else {\n        errs.forEach(function (e) {\n          throw e;\n        });\n      }\n    } // Sends a single IP object to a port\n\n  }, {\n    key: \"sendIP\",\n    value: function sendIP(port, packet) {\n      var ip;\n\n      if (!IP.isIP(packet)) {\n        ip = new IP('data', packet);\n      } else {\n        ip = packet;\n      }\n\n      if (this.scope !== null && ip.scope === null) {\n        ip.scope = this.scope;\n      }\n\n      if (!this.nodeInstance.outPorts[port]) {\n        throw new Error(\"Node \".concat(this.nodeInstance.nodeId, \" does not have outport \").concat(port));\n      }\n\n      if (this.nodeInstance.outPorts[port].isAddressable() && ip.index === null) {\n        throw new Error(\"Sending packets to addressable port \".concat(this.nodeInstance.nodeId, \" \").concat(port, \" requires specifying index\"));\n      }\n\n      if (this.nodeInstance.isOrdered()) {\n        this.nodeInstance.addToResult(this.result, port, ip);\n        return;\n      }\n\n      if (!this.nodeInstance.outPorts[port].options.scoped) {\n        ip.scope = null;\n      }\n\n      this.nodeInstance.outPorts[port].sendIP(ip);\n    } // Sends packets for each port as a key in the map\n    // or sends Error or a list of Errors if passed such\n\n  }, {\n    key: \"send\",\n    value: function send(outputMap) {\n      var _this2 = this;\n\n      if (isError(outputMap)) {\n        this.error(outputMap);\n        return;\n      }\n\n      var componentPorts = [];\n      var mapIsInPorts = false;\n      Object.keys(this.ports.ports).forEach(function (port) {\n        if (port !== 'error' && port !== 'ports' && port !== '_callbacks') {\n          componentPorts.push(port);\n        }\n\n        if (!mapIsInPorts && outputMap != null && _typeof(outputMap) === 'object' && Object.keys(outputMap).indexOf(port) !== -1) {\n          mapIsInPorts = true;\n        }\n      });\n\n      if (componentPorts.length === 1 && !mapIsInPorts) {\n        this.sendIP(componentPorts[0], outputMap);\n        return;\n      }\n\n      if (componentPorts.length > 1 && !mapIsInPorts) {\n        throw new Error('Port must be specified for sending output');\n      }\n\n      Object.keys(outputMap).forEach(function (port) {\n        var packet = outputMap[port];\n\n        _this2.sendIP(port, packet);\n      });\n    } // Sends the argument via `send()` and marks activation as `done()`\n\n  }, {\n    key: \"sendDone\",\n    value: function sendDone(outputMap) {\n      this.send(outputMap);\n      this.done();\n    } // Makes a map-style component pass a result value to `out`\n    // keeping all IP metadata received from `in`,\n    // or modifying it if `options` is provided\n\n  }, {\n    key: \"pass\",\n    value: function pass(data) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!('out' in this.ports)) {\n        throw new Error('output.pass() requires port \"out\" to be present');\n      }\n\n      var that = this;\n      Object.keys(options).forEach(function (key) {\n        var val = options[key];\n        that.ip[key] = val;\n      });\n      this.ip.data = data;\n      this.sendIP('out', this.ip);\n      this.done();\n    } // Finishes process activation gracefully\n\n  }, {\n    key: \"done\",\n    value: function done(error) {\n      var _this3 = this;\n\n      this.result.__resolved = true;\n      this.nodeInstance.activate(this.context);\n\n      if (error) {\n        this.error(error);\n      }\n\n      var isLast = function isLast() {\n        // We only care about real output sets with processing data\n        var resultsOnly = _this3.nodeInstance.outputQ.filter(function (q) {\n          if (!q.__resolved) {\n            return true;\n          }\n\n          if (Object.keys(q).length === 2 && q.__bracketClosingAfter) {\n            return false;\n          }\n\n          return true;\n        });\n\n        var pos = resultsOnly.indexOf(_this3.result);\n        var len = resultsOnly.length;\n        var load = _this3.nodeInstance.load;\n\n        if (pos === len - 1) {\n          return true;\n        }\n\n        if (pos === -1 && load === len + 1) {\n          return true;\n        }\n\n        if (len <= 1 && load === 1) {\n          return true;\n        }\n\n        return false;\n      };\n\n      if (this.nodeInstance.isOrdered() && isLast()) {\n        // We're doing bracket forwarding. See if there are\n        // dangling closeBrackets in buffer since we're the\n        // last running process function.\n        Object.keys(this.nodeInstance.bracketContext[\"in\"]).forEach(function (port) {\n          var contexts = _this3.nodeInstance.bracketContext[\"in\"][port];\n\n          if (!contexts[_this3.scope]) {\n            return;\n          }\n\n          var nodeContext = contexts[_this3.scope];\n\n          if (!nodeContext.length) {\n            return;\n          }\n\n          var context = nodeContext[nodeContext.length - 1];\n          var inPorts = _this3.nodeInstance.inPorts[context.source];\n          var buf = inPorts.getBuffer(context.ip.scope, context.ip.index);\n\n          while (buf.length > 0 && buf[0].type === 'closeBracket') {\n            var ip = inPorts.get(context.ip.scope, context.ip.index);\n            var ctx = nodeContext.pop();\n            ctx.closeIp = ip;\n\n            if (!_this3.result.__bracketClosingAfter) {\n              _this3.result.__bracketClosingAfter = [];\n            }\n\n            _this3.result.__bracketClosingAfter.push(ctx);\n          }\n        });\n      }\n\n      debug(\"\".concat(this.nodeInstance.nodeId, \" finished processing \").concat(this.nodeInstance.load));\n      this.nodeInstance.deactivate(this.context);\n    }\n  }]);\n\n  return ProcessOutput;\n}();","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2017-2018 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\n\n/* eslint-disable\n    no-param-reassign,\n*/\nvar _require = require('fbp-graph'),\n    Graph = _require.Graph;\n\nvar _require2 = require('./ComponentLoader'),\n    ComponentLoader = _require2.ComponentLoader;\n\nvar _require3 = require('./Network'),\n    Network = _require3.Network;\n\nvar IP = require('./IP');\n\nvar internalSocket = require('./InternalSocket'); // ## asCallback embedding API\n//\n// asCallback is a helper for embedding NoFlo components or\n// graphs in other JavaScript programs.\n//\n// By using the `noflo.asCallback` function, you can turn any\n// NoFlo component or NoFlo Graph instance into a regular,\n// Node.js-style JavaScript function.\n//\n// Each call to that function starts a new NoFlo network where\n// the given input arguments are sent as IP objects to matching\n// inports. Once the network finishes, the IP objects received\n// from the network will be sent to the callback function.\n//\n// If there was anything sent to an `error` outport, this will\n// be provided as the error argument to the callback.\n// ### Option normalization\n//\n// Here we handle the input valus given to the `asCallback`\n// function. This allows passing things like a pre-initialized\n// NoFlo ComponentLoader, or giving the component loading\n// baseDir context.\n\n\nfunction normalizeOptions(options, component) {\n  if (!options) {\n    options = {};\n  }\n\n  if (!options.name) {\n    options.name = component;\n  }\n\n  if (options.loader) {\n    options.baseDir = options.loader.baseDir;\n  }\n\n  if (!options.baseDir && process && process.cwd) {\n    options.baseDir = process.cwd();\n  }\n\n  if (!options.loader) {\n    options.loader = new ComponentLoader(options.baseDir);\n  }\n\n  if (!options.raw) {\n    options.raw = false;\n  }\n\n  return options;\n} // ### Network preparation\n//\n// Each invocation of the asCallback-wrapped NoFlo graph\n// creates a new network. This way we can isolate multiple\n// executions of the function in their own contexts.\n\n\nfunction prepareNetwork(component, options, callback) {\n  // If we were given a graph instance, then just create a network\n  var network;\n\n  if (_typeof(component) === 'object') {\n    component.componentLoader = options.loader;\n    network = new Network(component, options); // Wire the network up\n\n    network.connect(function (err) {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      callback(null, network);\n    });\n    return;\n  } // Start by loading the component\n\n\n  options.loader.load(component, function (err, instance) {\n    if (err) {\n      callback(err);\n      return;\n    } // Prepare a graph wrapping the component\n\n\n    var graph = new Graph(options.name);\n    var nodeName = options.name;\n    graph.addNode(nodeName, component); // Expose ports\n\n    var inPorts = instance.inPorts.ports;\n    var outPorts = instance.outPorts.ports;\n    Object.keys(inPorts).forEach(function (port) {\n      graph.addInport(port, nodeName, port);\n    });\n    Object.keys(outPorts).forEach(function (port) {\n      graph.addOutport(port, nodeName, port);\n    }); // Prepare network\n\n    graph.componentLoader = options.loader;\n    network = new Network(graph, options); // Wire the network up and start execution\n\n    network.connect(function (err2) {\n      if (err2) {\n        callback(err2);\n        return;\n      }\n\n      callback(null, network);\n    });\n  });\n} // ### Network execution\n//\n// Once network is ready, we connect to all of its exported\n// in and outports and start the network.\n//\n// Input data is sent to the inports, and we collect IP\n// packets received on the outports.\n//\n// Once the network finishes, we send the resulting IP\n// objects to the callback.\n\n\nfunction runNetwork(network, inputs, options, callback) {\n  // Prepare inports\n  var inSockets = {}; // Subscribe outports\n\n  var received = [];\n  var outPorts = Object.keys(network.graph.outports);\n  var outSockets = {};\n  outPorts.forEach(function (outport) {\n    var portDef = network.graph.outports[outport];\n    var process = network.getNode(portDef.process);\n    outSockets[outport] = internalSocket.createSocket();\n    process.component.outPorts[portDef.port].attach(outSockets[outport]);\n    outSockets[outport].from = {\n      process: process,\n      port: portDef.port\n    };\n    outSockets[outport].on('ip', function (ip) {\n      var res = {};\n      res[outport] = ip;\n      received.push(res);\n    });\n  }); // Subscribe to process errors\n\n  var onEnd = null;\n  var onError = null;\n\n  onError = function onError(err) {\n    callback(err.error);\n    network.removeListener('end', onEnd);\n  };\n\n  network.once('process-error', onError); // Subscribe network finish\n\n  onEnd = function onEnd() {\n    // Clear listeners\n    Object.keys(outSockets).forEach(function (port) {\n      var socket = outSockets[port];\n      socket.from.process.component.outPorts[socket.from.port].detach(socket);\n    });\n    outSockets = {};\n    inSockets = {};\n    callback(null, received);\n    network.removeListener('process-error', onError);\n  };\n\n  network.once('end', onEnd); // Start network\n\n  network.start(function (err) {\n    if (err) {\n      callback(err);\n      return;\n    } // Send inputs\n\n\n    for (var i = 0; i < inputs.length; i += 1) {\n      var inputMap = inputs[i];\n      var keys = Object.keys(inputMap);\n\n      for (var j = 0; j < keys.length; j += 1) {\n        var port = keys[j];\n        var value = inputMap[port];\n\n        if (!inSockets[port]) {\n          var portDef = network.graph.inports[port];\n\n          var _process = network.getNode(portDef.process);\n\n          inSockets[port] = internalSocket.createSocket();\n\n          _process.component.inPorts[portDef.port].attach(inSockets[port]);\n        }\n\n        try {\n          if (IP.isIP(value)) {\n            inSockets[port].post(value);\n          } else {\n            inSockets[port].post(new IP('data', value));\n          }\n        } catch (e) {\n          callback(e);\n          network.removeListener('process-error', onError);\n          network.removeListener('end', onEnd);\n          return;\n        }\n      }\n    }\n  });\n}\n\nfunction getType(inputs, network) {\n  // Scalar values are always simple inputs\n  if (_typeof(inputs) !== 'object') {\n    return 'simple';\n  }\n\n  if (Array.isArray(inputs)) {\n    var maps = inputs.filter(function (entry) {\n      return getType(entry, network) === 'map';\n    }); // If each member if the array is an input map, this is a sequence\n\n    if (maps.length === inputs.length) {\n      return 'sequence';\n    } // Otherwise arrays must be simple inputs\n\n\n    return 'simple';\n  } // Empty objects can't be maps\n\n\n  var keys = Object.keys(inputs);\n\n  if (!keys.length) {\n    return 'simple';\n  }\n\n  for (var i = 0; i < keys.length; i += 1) {\n    var key = keys[i];\n\n    if (!network.graph.inports[key]) {\n      return 'simple';\n    }\n  }\n\n  return 'map';\n}\n\nfunction prepareInputMap(inputs, inputType, network) {\n  // Sequence we can use as-is\n  if (inputType === 'sequence') {\n    return inputs;\n  } // We can turn a map to a sequence by wrapping it in an array\n\n\n  if (inputType === 'map') {\n    return [inputs];\n  } // Simple inputs need to be converted to a sequence\n\n\n  var inPort = Object.keys(network.graph.inports)[0]; // If we have a port named \"IN\", send to that\n\n  if (network.graph.inports[\"in\"]) {\n    inPort = 'in';\n  }\n\n  var map = {};\n  map[inPort] = inputs;\n  return [map];\n}\n\nfunction normalizeOutput(values, options) {\n  if (options.raw) {\n    return values;\n  }\n\n  var result = [];\n  var previous = null;\n  var current = result;\n  values.forEach(function (packet) {\n    if (packet.type === 'openBracket') {\n      previous = current;\n      current = [];\n      previous.push(current);\n    }\n\n    if (packet.type === 'data') {\n      current.push(packet.data);\n    }\n\n    if (packet.type === 'closeBracket') {\n      current = previous;\n    }\n  });\n\n  if (result.length === 1) {\n    return result[0];\n  }\n\n  return result;\n}\n\nfunction sendOutputMap(outputs, resultType, options, callback) {\n  // First check if the output sequence contains errors\n  var errors = outputs.filter(function (map) {\n    return map.error != null;\n  }).map(function (map) {\n    return map.error;\n  });\n\n  if (errors.length) {\n    callback(normalizeOutput(errors, options));\n    return;\n  }\n\n  if (resultType === 'sequence') {\n    callback(null, outputs.map(function (map) {\n      var res = {};\n      Object.keys(map).forEach(function (key) {\n        var val = map[key];\n\n        if (options.raw) {\n          res[key] = val;\n          return;\n        }\n\n        res[key] = normalizeOutput([val], options);\n      });\n      return res;\n    }));\n    return;\n  } // Flatten the sequence\n\n\n  var mappedOutputs = {};\n  outputs.forEach(function (map) {\n    Object.keys(map).forEach(function (key) {\n      var val = map[key];\n\n      if (!mappedOutputs[key]) {\n        mappedOutputs[key] = [];\n      }\n\n      mappedOutputs[key].push(val);\n    });\n  });\n  var outputKeys = Object.keys(mappedOutputs);\n  var withValue = outputKeys.filter(function (outport) {\n    return mappedOutputs[outport].length > 0;\n  });\n\n  if (withValue.length === 0) {\n    // No output\n    callback(null);\n    return;\n  }\n\n  if (withValue.length === 1 && resultType === 'simple') {\n    // Single outport\n    callback(null, normalizeOutput(mappedOutputs[withValue[0]], options));\n    return;\n  }\n\n  var result = {};\n  Object.keys(mappedOutputs).forEach(function (port) {\n    var packets = mappedOutputs[port];\n    result[port] = normalizeOutput(packets, options);\n  });\n  callback(null, result);\n}\n\nexports.asCallback = function asCallback(component, options) {\n  options = normalizeOptions(options, component);\n  return function (inputs, callback) {\n    prepareNetwork(component, options, function (err, network) {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      if (options.networkCallback) {\n        options.networkCallback(network);\n      }\n\n      var resultType = getType(inputs, network);\n      var inputMap = prepareInputMap(inputs, resultType, network);\n      runNetwork(network, inputMap, options, function (err2, outputMap) {\n        if (err2) {\n          callback(err2);\n          return;\n        }\n\n        sendOutputMap(outputMap, resultType, options, callback);\n      });\n    });\n  };\n};","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2018 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\nvar getParams = require('get-function-params');\n\nvar _require = require('./Component'),\n    Component = _require.Component; // ## asComponent generator API\n//\n// asComponent is a helper for turning JavaScript functions into\n// NoFlo components.\n//\n// Each call to this function returns a component instance where\n// the input parameters of the given function are converted into\n// NoFlo inports, and there are `out` and `error` ports for the\n// results of the function execution.\n//\n// Variants supported:\n//\n// * Regular synchronous functions: return value gets sent to `out`.\n//   Thrown errors get sent to `error`\n// * Functions returning a Promise: resolved promises get sent to `out`,\n//   rejected promises to `error`\n// * Functions taking a Node.js style asynchronous callback: `err` argument\n//   to callback gets sent to `error`, result gets sent to `out`\n//\n// Usage example:\n//\n//     exports.getComponent = function () {\n//       return noflo.asComponent(Math.random, {\n//         description: 'Generate a random number',\n//       });\n//     };\n//\n// ### Wrapping built-in functions\n//\n// Built-in JavaScript functions don't make their arguments introspectable.\n// Because of this, these cannot be directly converted to components.\n// You'll have to provide a wrapper JavaScript function to make  the arguments appear as ports.\n//\n// Example:\n//\n//     exports.getComponent = function () {\n//       return noflo.asComponent(function (selector) {\n//         return document.querySelector(selector);\n//       }, {\n//         description: 'Return an element matching the CSS selector',\n//         icon: 'html5',\n//       });\n//     };\n//\n// ### Default values\n//\n// Function arguments with a default value are supported in ES6 environments.\n// The default arguments are visible via the component's port interface.\n//\n// However, ES5 transpilation doesn't work with default values.\n// In these cases the port with a default won't be visible. It is\n// recommended to use default values only with components that don't need to run in legacy browsers.\n\n\nexports.asComponent = function asComponent(func, options) {\n  var hasCallback = false;\n  var params = getParams(func).filter(function (p) {\n    if (p.param !== 'callback') {\n      return true;\n    }\n\n    hasCallback = true;\n    return false;\n  });\n  var c = new Component(options);\n  params.forEach(function (p) {\n    var portOptions = {\n      required: true\n    };\n\n    if (typeof p[\"default\"] !== 'undefined') {\n      portOptions[\"default\"] = p[\"default\"];\n      portOptions.required = false;\n    }\n\n    c.inPorts.add(p.param, portOptions);\n    c.forwardBrackets[p.param] = ['out', 'error'];\n  });\n\n  if (!params.length) {\n    c.inPorts.add('in', {\n      datatype: 'bang'\n    });\n  }\n\n  c.outPorts.add('out');\n  c.outPorts.add('error');\n  c.process(function (input, output) {\n    var values;\n\n    if (params.length) {\n      for (var i = 0; i < params.length; i += 1) {\n        var p = params[i];\n\n        if (!input.hasData(p.param)) {\n          return;\n        }\n      }\n\n      values = params.map(function (p) {\n        return input.getData(p.param);\n      });\n    } else {\n      if (!input.hasData('in')) {\n        return;\n      }\n\n      input.getData('in');\n      values = [];\n    }\n\n    if (hasCallback) {\n      // Handle Node.js style async functions\n      values.push(function (err, res) {\n        if (err) {\n          output.done(err);\n          return;\n        }\n\n        output.sendDone(res);\n      });\n      func.apply(void 0, _toConsumableArray(values));\n      return;\n    }\n\n    var res = func.apply(void 0, _toConsumableArray(values));\n\n    if (res && _typeof(res) === 'object' && typeof res.then === 'function') {\n      // Result is a Promise, resolve and handle\n      res.then(function (val) {\n        return output.sendDone(val);\n      }, function (err) {\n        return output.done(err);\n      });\n      return;\n    }\n\n    output.sendDone(res);\n  });\n  return c;\n};","var patterns = require('./src/patterns')\nvar encodeStrings = require('./src/encodeStrings')\nvar encode = require('./src/encode')\nvar decode = require('./src/decode')\n\nmodule.exports = function (fn) {\n  var cache = []\n\n  var fnString = fn.toString().replace(/\\/\\*.*?\\*\\//g, '')\n  fnString = encodeStrings(cache, fnString)\n\n  var params = encode(cache, fnString, patterns.prePatterns)\n    .replace(/\\n/g, '')\n    .replace(/\\s*async\\s*/, '')\n    .match(/(?:function\\s*\\((.*?)\\)|\\((.*?)\\))|(.*?)\\s*=>/)\n\n  params = params[1] || params[2] || params[3] || ''\n\n  return encode(cache, params, patterns.postPatterns)\n    .split(',')\n    .filter(function (i) { return i }) // filter empty results\n    .map(function (i) {\n      i = decode(cache, i, true)\n      var data = i.split('=')\n      var obj = {\n        param: data[0].trim()\n      }\n      if (data[1]) obj.default = decode(cache, data.slice(1).join('='))\n      return obj\n    })\n}\n","var stringPatterns = require('./patterns').stringPatterns\nvar delim = require('./delim')\n\nmodule.exports = function (cache, string) {\n  while (true) {\n    var shortestString = stringPatterns\n      .reduce(function (arr, pattern) {\n        return arr.concat(string.match(pattern) || [])\n      }, [])\n      .sort(function (a, b) { return a.length - b.length })\n      [0]\n\n    if (!shortestString) return string\n    string = string.replace(shortestString, delim(cache.push(shortestString)))\n  }\n}","var delim = require('./delim')\n\nmodule.exports = function (cache, string, patterns) {\n  patterns.forEach(function (pattern) {\n    while (pattern.test(string)) {\n      var match = pattern.exec(string)[0]\n      string = string.replace(match, delim(cache.push(match)))\n    }\n  })\n  return string\n}\n","var delim = require('./delim')\n\nmodule.exports = function (cache, string, skipEval) {\n  var pattern = /:~:(\\d+?):~:/\n  while (pattern.test(string)) {\n    var id = pattern.exec(string)[1]\n    string = string.replace(delim(id), cache[id-1])\n  }\n  return skipEval ? string : eval('('+string+')')\n}\n","module.exports = {\n  postMessage: require('./runtime/postmessage'),\n  iframe: require('./runtime/iframe'),\n  opener: require('./runtime/opener'),\n};\n","const noflo = require('noflo');\nconst {\n  EventEmitter,\n} = require('events');\n\nfunction sendToInport(port, event, payload) {\n  const socket = noflo.internalSocket.createSocket();\n  port.attach(socket);\n  switch (event) {\n    case 'begingroup': socket.beginGroup(payload); break;\n    case 'endgroup': socket.endGroup(payload); break;\n    case 'data': socket.send(payload); break;\n    default: {\n      // Ignored\n    }\n  }\n  port.detach(socket);\n}\n\nfunction findPort(network, name, inPort) {\n  let internal;\n  if (!network.graph) { return null; }\n  if (inPort) {\n    internal = network.graph.inports[name];\n  } else {\n    internal = network.graph.outports[name];\n  }\n  if (!(internal != null ? internal.process : undefined)) { return null; }\n  const node = network.getNode(internal.process);\n  if (!node) {\n    return null;\n  }\n  const { component } = node;\n  if (!component) {\n    return null;\n  }\n  if (inPort) {\n    return component.inPorts.ports[internal.port];\n  }\n  return component.outPorts.ports[internal.port];\n}\n\nfunction portToPayload(pub, internal, network, inPort) {\n  const def = {\n    id: pub,\n    type: 'all',\n    description: (internal.metadata != null ? internal.metadata.description : undefined),\n    addressable: false,\n    required: false,\n  };\n  const port = findPort(network, pub, inPort);\n  // Network has been prepared but isn't running yet so\n  // we don't have full component info\n  if (!port) { return def; }\n  def.type = port.getDataType() || 'all';\n  if (typeof port.getSchema === 'function' ? port.getSchema() : undefined) { def.schema = port.getSchema(); }\n  def.description = (internal.metadata != null ? internal.metadata.description : undefined) || port.getDescription() || '';\n  def.addressable = port.isAddressable();\n  def.required = port.isRequired();\n  return def;\n}\n\nfunction portsPayload(name, network) {\n  let internal;\n  const payload = {\n    graph: name,\n    inPorts: [],\n    outPorts: [],\n  };\n  if (!(network != null ? network.graph : undefined)) { return payload; }\n  Object.keys(network.graph.inports).forEach((pub) => {\n    internal = network.graph.inports[pub];\n    payload.inPorts.push(portToPayload(pub, internal, network, true));\n  });\n  Object.keys(network.graph.outports).forEach((pub) => {\n    internal = network.graph.outports[pub];\n    payload.outPorts.push(portToPayload(pub, internal, network, false));\n  });\n  return payload;\n}\n\nclass RuntimeProtocol extends EventEmitter {\n  constructor(transport) {\n    super();\n    this.transport = transport;\n    this.outputSockets = {}; // graphName -> publicPort -> noflo.Socket\n    this.mainGraph = null;\n\n    this.transport.network.on('removenetwork', (network, name) => {\n      this.subscribeOutdata(name, network, false);\n      this.subscribeOutPorts(name, network);\n      this.subscribeExportedPorts(name, network, false);\n      return this.sendPorts(name, null);\n    });\n  }\n\n  registerNetwork(name, network) {\n    this.subscribeExportedPorts(name, network, true);\n    this.subscribeOutPorts(name, network);\n    this.sendPorts(name, network);\n\n    if (network.isStarted()) {\n      // processes don't exist until started\n      this.subscribeOutdata(name, network, true);\n    }\n    network.once('start', () => {\n      // processes don't exist until started\n      this.subscribeOutdata(name, network, true);\n    });\n  }\n\n  send(topic, payload, context) {\n    return this.transport.send('runtime', topic, payload, context);\n  }\n\n  sendAll(topic, payload) {\n    return this.transport.sendAll('runtime', topic, payload);\n  }\n\n  sendError(message, context) {\n    return this.send('error', new Error(message), context);\n  }\n\n  receive(topic, payload, context) {\n    switch (topic) {\n      case 'getruntime': return this.getRuntime(payload, context);\n      case 'packet':\n        return this.sendPacket(payload, (err) => {\n          if (err) {\n            this.sendError(err.message, context);\n            return;\n          }\n          this.send('packetsent', {\n            port: payload.port,\n            event: payload.event,\n            graph: payload.graph,\n            payload: payload.payload,\n          },\n          context);\n        });\n      default: return this.send('error', new Error(`runtime:${topic} not supported`), context);\n    }\n  }\n\n  getRuntime(request, context) {\n    let {\n      type,\n    } = this.transport.options;\n    if (!type) {\n      if (noflo.isBrowser()) {\n        type = 'noflo-browser';\n      } else {\n        type = 'noflo-nodejs';\n      }\n    }\n\n    const {\n      capabilities,\n    } = this.transport.options;\n    const secret = request ? request.secret : null;\n    const permittedCapabilities = capabilities.filter(\n      (capability) => this.transport.canDo(capability, secret),\n    );\n\n    const payload = {\n      type,\n      version: this.transport.version,\n      capabilities: permittedCapabilities,\n      allCapabilities: capabilities,\n    };\n    if (this.mainGraph) {\n      payload.graph = this.mainGraph;\n    }\n\n    // Add project metadata if available\n    if (this.transport.options.id) { payload.id = this.transport.options.id; }\n    if (this.transport.options.label) { payload.label = this.transport.options.label; }\n    if (this.transport.options.namespace) { payload.namespace = this.transport.options.namespace; }\n    if (this.transport.options.repository) {\n      payload.repository = this.transport.options.repository;\n    }\n    if (this.transport.options.repositoryVersion) {\n      payload.repositoryVersion = this.transport.options.repositoryVersion;\n    }\n\n    this.send('runtime', payload, context);\n    // send port info about currently set up networks\n    return (() => {\n      const result = [];\n      Object.keys(this.transport.network.networks).forEach((name) => {\n        const network = this.transport.network.networks[name];\n        result.push(this.sendPorts(name, network, context));\n      });\n      return result;\n    })();\n  }\n\n  sendPorts(name, network, context) {\n    const payload = portsPayload(name, network);\n    this.emit('ports', payload);\n    if (!context) {\n      return this.sendAll('ports', payload);\n    }\n    return this.send('ports', payload, context);\n  }\n\n  setMainGraph(id) {\n    this.mainGraph = id;\n  }\n  // XXX: should send updated runtime info?\n\n  subscribeExportedPorts(name, network, add) {\n    const sendExportedPorts = () => this.sendPorts(name, network);\n    const dependencies = [\n      'addInport',\n      'addOutport',\n      'removeInport',\n      'removeOutport',\n    ];\n    dependencies.forEach((d) => {\n      network.graph.removeListener(d, sendExportedPorts);\n    });\n\n    if (add) {\n      const result = [];\n      dependencies.forEach((d) => {\n        result.push(network.graph.on(d, sendExportedPorts));\n      });\n    }\n  }\n\n  subscribeOutPorts(name, network, add) {\n    const portRemoved = () => this.subscribeOutdata(name, network, false);\n    const portAdded = () => this.subscribeOutdata(name, network, true);\n\n    const {\n      graph,\n    } = network;\n    graph.removeListener('addOutport', portAdded);\n    graph.removeListener('removeOutport', portRemoved);\n\n    if (add) {\n      graph.on('addOutport', portAdded);\n      graph.on('removeOutport', portRemoved);\n    }\n  }\n\n  subscribeOutdata(graphName, network, add) {\n    // Unsubscribe all\n    if (!this.outputSockets[graphName]) { this.outputSockets[graphName] = {}; }\n    let graphSockets = this.outputSockets[graphName];\n    Object.keys(graphSockets).forEach((pub) => {\n      const socket = graphSockets[pub];\n      socket.removeAllListeners('ip');\n    });\n    graphSockets = {};\n\n    if (!add) { return; }\n    // Subscribe new\n    Object.keys(network.graph.outports).forEach((pub) => {\n      const internal = network.graph.outports[pub];\n      const socket = noflo.internalSocket.createSocket();\n      graphSockets[pub] = socket;\n      const {\n        component,\n      } = network.processes[internal.process];\n      if (!(component != null ? component.outPorts[internal.port] : undefined)) {\n        throw new Error(`Exported outport ${internal.port} in node ${internal.process} not found`);\n      }\n      component.outPorts[internal.port].attach(socket);\n      let event;\n      socket.on('ip', (ip) => {\n        switch (ip.type) {\n          case 'openBracket':\n            event = 'begingroup';\n            break;\n          case 'closeBracket':\n            event = 'endgroup';\n            break;\n          default:\n            event = ip.type;\n        }\n        this.emit('packet', {\n          port: pub,\n          event,\n          graph: graphName,\n          payload: ip.data,\n        });\n        this.sendAll('packet', {\n          port: pub,\n          event,\n          graph: graphName,\n          payload: ip.data,\n        });\n      });\n    });\n  }\n\n  sendPacket(payload, callback) {\n    const network = this.transport.network.networks[payload.graph];\n    if (!network) { return callback(new Error(`Cannot find network for graph ${payload.graph}`)); }\n    const port = findPort(network.network, payload.port, true);\n    if (!port) { return callback(new Error(`Cannot find internal port for ${payload.port}`)); }\n    sendToInport(port, payload.event, payload.payload);\n    return callback();\n  }\n}\n\nmodule.exports = RuntimeProtocol;\n","const noflo = require('noflo');\nconst {\n  EventEmitter,\n} = require('events');\nconst { withNamespace } = require('../utils');\n\nclass GraphProtocol extends EventEmitter {\n  constructor(transport) {\n    super();\n    this.transport = transport;\n    this.graphs = {};\n  }\n\n  send(topic, payload, context) {\n    return this.transport.send('graph', topic, payload, context);\n  }\n\n  sendAll(topic, payload) {\n    return this.transport.sendAll('graph', topic, payload);\n  }\n\n  receive(topic, payload, context) {\n    // Find locally stored graph by ID\n    let graph;\n    if (topic !== 'clear') {\n      graph = this.resolveGraph(payload, context);\n      if (!graph) { return; }\n    }\n\n    switch (topic) {\n      case 'clear': this.initGraph(payload, context); break;\n      case 'addnode': this.addNode(graph, payload, context); break;\n      case 'removenode': this.removeNode(graph, payload, context); break;\n      case 'renamenode': this.renameNode(graph, payload, context); break;\n      case 'changenode': this.changeNode(graph, payload, context); break;\n      case 'addedge': this.addEdge(graph, payload, context); break;\n      case 'removeedge': this.removeEdge(graph, payload, context); break;\n      case 'changeedge': this.changeEdge(graph, payload, context); break;\n      case 'addinitial': this.addInitial(graph, payload, context); break;\n      case 'removeinitial': this.removeInitial(graph, payload, context); break;\n      case 'addinport': this.addInport(graph, payload, context); break;\n      case 'removeinport': this.removeInport(graph, payload, context); break;\n      case 'renameinport': this.renameInport(graph, payload, context); break;\n      case 'addoutport': this.addOutport(graph, payload, context); break;\n      case 'removeoutport': this.removeOutport(graph, payload, context); break;\n      case 'renameoutport': this.renameOutport(graph, payload, context); break;\n      case 'addgroup': this.addGroup(graph, payload, context); break;\n      case 'removegroup': this.removeGroup(graph, payload, context); break;\n      case 'renamegroup': this.renameGroup(graph, payload, context); break;\n      case 'changegroup': this.changeGroup(graph, payload, context); break;\n      default: this.send('error', new Error(`graph:${topic} not supported`), context);\n    }\n  }\n\n  resolveGraph(payload, context) {\n    if (!payload.graph) {\n      this.send('error', new Error('No graph specified'), context);\n      return null;\n    }\n    if (!this.graphs[payload.graph]) {\n      this.send('error', new Error('Requested graph not found'), context);\n      return null;\n    }\n    return this.graphs[payload.graph];\n  }\n\n  getLoader(baseDir) {\n    return this.transport.component.getLoader(baseDir, this.transport.options);\n  }\n\n  sendGraph(id, graph, context) {\n    const payload = {\n      graph: id,\n      description: graph.toJSON(),\n    };\n    return this.send('graph', payload, context);\n  }\n\n  initGraph(payload, context) {\n    if (!payload.id) {\n      this.send('error', new Error('No graph ID provided'), context);\n      return;\n    }\n    const graph = new noflo.Graph(payload.name || 'NoFlo runtime');\n    graph.properties.id = payload.id;\n    graph.properties.main = payload.main;\n\n    let { library } = payload;\n    if (library) {\n      library = library.replace('noflo-', '');\n      graph.properties.library = library;\n    }\n    if (payload.icon) {\n      graph.properties.icon = payload.icon;\n    }\n    if (payload.description) {\n      graph.properties.description = payload.description;\n    }\n\n    // Pass the project baseDir\n    graph.baseDir = this.transport.options.baseDir;\n\n    this.registerGraph(payload.id, graph, context, true);\n  }\n\n  registerGraph(id, graph, context = null, propagate = true) {\n    // Prepare the network\n    this.transport.network.initNetwork(graph, id, context, (err, network) => {\n      if (err) {\n        this.send('error', err, context);\n        return;\n      }\n\n      this.subscribeGraph(id, graph, context);\n\n      this.graphs[id] = graph;\n      this.sendAll('clear', {\n        id,\n        name: graph.name,\n        library: graph.properties.library,\n        main: graph.properties.main,\n        icon: graph.properties.icon,\n        description: graph.properties.description,\n      },\n      context);\n\n      if (!propagate) {\n        return;\n      }\n\n      const fullName = withNamespace(\n        id,\n        graph.properties.library || this.transport.options.namespace,\n      );\n      // Register for runtime exported ports\n      this.transport.runtime.registerNetwork(id, network);\n\n      if (id.indexOf('fixture.') === 0) {\n        // fbp-spec graph, skip propagation\n        return;\n      }\n\n      if (graph.name === 'main' || graph.properties.main) {\n        this.transport.runtime.setMainGraph(fullName, graph, context);\n      } else {\n        // Register to component loading\n        this.transport.component.registerGraph(fullName, graph, context);\n      }\n    });\n  }\n\n  subscribeGraph(id, graph, context) {\n    graph.on('addNode', (node) => {\n      this.sendAll('addnode', {\n        ...node,\n        graph: id,\n      }, context);\n    });\n    graph.on('removeNode', (node) => {\n      const nodeData = {\n        id: node.id,\n        graph: id,\n      };\n      this.sendAll('removenode', nodeData, context);\n    });\n    graph.on('renameNode', (oldId, newId) => this.sendAll('renamenode', {\n      from: oldId,\n      to: newId,\n      graph: id,\n    },\n    context));\n    graph.on('changeNode', (node) => this.sendAll('changenode', {\n      id: node.id,\n      metadata: node.metadata,\n      graph: id,\n    },\n    context));\n    graph.on('addEdge', (edge) => {\n      const edgeData = {\n        src: edge.from,\n        tgt: edge.to,\n        metadata: edge.metadata,\n        graph: id,\n      };\n      this.sendAll('addedge', edgeData, context);\n    });\n    graph.on('removeEdge', (edge) => {\n      const edgeData = {\n        src: edge.from,\n        tgt: edge.to,\n        graph: id,\n      };\n      this.sendAll('removeedge', edgeData, context);\n    });\n    graph.on('changeEdge', (edge) => {\n      const edgeData = {\n        src: edge.from,\n        tgt: edge.to,\n        metadata: edge.metadata,\n        graph: id,\n      };\n      this.sendAll('changeedge', edgeData, context);\n    });\n    graph.on('addInitial', (iip) => {\n      const iipData = {\n        src: iip.from,\n        tgt: iip.to,\n        metadata: iip.metadata,\n        graph: id,\n      };\n      this.sendAll('addinitial', iipData, context);\n    });\n    graph.on('removeInitial', (iip) => {\n      const iipData = {\n        src: iip.from,\n        tgt: iip.to,\n        graph: id,\n      };\n      this.sendAll('removeinitial', iipData, context);\n    });\n    graph.on('addGroup', (group) => {\n      const groupData = {\n        name: group.name,\n        nodes: group.nodes,\n        metadata: group.metadata,\n        graph: id,\n      };\n      this.sendAll('addgroup', groupData, context);\n    });\n    graph.on('removeGroup', (group) => {\n      const groupData = {\n        name: group.name,\n        graph: id,\n      };\n      this.sendAll('removegroup', groupData, context);\n    });\n    graph.on('renameGroup', (oldName, newName) => {\n      const groupData = {\n        from: oldName,\n        to: newName,\n        graph: id,\n      };\n      this.sendAll('renamegroup', groupData, context);\n    });\n    graph.on('changeGroup', (group) => {\n      const groupData = {\n        name: group.name,\n        metadata: group.metadata,\n        graph: id,\n      };\n      this.sendAll('changegroup', groupData, context);\n    });\n    graph.on('addInport', (publicName, port) => {\n      const data = {\n        public: publicName,\n        node: port.process,\n        port: port.port,\n        metadata: port.metadata,\n        graph: id,\n      };\n      this.sendAll('addinport', data, context);\n    });\n    graph.on('addOutport', (publicName, port) => {\n      const data = {\n        public: publicName,\n        node: port.process,\n        port: port.port,\n        metadata: port.metadata,\n        graph: id,\n      };\n      this.sendAll('addoutport', data, context);\n    });\n    graph.on('removeInport', (publicName) => {\n      const data = {\n        public: publicName,\n        graph: id,\n      };\n      this.sendAll('removeinport', data, context);\n    });\n    graph.on('removeOutport', (publicName) => {\n      const data = {\n        public: publicName,\n        graph: id,\n      };\n      this.sendAll('removeoutport', data, context);\n    });\n    graph.on('renameInport', (oldName, newName) => {\n      const data = {\n        from: oldName,\n        to: newName,\n        graph: id,\n      };\n      this.sendAll('renameinport', data, context);\n    });\n    graph.on('renameOutport', (oldName, newName) => {\n      const data = {\n        from: oldName,\n        to: newName,\n        graph: id,\n      };\n      this.sendAll('renameoutport', data, context);\n    });\n    return graph.on('endTransaction', () => this.emit('updated', {\n      name: id,\n      graph,\n    }));\n  }\n\n  addNode(graph, node, context) {\n    if (!node.id && !node.component) {\n      this.send('error', new Error('No ID or component supplied'), context);\n      return;\n    }\n    const network = this.transport.network.getNetwork(graph.properties.id);\n    if (network) {\n      // Live graph, add node via network instead\n      network.addNode(node, (err) => {\n        if (err) {\n          this.send('error', err, context);\n        }\n        // Acknowledgement will happen via Graph events\n      });\n      return;\n    }\n    graph.addNode(node.id, node.component, node.metadata);\n  }\n\n  removeNode(graph, payload, context) {\n    if (!payload.id) {\n      this.send('error', new Error('No ID supplied'), context);\n      return;\n    }\n    const network = this.transport.network.getNetwork(graph.properties.id);\n    if (network) {\n      // Live graph, remove node via network instead\n      network.removeNode(payload, (err) => {\n        if (err) {\n          this.send('error', err, context);\n        }\n        // Acknowledgement will happen via Graph events\n      });\n      return;\n    }\n    graph.removeNode(payload.id);\n  }\n\n  renameNode(graph, payload, context) {\n    if (!payload.from && !payload.to) {\n      this.send('error', new Error('No from or to supplied'), context);\n      return;\n    }\n    const network = this.transport.network.getNetwork(graph.properties.id);\n    if (network) {\n      // Live graph, rename node via network instead\n      network.renameNode(payload.from, payload.to, (err) => {\n        if (err) {\n          this.send('error', err, context);\n        }\n        // Acknowledgement will happen via Graph events\n      });\n      return;\n    }\n    graph.renameNode(payload.from, payload.to);\n  }\n\n  changeNode(graph, payload, context) {\n    if (!payload.id && !payload.metadata) {\n      this.send('error', new Error('No id or metadata supplied'), context);\n      return;\n    }\n    graph.setNodeMetadata(payload.id, payload.metadata);\n  }\n\n  addEdge(graph, edge, context) {\n    if (!edge.src && !edge.tgt) {\n      this.send('error', new Error('No src or tgt supplied'), context);\n      return;\n    }\n    const network = this.transport.network.getNetwork(graph.properties.id);\n    if (network) {\n      // Live graph, add edge via network instead\n      network.addEdge({\n        from: edge.src,\n        to: edge.tgt,\n        metadata: edge.metadata,\n      }, (err) => {\n        if (err) {\n          this.send('error', err, context);\n        }\n        // Acknowledgement will happen via Graph events\n      });\n      return;\n    }\n    if ((typeof edge.src.index === 'number') || (typeof edge.tgt.index === 'number')) {\n      if (graph.addEdgeIndex) {\n        graph.addEdgeIndex(\n          edge.src.node,\n          edge.src.port,\n          edge.src.index,\n          edge.tgt.node,\n          edge.tgt.port,\n          edge.tgt.index,\n          edge.metadata,\n        );\n        return;\n      }\n    }\n    graph.addEdge(edge.src.node, edge.src.port, edge.tgt.node, edge.tgt.port, edge.metadata);\n  }\n\n  removeEdge(graph, edge, context) {\n    if (!edge.src && !edge.tgt) {\n      this.send('error', new Error('No src or tgt supplied'), context);\n      return;\n    }\n    const network = this.transport.network.getNetwork(graph.properties.id);\n    if (network) {\n      // Live graph, remove edge via network instead\n      network.removeEdge({\n        from: edge.src,\n        to: edge.tgt,\n      }, (err) => {\n        if (err) {\n          this.send('error', err, context);\n        }\n        // Acknowledgement will happen via Graph events\n      });\n      return;\n    }\n    graph.removeEdge(edge.src.node, edge.src.port, edge.tgt.node, edge.tgt.port);\n  }\n\n  changeEdge(graph, edge, context) {\n    if (!edge.src && !edge.tgt) {\n      this.send('error', new Error('No src or tgt supplied'), context);\n      return;\n    }\n    graph.setEdgeMetadata(\n      edge.src.node,\n      edge.src.port,\n      edge.tgt.node,\n      edge.tgt.port,\n      edge.metadata,\n    );\n  }\n\n  addInitial(graph, payload, context) {\n    if (!payload.src && !payload.tgt) {\n      this.send('error', new Error('No src or tgt supplied'), context);\n      return;\n    }\n    const network = this.transport.network.getNetwork(graph.properties.id);\n    if (network) {\n      // Live graph, add IIP via network instead\n      network.addInitial({\n        from: payload.src,\n        to: payload.tgt,\n        metadata: payload.metadata,\n      }, (err) => {\n        if (err) {\n          this.send('error', err, context);\n        }\n        // Acknowledgement will happen via Graph events\n      });\n      return;\n    }\n    if (graph.addInitialIndex && (typeof payload.tgt.index === 'number')) {\n      graph.addInitialIndex(\n        payload.src.data,\n        payload.tgt.node,\n        payload.tgt.port,\n        payload.tgt.index,\n        payload.metadata,\n      );\n      return;\n    }\n    graph.addInitial(payload.src.data, payload.tgt.node, payload.tgt.port, payload.metadata);\n  }\n\n  removeInitial(graph, payload, context) {\n    if (!payload.tgt) {\n      this.send('error', new Error('No tgt supplied'), context);\n      return;\n    }\n    const network = this.transport.network.getNetwork(graph.properties.id);\n    if (network) {\n      // Live graph, remove IIP via network instead\n      network.removeInitial({\n        from: payload.src,\n        to: payload.tgt,\n        metadata: payload.metadata,\n      }, (err) => {\n        if (err) {\n          this.send('error', err, context);\n        }\n        // Acknowledgement will happen via Graph events\n      });\n      return;\n    }\n    graph.removeInitial(payload.tgt.node, payload.tgt.port);\n  }\n\n  addInport(graph, payload, context) {\n    if (!payload.public && !payload.node && !payload.port) {\n      this.send('error', new Error('Missing exported inport information'), context);\n      return;\n    }\n    graph.addInport(payload.public, payload.node, payload.port, payload.metadata);\n  }\n\n  removeInport(graph, payload, context) {\n    if (!payload.public) {\n      this.send('error', new Error('Missing exported inport name'), context);\n      return;\n    }\n    graph.removeInport(payload.public);\n  }\n\n  renameInport(graph, payload, context) {\n    if (!payload.from && !payload.to) {\n      this.send('error', new Error('No from or to supplied'), context);\n      return;\n    }\n    graph.renameInport(payload.from, payload.to);\n  }\n\n  addOutport(graph, payload, context) {\n    if (!payload.public && !payload.node && !payload.port) {\n      this.send('error', new Error('Missing exported outport information'), context);\n      return;\n    }\n    graph.addOutport(payload.public, payload.node, payload.port, payload.metadata);\n  }\n\n  removeOutport(graph, payload, context) {\n    if (!payload.public) {\n      this.send('error', new Error('Missing exported outport name'), context);\n      return;\n    }\n    graph.removeOutport(payload.public);\n  }\n\n  renameOutport(graph, payload, context) {\n    if (!payload.from && !payload.to) {\n      this.send('error', new Error('No from or to supplied'), context);\n      return;\n    }\n    graph.renameOutport(payload.from, payload.to);\n  }\n\n  addGroup(graph, payload, context) {\n    if (!payload.name && !payload.nodes && !payload.metadata) {\n      this.send('error', new Error('No name or nodes or metadata supplied'), context);\n      return;\n    }\n    graph.addGroup(payload.name, payload.nodes, payload.metadata);\n  }\n\n  removeGroup(graph, payload, context) {\n    if (!payload.name) {\n      this.send('error', new Error('No name supplied'), context);\n      return;\n    }\n    graph.removeGroup(payload.name);\n  }\n\n  renameGroup(graph, payload, context) {\n    if (!payload.from && !payload.to) {\n      this.send('error', new Error('No from or to supplied'), context);\n      return;\n    }\n    graph.renameGroup(payload.from, payload.to);\n  }\n\n  changeGroup(graph, payload, context) {\n    if (!payload.name && !payload.metadata) {\n      this.send('error', new Error('No name or metadata supplied'), context);\n      return;\n    }\n    graph.setEdgeMetadata(payload.name, payload.metadata);\n  }\n}\n\nmodule.exports = GraphProtocol;\n","const noflo = require('noflo');\nconst {\n  EventEmitter,\n} = require('events');\n\nfunction prepareSocketEvent(event, graphName) {\n  const payload = {\n    id: event.id,\n    graph: graphName,\n  };\n  if (event.socket.from) {\n    payload.src = {\n      node: event.socket.from.process.id,\n      port: event.socket.from.port,\n    };\n  }\n  if (event.socket.to) {\n    payload.tgt = {\n      node: event.socket.to.process.id,\n      port: event.socket.to.port,\n    };\n  }\n  if (event.subgraph) {\n    payload.subgraph = event.subgraph;\n  }\n  if (typeof event.group !== 'undefined') {\n    payload.group = event.group;\n  }\n  if (event.datatype) {\n    payload.type = event.datatype;\n  }\n  if (event.schema) {\n    payload.schema = event.schema;\n  }\n  payload.data = event.data;\n  if (typeof payload.data !== 'undefined') {\n    if (!noflo.isBrowser()) {\n      if (Buffer.isBuffer(payload.data)) {\n        // Make sure we're not trying to serialize the whole buffer to JSON\n        payload.data = payload.data.slice(0, 20);\n      }\n    }\n    if (payload.data != null ? payload.data.toJSON : undefined) {\n      payload.data = payload.data.toJSON();\n    }\n    if (payload.data != null ? payload.data.toString : undefined) {\n      payload.data = payload.data.toString();\n      if (payload.data === '[object Object]') {\n        try {\n          payload.data = JSON.parse(JSON.stringify(payload.data));\n        } catch (error) {\n          // Ignored\n        }\n      }\n    }\n\n    if (event.metadata != null ? event.metadata.secure : undefined) {\n      // Don't send actual payload for private connections\n      payload.data = 'DATA';\n    }\n  }\n\n  return payload;\n}\n\nconst getPortSignature = (item) => {\n  if (!item) { return ''; }\n  return `${item.process}(${item.port})`;\n};\n\nconst getEdgeSignature = (edge) => `${getPortSignature(edge.src)} -> ${getPortSignature(edge.tgt)}`;\n\nconst getConnectionSignature = (connection) => {\n  if (!connection) { return ''; }\n  return `${connection.process.id}(${connection.port})`;\n};\n\nconst getSocketSignature = (socket) => `${getConnectionSignature(socket.from)} -> ${getConnectionSignature(socket.to)}`;\n\nclass NetworkProtocol extends EventEmitter {\n  constructor(transport) {\n    super();\n    this.transport = transport;\n    this.networks = {};\n  }\n\n  send(topic, payload, context) {\n    return this.transport.send('network', topic, payload, context);\n  }\n\n  sendAll(topic, payload) {\n    return this.transport.sendAll('network', topic, payload);\n  }\n\n  receive(topic, payload, context) {\n    const graph = this.resolveGraph(payload, context);\n    if (!graph) { return; }\n    switch (topic) {\n      case 'start':\n        this.startNetwork(graph, payload, context); break;\n      case 'stop':\n        this.stopNetwork(graph, payload, context); break;\n      case 'edges':\n        this.updateEdgesFilter(graph, payload, context); break;\n      case 'debug':\n        this.debugNetwork(graph, payload, context); break;\n      case 'getstatus':\n        this.getStatus(graph, payload, context); break;\n      default: this.send('error', new Error(`network:${topic} not supported`), context);\n    }\n  }\n\n  resolveGraph(payload, context) {\n    if (!payload.graph) {\n      this.send('error', new Error('No graph specified'), context);\n      return null;\n    }\n    if (!this.transport.graph.graphs[payload.graph]) {\n      this.send('error', new Error('Requested graph not found'), context);\n      return null;\n    }\n    return this.transport.graph.graphs[payload.graph];\n  }\n\n  getNetwork(graphName) {\n    if (!this.networks[graphName]) {\n      return null;\n    }\n    if (!this.networks[graphName].network) {\n      return null;\n    }\n    return this.networks[graphName].network;\n  }\n\n  updateEdgesFilter(graph, payload, context) {\n    let network = this.networks[payload.graph];\n    if (network) {\n      network.filters = {};\n    } else {\n      network = {\n        network: null,\n        filters: {},\n      };\n      this.networks[payload.graph] = network;\n    }\n\n    payload.edges.forEach((edge) => {\n      const signature = getEdgeSignature(edge);\n      network.filters[signature] = true;\n    });\n    this.send('edges', {\n      graph: payload.graph,\n      edges: payload.edges,\n    },\n    context);\n  }\n\n  eventFiltered(graph, event) {\n    if (!this.transport.options.filterData) { return true; }\n    const sign = getSocketSignature(event.socket);\n    return this.networks[graph].filters[sign];\n  }\n\n  initNetwork(graph, graphName, context, callback) {\n    // Ensure we stop previous network\n    const existingNetwork = this.getNetwork(graphName);\n    if (existingNetwork) {\n      existingNetwork.stop((err) => {\n        if (err) {\n          callback(err);\n          return;\n        }\n        delete this.networks[graphName].network;\n        this.emit('removenetwork', existingNetwork, graphName, this.networks);\n        this.initNetwork(graph, graphName, context, callback);\n      });\n      return;\n    }\n\n    const g = graph;\n    g.componentLoader = this.transport.component.getLoader(graph.baseDir, this.transport.options);\n    const opts = JSON.parse(JSON.stringify(this.transport.options));\n    opts.delay = true;\n    noflo.createNetwork(g, {\n      subscribeGraph: false,\n      delay: true,\n    }, (err, network) => {\n      if (err) {\n        callback(err);\n        return;\n      }\n      if (this.networks[graphName] && this.networks[graphName].network) {\n        this.networks[graphName].network = network;\n      } else {\n        this.networks[graphName] = {\n          network,\n          filters: {},\n        };\n      }\n\n      this.emit('addnetwork', network, graphName, this.networks);\n      this.subscribeNetwork(network, graphName, context);\n\n      // Wire up the network\n      network.connect((connectError) => {\n        if (connectError) {\n          callback(connectError);\n          return;\n        }\n        callback(null, network);\n      });\n    },\n    opts);\n  }\n\n  subscribeNetwork(network, graphName, context) {\n    network.on('start', (event) => this.sendAll('started', {\n      time: event.start,\n      graph: graphName,\n      running: network.isRunning(),\n      started: network.isStarted(),\n    },\n    context));\n    network.on('end', (event) => {\n      this.sendAll('stopped', {\n        time: new Date(),\n        uptime: event.uptime,\n        graph: graphName,\n        running: network.isRunning(),\n        started: network.isStarted(),\n      }, context);\n    });\n    network.on('icon', (event) => {\n      this.sendAll('icon', {\n        ...event,\n        graph: graphName,\n      }, context);\n    });\n    network.on('ip', (event) => {\n      if (!this.eventFiltered(graphName, event)) { return; }\n      const protocolEvent = {\n        id: event.id,\n        socket: event.socket,\n        subgraph: event.subgraph,\n        metadata: event.metadata,\n      };\n      switch (event.type) {\n        case 'openBracket': {\n          protocolEvent.type = 'begingroup';\n          protocolEvent.group = event.data || '';\n          break;\n        }\n        case 'data': {\n          protocolEvent.type = 'data';\n          protocolEvent.data = event.data;\n          protocolEvent.datatype = event.datatype;\n          protocolEvent.schema = event.schema;\n          break;\n        }\n        case 'closeBracket': {\n          protocolEvent.type = 'endgroup';\n          protocolEvent.group = event.data || '';\n          break;\n        }\n        default: {\n          // Ignored for now\n        }\n      }\n      this.sendAll(protocolEvent.type, prepareSocketEvent(protocolEvent, graphName), context);\n    });\n    network.on('process-error', (event) => {\n      let error = event.error.message;\n      // If we can get a backtrace, send 3 levels\n      if (event.error.stack) {\n        const bt = event.error.stack.split('\\n');\n        const lines = bt.slice(0, 3);\n        lines.forEach((line) => {\n          error += `\\n${line}`;\n        });\n      }\n      this.sendAll('processerror', {\n        id: event.id,\n        error,\n        graph: graphName,\n      },\n      context);\n    });\n  }\n\n  _startNetwork(graph, graphName, context, callback) {\n    const existingNetwork = this.getNetwork(graphName);\n    if (existingNetwork) {\n      // already initialized\n      existingNetwork.start((startError) => {\n        if (startError) {\n          callback(startError);\n          return;\n        }\n        callback(null, existingNetwork);\n      });\n      return;\n    }\n\n    this.initNetwork(graph, graphName, context, (err) => {\n      if (err) {\n        callback(err);\n        return;\n      }\n      const network = this.getNetwork(graphName);\n      network.start((startError) => {\n        if (startError) {\n          callback(startError);\n          return;\n        }\n        callback(null, network);\n      });\n    });\n  }\n\n  startNetwork(graph, payload, context) {\n    this._startNetwork(graph, payload.graph, context, (err) => {\n      if (err) {\n        this.send('error', err, context);\n      }\n    });\n  }\n\n  stopNetwork(graph, payload, context) {\n    const net = this.getNetwork(payload.graph);\n    if (!net) {\n      this.send('error', new Error(`Network ${payload.graph} not found`), context);\n      return;\n    }\n    if (net.isStarted()) {\n      this.networks[payload.graph].network.stop((err) => {\n        if (err) {\n          this.send('error', err, context);\n          return;\n        }\n        this.send('stopped', {\n          time: new Date(),\n          graph: payload.graph,\n          running: net.isRunning(),\n          started: net.isStarted(),\n        },\n        context);\n      });\n      return;\n    }\n    // Was already stopped, just send the confirmation\n    this.send('stopped', {\n      time: new Date(),\n      graph: payload.graph,\n      running: net.isRunning(),\n      started: net.isStarted(),\n    },\n    context);\n  }\n\n  debugNetwork(graph, payload, context) {\n    const net = this.getNetwork(payload.graph);\n    if (!net) {\n      this.send('error', new Error(`Network ${payload.graph} not found`), context);\n      return;\n    }\n    net.setDebug(payload.enable);\n    this.send('setdebug', {\n      enable: payload.enable,\n    });\n  }\n\n  getStatus(graph, payload, context) {\n    const net = this.getNetwork(payload.graph);\n    if (!net) {\n      this.send('error', new Error(`Network ${payload.graph} not found`), context);\n      return;\n    }\n    this.send('status', {\n      graph: payload.graph,\n      running: net.isRunning(),\n      started: net.isStarted(),\n    },\n    context);\n  }\n}\n\nmodule.exports = NetworkProtocol;\n","/* eslint class-methods-use-this: [\"error\", { \"exceptMethods\": [\"processPort\"] }] */\nconst noflo = require('noflo');\nconst debounce = require('debounce');\nconst {\n  EventEmitter,\n} = require('events');\nconst { parseName } = require('../utils');\n\nclass ComponentProtocol extends EventEmitter {\n  static initClass() {\n    this.prototype.loaders = {};\n  }\n\n  constructor(transport) {\n    super();\n    this.transport = transport;\n  }\n\n  send(topic, payload, context) {\n    return this.transport.send('component', topic, payload, context);\n  }\n\n  receive(topic, payload, context) {\n    switch (topic) {\n      case 'list': return this.listComponents(payload, context);\n      case 'getsource': return this.getSource(payload, context);\n      case 'source': return this.setSource(payload, context);\n      default: return this.send('error', new Error(`component:${topic} not supported`), context);\n    }\n  }\n\n  getLoader(baseDir, options = {}) {\n    if (!this.loaders[baseDir]) {\n      this.loaders[baseDir] = new noflo.ComponentLoader(baseDir, options);\n    }\n\n    return this.loaders[baseDir];\n  }\n\n  listComponents(payload, context) {\n    const {\n      baseDir,\n    } = this.transport.options;\n    const loader = this.getLoader(baseDir, this.transport.options);\n    return loader.listComponents((err, components) => {\n      if (err) {\n        this.send('error', err, context);\n        return;\n      }\n      const componentNames = Object.keys(components);\n      let processed = 0;\n      componentNames.forEach((component) => {\n        this.processComponent(loader, component, context, (error) => {\n          if (error) {\n            this.send('error', error, context);\n            processed += 1;\n            return;\n          }\n          processed += 1;\n          if (processed < componentNames.length) { return; }\n          this.send('componentsready', processed, context);\n        });\n      });\n    });\n  }\n\n  getSource(payload, context) {\n    const {\n      baseDir,\n    } = this.transport.options;\n    const loader = this.getLoader(baseDir, this.transport.options);\n    return loader.getSource(payload.name, (err, component) => {\n      if (err) {\n        // Try one of the registered graphs\n        const nameParts = parseName(payload.name);\n        const graph = this.transport.graph.graphs[payload.name]\n          || this.transport.graph.graphs[nameParts.name];\n        if (graph == null) {\n          this.send('error', err, context);\n          return;\n        }\n\n        this.send('source', {\n          name: nameParts.name,\n          library: nameParts.library,\n          code: JSON.stringify(graph.toJSON()),\n          language: 'json',\n        },\n        context);\n        return;\n      }\n      this.send('source', component, context);\n    });\n  }\n\n  setSource(payload, context) {\n    const {\n      baseDir,\n    } = this.transport.options;\n    const loader = this.getLoader(baseDir, this.transport.options);\n    loader.setSource(payload.library, payload.name, payload.code, payload.language, (err) => {\n      if (err) {\n        this.send('error', err, context);\n        return;\n      }\n      this.emit('updated', {\n        name: payload.name,\n        library: payload.library,\n        code: payload.code,\n        tests: payload.tests,\n        language: payload.language,\n      });\n      this.processComponent(loader, loader.normalizeName(payload.library, payload.name), context);\n    });\n  }\n\n  processComponent(loader, component, context, callback = () => {}) {\n    return loader.load(component, (err, instance) => {\n      if (err) {\n        this.send('error', err, context);\n        callback(err);\n        return;\n      }\n      const { library, name: componentName } = parseName(component);\n      // Ensure graphs are not run automatically when just querying their ports\n      if (!instance.isReady()) {\n        instance.once('ready', () => {\n          if (instance.isSubgraph()\n            && library === this.transport.options.namespace\n            && !this.transport.graph.graphs[componentName]) {\n            // Register subgraph also to the graph protocol handler\n            this.transport.graph.registerGraph(component, instance.network.graph, null, false);\n          }\n          this.sendComponent(component, instance, context);\n          callback(null);\n        });\n        return;\n      }\n      if (instance.isSubgraph()\n        && library === this.transport.options.namespace\n        && !this.transport.graph.graphs[component]) {\n        // Register subgraph also to the graph protocol handler\n        this.transport.graph.registerGraph(component, instance.network.graph, null, false);\n      }\n      this.sendComponent(component, instance, context);\n      callback(null);\n    },\n    true);\n  }\n\n  processPort(portName, port) {\n    // Required port properties\n    const portDef = {\n      id: portName,\n      type: port.getDataType ? port.getDataType() : 'all',\n    };\n    if (typeof port.getSchema === 'function' ? port.getSchema() : undefined) {\n      portDef.schema = port.getSchema();\n    }\n    if (port.isRequired) {\n      portDef.required = port.isRequired();\n    }\n    if (port.isAddressable) {\n      portDef.addressable = port.isAddressable();\n    }\n    if (port.getDescription) {\n      portDef.description = port.getDescription();\n    }\n    if (port.options != null ? port.options.values : undefined) {\n      portDef.values = port.options.values;\n    }\n    if (typeof port.hasDefault === 'function' ? port.hasDefault() : undefined) {\n      portDef.default = port.options.default;\n    }\n    return portDef;\n  }\n\n  sendComponent(component, instance, context) {\n    const inPorts = [];\n    const outPorts = [];\n    Object.keys(instance.inPorts).forEach((portName) => {\n      const port = instance.inPorts[portName];\n      if (!port || (typeof port === 'function') || !port.canAttach) { return; }\n      inPorts.push(this.processPort(portName, port));\n    });\n    Object.keys(instance.outPorts).forEach((portName) => {\n      const port = instance.outPorts[portName];\n      if (!port || (typeof port === 'function') || !port.canAttach) { return; }\n      outPorts.push(this.processPort(portName, port));\n    });\n\n    const icon = instance.getIcon ? instance.getIcon() : 'gear';\n\n    this.send('component', {\n      name: component,\n      description: instance.description,\n      subgraph: instance.isSubgraph(),\n      icon,\n      inPorts,\n      outPorts,\n    },\n    context);\n  }\n\n  registerGraph(id, graph, context) {\n    const loader = this.getLoader(graph.baseDir, this.transport.options);\n    const sender = () => this.processComponent(loader, id, context);\n    const send = debounce(sender, 10);\n    loader.listComponents((err) => {\n      if (err) {\n        this.send('error', err, context);\n        return;\n      }\n      const { library, name } = parseName(id);\n      loader.registerComponent(library, name, graph);\n      // Send initial graph info back to client\n      send();\n    });\n\n    // Send graph info again every time it changes so we get the updated ports\n    graph.on('addNode', send);\n    graph.on('removeNode', send);\n    graph.on('renameNode', send);\n    graph.on('addEdge', send);\n    graph.on('removeEdge', send);\n    graph.on('addInitial', send);\n    graph.on('removeInitial', send);\n    graph.on('addInport', send);\n    graph.on('removeInport', send);\n    graph.on('renameInport', send);\n    graph.on('addOutport', send);\n    graph.on('removeOutport', send);\n    graph.on('renameOutport', send);\n  }\n}\nComponentProtocol.initClass();\n\nmodule.exports = ComponentProtocol;\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","/* eslint class-methods-use-this: [\"error\", { \"exceptMethods\": [\"detach\"] }] */\nconst noflo = require('noflo');\nconst debug = require('debug')('noflo-runtime-base:trace');\nconst TraceBuffer = require('./TraceBuffer');\n\nlet jsonStringify = JSON.stringify;\ntry {\n  // eslint-disable-next-line global-require\n  jsonStringify = require('json-stringify-safe');\n} catch (error) {\n  debug(`WARN: failed to load json-stringify-safe, circular objects may cause fail.\\n${error.message}`);\n}\n\nfunction clone(obj) {\n  const s = jsonStringify(obj);\n  return JSON.parse(s);\n}\n\nfunction subscribeExportedOutports(network, networkId, eventNames, subscribeFunc) {\n  const graphSockets = {};\n\n  // Basically same as code in runtime:data protocol handling\n  Object.keys(network.graph.outports).forEach((pub) => {\n    const internal = network.graph.outports[pub];\n    const socket = noflo.internalSocket.createSocket();\n    graphSockets[pub] = socket;\n    const {\n      component,\n    } = network.processes[internal.process];\n    component.outPorts[internal.port].attach(socket);\n    const sendFunc = (event) => (function (payload) {\n      const data = {\n        id: `EXPORT: ${networkId} ${pub.toUpperCase()} ->`, // just for debugging\n        payload,\n        socket: {\n          to: {\n            process: { id: networkId },\n            port: pub,\n          },\n        },\n      };\n      return subscribeFunc(event, data);\n    });\n\n    eventNames.forEach((event) => {\n      socket.on(event, sendFunc(event));\n    });\n  });\n  return graphSockets;\n}\n\n// Convert to flowtrace/FBP-protocol format http://noflojs.org/documentation/protocol/\nfunction networkToTraceEvent(networkId, type, data) {\n  debug('event', networkId, type, `'${data.id}'`);\n  const {\n    socket,\n  } = data;\n\n  // XXX: wasteful to have the network thing in each event?\n  const event = {\n    protocol: 'network',\n    command: type,\n    payload: {\n      time: new Date().toISOString(),\n      graph: networkId,\n      error: null, // used to indicate tracing errors\n      src: {\n        node: (socket.from != null ? socket.from.process.id : undefined),\n        port: (socket.from != null ? socket.from.port : undefined),\n      },\n      tgt: {\n        node: (socket.to != null ? socket.to.process.id : undefined),\n        port: (socket.to != null ? socket.to.port : undefined),\n      },\n      id: undefined, // deprecated\n      subgraph: undefined,\n    }, // TODO: implement\n  };\n\n  const serializeGroup = function (p) {\n    const serialized = p;\n    try {\n      serialized.group = data.group.toString();\n    } catch (e) {\n      debug('group serialization error', e);\n      serialized.error = e.message;\n    }\n  };\n\n  const p = event.payload;\n  switch (type) {\n    case 'connect': break;\n    case 'disconnect': break;\n    case 'begingroup': serializeGroup(event.payload); break;\n    case 'endgroup': serializeGroup(event.payload); break;\n    case 'data':\n      try {\n        p.data = clone(data.data);\n      } catch (error1) {\n        debug('data serialization error', error1);\n        p.error = error1.message;\n      }\n      break;\n    default:\n      throw new Error(`trace: Unknown event type ${type}`);\n  }\n\n  debug('event done', networkId, type, `'${data.id}'`);\n  return event;\n}\n\n// Can be attached() to a NoFlo network, and keeps a circular buffer of events\n// which can be persisted on request\nclass Tracer {\n  constructor(options) {\n    this.options = options;\n    this.buffer = new TraceBuffer();\n    this.header = { graphs: {} };\n  }\n\n  attach(network) {\n    // FIXME: graphs loaded from .fbp don't have name.\n    // Should default to basename of file, and be configurable\n    const netId = network.graph.name || network.graph.properties.name || 'default';\n    debug('attach', netId);\n    const eventNames = [\n      'connect',\n      'begingroup',\n      'data',\n      'endgroup',\n      'disconnect',\n    ];\n    // internal network events\n    eventNames.forEach((event) => network.on(event, (data) => {\n      const payload = networkToTraceEvent(netId, event, data);\n      return this.buffer.add(payload);\n    }));\n    // exported outport\n    subscribeExportedOutports(network, netId, eventNames, (event, data) => {\n      const payload = networkToTraceEvent(netId, event, data);\n      return this.buffer.add(payload);\n    });\n\n    this.header.graphs[netId] = network.graph.toJSON();\n  }\n\n  detach() {\n    // TODO: implement\n  }\n\n  // Serialize current content of buffer\n  dumpString(callback) {\n    const events = [];\n    const consume = (e) => events.push(e);\n    return this.buffer.getAll(consume, (err) => {\n      const trace = {\n        header: this.header,\n        events,\n      };\n      return callback(err, JSON.stringify(trace, null, 2));\n    });\n  }\n\n  // node.js only\n  dumpFile(filepath, callback) {\n    // eslint-disable-next-line global-require\n    const fs = require('fs');\n    // eslint-disable-next-line global-require\n    const temp = require('temp');\n\n    let openFile = (cb) => fs.open(filepath, 'w', (err, fd) => cb(err, { path: filepath, fd }));\n    if (!filepath) {\n      openFile = (cb) => temp.open({ suffix: '.json' }, cb);\n    }\n\n    return openFile((err, info) => {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      // HACKY json streaming serialization\n      let events = 0;\n      const write = (data, cb) => fs.write(info.fd, data, { encoding: 'utf-8' }, cb);\n      const writeEvent = function (e) {\n        let s = events ? ',' : '';\n        events += 1;\n        s += JSON.stringify(e, null, 2);\n        write(s, () => {});\n      };\n      // FIXME: handle, wait\n\n      debug('streaming to file', info.path);\n      const header = JSON.stringify(this.header, null, 2);\n      write(`{\\n \"header\": ${header}\\n, \"events\":\\n[`, (err1) => {\n        if (err1) {\n          callback(err1);\n          return;\n        }\n        this.buffer.getAll(writeEvent, (err2) => {\n          if (err2) {\n            callback(err2);\n            return;\n          }\n          debug(`streamed ${events} events`);\n          write(']\\n }', (err3) => {\n            debug('completed stream', info.path);\n            callback(err3, info.path);\n          });\n        });\n      });\n    });\n  }\n}\n\nmodule.exports.Tracer = Tracer;\n","class TraceBuffer {\n  constructor() {\n    this.events = []; // PERF: use a linked-list variety instead\n  }\n\n  add(event) {\n    // FIXME: respect a (configurable) limit on size https://github.com/noflo/noflo-runtime-base/issues/34\n    this.events.push(event);\n  }\n\n  getAll(consumeFunc, doneFunc) {\n    this.events.forEach((e) => {\n      consumeFunc(e);\n    });\n    doneFunc(null);\n  }\n}\n\nmodule.exports = TraceBuffer;\n","exports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n","var fs   = require('fs'),\n    path = require('path'),\n    cnst = require('constants');\n\nvar rimraf     = require('rimraf'),\n    os         = require('os'),\n    rimrafSync = rimraf.sync;\n\n/* HELPERS */\n\nvar dir = path.resolve(os.tmpdir());\n\nvar RDWR_EXCL = cnst.O_CREAT | cnst.O_TRUNC | cnst.O_RDWR | cnst.O_EXCL;\n\nvar promisify = function(callback) {\n  if (typeof callback === 'function') {\n    return [undefined, callback];\n  }\n\n  var promiseCallback;\n  var promise = new Promise(function(resolve, reject) {\n    promiseCallback = function() {\n      var args = Array.from(arguments);\n      var err = args.shift();\n\n      process.nextTick(function() {\n        if (err) {\n          reject(err);\n        } else if (args.length === 1) {\n          resolve(args[0]);\n        } else {\n          resolve(args);\n        }\n      });\n    };\n  });\n\n  return [promise, promiseCallback];\n};\n\nvar generateName = function(rawAffixes, defaultPrefix) {\n  var affixes = parseAffixes(rawAffixes, defaultPrefix);\n  var now = new Date();\n  var name = [affixes.prefix,\n              now.getFullYear(), now.getMonth(), now.getDate(),\n              '-',\n              process.pid,\n              '-',\n              (Math.random() * 0x100000000 + 1).toString(36),\n              affixes.suffix].join('');\n  return path.join(affixes.dir || dir, name);\n};\n\nvar parseAffixes = function(rawAffixes, defaultPrefix) {\n  var affixes = {prefix: null, suffix: null};\n  if(rawAffixes) {\n    switch (typeof(rawAffixes)) {\n    case 'string':\n      affixes.prefix = rawAffixes;\n      break;\n    case 'object':\n      affixes = rawAffixes;\n      break;\n    default:\n      throw new Error(\"Unknown affix declaration: \" + affixes);\n    }\n  } else {\n    affixes.prefix = defaultPrefix;\n  }\n  return affixes;\n};\n\n/* -------------------------------------------------------------------------\n * Don't forget to call track() if you want file tracking and exit handlers!\n * -------------------------------------------------------------------------\n * When any temp file or directory is created, it is added to filesToDelete\n * or dirsToDelete. The first time any temp file is created, a listener is\n * added to remove all temp files and directories at exit.\n */\nvar tracking = false;\nvar track = function(value) {\n  tracking = (value !== false);\n  return module.exports; // chainable\n};\nvar exitListenerAttached = false;\nvar filesToDelete = [];\nvar dirsToDelete = [];\n\nfunction deleteFileOnExit(filePath) {\n  if (!tracking) return false;\n  attachExitListener();\n  filesToDelete.push(filePath);\n}\n\nfunction deleteDirOnExit(dirPath) {\n  if (!tracking) return false;\n  attachExitListener();\n  dirsToDelete.push(dirPath);\n}\n\nfunction attachExitListener() {\n  if (!tracking) return false;\n  if (!exitListenerAttached) {\n    process.addListener('exit', cleanupSync);\n    exitListenerAttached = true;\n  }\n}\n\nfunction cleanupFilesSync() {\n  if (!tracking) {\n    return false;\n  }\n  var count = 0;\n  var toDelete;\n  while ((toDelete = filesToDelete.shift()) !== undefined) {\n    rimrafSync(toDelete);\n    count++;\n  }\n  return count;\n}\n\nfunction cleanupFiles(callback) {\n  var p = promisify(callback);\n  var promise = p[0];\n  callback = p[1];\n\n  if (!tracking) {\n    callback(new Error(\"not tracking\"));\n    return promise;\n  }\n  var count = 0;\n  var left = filesToDelete.length;\n  if (!left) {\n    callback(null, count);\n    return promise;\n  }\n  var toDelete;\n  var rimrafCallback = function(err) {\n    if (!left) {\n      // Prevent processing if aborted\n      return;\n    }\n    if (err) {\n      // This shouldn't happen; pass error to callback and abort\n      // processing\n      callback(err);\n      left = 0;\n      return;\n    } else {\n      count++;\n    }\n    left--;\n    if (!left) {\n      callback(null, count);\n    }\n  };\n  while ((toDelete = filesToDelete.shift()) !== undefined) {\n    rimraf(toDelete, rimrafCallback);\n  }\n  return promise;\n}\n\nfunction cleanupDirsSync() {\n  if (!tracking) {\n    return false;\n  }\n  var count = 0;\n  var toDelete;\n  while ((toDelete = dirsToDelete.shift()) !== undefined) {\n    rimrafSync(toDelete);\n    count++;\n  }\n  return count;\n}\n\nfunction cleanupDirs(callback) {\n  var p = promisify(callback);\n  var promise = p[0];\n  callback = p[1];\n\n  if (!tracking) {\n    callback(new Error(\"not tracking\"));\n    return promise;\n  }\n  var count = 0;\n  var left = dirsToDelete.length;\n  if (!left) {\n    callback(null, count);\n    return promise;\n  }\n  var toDelete;\n  var rimrafCallback = function (err) {\n    if (!left) {\n      // Prevent processing if aborted\n      return;\n    }\n    if (err) {\n      // rimraf handles most \"normal\" errors; pass the error to the\n      // callback and abort processing\n      callback(err, count);\n      left = 0;\n      return;\n    } else {\n      count++;\n    }\n    left--;\n    if (!left) {\n      callback(null, count);\n    }\n  };\n  while ((toDelete = dirsToDelete.shift()) !== undefined) {\n    rimraf(toDelete, rimrafCallback);\n  }\n  return promise;\n}\n\nfunction cleanupSync() {\n  if (!tracking) {\n    return false;\n  }\n  var fileCount = cleanupFilesSync();\n  var dirCount  = cleanupDirsSync();\n  return {files: fileCount, dirs: dirCount};\n}\n\nfunction cleanup(callback) {\n  var p = promisify(callback);\n  var promise = p[0];\n  callback = p[1];\n\n  if (!tracking) {\n    callback(new Error(\"not tracking\"));\n    return promise;\n  }\n  cleanupFiles(function(fileErr, fileCount) {\n    if (fileErr) {\n      callback(fileErr, {files: fileCount});\n    } else {\n      cleanupDirs(function(dirErr, dirCount) {\n        callback(dirErr, {files: fileCount, dirs: dirCount});\n      });\n    }\n  });\n  return promise;\n}\n\n/* DIRECTORIES */\n\nfunction mkdir(affixes, callback) {\n  var p = promisify(callback);\n  var promise = p[0];\n  callback = p[1];\n\n  var dirPath = generateName(affixes, 'd-');\n  fs.mkdir(dirPath, parseInt('0700', 8), function(err) {\n    if (!err) {\n      deleteDirOnExit(dirPath);\n    }\n    callback(err, dirPath);\n  });\n  return promise;\n}\n\nfunction mkdirSync(affixes) {\n  var dirPath = generateName(affixes, 'd-');\n  fs.mkdirSync(dirPath, parseInt('0700', 8));\n  deleteDirOnExit(dirPath);\n  return dirPath;\n}\n\n/* FILES */\n\nfunction open(affixes, callback) {\n  var p = promisify(callback);\n  var promise = p[0];\n  callback = p[1];\n\n  var filePath = generateName(affixes, 'f-');\n  fs.open(filePath, RDWR_EXCL, parseInt('0600', 8), function(err, fd) {\n    if (!err) {\n      deleteFileOnExit(filePath);\n    }\n    callback(err, {path: filePath, fd: fd});\n  });\n  return promise;\n}\n\nfunction openSync(affixes) {\n  var filePath = generateName(affixes, 'f-');\n  var fd = fs.openSync(filePath, RDWR_EXCL, parseInt('0600', 8));\n  deleteFileOnExit(filePath);\n  return {path: filePath, fd: fd};\n}\n\nfunction createWriteStream(affixes) {\n  var filePath = generateName(affixes, 's-');\n  var stream = fs.createWriteStream(filePath, {flags: RDWR_EXCL, mode: parseInt('0600', 8)});\n  deleteFileOnExit(filePath);\n  return stream;\n}\n\n/* EXPORTS */\n// Settings\nexports.dir               = dir;\nexports.track             = track;\n// Functions\nexports.mkdir             = mkdir;\nexports.mkdirSync         = mkdirSync;\nexports.open              = open;\nexports.openSync          = openSync;\nexports.path              = generateName;\nexports.cleanup           = cleanup;\nexports.cleanupSync       = cleanupSync;\nexports.createWriteStream = createWriteStream;\n","module.exports = rimraf\nrimraf.sync = rimrafSync\n\nvar assert = require(\"assert\")\nvar path = require(\"path\")\nvar fs = require(\"fs\")\nvar glob = require(\"glob\")\nvar _0666 = parseInt('666', 8)\n\nvar defaultGlobOpts = {\n  nosort: true,\n  silent: true\n}\n\n// for EMFILE handling\nvar timeout = 0\n\nvar isWindows = (process.platform === \"win32\")\n\nfunction defaults (options) {\n  var methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(function(m) {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n  options.emfileWait = options.emfileWait || 1000\n  if (options.glob === false) {\n    options.disableGlob = true\n  }\n  options.disableGlob = options.disableGlob || false\n  options.glob = options.glob || defaultGlobOpts\n}\n\nfunction rimraf (p, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert.equal(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  var busyTries = 0\n  var errState = null\n  var n = 0\n\n  if (options.disableGlob || !glob.hasMagic(p))\n    return afterGlob(null, [p])\n\n  options.lstat(p, function (er, stat) {\n    if (!er)\n      return afterGlob(null, [p])\n\n    glob(p, options.glob, afterGlob)\n  })\n\n  function next (er) {\n    errState = errState || er\n    if (--n === 0)\n      cb(errState)\n  }\n\n  function afterGlob (er, results) {\n    if (er)\n      return cb(er)\n\n    n = results.length\n    if (n === 0)\n      return cb()\n\n    results.forEach(function (p) {\n      rimraf_(p, options, function CB (er) {\n        if (er) {\n          if ((er.code === \"EBUSY\" || er.code === \"ENOTEMPTY\" || er.code === \"EPERM\") &&\n              busyTries < options.maxBusyTries) {\n            busyTries ++\n            var time = busyTries * 100\n            // try again, with the same exact callback as this one.\n            return setTimeout(function () {\n              rimraf_(p, options, CB)\n            }, time)\n          }\n\n          // this one won't happen if graceful-fs is used.\n          if (er.code === \"EMFILE\" && timeout < options.emfileWait) {\n            return setTimeout(function () {\n              rimraf_(p, options, CB)\n            }, timeout ++)\n          }\n\n          // already gone\n          if (er.code === \"ENOENT\") er = null\n        }\n\n        timeout = 0\n        next(er)\n      })\n    })\n  }\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, function (er, st) {\n    if (er && er.code === \"ENOENT\")\n      return cb(null)\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === \"EPERM\" && isWindows)\n      fixWinEPERM(p, options, er, cb)\n\n    if (st && st.isDirectory())\n      return rmdir(p, options, er, cb)\n\n    options.unlink(p, function (er) {\n      if (er) {\n        if (er.code === \"ENOENT\")\n          return cb(null)\n        if (er.code === \"EPERM\")\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        if (er.code === \"EISDIR\")\n          return rmdir(p, options, er, cb)\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n  if (er)\n    assert(er instanceof Error)\n\n  options.chmod(p, _0666, function (er2) {\n    if (er2)\n      cb(er2.code === \"ENOENT\" ? null : er)\n    else\n      options.stat(p, function(er3, stats) {\n        if (er3)\n          cb(er3.code === \"ENOENT\" ? null : er)\n        else if (stats.isDirectory())\n          rmdir(p, options, er, cb)\n        else\n          options.unlink(p, cb)\n      })\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  assert(p)\n  assert(options)\n  if (er)\n    assert(er instanceof Error)\n\n  try {\n    options.chmodSync(p, _0666)\n  } catch (er2) {\n    if (er2.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  try {\n    var stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  if (stats.isDirectory())\n    rmdirSync(p, options, er)\n  else\n    options.unlinkSync(p)\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  if (originalEr)\n    assert(originalEr instanceof Error)\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, function (er) {\n    if (er && (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\"))\n      rmkids(p, options, cb)\n    else if (er && er.code === \"ENOTDIR\")\n      cb(originalEr)\n    else\n      cb(er)\n  })\n}\n\nfunction rmkids(p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, function (er, files) {\n    if (er)\n      return cb(er)\n    var n = files.length\n    if (n === 0)\n      return options.rmdir(p, cb)\n    var errState\n    files.forEach(function (f) {\n      rimraf(path.join(p, f), options, function (er) {\n        if (errState)\n          return\n        if (er)\n          return cb(errState = er)\n        if (--n === 0)\n          options.rmdir(p, cb)\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  var results\n\n  if (options.disableGlob || !glob.hasMagic(p)) {\n    results = [p]\n  } else {\n    try {\n      options.lstatSync(p)\n      results = [p]\n    } catch (er) {\n      results = glob.sync(p, options.glob)\n    }\n  }\n\n  if (!results.length)\n    return\n\n  for (var i = 0; i < results.length; i++) {\n    var p = results[i]\n\n    try {\n      var st = options.lstatSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n\n      // Windows can EPERM on stat.  Life is suffering.\n      if (er.code === \"EPERM\" && isWindows)\n        fixWinEPERMSync(p, options, er)\n    }\n\n    try {\n      // sunos lets the root user unlink directories, which is... weird.\n      if (st && st.isDirectory())\n        rmdirSync(p, options, null)\n      else\n        options.unlinkSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n      if (er.code === \"EPERM\")\n        return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n      if (er.code !== \"EISDIR\")\n        throw er\n\n      rmdirSync(p, options, er)\n    }\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n  if (originalEr)\n    assert(originalEr instanceof Error)\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === \"ENOENT\")\n      return\n    if (er.code === \"ENOTDIR\")\n      throw originalEr\n    if (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\")\n      rmkidsSync(p, options)\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(function (f) {\n    rimrafSync(path.join(p, f), options)\n  })\n\n  // We only end up here once we got ENOTEMPTY at least once, and\n  // at this point, we are guaranteed to have removed all the kids.\n  // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n  // try really hard to delete stuff on windows, because it has a\n  // PROFOUNDLY annoying habit of not closing handles promptly when\n  // files are deleted, resulting in spurious ENOTEMPTY errors.\n  var retries = isWindows ? 100 : 1\n  var i = 0\n  do {\n    var threw = true\n    try {\n      var ret = options.rmdirSync(p, options)\n      threw = false\n      return ret\n    } finally {\n      if (++i < retries && threw)\n        continue\n    }\n  } while (true)\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar pathModule = require('path');\nvar isWindows = process.platform === 'win32';\nvar fs = require('fs');\n\n// JavaScript implementation of realpath, ported from node pre-v6\n\nvar DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);\n\nfunction rethrow() {\n  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and\n  // is fairly slow to generate.\n  var callback;\n  if (DEBUG) {\n    var backtrace = new Error;\n    callback = debugCallback;\n  } else\n    callback = missingCallback;\n\n  return callback;\n\n  function debugCallback(err) {\n    if (err) {\n      backtrace.message = err.message;\n      err = backtrace;\n      missingCallback(err);\n    }\n  }\n\n  function missingCallback(err) {\n    if (err) {\n      if (process.throwDeprecation)\n        throw err;  // Forgot a callback but don't know where? Use NODE_DEBUG=fs\n      else if (!process.noDeprecation) {\n        var msg = 'fs: missing callback ' + (err.stack || err.message);\n        if (process.traceDeprecation)\n          console.trace(msg);\n        else\n          console.error(msg);\n      }\n    }\n  }\n}\n\nfunction maybeCallback(cb) {\n  return typeof cb === 'function' ? cb : rethrow();\n}\n\nvar normalize = pathModule.normalize;\n\n// Regexp that finds the next partion of a (partial) path\n// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']\nif (isWindows) {\n  var nextPartRe = /(.*?)(?:[\\/\\\\]+|$)/g;\n} else {\n  var nextPartRe = /(.*?)(?:[\\/]+|$)/g;\n}\n\n// Regex to find the device root, including trailing slash. E.g. 'c:\\\\'.\nif (isWindows) {\n  var splitRootRe = /^(?:[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?[\\\\\\/]*/;\n} else {\n  var splitRootRe = /^[\\/]*/;\n}\n\nexports.realpathSync = function realpathSync(p, cache) {\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return cache[p];\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstatSync(base);\n      knownHard[base] = true;\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  // NB: p.length changes.\n  while (pos < p.length) {\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      continue;\n    }\n\n    var resolvedLink;\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // some known symbolic link.  no need to stat again.\n      resolvedLink = cache[base];\n    } else {\n      var stat = fs.lstatSync(base);\n      if (!stat.isSymbolicLink()) {\n        knownHard[base] = true;\n        if (cache) cache[base] = base;\n        continue;\n      }\n\n      // read the link if it wasn't read before\n      // dev/ino always return 0 on windows, so skip the check.\n      var linkTarget = null;\n      if (!isWindows) {\n        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n        if (seenLinks.hasOwnProperty(id)) {\n          linkTarget = seenLinks[id];\n        }\n      }\n      if (linkTarget === null) {\n        fs.statSync(base);\n        linkTarget = fs.readlinkSync(base);\n      }\n      resolvedLink = pathModule.resolve(previous, linkTarget);\n      // track this, if given a cache.\n      if (cache) cache[base] = resolvedLink;\n      if (!isWindows) seenLinks[id] = linkTarget;\n    }\n\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n\n  if (cache) cache[original] = p;\n\n  return p;\n};\n\n\nexports.realpath = function realpath(p, cache, cb) {\n  if (typeof cb !== 'function') {\n    cb = maybeCallback(cache);\n    cache = null;\n  }\n\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return process.nextTick(cb.bind(null, null, cache[p]));\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstat(base, function(err) {\n        if (err) return cb(err);\n        knownHard[base] = true;\n        LOOP();\n      });\n    } else {\n      process.nextTick(LOOP);\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  function LOOP() {\n    // stop if scanned past end of path\n    if (pos >= p.length) {\n      if (cache) cache[original] = p;\n      return cb(null, p);\n    }\n\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      return process.nextTick(LOOP);\n    }\n\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // known symbolic link.  no need to stat again.\n      return gotResolvedLink(cache[base]);\n    }\n\n    return fs.lstat(base, gotStat);\n  }\n\n  function gotStat(err, stat) {\n    if (err) return cb(err);\n\n    // if not a symlink, skip to the next path part\n    if (!stat.isSymbolicLink()) {\n      knownHard[base] = true;\n      if (cache) cache[base] = base;\n      return process.nextTick(LOOP);\n    }\n\n    // stat & read the link if not read before\n    // call gotTarget as soon as the link target is known\n    // dev/ino always return 0 on windows, so skip the check.\n    if (!isWindows) {\n      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n      if (seenLinks.hasOwnProperty(id)) {\n        return gotTarget(null, seenLinks[id], base);\n      }\n    }\n    fs.stat(base, function(err) {\n      if (err) return cb(err);\n\n      fs.readlink(base, function(err, target) {\n        if (!isWindows) seenLinks[id] = target;\n        gotTarget(err, target);\n      });\n    });\n  }\n\n  function gotTarget(err, target, base) {\n    if (err) return cb(err);\n\n    var resolvedLink = pathModule.resolve(previous, target);\n    if (cache) cache[base] = resolvedLink;\n    gotResolvedLink(resolvedLink);\n  }\n\n  function gotResolvedLink(resolvedLink) {\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n};\n","var concatMap = require('concat-map');\nvar balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction identity(e) {\n  return e;\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m || /\\$$/.test(m.pre)) return [str];\n\n  var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isSequence = isNumericSequence || isAlphaSequence;\n  var isOptions = m.body.indexOf(',') >= 0;\n  if (!isSequence && !isOptions) {\n    // {a},b}\n    if (m.post.match(/,.*\\}/)) {\n      str = m.pre + '{' + m.body + escClose + m.post;\n      return expand(str);\n    }\n    return [str];\n  }\n\n  var n;\n  if (isSequence) {\n    n = m.body.split(/\\.\\./);\n  } else {\n    n = parseCommaParts(m.body);\n    if (n.length === 1) {\n      // x{{a,b}}y ==> x{a}y x{b}y\n      n = expand(n[0], false).map(embrace);\n      if (n.length === 1) {\n        var post = m.post.length\n          ? expand(m.post, false)\n          : [''];\n        return post.map(function(p) {\n          return m.pre + n[0] + p;\n        });\n      }\n    }\n  }\n\n  // at this point, n is the parts, and we know it's not a comma set\n  // with a single entry.\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  var N;\n\n  if (isSequence) {\n    var x = numeric(n[0]);\n    var y = numeric(n[1]);\n    var width = Math.max(n[0].length, n[1].length)\n    var incr = n.length == 3\n      ? Math.abs(numeric(n[2]))\n      : 1;\n    var test = lte;\n    var reverse = y < x;\n    if (reverse) {\n      incr *= -1;\n      test = gte;\n    }\n    var pad = n.some(isPadded);\n\n    N = [];\n\n    for (var i = x; test(i, y); i += incr) {\n      var c;\n      if (isAlphaSequence) {\n        c = String.fromCharCode(i);\n        if (c === '\\\\')\n          c = '';\n      } else {\n        c = String(i);\n        if (pad) {\n          var need = width - c.length;\n          if (need > 0) {\n            var z = new Array(need + 1).join('0');\n            if (i < 0)\n              c = '-' + z + c.slice(1);\n            else\n              c = z + c;\n          }\n        }\n      }\n      N.push(c);\n    }\n  } else {\n    N = concatMap(n, function(el) { return expand(el, false) });\n  }\n\n  for (var j = 0; j < N.length; j++) {\n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre + N[j] + post[k];\n      if (!isTop || isSequence || expansion)\n        expansions.push(expansion);\n    }\n  }\n\n  return expansions;\n}\n\n","module.exports = function (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        var x = fn(xs[i], i);\n        if (isArray(x)) res.push.apply(res, x);\n        else res.push(x);\n    }\n    return res;\n};\n\nvar isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n","var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","const DirectClient = require('./DirectClient');\nconst DirectRuntime = require('./DirectRuntime');\n\nexports.Client = DirectClient;\nexports.Runtime = DirectRuntime;\n","const {\n  EventEmitter,\n} = require('events');\n\n// Mostly used for testing\nclass DirectClient extends EventEmitter {\n  constructor(runtime, name) {\n    super();\n    this.name = name;\n    this.runtime = runtime;\n    if (!this.name) { this.name = 'Unnamed client'; }\n  }\n\n  connect() {\n    return this.runtime._connect(this);\n  }\n\n  disconnect() {\n    return this.runtime._disconnect(this);\n  }\n\n  send(protocol, topic, payload) {\n    const m = {\n      protocol,\n      command: topic,\n      payload,\n    };\n    return this.emit('send', m);\n  }\n\n  _receive(message) {\n    return setTimeout(() => this.emit('message', message),\n      1);\n  }\n}\n\nmodule.exports = DirectClient;\n","/* eslint class-methods-use-this: [\"error\", { \"exceptMethods\": [\"send\", \"sendAll\"] }] */\nconst Base = require('./Base');\n\nclass DirectRuntime extends Base {\n  constructor(options) {\n    super(options);\n    this.clients = [];\n  }\n\n  _connect(client) {\n    this.clients.push(client);\n    client.on('send', (msg) => {\n      // Capture context\n      this._receive(msg, { client });\n    });\n  }\n\n  _disconnect(client) {\n    if (this.clients.indexOf(client) === -1) { return; }\n    this.clients.splice(this.clients.indexOf(client), 1);\n    client.removeAllListeners('send'); // XXX: a bit heavy\n  }\n\n  _receive(msg, context) {\n    // Forward to Base\n    this.receive(msg.protocol, msg.command, msg.payload, context);\n  }\n\n  send(protocol, topic, payload, context) {\n    if (!context || !context.client) { return; }\n    const m = {\n      protocol,\n      command: topic,\n      payload,\n    };\n    context.client._receive(m);\n  }\n\n  sendAll(protocol, topic, payload) {\n    const m = {\n      protocol,\n      command: topic,\n      payload,\n    };\n    this.clients.forEach((client) => {\n      client._receive(m);\n    });\n  }\n}\n\nmodule.exports = DirectRuntime;\n","const PostMessage = require('./postmessage');\nconst utils = require('./utils');\n\nclass IframeRuntime extends PostMessage {\n  constructor(options) {\n    super(options);\n    this.setClient(window.parent);\n  }\n}\n\nmodule.exports = function (options) {\n  const normalizedOptions = utils.normalizeOptions(options);\n  const runtime = new IframeRuntime(normalizedOptions);\n  utils.subscribe(window, (msg, metadata) => {\n    if (msg.protocol === 'iframe' && msg.command === 'setcontent') {\n      document.body.innerHTML = msg.payload;\n      return;\n    }\n    runtime.receive(msg.protocol, msg.command, msg.payload, {\n      href: metadata.origin,\n    });\n  });\n  return runtime;\n};\n","const PostMessage = require('./postmessage');\nconst utils = require('./utils');\n\nclass OpenerRuntime extends PostMessage {\n  constructor(options, button) {\n    super(options);\n    if (button) {\n      button.addEventListener('click', (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.openClient(button.getAttribute('href'));\n      });\n    }\n  }\n\n  openClient(url) {\n    const client = window.open(url, '_blank');\n    if (!client) {\n      throw new Error(`Unable to open client window at '${url}'`);\n    }\n    this.context = {\n      href: '*',\n    };\n    const handleMessage = function (message) {\n      let { data } = message;\n      if (typeof message.data === 'string') {\n        data = JSON.parse(message.data);\n      }\n\n      if (!data.protocol || !data.command) {\n        return;\n      }\n      this.receive(data.protocol, data.command, data.payload, this.context);\n    }.bind(this);\n    const closeCheck = setInterval(() => {\n      if (!client || client.closed) {\n        // Client window was closed\n        this.setClient(null);\n        window.removeEventListener('message', handleMessage);\n        clearInterval(closeCheck);\n      }\n    }, 1000);\n\n    // Register client window and subscribe to messages\n    this.setClient(client);\n    window.addEventListener('message', handleMessage);\n  }\n}\n\nmodule.exports = function (options, button) {\n  const normalizedOptions = utils.normalizeOptions(options);\n  const runtime = new OpenerRuntime(normalizedOptions, button);\n  return runtime;\n};\n","const noflo = require('noflo');\nconst postMessageRuntime = require('noflo-runtime-postmessage');\n\nconst exported = {\n  noflo,\n  'noflo-runtime-postmessage': postMessageRuntime,\n};\n\nfunction requireModule(moduleName) {\n  if (exported[moduleName]) {\n    return exported[moduleName];\n  }\n  throw new Error(`Module ${moduleName} not available`);\n}\n\nif (window) {\n  window.require = requireModule;\n}\n"],"sourceRoot":""}